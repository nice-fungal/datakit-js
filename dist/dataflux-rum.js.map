{"version":3,"file":"dataflux-rum.js","mappings":"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yH,kBAAY,CAACvL,GAAG,CAAC0C,GAAG,CAAC,KAAKoB,GAAG,EAAE;QACjCoI,SAAS,GAAG,KAAK;MACnB;MACAX,kBAAY,CAACQ,MAAM,CAACrJ,GAAG,CAAC;IAC1B,CAAC,CAAC,OAAOnD,GAAG,EAAE;MACZ2M,SAAS,GAAG,KAAK;IACnB;IACA,OAAOA,SAAS;EAClB;AACF,CAAC;AACM,IAAIC,cAAc,GAAG;EAC1BF,SAAS,EAAE,SAAXA,SAASA,CAAA,EAAc;IACrB,IAAIC,SAAS,GAAG,IAAI;IAEpB,IAAIxJ,GAAG,GAAG,wBAAwB;IAClC,IAAIoB,GAAG,GAAG,sBAAsB;IAChC,IAAI;MACF,IAAIqI,cAAc,IAAIA,cAAc,CAACL,OAAO,EAAE;QAC5CK,cAAc,CAACL,OAAO,CAACpJ,GAAG,EAAEoB,GAAG,CAAC;QAChCqI,cAAc,CAACH,UAAU,CAACtJ,GAAG,EAAEoB,GAAG,CAAC;QACnCoI,SAAS,GAAG,IAAI;MAClB,CAAC,MAAM;QACLA,SAAS,GAAG,KAAK;MACnB;IACF,CAAC,CAAC,OAAOlN,CAAC,EAAE;MACVkN,SAAS,GAAG,KAAK;IACnB;IACA,OAAOA,SAAS;EAClB;AACF,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA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;IACA,OAAOQ,MAAM;EACf;EAEA,IAAIA,MAAM,GAAGX,OAAO,CAACE,WAAW,CAAC,KAAK,QAAQ,GAAGA,WAAW,GAAG,CAAC,CAAC;EACjE,KAAK,IAAI5K,GAAG,IAAIC,MAAM,EAAE;IACtB,IAAIjF,MAAM,CAACgD,SAAS,CAACsB,cAAc,CAAC7C,IAAI,CAACwD,MAAM,EAAED,GAAG,CAAC,EAAE;MACrDqL,MAAM,CAACrL,GAAG,CAAC,GAAG2K,SAAS,CACrBU,MAAM,CAACrL,GAAG,CAAC,EACXC,MAAM,CAACD,GAAG,CAAC,EACX6K,wBACF,CAAC;IACH;EACF;EACA,OAAOQ,MAAM;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,SAASA,CAACtK,KAAK,EAAE;EAC/B,OAAO2J,SAAS,CAAC7O,SAAS,EAAEkF,KAAK,CAAC;AACpC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASuK,cAAcA,CAACC,MAAM,EAAE;EACrC,IAAI,CAACA,MAAM,EAAE,OAAOA,MAAM,KAAK,CAAC,GAAG1P,SAAS,GAAG0P,MAAM;EACrD,OACEhJ,MAAM,CAACgJ,MAAM,CAAC,CAACC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAGjJ,MAAM,CAACgJ,MAAM,CAAC,CAACC,MAAM,CAAC,CAAC,CAAC,CAAC5J,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC;AAE/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO,SAAS6J,UAAIA,CAAA,EAAG,CAAC;AAEjB,IAAIC,UAAU,GAAG,IAAI;AACrB,IAAIC,UAAU,GAAG,EAAE,GAAGD,UAAU;AAChC,IAAIE,QAAQ,GAAG,EAAE,GAAGD,UAAU;AAC9B,IAAIE,OAAO,GAAG,EAAE,GAAGD,QAAQ;AAC3B,IAAIE,QAAQ,GAAG,GAAG,GAAGD,OAAO;;AAEnC;AACA;AACA;AACA;AACO,SAASE,iBAAWA,CAACC,SAAS,EAAE;EACrC,OAAOA,SAAS,KAAK,CAAC,IAAIrF,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,GAAG,IAAIoF,SAAS;AAC5D;AAEO,SAASC,KAAKA,CAACC,GAAG,EAAEC,QAAQ,EAAE;EACnC,OAAO,CAACD,GAAG,CAACE,OAAO,CAACD,QAAQ,CAAC;AAC/B;AAEO,SAASE,MAAMA,CAACC,QAAQ,EAAE;EAC/B,IAAI,OAAOA,QAAQ,KAAK,QAAQ,EAAE;IAChC,OAAOA,QAAQ;EACjB;EACA,OAAOL,KAAK,CAACK,QAAQ,GAAG,GAAG,EAAE,CAAC,CAAC;AACjC;AACO,SAASC,SAASA,CAACpM,MAAM,EAAEpE,EAAE,EAAE;EACpC,IAAIyQ,SAAS,GAAG,CAAC,CAAC;EAClB3P,UAAI,CAACsD,MAAM,EAAE,UAAUY,KAAK,EAAEhB,GAAG,EAAE;IACjCyM,SAAS,CAACzM,GAAG,CAAC,GAAGhE,EAAE,CAACgF,KAAK,CAAC;EAC5B,CAAC,CAAC;EAEF,OAAOyL,SAAS;AAClB;AAEO,SAASC,gBAAgBA,CAACH,QAAQ,EAAE;EACzC,IAAI,CAAChK,QAAQ,CAACgK,QAAQ,CAAC,EAAE;IACvB,OAAOA,QAAQ;EACjB;EACA,OAAOL,KAAK,CAACK,QAAQ,GAAG,GAAG,EAAE,CAAC,CAAC;AACjC;AACO,SAASI,eAAeA,CAACC,SAAS,EAAE;EACzC,OAAOA,SAAS,GAAGC,kBAAkB,CAAC,CAAC;AACzC;AACO,SAASC,YAAYA,CAAA,EAAG;EAC7B,OAAOC,WAAW,CAAC,CAAC;AACtB;AACO,SAASC,YAAYA,CAACC,YAAY,EAAE;EACzC,OAAOrG,IAAI,CAACsF,KAAK,CAACW,kBAAkB,CAAC,CAAC,GAAGI,YAAY,CAAC;AACxD;AACO,SAASF,WAAWA,CAAA,EAAG;EAC5B,OAAOG,WAAW,CAACC,GAAG,CAAC,CAAC;AAC1B;AAEO,SAASC,eAASA,CAAA,EAAG;EAC1B,OAAO;IAAEC,QAAQ,EAAEN,WAAW,CAAC,CAAC;IAAEO,SAAS,EAAEC,kBAAY,CAAC;EAAE,CAAC;AAC/D;AACO,SAASA,kBAAYA,CAAA,EAAG;EAC7B,OAAOC,OAAO,CAAC,CAAC;AAClB;AAEO,SAASC,qBAAqBA,CAACC,IAAI,EAAE;EAC1C,OAAOA,IAAI,GAAG3B,QAAQ;AACxB;AACO,SAASyB,OAAOA,CAAA,EAAG;EACxB;EACA;EACA;EACA;EACA;EACA,OAAO,IAAI1C,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC;AAC7B;AAEO,SAAS4C,aAAOA,CAAC5I,KAAK,EAAEC,GAAG,EAAE;EAClC,OAAOA,GAAG,GAAGD,KAAK;AACpB;AAEO,SAAS6I,YAAYA,CAAA,EAAG;EAC7B,OAAO;IAAEP,QAAQ,EAAE,CAAC;IAAEC,SAAS,EAAET,kBAAkB,CAAC;EAAE,CAAC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASgB,gBAAgBA,CAACR,QAAQ,EAAE;EACzC,OAAO;IAAEA,QAAQ,EAAEA,QAAQ;IAAEC,SAAS,EAAEQ,qBAAqB,CAACT,QAAQ;EAAE,CAAC;AAC3E;AACO,SAASU,YAAYA,CAAA,EAAG;EAC7B;EACA,OAAOnH,IAAI,CAACsF,KAAK,CAACsB,OAAO,CAAC,CAAC,IAAIX,kBAAkB,CAAC,CAAC,GAAGK,WAAW,CAACC,GAAG,CAAC,CAAC,CAAC,CAAC;AAC3E;AACO,SAASa,WAAWA,CAACzJ,CAAC,EAAEC,CAAC,EAAE;EAChC,OAAOD,CAAC,GAAGC,CAAC;AACd;AACA,SAASsJ,qBAAqBA,CAACb,YAAY,EAAE;EAC3C,IAAIgB,eAAe,GAAGT,OAAO,CAAC,CAAC,GAAGN,WAAW,CAACC,GAAG,CAAC,CAAC;EACnD;EACA,IAAIc,eAAe,GAAGpB,kBAAkB,CAAC,CAAC,EAAE;IAC1C,OAAOjG,IAAI,CAACsF,KAAK,CAAC+B,eAAe,GAAGhB,YAAY,CAAC;EACnD;EACA,OAAOD,YAAY,CAACC,YAAY,CAAC;AACnC;AACA;AACA;AACA;AACA,IAAIiB,eAAe;AACZ,SAASrB,kBAAkBA,CAAA,EAAG;EACnC,IAAIqB,eAAe,KAAKpS,SAAS,EAAE;IACjCoS,eAAe,GAAGhB,WAAW,CAACiB,MAAM,CAACD,eAAe;EACtD;EACA,OAAOA,eAAe;AACxB;AAEA,IAAIE,yBAAyB,GAAG,yBAAyB;AAClD,SAASC,uBAAuBA,CAACC,SAAS,EAAEnT,IAAI,EAAE;EACvDiT,yBAAyB,CAACG,SAAS,GAAG,CAAC;EACvC;EACA,OAAO,IAAI,EAAE;IACX,IAAI7I,KAAK,GAAG0I,yBAAyB,CAACzF,IAAI,CAAC2F,SAAS,CAAC;IACrD,IAAI5I,KAAK,EAAE;MACT,IAAIA,KAAK,CAAC,CAAC,CAAC,KAAKvK,IAAI,EAAE;QACrB,OAAOuK,KAAK,CAAC,CAAC,CAAC;MACjB;IACF,CAAC,MAAM;MACL;IACF;EACF;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS8I,UAAUA,CAACvO,MAAM,EAAE8G,IAAI,EAAE;EACvC,IAAI0H,OAAO,GAAG1H,IAAI,CAAC6C,KAAK,CAAC,GAAG,CAAC;EAC7B,OAAO6E,OAAO,CAAC5O,MAAM,EAAE;IACrB,IAAIG,GAAG,GAAGyO,OAAO,CAACC,KAAK,CAAC,CAAC;IACzB,IACEzO,MAAM,IACNM,QAAQ,CAACN,MAAM,CAAC,IAChBD,GAAG,IAAIC,MAAM,IACbX,oBAAc,CAAC7C,IAAI,CAACwD,MAAM,EAAED,GAAG,CAAC,EAChC;MACAC,MAAM,GAAGA,MAAM,CAACD,GAAG,CAAC;IACtB,CAAC,MAAM;MACL,OAAOlE,SAAS;IAClB;EACF;EACA,OAAOmE,MAAM;AACf;AACO,SAAS0O,YAAYA,CAACC,SAAS,EAAE/O,MAAM,EAAE;EAC9C,IAAIgP,QAAQ,GAAGD,SAAS,CAAC5M,UAAU,CAACnC,MAAM,GAAG,CAAC,CAAC;EAC/C;EACA,IAAIgP,QAAQ,IAAI,MAAM,IAAIA,QAAQ,IAAI,MAAM,EAAE;IAC5C,OAAOD,SAAS,CAACpS,KAAK,CAAC,CAAC,EAAEqD,MAAM,GAAG,CAAC,CAAC;EACvC;EACA,OAAO+O,SAAS,CAACpS,KAAK,CAAC,CAAC,EAAEqD,MAAM,CAAC;AACnC;AACO,SAASiP,mBAAaA,CAACC,IAAI,EAAE;EAClC,IAAMC,QAAQ,GAAGtE,OAAO,CAACqE,IAAI,CAAC;EAC9B,OACEC,QAAQ,KAAK,QAAQ,IAAIA,QAAQ,KAAK,UAAU,IAAID,IAAI,YAAYzG,MAAM;AAE9E;AACO,SAAS2G,QAAQA,CAACL,SAAS,EAAEM,MAAM,EAAE;EAC1C;EACA,OAAON,SAAS,CAACzE,OAAO,CAAC+E,MAAM,CAAC,KAAK,CAAC,CAAC;AACzC;AAEO,SAASC,IAAIA,CAAC1E,KAAK,EAAE2E,SAAS,EAAE;EACrC,KAAK,IAAItP,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG2K,KAAK,CAAC5K,MAAM,EAAEC,CAAC,IAAI,CAAC,EAAE;IACxC,IAAIiP,IAAI,GAAGtE,KAAK,CAAC3K,CAAC,CAAC;IACnB,IAAIsP,SAAS,CAACL,IAAI,EAAEjP,CAAC,EAAE2K,KAAK,CAAC,EAAE;MAC7B,OAAOsE,IAAI;IACb;EACF;EACA,OAAOjT,SAAS;AAClB;AACO,SAASuT,SAASA,CAACC,SAAS,EAAE;EACnC,IAAInQ,KAAK,CAACoQ,IAAI,EAAE;IACd,OAAOpQ,KAAK,CAACoQ,IAAI,CAACD,SAAS,CAAC;EAC9B;EACA,IAAI7E,KAAK,GAAG,EAAE;EACd,IAAI6E,SAAS,YAAYE,GAAG,EAAE;IAC5BF,SAAS,CAACpU,OAAO,CAAC,UAAU6T,IAAI,EAAE;MAChCtE,KAAK,CAACpJ,IAAI,CAAC0N,IAAI,CAAC;IAClB,CAAC,CAAC;EACJ,CAAC,MAAM;IACL,KAAK,IAAIjP,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGwP,SAAS,CAACzP,MAAM,EAAEC,CAAC,EAAE,EAAE;MACzC2K,KAAK,CAACpJ,IAAI,CAACiO,SAAS,CAACxP,CAAC,CAAC,CAAC;IAC1B;EACF;EACA,OAAO2K,KAAK;AACd;AACO,SAASgF,QAAQA,CAAChF,KAAK,EAAE2E,SAAS,EAAE;EACzC,KAAK,IAAItP,CAAC,GAAG2K,KAAK,CAAC5K,MAAM,GAAG,CAAC,EAAEC,CAAC,IAAI,CAAC,EAAEA,CAAC,IAAI,CAAC,EAAE;IAC7C,IAAIiP,IAAI,GAAGtE,KAAK,CAAC3K,CAAC,CAAC;IACnB,IAAIsP,SAAS,CAACL,IAAI,EAAEjP,CAAC,EAAE2K,KAAK,CAAC,EAAE;MAC7B,OAAOsE,IAAI;IACb;EACF;EACA,OAAOjT,SAAS;AAClB;AACO,SAAS4T,YAAYA,CAAC1O,KAAK,EAAE;EAClC,OAAOuB,QAAQ,CAACvB,KAAK,CAAC,IAAIA,KAAK,IAAI,CAAC,IAAIA,KAAK,IAAI,GAAG;AACtD;AAEO,SAAS2O,iBAAiBA,CAAA,EAAG;EAClC,OAAOC,0BAAoB,CAACvR,MAAM,CAACwR,QAAQ,CAAC;AAC9C;AACO,IAAIC,OAAO,GAAG;EACnBC,EAAE,EAAE,CAAC;EACLC,QAAQ,EAAE,CAAC;EACXC,MAAM,EAAE,CAAC;EACTC,KAAK,EAAE;AACT,CAAC;AACM,SAASC,IAAIA,CAAA,EAAG;EACrB,OAAOC,mBAAmB,CAAC,CAAC,KAAKN,OAAO,CAACC,EAAE;AAC7C;AACO,SAASM,UAAUA,CAAA,EAAG;EAC3B,OAAOD,mBAAmB,CAAC,CAAC,KAAKN,OAAO,CAACE,QAAQ;AACnD;AACO,SAASM,QAAQA,CAAA,EAAG;EACzB,OAAOF,mBAAmB,CAAC,CAAC,KAAKN,OAAO,CAACG,MAAM;AACjD;AACA,IAAIM,YAAY;AAChB,SAASH,mBAAmBA,CAAA,EAAG;EAC7B,OAAOI,iCAA2B,CAChCD,YAAY,EACXA,YAAY,GAAGE,aAAa,CAAC,CAChC,CAAC;AACH;AACO,SAASA,aAAaA,CAACjS,aAAa,EAAE;EAAA,IAAAkS,qBAAA;EAC3C,IAAI,OAAOlS,aAAa,KAAK,WAAW,EAAE;IACxCA,aAAa,GAAGH,MAAM;EACxB;EACA,IAAIsS,SAAS,GAAGnS,aAAa,CAACoS,SAAS,CAACD,SAAS;EACjD,IAAInS,aAAa,CAACqS,MAAM,IAAI,gBAAgB,CAACnQ,IAAI,CAACiQ,SAAS,CAAC,EAAE;IAC5D,OAAOb,OAAO,CAACE,QAAQ;EACzB;EAEA;EACE;EACA;EACA;EACA,EAAAU,qBAAA,GAAAlS,aAAa,CAACoS,SAAS,CAACE,MAAM,cAAAJ,qBAAA,uBAA9BA,qBAAA,CAAgCvG,OAAO,CAAC,OAAO,CAAC,MAAK,CAAC,IACrD,SAAS,CAACzJ,IAAI,CAACiQ,SAAS,CAAC,IAAI,CAAC,iBAAiB,CAACjQ,IAAI,CAACiQ,SAAS,CAAE,EACjE;IACA,OAAOb,OAAO,CAACG,MAAM;EACvB;EAEA,IAAIzR,aAAa,CAACuS,QAAQ,CAACC,YAAY,EAAE;IACvC,OAAOlB,OAAO,CAACC,EAAE;EACnB;EAEA,OAAOD,OAAO,CAACI,KAAK;AACtB;;AAEA;AACA;AACA;AACA;AACO,SAASN,0BAAoBA,CAACqB,OAAO,EAAE;EAC5C,IAAIA,OAAO,CAACC,MAAM,IAAID,OAAO,CAACC,MAAM,KAAK,MAAM,EAAE;IAC/C,OAAOD,OAAO,CAACC,MAAM;EACvB;EACA,IAAIC,aAAa,GAAGF,OAAO,CAACG,IAAI,CAACvP,OAAO,CAAC,aAAa,EAAE,EAAE,CAAC;EAC3D,OAAOoP,OAAO,CAACI,QAAQ,GAAG,IAAI,GAAGF,aAAa;AAChD;AAEO,SAASG,iBAAiBA,CAAC1C,SAAS,EAAE;EAC3C,IAAIjF,MAAM,GAAG,CAAC,CAAC;EACf7M,UAAI,CAAC8R,SAAS,EAAE,UAAU5N,KAAK,EAAEhB,GAAG,EAAE;IACpC2J,MAAM,CAAC4H,WAAW,CAACvR,GAAG,CAAC,CAAC,GAAGwR,aAAa,CAACxQ,KAAK,CAAC;EACjD,CAAC,CAAC;EACF,OAAO2I,MAAM;AACf;AAEO,SAAS6H,aAAaA,CAAC5C,SAAS,EAAE;EACvC,IAAInP,aAAO,CAACmP,SAAS,CAAC,EAAE;IACtB,OAAOtN,SAAG,CAACsN,SAAS,EAAE,UAAU5N,KAAK,EAAE;MACrC,OAAOwQ,aAAa,CAACxQ,KAAK,CAAC;IAC7B,CAAC,CAAC;EACJ;EACA,IAAIjD,YAAA,CAAO6Q,SAAS,MAAK,QAAQ,IAAIA,SAAS,KAAK,IAAI,EAAE;IACvD,OAAO0C,iBAAiB,CAAC1C,SAAS,CAAC;EACrC;EACA,OAAOA,SAAS;AAClB;AAEO,SAAS2C,WAAWA,CAACE,IAAI,EAAE;EAChC,OAAOA,IAAI,CACR5P,OAAO,CAAC,QAAQ,EAAE,UAAU6P,eAAe,EAAEC,KAAK,EAAE;IACnD,OAAO,CAACA,KAAK,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,IAAID,eAAe,CAACE,WAAW,CAAC,CAAC;EACjE,CAAC,CAAC,CACD/P,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC;AACvB;AAEO,SAAS2O,iCAA2BA,CAACjL,IAAI,EAAEsM,YAAY,EAAE;EAC9D,IAAItM,IAAI,KAAK,IAAI,IAAIA,IAAI,KAAK,KAAK,CAAC,EAAE;IACpC,OAAOA,IAAI;EACb,CAAC,MAAM;IACL,OAAOsM,YAAY;EACrB;AACF;AAEO,SAASC,cAAcA,CAAC1R,MAAM,EAAEY,KAAK,EAAE;EAC5C,OAAOO,IAAI,CAACtG,IAAI,CAACmF,MAAM,CAAC,EAAE,UAAUJ,GAAG,EAAE;IACvC,OAAOI,MAAM,CAACJ,GAAG,CAAC,KAAKgB,KAAK;EAC9B,CAAC,CAAC;AACJ;AACO,SAAS+Q,UAAUA,CAACnD,SAAS,EAAEM,MAAM,EAAE;EAC5C,OAAON,SAAS,CAACpS,KAAK,CAAC,CAAC,EAAE0S,MAAM,CAACrP,MAAM,CAAC,KAAKqP,MAAM;AACrD;AAEO,SAAS8C,QAAQA,CAACpD,SAAS,EAAEM,MAAM,EAAE;EAC1C,OAAON,SAAS,CAACpS,KAAK,CAAC,CAAC0S,MAAM,CAACrP,MAAM,CAAC,KAAKqP,MAAM;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO,SAAS5F,UAAUA,CAACmB,KAAK,EAAEsE,IAAI,EAAE;EACtC,IAAI4C,KAAK,GAAGlH,KAAK,CAACN,OAAO,CAAC4E,IAAI,CAAC;EAC/B,IAAI4C,KAAK,IAAI,CAAC,EAAE;IACdlH,KAAK,CAACwH,MAAM,CAACN,KAAK,EAAE,CAAC,CAAC;EACxB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASO,cAAcA,CAACC,IAAI,EAAE;EACnC,IAAIC,eAAe,GAAGD,IAAI,CAAC1G,MAAM,CAAC,CAAC,CAAC;EACpC,IAAI,CAAC2G,eAAe,EAAE,OAAO,KAAK;EAClC,OAAO,CAAC,CAACrB,QAAQ,CAACsB,cAAc,CAACD,eAAe,CAAC;AACnD;AACO,SAASE,eAAeA,CAACH,IAAI,EAAE;EACpC,IAAIR,KAAK,GAAGQ,IAAI,CAAChI,OAAO,CAAC,GAAG,CAAC;EAC7B,OAAOwH,KAAK,GAAG,CAAC,GAAGQ,IAAI,GAAGA,IAAI,CAAC3V,KAAK,CAAC,CAAC,EAAEmV,KAAK,CAAC;AAChD;AAEO,SAASY,uBAAuBA,CAAChG,QAAQ,EAAE;EAChD,OAAOhK,QAAQ,CAACgK,QAAQ,CAAC,IAAIA,QAAQ,GAAG,CAAC,GAAGzQ,SAAS,GAAGyQ,QAAQ;AAClE,C;;AClmDoC;AACpC,IAAIiG,YAAY,GAAG,GAAG;AACf,SAASC,iCAAmBA,CAAA,EAAG;EACpC,IAAIC,MAAM,GAAG,EAAE;EAEf,IAAIlI,GAAG,GAAG,SAANA,GAAGA,CAAapN,QAAQ,EAAE;IAC5B,IAAIyC,MAAM,GAAG6S,MAAM,CAACrR,IAAI,CAACjE,QAAQ,CAAC;IAClC,IAAIyC,MAAM,GAAG2S,YAAY,EAAE;MACzBE,MAAM,CAACT,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC;IACrB;EACF,CAAC;EAED,IAAI5I,MAAM,GAAG,SAATA,MAAMA,CAAajM,QAAQ,EAAE;IAC/BkM,UAAU,CAACoJ,MAAM,EAAEtV,QAAQ,CAAC;EAC9B,CAAC;EAED,IAAMuV,KAAK,GAAG,SAARA,KAAKA,CAAaC,GAAG,EAAE;IAC3BF,MAAM,CAACxX,OAAO,CAAC,UAAUkC,QAAQ,EAAE;MACjCA,QAAQ,CAACwV,GAAG,CAAC;IACf,CAAC,CAAC;IACFF,MAAM,CAAC7S,MAAM,GAAG,CAAC;EACnB,CAAC;EAED,OAAO;IACL2K,GAAG,EAAEA,GAAG;IACRnB,MAAM,EAAEmB,GAAG;IACXmI,KAAK,EAAEA;EACT,CAAC;AACH,C;;AC5B0E;AACtB;AACpD,IAAIE,YAAY,GAAGC,QAAQ;AAEpB,IAAIC,yBAAyB,GAAGnH,UAAU;AACjD,IAAIoH,wBAAwB,GAAG,IAAI;AAEnC,IAAMC,YAAY,GAAG,IAAIzD,GAAG,CAAC,CAAC;AAE9B,SAAS0D,gBAAgBA,CAAA,EAAG;EAC1BD,YAAY,CAAC/X,OAAO,CAAC,UAACiY,IAAI;IAAA,OAAKA,IAAI,CAAC,CAAC;EAAA,EAAC;AACxC;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,kBAAkBA,CAACC,MAAM,EAAE;EACzC,IAAIC,WAAW,GAAGD,MAAM,CAACC,WAAW;EACpC,IAAIC,UAAU,GAAGF,MAAM,CAACE,UAAU;EAElC,IAAIC,OAAO,GAAG,EAAE;EAChB,IAAIR,wBAAwB,EAAE;IAC5BA,wBAAwB,GAAGhU,iBAAW,CAAC,YAAY;MACjD,OAAOyU,kBAAkB,CAAC,CAAC;IAC7B,CAAC,EAAEV,yBAAyB,CAAC;EAC/B;EAEA,SAASU,kBAAkBA,CAAA,EAAG;IAC5B,IAAIC,gBAAgB,GAAG3G,WAAW,CAAC,CAAC,GAAGuG,WAAW;IAClD,OACEE,OAAO,CAAC3T,MAAM,GAAG,CAAC,IAClB2T,OAAO,CAACA,OAAO,CAAC3T,MAAM,GAAG,CAAC,CAAC,CAAC8T,OAAO,GAAGD,gBAAgB,EACtD;MACAF,OAAO,CAACI,GAAG,CAAC,CAAC;IACf;EACF;EACAX,YAAY,CAACzI,GAAG,CAACiJ,kBAAkB,CAAC;EACpC,SAASjJ,GAAGA,CAACxJ,KAAK,EAAE6S,SAAS,EAAE;IAC7B,IAAIC,KAAK,GAAG;MACV9S,KAAK,EAAEA,KAAK;MACZ6S,SAAS,EAAEA,SAAS;MACpBF,OAAO,EAAEd,YAAY;MACrBxJ,MAAM,EAAE,SAARA,MAAMA,CAAA,EAAc;QAClBC,UAAU,CAACkK,OAAO,EAAEM,KAAK,CAAC;MAC5B,CAAC;MACDC,KAAK,EAAE,SAAPA,KAAKA,CAAYJ,OAAO,EAAE;QACxBG,KAAK,CAACH,OAAO,GAAGA,OAAO;MACzB;IACF,CAAC;IAED,IAAIJ,UAAU,IAAIC,OAAO,CAAC3T,MAAM,IAAI0T,UAAU,EAAE;MAC9CC,OAAO,CAACI,GAAG,CAAC,CAAC;IACf;IAEAJ,OAAO,CAACQ,OAAO,CAACF,KAAK,CAAC;IAEtB,OAAOA,KAAK;EACd;EAEA,SAAS3E,IAAIA,CAAC0E,SAAS,EAAE7Q,OAAO,EAAE;IAChC,IAAI,OAAO6Q,SAAS,KAAK,WAAW,EAAE;MACpCA,SAAS,GAAGhB,YAAY;IAC1B;IACA,IAAI,OAAO7P,OAAO,KAAK,WAAW,EAAE;MAClCA,OAAO,GAAG;QAAEiR,cAAc,EAAE;MAAM,CAAC;IACrC;IACA,KAAK,IAAIC,EAAE,GAAG,CAAC,EAAEC,SAAS,GAAGX,OAAO,EAAEU,EAAE,GAAGC,SAAS,CAACtU,MAAM,EAAEqU,EAAE,EAAE,EAAE;MACjE,IAAIJ,KAAK,GAAGK,SAAS,CAACD,EAAE,CAAC;MACzB,IAAIJ,KAAK,CAACD,SAAS,IAAIA,SAAS,EAAE;QAChC,IAAI7Q,OAAO,CAACiR,cAAc,IAAIJ,SAAS,IAAIC,KAAK,CAACH,OAAO,EAAE;UACxD,OAAOG,KAAK,CAAC9S,KAAK;QACpB;QACA;MACF;IACF;EACF;EAEA,SAASoT,WAAWA,CAACT,OAAO,EAAE;IAC5B,IAAIU,WAAW,GAAGb,OAAO,CAAC,CAAC,CAAC;IAC5B,IAAIa,WAAW,IAAIA,WAAW,CAACV,OAAO,KAAKd,YAAY,EAAE;MACvDwB,WAAW,CAACN,KAAK,CAACJ,OAAO,CAAC;IAC5B;EACF;EAEA,SAASW,OAAOA,CAACT,SAAS,EAAEtH,QAAQ,EAAE;IACpC,IAAIsH,SAAS,KAAK/X,SAAS,EAAE;MAC3B+X,SAAS,GAAGhB,YAAY;IAC1B;IACA,IAAItG,QAAQ,KAAKzQ,SAAS,EAAE;MAC1ByQ,QAAQ,GAAG,CAAC;IACd;IACA,IAAIoH,OAAO,GAAG3F,WAAW,CAAC6F,SAAS,EAAEtH,QAAQ,CAAC;IAC9C,OAAOiH,OAAO,CACXvS,MAAM,CAAC,UAAU6S,KAAK,EAAE;MACvB,OAAOA,KAAK,CAACD,SAAS,IAAIF,OAAO,IAAIE,SAAS,IAAIC,KAAK,CAACH,OAAO;IACjE,CAAC,CAAC,CACDrS,GAAG,CAAC,UAAUwS,KAAK,EAAE;MACpB,OAAOA,KAAK,CAAC9S,KAAK;IACpB,CAAC,CAAC;EACN;;EAEA;AACF;AACA;EACE,SAASuT,KAAKA,CAAA,EAAG;IACff,OAAO,GAAG,EAAE;EACd;;EAEA;AACF;AACA;EACE,SAASgB,IAAIA,CAAA,EAAG;IACdvB,YAAY,UAAO,CAACQ,kBAAkB,CAAC;IACvC,IAAIR,YAAY,CAACwB,IAAI,KAAK,CAAC,IAAIzB,wBAAwB,EAAE;MACvD/T,mBAAa,CAAC+T,wBAAwB,CAAC;MACvCA,wBAAwB,GAAG,IAAI;IACjC;EACF;EAEA,OAAO;IACLxI,GAAG,EAAEA,GAAG;IACR2E,IAAI,EAAEA,IAAI;IACViF,WAAW,EAAEA,WAAW;IACxBE,OAAO,EAAEA,OAAO;IAChBC,KAAK,EAAEA,KAAK;IACZC,IAAI,EAAEA;EACR,CAAC;AACH,C;;AChI2C;AACA;AAC3C,IAAIE,eAAe,GAAG;EACpB9D,SAAS,EACP,OAAOvS,MAAM,KAAK,WAAW,IAAI,OAAOA,MAAM,CAACuS,SAAS,IAAI,WAAW,GACnEvS,MAAM,CAACuS,SAAS,GAChB,CAAC,CAAC;EACR;EACA+D,OAAO,EAAE;IACPC,MAAM,EAAE,CAAC,QAAQ,EAAE,SAAS,EAAE,OAAO,EAAE,QAAQ,CAAC;IAChDC,OAAO,EAAE,CACP,QAAQ,EACR,QAAQ,EACR,MAAM,EACN,IAAI,EACJ,OAAO,EACP,OAAO,EACP,MAAM,EACN,MAAM,EACN,MAAM,EACN,SAAS,EACT,eAAe,EACf,UAAU,EACV,OAAO,EACP,SAAS,EACT,QAAQ,EACR,OAAO,EACP,WAAW,EACX,UAAU,EACV,SAAS,EACT,QAAQ,EACR,WAAW,EACX,WAAW,EACX,QAAQ,EACR,WAAW,EACX,UAAU,EACV,KAAK,EACL,OAAO,EACP,OAAO,EACP,IAAI,EACJ,WAAW,EACX,IAAI,EACJ,OAAO,EACP,SAAS,EACT,OAAO,EACP,WAAW,EACX,cAAc,EACd,UAAU,EACV,QAAQ,EACR,OAAO,EACP,MAAM,EACN,QAAQ,GAER,YAAY,EACZ,QAAQ,EACR,QAAQ,EACR,OAAO,EACP,QAAQ,EACR,QAAQ,EACR,OAAO,CACR;IACDC,EAAE,EAAE,CACF,SAAS,EACT,OAAO,EACP,QAAQ,EACR,SAAS,EACT,QAAQ,EACR,SAAS,EACT,QAAQ,EACR,KAAK,EACL,eAAe,EACf,YAAY,EACZ,OAAO,EACP,SAAS,EACT,WAAW,EACX,OAAO,CACR;IACDC,MAAM,EAAE,CAAC,QAAQ,EAAE,QAAQ,EAAE,MAAM;EACrC;AACF,CAAC;AACD;AACA,IAAIC,aAAa,GAAG;EAClB;EACAC,WAAW,EAAElZ,OAAO,CAAC,UAAUmZ,CAAC,EAAE;IAChC,OAAO;MACL;MACAC,OAAO,EAAED,CAAC,CAAC/K,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,IAAI+K,CAAC,CAAC/K,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;MAC/DiL,MAAM,EAAEF,CAAC,CAAC/K,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;MAChCkL,MAAM,EAAEH,CAAC,CAAC/K,OAAO,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;MACrCmL,KAAK,EAAEJ,CAAC,CAAC/K,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;MAC/B;MACAoL,MAAM,EAAEL,CAAC,CAAC/K,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;MAChCqL,MAAM,EAAEN,CAAC,CAAC/K,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI+K,CAAC,CAAC/K,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;MAC3D4F,EAAE,EAAEmF,CAAC,CAAC/K,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI+K,CAAC,CAAC/K,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;MACvDsL,IAAI,EAAEP,CAAC,CAAC/K,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI+K,CAAC,CAAC/K,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;MACrDuL,OAAO,EAAER,CAAC,CAAC/K,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,IAAI+K,CAAC,CAAC/K,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;MAC7D,eAAe,EAAE+K,CAAC,CAAC/K,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;MACxCwL,QAAQ,EAAET,CAAC,CAAC/K,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;MACpCyL,KAAK,EAAEV,CAAC,CAAC/K,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI+K,CAAC,CAAC/K,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;MACvD0L,OAAO,EAAEX,CAAC,CAAC/K,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;MAClC2L,MAAM,EAAEZ,CAAC,CAAC/K,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;MACnC4L,KAAK,EAAEb,CAAC,CAAC/K,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;MAC9B6L,SAAS,EAAEd,CAAC,CAAC/K,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;MACtC8L,QAAQ,EAAEf,CAAC,CAAC/K,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;MACpC,SAAS,EAAE+K,CAAC,CAAC/K,OAAO,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;MAC5C+L,MAAM,EAAEhB,CAAC,CAAC/K,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI+K,CAAC,CAAC/K,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;MAC3DgM,SAAS,EAAEjB,CAAC,CAAC/K,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;MACtCiM,SAAS,EAAElB,CAAC,CAAC/K,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;MACtCkM,MAAM,EAAEnB,CAAC,CAAC/K,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;MAChCmM,SAAS,EAAEpB,CAAC,CAAC/K,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;MACtCoM,QAAQ,EAAErB,CAAC,CAAC/K,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;MACpC,GAAG,EAAE+K,CAAC,CAAC/K,OAAO,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,IAAI+K,CAAC,CAAC/K,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;MAClE,OAAO,EAAE+K,CAAC,CAAC/K,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;MAChC,OAAO,EAAE+K,CAAC,CAAC/K,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;MAChCqM,EAAE,EAAEtB,CAAC,CAAC/K,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI+K,CAAC,CAAC/K,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;MACvDsM,SAAS,EAAEvB,CAAC,CAAC/K,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;MACtCuM,EAAE,EAAExB,CAAC,CAAC/K,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;MACzBwM,KAAK,EAAEzB,CAAC,CAAC/K,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI+K,CAAC,CAAC/K,OAAO,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;MAC/DyM,OAAO,EAAE1B,CAAC,CAAC/K,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;MAClC0M,KAAK,EAAE3B,CAAC,CAAC/K,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI+K,CAAC,CAAC/K,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;MAC1D2M,SAAS,EAAE5B,CAAC,CAAC/K,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;MACtC,cAAc,EAAE+K,CAAC,CAAC/K,OAAO,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;MAC9C4M,QAAQ,EAAE7B,CAAC,CAAC/K,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;MACpC6M,MAAM,EAAE9B,CAAC,CAAC/K,OAAO,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;MACrC8M,KAAK,EAAE/B,CAAC,CAAC/K,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;MAC9B+M,IAAI,EAAEhC,CAAC,CAAC/K,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;MAC5BgN,MAAM,EAAEjC,CAAC,CAAC/K,OAAO,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;MACxCiN,MAAM,EAAElC,CAAC,CAAC/K,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;MACnCkN,MAAM,EAAEnC,CAAC,CAAC/K,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;MACnCmN,KAAK,EAAEpC,CAAC,CAAC/K,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;MAC9BoN,MAAM,EAAErC,CAAC,CAAC/K,OAAO,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC;MAC1CqN,MAAM,EAAEtC,CAAC,CAAC/K,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;MACpCsN,KAAK,EAAEvC,CAAC,CAAC/K,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;MACjC;MACAuN,OAAO,EAAExC,CAAC,CAAC/K,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;MAClCwN,KAAK,EAAEzC,CAAC,CAAC/K,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI+K,CAAC,CAAC/K,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;MACvD,QAAQ,EAAE+K,CAAC,CAAC/K,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;MACrCyN,OAAO,EAAE1C,CAAC,CAAC/K,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,IAAI+K,CAAC,CAAC/K,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;MAC3D0N,MAAM,EAAE3C,CAAC,CAAC/K,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;MAChC2N,OAAO,EAAE5C,CAAC,CAAC/K,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;MAClC4N,MAAM,EAAE7C,CAAC,CAAC/K,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;MAChC,eAAe,EACb+K,CAAC,CAAC/K,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,IAAI+K,CAAC,CAAC/K,OAAO,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;MAC/D6N,UAAU,EAAE9C,CAAC,CAAC/K,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,IAAI+K,CAAC,CAAC/K,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;MACjE8N,KAAK,EAAE/C,CAAC,CAAC/K,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;MAC9B+N,OAAO,EAAEhD,CAAC,CAAC/K,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;MAClCgO,GAAG,EAAEjD,CAAC,CAAC/K,OAAO,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;MACpC,WAAW,EAAE+K,CAAC,CAAC/K,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;MACnCiO,KAAK,EAAElD,CAAC,CAAC/K,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;MAC9B;MACAkO,MAAM,EACJnD,CAAC,CAAC/K,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IACtB+K,CAAC,CAAC/K,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IACrB+K,CAAC,CAAC/K,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;MACvBmO,MAAM,EAAEpD,CAAC,CAAC/K,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI+K,CAAC,CAAC/K,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;MAC7DoO,IAAI,EAAErD,CAAC,CAAC/K,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC;IAC7B,CAAC;EACH,CAAC,CAAC;EACF;EACAqO,YAAY,EAAEzc,OAAO,CAAC,UAAU0c,KAAK,EAAE;IACrC,IAAIvD,CAAC,GAAGR,eAAe,CAAC9D,SAAS,CAACD,SAAS,IAAI,EAAE;IACjD,IAAIjL,KAAK,GAAGsP,aAAa,CAACC,WAAW,CAACC,CAAC,CAAC;IACxC,KAAK,IAAIwD,CAAC,IAAIhE,eAAe,CAACC,OAAO,EAAE;MACrC,KAAK,IAAI7U,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4U,eAAe,CAACC,OAAO,CAAC+D,CAAC,CAAC,CAAC7Y,MAAM,EAAEC,CAAC,EAAE,EAAE;QAC1D,IAAIkB,KAAK,GAAG0T,eAAe,CAACC,OAAO,CAAC+D,CAAC,CAAC,CAAC5Y,CAAC,CAAC;QACzC,IAAI4F,KAAK,CAAC1E,KAAK,CAAC,EAAE;UAChByX,KAAK,CAACC,CAAC,CAAC,GAAG1X,KAAK;QAClB;MACF;IACF;EACF,CAAC,CAAC;EACF;EACA2X,KAAK,EAAE5c,OAAO,CAAC,YAAY;IACzB,IAAI0c,KAAK,GAAG,IAAI;IAChBzD,aAAa,CAACwD,YAAY,CAACC,KAAK,CAAC;IACjC,OAAOA,KAAK,CAAC3D,EAAE,IAAI,SAAS;EAC9B,CAAC,CAAC;EACF;EACA8D,YAAY,EAAE7c,OAAO,CAAC,YAAY;IAChC,IAAI0c,KAAK,GAAG,IAAI;IAChB,IAAIvD,CAAC,GAAGR,eAAe,CAAC9D,SAAS,CAACD,SAAS,IAAI,EAAE;IACjD8H,KAAK,CAACI,SAAS,GAAG,EAAE;IACpBJ,KAAK,CAACK,OAAO,GAAG,EAAE;IAClB;IACA,IAAID,SAAS,GAAG;MACdnB,OAAO,EAAE,SAATA,OAAOA,CAAA,EAAc;QACnB,IAAI/U,CAAC,GAAGuS,CAAC,CAACrT,OAAO,CAAC,4BAA4B,EAAE,IAAI,CAAC;QACrD,IAAIkX,oBAAoB,GAAG;UACzB,GAAG,EAAE,IAAI;UACT,GAAG,EAAE,KAAK;UACV,GAAG,EAAE,GAAG;UACR,GAAG,EAAE,GAAG;UACR,KAAK,EAAE,OAAO;UACd,GAAG,EAAE,IAAI;UACT,GAAG,EAAE,IAAI;UACT,KAAK,EAAE;QACT,CAAC;QACD,OAAOA,oBAAoB,CAACpW,CAAC,CAAC,IAAIA,CAAC;MACrC,CAAC;MACDiV,OAAO,EAAE,SAATA,OAAOA,CAAA,EAAc;QACnB,OAAO1C,CAAC,CAACrT,OAAO,CAAC,yBAAyB,EAAE,IAAI,CAAC;MACnD,CAAC;MACDsW,GAAG,EAAE,SAALA,GAAGA,CAAA,EAAc;QACf,OAAOjD,CAAC,CAACrT,OAAO,CAAC,wBAAwB,EAAE,IAAI,CAAC,CAACA,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC;MACrE,CAAC;MACDkW,MAAM,EAAE,SAARA,MAAMA,CAAA,EAAc;QAClB,OAAO7C,CAAC,CAACrT,OAAO,CAAC,wBAAwB,EAAE,IAAI,CAAC;MAClD,CAAC;MACD,eAAe,EAAE,SAAjBmX,aAAeA,CAAA,EAAc;QAC3B,OAAO9D,CAAC,CAACrT,OAAO,CAAC,qCAAqC,EAAE,IAAI,CAAC;MAC/D,CAAC;MACD,QAAQ,EAAE,SAAVoX,MAAQA,CAAA,EAAc;QACpB,OAAO/D,CAAC,CAACrT,OAAO,CAAC,yBAAyB,EAAE,IAAI,CAAC,CAACA,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC;MACtE,CAAC;MACDuW,KAAK,EAAE,SAAPA,KAAKA,CAAA,EAAc;QACjB,OAAOlD,CAAC,CAACrT,OAAO,CAAC,wBAAwB,EAAE,IAAI,CAAC;MAClD;IACF,CAAC;IACD,IAAIgX,SAAS,CAACJ,KAAK,CAAC3D,EAAE,CAAC,EAAE;MACvB2D,KAAK,CAACI,SAAS,GAAGA,SAAS,CAACJ,KAAK,CAAC3D,EAAE,CAAC,CAAC,CAAC;MACvC,IAAI2D,KAAK,CAACI,SAAS,KAAK3D,CAAC,EAAE;QACzBuD,KAAK,CAACI,SAAS,GAAG,EAAE;MACtB;IACF;IACA,IAAIJ,KAAK,CAACI,SAAS,EAAE;MACnBJ,KAAK,CAACK,OAAO,GACXL,KAAK,CAACI,SAAS,CAACjP,KAAK,CAAC,GAAG,CAAC,CAAC/J,MAAM,IAAI4Y,KAAK,CAACI,SAAS,CAACjP,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACtE;IACA,OAAO;MACLsP,OAAO,EAAET,KAAK,CAACI,SAAS;MACxBC,OAAO,EAAEL,KAAK,CAACK;IACjB,CAAC;EACH,CAAC,CAAC;EACF;EACAK,mBAAmB,EAAEpd,OAAO,CAAC,YAAY;IACvC,IAAIqd,iBAAiB,GAAG,EAAE;IAC1B,IAAIC,WAAW,GAAGhb,MAAM,CAACib,UAAU,CAAC,yBAAyB,CAAC;IAC9D,IAAID,WAAW,CAACE,OAAO,EAAE;MACvBH,iBAAiB,GAAG,IAAI;IAC1B,CAAC,MAAM;MACLA,iBAAiB,GAAG,IAAI;IAC1B;IACA,OAAOA,iBAAiB;EAC1B,CAAC,CAAC;EACF;EACAI,aAAa,EAAEzd,OAAO,CAAC,YAAY;IACjC,IAAI0c,KAAK,GAAG,IAAI;IAChBA,KAAK,CAAC1D,MAAM,GAAG,IAAI;IACnBC,aAAa,CAACwD,YAAY,CAACC,KAAK,CAAC;IACjC,OAAOA,KAAK,CAAC1D,MAAM;EACrB,CAAC,CAAC;EACF;EACA0E,UAAU,EAAE1d,OAAO,CAAC,YAAY;IAC9B,IAAI2d,UAAU,GACZrb,MAAM,CAACuS,SAAS,CAAC8I,UAAU,IAC3Brb,MAAM,CAACuS,SAAS,CAAC+I,aAAa,IAC9Btb,MAAM,CAACuS,SAAS,CAACgJ,gBAAgB;IACnC,IAAIjQ,MAAM,GAAG,SAAS;IACtB,IAAIkQ,IAAI,GAAGH,UAAU,GAAGA,UAAU,CAACG,IAAI,IAAIH,UAAU,CAACI,aAAa,GAAG,IAAI;IAC1E,IAAID,IAAI,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;MACpC,QAAQA,IAAI;QACV;QACA,KAAK,WAAW;QAChB,KAAK,UAAU;UACblQ,MAAM,GAAG,UAAU;UACnB;QACF,KAAK,MAAM;UACTA,MAAM,GAAG,MAAM;UACf;QACF,KAAK,UAAU;QACf,KAAK,MAAM;QACX,KAAK,OAAO;UACVA,MAAM,GAAG,MAAM;UACf;QACF,KAAK,OAAO;QACZ,KAAK,SAAS;UACZA,MAAM,GAAG,SAAS;UAClB;QACF;QACA,KAAK,SAAS;QACd,KAAK,IAAI;QACT,KAAK,IAAI;UACPA,MAAM,GAAG,UAAU;UACnB;QACF,KAAK,IAAI;UACPA,MAAM,GAAG,MAAM;UACf;QACF;UACE;MACJ;IACF;IACA,OAAOA,MAAM;EACf,CAAC,CAAC;EACF;EACAoQ,WAAW,EAAEhe,OAAO,CAAC,YAAY;IAC/B,IAAI0c,KAAK,GAAG,IAAI;IAChBA,KAAK,CAACuB,QAAQ,GAAI,YAAY;MAC5B,IAAIA,QAAQ,GACVtF,eAAe,CAAC9D,SAAS,CAACqJ,eAAe,IACzCvF,eAAe,CAAC9D,SAAS,CAACoJ,QAAQ,IAClC,EAAE;MACJ,IAAI9Y,GAAG,GAAG8Y,QAAQ,CAACpQ,KAAK,CAAC,GAAG,CAAC;MAC7B,IAAI1I,GAAG,CAAC,CAAC,CAAC,EAAE;QACVA,GAAG,CAAC,CAAC,CAAC,GAAGA,GAAG,CAAC,CAAC,CAAC,CAACgZ,WAAW,CAAC,CAAC;MAC/B;MACA,OAAOhZ,GAAG,CAACsF,IAAI,CAAC,GAAG,CAAC;IACtB,CAAC,CAAE,CAAC;IACJ,OAAOiS,KAAK,CAACuB,QAAQ;EACvB,CAAC,CAAC;EACFG,WAAW,EAAEpe,OAAO,CAAC,YAAY;IAC/B,IAAMqe,QAAQ,GAAGC,IAAI,CAACC,cAAc,CAAC,CAAC,CAACC,eAAe,CAAC,CAAC,CAACH,QAAQ;IACjE,OAAOA,QAAQ;EACjB,CAAC,CAAC;EACF;EACAI,cAAc,EAAEze,OAAO,CAAC,YAAY;IAClC,IAAI0c,KAAK,GAAG,IAAI;IAChBzD,aAAa,CAACwD,YAAY,CAACC,KAAK,CAAC;IAEjC,IAAIvD,CAAC,GAAGR,eAAe,CAAC9D,SAAS,CAACD,SAAS,IAAI,EAAE;IAEjD,IAAI8J,KAAK,GAAG,SAARA,KAAKA,CAAaC,MAAM,EAAE1Z,KAAK,EAAE;MACnC,IAAI2Z,SAAS,GAAGjG,eAAe,CAAC9D,SAAS,CAAC+J,SAAS;MACnD,KAAK,IAAI3a,GAAG,IAAI2a,SAAS,EAAE;QACzB,IAAIA,SAAS,CAAC3a,GAAG,CAAC,CAAC0a,MAAM,CAAC,IAAI1Z,KAAK,EAAE;UACnC,OAAO,IAAI;QACb;MACF;MACA,OAAO,KAAK;IACd,CAAC;IAED,IAAI0E,KAAK,GAAGsP,aAAa,CAACC,WAAW,CAACC,CAAC,CAAC;IAExC,IAAI0F,KAAK,GAAG,KAAK;IACjB,IAAI,OAAOvc,MAAM,KAAK,WAAW,IAAIA,MAAM,CAACwS,MAAM,EAAE;MAClD,IAAIgK,cAAc,GAAG3F,CAAC,CAACrT,OAAO,CAAC,uBAAuB,EAAE,IAAI,CAAC;MAC7D,IAAIgZ,cAAc,GAAG,EAAE,IAAIxc,MAAM,CAACyc,eAAe,EAAE;QACjDF,KAAK,GAAG,IAAI;MACd,CAAC,MAAM,IAAIC,cAAc,GAAG,EAAE,EAAE;QAC9BD,KAAK,GAAGH,KAAK,CAAC,MAAM,EAAE,0CAA0C,CAAC;MACnE;IACF;IACA,IAAI/U,KAAK,CAAC,OAAO,CAAC,IAAIA,KAAK,CAAC,OAAO,CAAC,EAAE;MACpCA,KAAK,CAAC,OAAO,CAAC,GAAG,KAAK;IACxB;IACA,IAAIA,KAAK,CAAC,QAAQ,CAAC,EAAE;MACnBA,KAAK,CAAC,QAAQ,CAAC,GAAG,EAAEwP,CAAC,CAAC/K,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;IAC7C;IACA,IAAIyQ,KAAK,EAAE;MACT,IAAIH,KAAK,CAAC,MAAM,EAAE,wBAAwB,CAAC,EAAE;QAC3C/U,KAAK,CAAC,OAAO,CAAC,GAAG,IAAI;MACvB,CAAC,MAAM,IACLgP,eAAe,CAAC9D,SAAS,IACzB8D,eAAe,CAAC9D,SAAS,CAAC8I,UAAU,IACpC,OAAOhF,eAAe,CAAC9D,SAAS,CAAC,YAAY,CAAC,CAAC,UAAU,CAAC,IACxD,WAAW,EACb;QACAlL,KAAK,CAAC,OAAO,CAAC,GAAG,IAAI;MACvB,CAAC,MAAM;QACLA,KAAK,CAAC,OAAO,CAAC,GAAG,IAAI;MACvB;IACF;IACA,IAAIA,KAAK,CAAC,IAAI,CAAC,IAAIA,KAAK,CAAC,MAAM,CAAC,EAAE;MAChC,IAAIqV,aAAa,GAAG1c,MAAM,CAAC2c,SAAS,GAAG3c,MAAM,CAAC4c,OAAO;MACrD,QAAQF,aAAa;QACnB,KAAK,EAAE;UAAE;UACP;QACF,KAAK,EAAE;UAAE;UACP;QACF,KAAK,EAAE;UAAE;UACP;QACF,KAAK,GAAG;UAAE;UACRrV,KAAK,CAAC,OAAO,CAAC,GAAG,IAAI;UACrB;QACF,KAAK,EAAE;UAAE;UACP;QACF,KAAK,EAAE;UAAE;UACP;QACF,KAAK,GAAG;UAAE;UACR;QACF,KAAK,GAAG;UAAE;UACRA,KAAK,CAAC,OAAO,CAAC,GAAG,IAAI;UACrB;QACF;UACE;MACJ;IACF;IAEA,IAAIwV,gBAAgB,GAAG;MACrB3F,MAAM,EAAE,SAARA,MAAMA,CAAA,EAAc;QAClB,OAAOL,CAAC,CAACrT,OAAO,CAAC,yBAAyB,EAAE,IAAI,CAAC;MACnD,CAAC;MACD2T,MAAM,EAAE,SAARA,MAAMA,CAAA,EAAc;QAClB,OAAON,CAAC,CACLrT,OAAO,CAAC,wBAAwB,EAAE,IAAI,CAAC,CACvCA,OAAO,CAAC,uBAAuB,EAAE,IAAI,CAAC;MAC3C,CAAC;MACDkO,EAAE,EAAE,SAAJA,EAAEA,CAAA,EAAc;QACd,OAAOmF,CAAC,CACLrT,OAAO,CAAC,qBAAqB,EAAE,IAAI,CAAC,CACpCA,OAAO,CAAC,mBAAmB,EAAE,IAAI,CAAC;MACvC,CAAC;MACD4T,IAAI,EAAE,SAANA,IAAIA,CAAA,EAAc;QAChB,OAAOP,CAAC,CAACrT,OAAO,CAAC,uBAAuB,EAAE,IAAI,CAAC;MACjD,CAAC;MACD6T,OAAO,EAAE,SAATA,OAAOA,CAAA,EAAc;QACnB,OAAOR,CAAC,CACLrT,OAAO,CAAC,yBAAyB,EAAE,IAAI,CAAC,CACxCA,OAAO,CAAC,uBAAuB,EAAE,IAAI,CAAC;MAC3C,CAAC;MACD,eAAe,EAAE,SAAjBsZ,aAAeA,CAAA,EAAc;QAC3B,OAAOjG,CAAC,CAACrT,OAAO,CAAC,uBAAuB,EAAE,IAAI,CAAC;MACjD,CAAC;MACD8T,QAAQ,EAAE,SAAVA,QAAQA,CAAA,EAAc;QACpB,OAAOT,CAAC,CAACrT,OAAO,CAAC,0BAA0B,EAAE,IAAI,CAAC;MACpD,CAAC;MACD+T,KAAK,EAAE,SAAPA,KAAKA,CAAA,EAAc;QACjB,OAAOV,CAAC,CACLrT,OAAO,CAAC,uBAAuB,EAAE,IAAI,CAAC,CACtCA,OAAO,CAAC,qBAAqB,EAAE,IAAI,CAAC;MACzC,CAAC;MACDgU,OAAO,EAAE,SAATA,OAAOA,CAAA,EAAc;QACnB,OAAOX,CAAC,CAACrT,OAAO,CAAC,yBAAyB,EAAE,IAAI,CAAC;MACnD,CAAC;MACDiU,MAAM,EAAE,SAARA,MAAMA,CAAA,EAAc;QAClB,OAAOZ,CAAC,CAACrT,OAAO,CAAC,2BAA2B,EAAE,IAAI,CAAC;MACrD,CAAC;MACDkU,KAAK,EAAE,SAAPA,KAAKA,CAAA,EAAc;QACjB,OAAOb,CAAC,CAACrT,OAAO,CAAC,uBAAuB,EAAE,IAAI,CAAC;MACjD,CAAC;MACDmU,SAAS,EAAE,SAAXA,SAASA,CAAA,EAAc;QACrB,OAAOd,CAAC,CAACrT,OAAO,CAAC,+BAA+B,EAAE,IAAI,CAAC;MACzD,CAAC;MACDoU,QAAQ,EAAE,SAAVA,QAAQA,CAAA,EAAc;QACpB,OAAOf,CAAC,CAACrT,OAAO,CAAC,8BAA8B,EAAE,IAAI,CAAC;MACxD,CAAC;MACD,SAAS,EAAE,SAAXuZ,OAASA,CAAA,EAAc;QACrB,OAAOlG,CAAC,CAACrT,OAAO,CAAC,iCAAiC,EAAE,IAAI,CAAC;MAC3D,CAAC;MACDqU,MAAM,EAAE,SAARA,MAAMA,CAAA,EAAc;QAClB,OAAOhB,CAAC,CAACrT,OAAO,CAAC,yBAAyB,EAAE,IAAI,CAAC;MACnD,CAAC;MACDsU,SAAS,EAAE,SAAXA,SAASA,CAAA,EAAc;QACrB,OAAOjB,CAAC,CAACrT,OAAO,CAAC,2BAA2B,EAAE,IAAI,CAAC;MACrD,CAAC;MACDuU,SAAS,EAAE,SAAXA,SAASA,CAAA,EAAc;QACrB,OAAOlB,CAAC,CAACrT,OAAO,CAAC,2BAA2B,EAAE,IAAI,CAAC;MACrD,CAAC;MACDwU,MAAM,EAAE,SAARA,MAAMA,CAAA,EAAc;QAClB,OAAOnB,CAAC,CAACrT,OAAO,CAAC,wBAAwB,EAAE,IAAI,CAAC;MAClD,CAAC;MACDyU,SAAS,EAAE,SAAXA,SAASA,CAAA,EAAc;QACrB,OAAOpB,CAAC,CAACrT,OAAO,CAAC,2BAA2B,EAAE,IAAI,CAAC;MACrD,CAAC;MACD0U,QAAQ,EAAE,SAAVA,QAAQA,CAAA,EAAc;QACpB,OAAOrB,CAAC,CAACrT,OAAO,CAAC,0BAA0B,EAAE,IAAI,CAAC;MACpD,CAAC;MACD,GAAG,EAAE,SAALwZ,CAAGA,CAAA,EAAc;QACf,OAAOnG,CAAC,CAACrT,OAAO,CAAC,8BAA8B,EAAE,IAAI,CAAC;MACxD,CAAC;MACD,OAAO,EAAE,SAATyZ,EAAOA,CAAA,EAAc;QACnB,IAAInJ,IAAI,GAAG;UACT,EAAE,EAAE,MAAM;UACV,EAAE,EAAE,KAAK;UACT,EAAE,EAAE,KAAK;UACT,EAAE,EAAE,KAAK;UACT,EAAE,EAAE,KAAK;UACT,EAAE,EAAE;QACN,CAAC;QACD,IAAI0I,cAAc,GAAG3F,CAAC,CAACrT,OAAO,CAAC,uBAAuB,EAAE,IAAI,CAAC;QAC7D,OAAOsQ,IAAI,CAAC0I,cAAc,CAAC,IAAI,EAAE;MACnC,CAAC;MACD,OAAO,EAAE,SAATU,EAAOA,CAAA,EAAc;QACnB,IAAIpJ,IAAI,GAAG;UAAE,EAAE,EAAE,MAAM;UAAE,EAAE,EAAE,KAAK;UAAE,EAAE,EAAE,KAAK;UAAE,EAAE,EAAE,KAAK;UAAE,EAAE,EAAE;QAAM,CAAC;QACrE,IAAI0I,cAAc,GAAG3F,CAAC,CAACrT,OAAO,CAAC,uBAAuB,EAAE,IAAI,CAAC;QAC7D,OAAOsQ,IAAI,CAAC0I,cAAc,CAAC,IAAI,EAAE;MACnC,CAAC;MACDjE,OAAO,EAAE,SAATA,OAAOA,CAAA,EAAc;QACnB,OAAO1B,CAAC,CAACrT,OAAO,CAAC,yBAAyB,EAAE,IAAI,CAAC;MACnD,CAAC;MACD4U,SAAS,EAAE,SAAXA,SAASA,CAAA,EAAc;QACrB,OAAOvB,CAAC,CAACrT,OAAO,CAAC,2BAA2B,EAAE,IAAI,CAAC;MACrD,CAAC;MACD6U,EAAE,EAAE,SAAJA,EAAEA,CAAA,EAAc;QACd,OAAOxB,CAAC,CAACrT,OAAO,CAAC,oBAAoB,EAAE,IAAI,CAAC;MAC9C,CAAC;MACD8U,KAAK,EAAE,SAAPA,KAAKA,CAAA,EAAc;QACjB,OAAOzB,CAAC,CAACrT,OAAO,CAAC,iCAAiC,EAAE,IAAI,CAAC;MAC3D,CAAC;MACD2U,EAAE,EAAE,SAAJA,EAAEA,CAAA,EAAc;QACd,OAAOtB,CAAC,CAACrT,OAAO,CAAC,4BAA4B,EAAE,IAAI,CAAC;MACtD,CAAC;MACDgV,KAAK,EAAE,SAAPA,KAAKA,CAAA,EAAc;QACjB,OAAO3B,CAAC,CACLrT,OAAO,CAAC,oBAAoB,EAAE,IAAI,CAAC,CACnCA,OAAO,CAAC,oCAAoC,EAAE,IAAI,CAAC;MACxD,CAAC;MACDiV,SAAS,EAAE,SAAXA,SAASA,CAAA,EAAc;QACrB,IAAIoC,OAAO,GAAG,EAAE;QAChB,IAAIhE,CAAC,CAAC/K,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE;UAChC+O,OAAO,GAAGhE,CAAC,CAACrT,OAAO,CAAC,4BAA4B,EAAE,IAAI,CAAC;QACzD;QACA,IAAIsQ,IAAI,GAAG;UACT,EAAE,EAAE,KAAK;UACT,EAAE,EAAE,KAAK;UACT,EAAE,EAAE,KAAK;UACT,EAAE,EAAE,KAAK;UACT,EAAE,EAAE,KAAK;UACT,EAAE,EAAE,KAAK;UACT,EAAE,EAAE,KAAK;UACT,EAAE,EAAE;QACN,CAAC;QACD,IAAI0I,cAAc,GAAG3F,CAAC,CAACrT,OAAO,CAAC,uBAAuB,EAAE,IAAI,CAAC;QAC7D,OAAOqX,OAAO,IAAI/G,IAAI,CAAC0I,cAAc,CAAC,IAAI,EAAE;MAC9C,CAAC;MACD,cAAc,EAAE,SAAhBW,QAAcA,CAAA,EAAc;QAC1B,OAAOtG,CAAC,CAACrT,OAAO,CAAC,8BAA8B,EAAE,IAAI,CAAC;MACxD,CAAC;MACDkV,QAAQ,EAAE,SAAVA,QAAQA,CAAA,EAAc;QACpB,OAAO7B,CAAC,CAACrT,OAAO,CAAC,yBAAyB,EAAE,IAAI,CAAC;MACnD,CAAC;MACDmV,MAAM,EAAE,SAARA,MAAMA,CAAA,EAAc;QAClB,OAAO9B,CAAC,CAACrT,OAAO,CAAC,6BAA6B,EAAE,IAAI,CAAC;MACvD,CAAC;MACDoV,KAAK,EAAE,SAAPA,KAAKA,CAAA,EAAc;QACjB,OAAO/B,CAAC,CAACrT,OAAO,CAAC,uBAAuB,EAAE,IAAI,CAAC;MACjD,CAAC;MACDqV,IAAI,EAAE,SAANA,IAAIA,CAAA,EAAc;QAChB,OAAOhC,CAAC,CAACrT,OAAO,CAAC,sBAAsB,EAAE,IAAI,CAAC;MAChD,CAAC;MACDsV,MAAM,EAAE,SAARA,MAAMA,CAAA,EAAc;QAClB,OAAOjC,CAAC,CAACrT,OAAO,CAAC,gCAAgC,EAAE,IAAI,CAAC;MAC1D,CAAC;MACD4Z,UAAU,EAAE,SAAZA,UAAUA,CAAA,EAAc;QACtB,OAAOvG,CAAC,CAACrT,OAAO,CAAC,wBAAwB,EAAE,IAAI,CAAC;MAClD,CAAC;MACDuV,MAAM,EAAE,SAARA,MAAMA,CAAA,EAAc;QAClB,OAAOlC,CAAC,CAACrT,OAAO,CAAC,4BAA4B,EAAE,IAAI,CAAC;MACtD,CAAC;MACDwV,MAAM,EAAE,SAARA,MAAMA,CAAA,EAAc;QAClB,OAAOnC,CAAC,CAACrT,OAAO,CAAC,4BAA4B,EAAE,IAAI,CAAC;MACtD,CAAC;MACDyV,KAAK,EAAE,SAAPA,KAAKA,CAAA,EAAc;QACjB,OAAOpC,CAAC,CAACrT,OAAO,CAAC,uBAAuB,EAAE,IAAI,CAAC;MACjD,CAAC;MACD0V,MAAM,EAAE,SAARA,MAAMA,CAAA,EAAc;QAClB,OAAOrC,CAAC,CAACrT,OAAO,CAAC,kCAAkC,EAAE,IAAI,CAAC;MAC5D,CAAC;MACD2V,MAAM,EAAE,SAARA,MAAMA,CAAA,EAAc;QAClB,OAAOtC,CAAC,CAACrT,OAAO,CAAC,0BAA0B,EAAE,IAAI,CAAC;MACpD,CAAC;MACD4V,KAAK,EAAE,SAAPA,KAAKA,CAAA,EAAc;QACjB,OAAOvC,CAAC,CAACrT,OAAO,CAAC,8BAA8B,EAAE,IAAI,CAAC;MACxD;IACF,CAAC;IACD4W,KAAK,CAACiD,cAAc,GAAG,EAAE;IACzBjD,KAAK,CAACkD,YAAY,GAAG,EAAE;IACvB,IAAIT,gBAAgB,CAACzC,KAAK,CAAC5D,OAAO,CAAC,EAAE;MACnC4D,KAAK,CAACiD,cAAc,GAAGR,gBAAgB,CAACzC,KAAK,CAAC5D,OAAO,CAAC,CAAC,CAAC;MACxD,IAAI4D,KAAK,CAACiD,cAAc,IAAIxG,CAAC,EAAE;QAC7BuD,KAAK,CAACiD,cAAc,GAAG,EAAE;MAC3B;IACF;IACA,IAAIjD,KAAK,CAAC5D,OAAO,IAAI,QAAQ,IAAIK,CAAC,CAACxP,KAAK,CAAC,YAAY,CAAC,EAAE;MACtD+S,KAAK,CAAC5D,OAAO,GAAGK,CAAC,CAACxP,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;MACxC+S,KAAK,CAACS,OAAO,GAAGhE,CAAC,CAACrT,OAAO,CAAC,yBAAyB,EAAE,IAAI,CAAC;IAC5D;IACA,IAAI4W,KAAK,CAAC5D,OAAO,IAAI,MAAM,EAAE;MAC3B,IAAI4D,KAAK,CAACS,OAAO,GAAG,IAAI,EAAE;QACxBT,KAAK,CAAC7D,MAAM,GAAG,OAAO;MACxB,CAAC,MAAM;QACL6D,KAAK,CAAC7D,MAAM,GAAG,UAAU;MAC3B;IACF;IACA,IAAI6D,KAAK,CAAC5D,OAAO,IAAI,QAAQ,IAAIlO,QAAQ,CAAC8R,KAAK,CAACiD,cAAc,CAAC,GAAG,EAAE,EAAE;MACpEjD,KAAK,CAAC7D,MAAM,GAAG,OAAO;IACxB,CAAC,MAAM,IACLlP,KAAK,CAAC,QAAQ,CAAC,IACf+S,KAAK,CAAC7D,MAAM,IAAI,QAAQ,IACxBjO,QAAQ,CAAC8R,KAAK,CAACiD,cAAc,CAAC,GAAG,EAAE,EACnC;MACAjD,KAAK,CAAC7D,MAAM,GAAG,OAAO;IACxB,CAAC,MAAM,IAAI6D,KAAK,CAAC5D,OAAO,IAAI,OAAO,IAAIlO,QAAQ,CAAC8R,KAAK,CAACS,OAAO,CAAC,GAAG,EAAE,EAAE;MACnET,KAAK,CAAC7D,MAAM,GAAG,OAAO;IACxB,CAAC,MAAM,IAAI6D,KAAK,CAAC5D,OAAO,IAAI,QAAQ,EAAE;MACpC4D,KAAK,CAAC7D,MAAM,GAAG,OAAO;IACxB;IACA,IAAI6D,KAAK,CAACiD,cAAc,EAAE;MACxBjD,KAAK,CAACkD,YAAY,GAChBlD,KAAK,CAACiD,cAAc,CAAC9R,KAAK,CAAC,GAAG,CAAC,CAAC/J,MAAM,IACtC,IAAI,CAAC6b,cAAc,CAAC9R,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACrC;IACA,OAAO;MACLiL,OAAO,EAAE4D,KAAK,CAAC5D,OAAO;MACtB6G,cAAc,EAAEjD,KAAK,CAACiD,cAAc;MACpC9G,MAAM,EAAE6D,KAAK,CAAC7D,MAAM;MACpB+G,YAAY,EAAElD,KAAK,CAACkD;IACtB,CAAC;EACH,CAAC,CAAC;EACF;EACAC,aAAa,EAAE7f,OAAO,CAAC,UAAUqB,QAAQ,EAAE;IACzCwT,SAAS,IACPA,SAAS,CAACiL,WAAW,IACrBjL,SAAS,CAACiL,WAAW,CAACC,kBAAkB;IACtC;IACA,UAAUC,QAAQ,EAAE;MAClB3e,QAAQ,CAAC2e,QAAQ,CAAC;IACpB,CAAC;IACD;IACA,UAAUnhB,KAAK,EAAE;MACfS,eAAO,CAACV,IAAI,CAACC,KAAK,CAAC;IACrB,CACF,CAAC;EACL,CAAC;AACH,CAAC;AACD,IAAIohB,WAAW,GAAG,CAAC,CAAC;AACpB,IAAI,OAAO3d,MAAM,KAAK,WAAW,EAAE;EACjC2d,WAAW,GAAG;IACZlH,EAAE,EAAEE,aAAa,CAAC2D,KAAK,CAAC,CAAC;IACzBE,SAAS,EAAE7D,aAAa,CAAC4D,YAAY,CAAC,CAAC,CAACM,OAAO;IAC/C+C,cAAc,EAAEjH,aAAa,CAAC4D,YAAY,CAAC,CAAC,CAACE,OAAO;IACpDjE,OAAO,EAAEG,aAAa,CAACwF,cAAc,CAAC,CAAC,CAAC3F,OAAO;IAC/C6G,cAAc,EAAE1G,aAAa,CAACwF,cAAc,CAAC,CAAC,CAACkB,cAAc;IAC7DQ,mBAAmB,EAAElH,aAAa,CAACwF,cAAc,CAAC,CAAC,CAACmB,YAAY;IAChEQ,UAAU,EAAE9d,MAAM,CAAC+d,MAAM,CAACC,KAAK,GAAG,GAAG,GAAGhe,MAAM,CAAC+d,MAAM,CAACE,MAAM;IAC5DC,WAAW,EAAEvH,aAAa,CAACyE,UAAU,CAAC,CAAC;IACvC1E,MAAM,EAAEC,aAAa,CAACwE,aAAa,CAAC,CAAC;IACrCY,QAAQ,EAAEpF,aAAa,CAACmF,WAAW,CAAC;EACtC,CAAC;AACH;AACO,IAAIqC,UAAU,GAAGR,WAAW,C;;ACrnB5B,IAAIS,SAAS,GAAG;EACrBC,aAAa,EAAE,cAAc;EAC7BC,KAAK,EAAE,OAAO;EACdC,SAAS,EAAE,UAAU;EACrBC,QAAQ,EAAE,SAAS;EACnBC,IAAI,EAAE,MAAM;EACZC,SAAS,EAAE,UAAU;EACrBC,MAAM,EAAE,QAAQ;EAChBC,WAAW,EAAE,YAAY;EACzBC,SAAS,EAAE,UAAU;EACrBC,UAAU,EAAE,WAAW;EACvBC,iBAAiB,EAAE,kBAAkB;EACrCC,SAAS,EAAE,UAAU;EACrBC,MAAM,EAAE,QAAQ;EAChBC,MAAM,EAAE,QAAQ;EAChBC,kBAAkB,EAAE,kBAAkB;EACtCC,YAAY,EAAE,aAAa;EAC3BC,UAAU,EAAE,WAAW;EACvBC,cAAc,EAAE,eAAe;EAC/BC,WAAW,EAAE,YAAY;EACzBC,SAAS,EAAE,UAAU;EACrBC,UAAU,EAAE,WAAW;EACvBC,QAAQ,EAAE,SAAS;EACnBC,UAAU,EAAE,WAAW;EACvBC,KAAK,EAAE,OAAO;EACdC,IAAI,EAAE,MAAM;EACZC,YAAY,EAAE,aAAa;EAC3BC,MAAM,EAAE,QAAQ;EAChBC,MAAM,EAAE,QAAQ;EAChBC,KAAK,EAAE,OAAO;EACdC,IAAI,EAAE,MAAM;EACZC,KAAK,EAAE,OAAO;EACdC,yBAAyB,EAAE,yBAAyB;EACpDC,gBAAgB,EAAE,iBAAiB;EACnCC,OAAO,EAAE;AACX,CAAC;AACM,IAAIC,YAAY,GAAG;EACxBC,QAAQ,EAAE,UAAU;EACpBC,GAAG,EAAE,KAAK;EACVC,MAAM,EAAE,QAAQ;EAChBC,KAAK,EAAE,OAAO;EACdrd,GAAG,EAAE,KAAK;EACVsd,EAAE,EAAE,IAAI;EACRC,KAAK,EAAE,OAAO;EACdC,IAAI,EAAE,MAAM;EACZC,KAAK,EAAE,OAAO;EACdlP,KAAK,EAAE;AACT,CAAC;AAEM,IAAImP,UAAU,GAAG;EACtB1C,KAAK,EAAE,OAAO;EACd2C,MAAM,EAAE;AACV,CAAC;AACM,IAAIC,eAAe,GAAG;EAC3BC,UAAU,EAAE,YAAY;EACxBC,WAAW,EAAE,aAAa;EAC1BC,UAAU,EAAE;AACd,CAAC;AACM,IAAIC,kBAAY,GAAG;EACxBC,MAAM,EAAE,QAAQ;EAChBC,KAAK,EAAE,OAAO;EACdC,SAAS,EAAE,WAAW;EACtBC,IAAI,EAAE,MAAM;EACZC,QAAQ,EAAE,UAAU;EACpBC,MAAM,EAAE;AACV,CAAC;AACM,IAAIC,oBAAoB,GAAG;EAChCJ,SAAS,EAAE,WAAW;EACtBK,oBAAoB,EAAE;AACxB,CAAC;AACM,IAAIC,eAAe,GAAG;EAC3BC,YAAY,EAAE,cAAc;EAC5BC,YAAY,EAAE;AAChB,CAAC;AACM,IAAIC,WAAW,GAAG;EACvBvB,KAAK,EAAEJ,YAAY,CAACI,KAAK;EACzBF,GAAG,EAAEF,YAAY,CAACE;AACpB,CAAC;AAEM,IAAI0B,eAAS,GAAG;EACrBC,OAAO,EAAE,SAAS;EAClBC,mBAAmB,EAAE,QAAQ;EAC7BC,oBAAoB,EAAE,sBAAsB;EAC5CC,eAAe,EAAE,iBAAiB;EAClCC,kBAAkB,EAAE,uBAAuB;EAC3CC,aAAa,EAAE,eAAe;EAC9BC,MAAM,EAAE;AACV,CAAC;AACM,IAAIC,mBAAa,GAAG;EACzBC,OAAO,EAAE,SAAS;EAClBC,SAAS,EAAE;AACb,CAAC;AACM,IAAIC,cAAc,GAAG;EAC1BC,QAAQ,EAAE,UAAU;EACpBC,QAAQ,EAAE;AACZ,CAAC,C;;;;;;;;;;;AC/F8B;;AAE/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,2BAAaA,CAACtgB,KAAK,EAAEugB,QAAQ,EAAEC,KAAK,EAAE;EACpD,IAAIzjB,oBAAA,CAAOiD,KAAK,MAAK,QAAQ,IAAIA,KAAK,KAAK,IAAI,EAAE;IAC/C,OAAOiI,IAAI,CAACwY,SAAS,CAACzgB,KAAK,CAAC;EAC9B;;EAEA;EACA;EACA,IAAI0gB,4BAA4B,GAAGC,kBAAkB,CAAC3mB,MAAM,CAACgD,SAAS,CAAC;EACvE,IAAI4jB,2BAA2B,GAAGD,kBAAkB,CAACxiB,KAAK,CAACnB,SAAS,CAAC;EACrE,IAAI6jB,2BAA2B,GAAGF,kBAAkB,CAClD3mB,MAAM,CAAC8mB,cAAc,CAAC9gB,KAAK,CAC7B,CAAC;EACD,IAAI+gB,kBAAkB,GAAGJ,kBAAkB,CAAC3gB,KAAK,CAAC;EAElD,IAAI;IACF,OAAOiI,IAAI,CAACwY,SAAS,CAACzgB,KAAK,EAAEugB,QAAQ,EAAEC,KAAK,CAAC;EAC/C,CAAC,CAAC,OAAAQ,OAAA,EAAM;IACN,OAAO,qCAAqC;EAC9C,CAAC,SAAS;IACRN,4BAA4B,CAAC,CAAC;IAC9BE,2BAA2B,CAAC,CAAC;IAC7BC,2BAA2B,CAAC,CAAC;IAC7BE,kBAAkB,CAAC,CAAC;EACtB;AACF;AAEO,SAASJ,kBAAkBA,CAAC3gB,KAAK,EAAE;EACxC,IAAMZ,MAAM,GAAGY,KAAK;EACpB,IAAMihB,YAAY,GAAG7hB,MAAM,CAAC8hB,MAAM;EAClC,IAAID,YAAY,EAAE;IAChB,OAAO7hB,MAAM,CAAC8hB,MAAM;IACpB,OAAO,YAAY;MACjB9hB,MAAM,CAAC8hB,MAAM,GAAGD,YAAY;IAC9B,CAAC;EACH;EACA,OAAOvW,UAAI;AACb,C;;;;;;;;;;;AC9CsC;AACtC,IAAIyW,gBAAgB,GAAG,GAAG;;AAE1B;AACA;AACA;AACO,SAASC,iBAAiBA,CAACC,EAAE,EAAE;EACpC,IAAIC,KAAK,GAAG,EAAE;EAEd,IAAIC,aAAa,GAAGC,cAAc,CAACH,EAAE,EAAE,OAAO,CAAC;EAC/C,IAAII,QAAQ,GAAGjgB,MAAM,CAAC6f,EAAE,CAAC;EACzB,IAAIE,aAAa,IAAIA,aAAa,CAACxQ,UAAU,CAAC0Q,QAAQ,CAAC,EAAE;IACvDF,aAAa,GAAGA,aAAa,CAAC/lB,KAAK,CAACimB,QAAQ,CAAC5iB,MAAM,CAAC;EACtD;EACA,IAAI0iB,aAAa,EAAE;IACjBzlB,UAAI,CAACylB,aAAa,CAAC3Y,KAAK,CAAC,IAAI,CAAC,EAAE,UAAU8Y,IAAI,EAAE;MAC9C,IAAIC,UAAU,GACZC,eAAe,CAACF,IAAI,CAAC,IACrBG,wBAAwB,CAACH,IAAI,CAAC,IAC9BI,YAAY,CAACJ,IAAI,CAAC,IAClBK,cAAc,CAACL,IAAI,CAAC;MACtB,IAAIC,UAAU,EAAE;QACd,IAAI,CAACA,UAAU,CAACK,IAAI,IAAIL,UAAU,CAACD,IAAI,EAAE;UACvCC,UAAU,CAACK,IAAI,GAAGb,gBAAgB;QACpC;QACAG,KAAK,CAACjhB,IAAI,CAACshB,UAAU,CAAC;MACxB;IACF,CAAC,CAAC;EACJ;EAEA,OAAO;IACLM,OAAO,EAAET,cAAc,CAACH,EAAE,EAAE,SAAS,CAAC;IACtClnB,IAAI,EAAEqnB,cAAc,CAACH,EAAE,EAAE,MAAM,CAAC;IAChCC,KAAK,EAAEA;EACT,CAAC;AACH;AACA,IAAIY,OAAO,GACT,iGAAiG;AAEnG,IAAIC,YAAY,GAAG,aAAa;AAChC,IAAIC,cAAc,GAAG,IAAI9a,MAAM,CAC7B,oBAAoB,GAClB4a,OAAO,GACPC,YAAY,GACZ,GAAG,GACHA,YAAY,GACZ,YAAY,EACd,GACF,CAAC;AACD,IAAIE,cAAc,GAAG,IAAI/a,MAAM,CAC7B,WAAW,GAAG6a,YAAY,GAAGA,YAAY,GAAG,KAC9C,CAAC;AAED,SAASP,eAAeA,CAACF,IAAI,EAAE;EAC7B,IAAIY,KAAK,GAAGF,cAAc,CAACza,IAAI,CAAC+Z,IAAI,CAAC;EAErC,IAAI,CAACY,KAAK,EAAE;IACV;EACF;EAEA,IAAIC,QAAQ,GAAGD,KAAK,CAAC,CAAC,CAAC,IAAIA,KAAK,CAAC,CAAC,CAAC,CAACnZ,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAC;EAC5D,IAAIqZ,MAAM,GAAGF,KAAK,CAAC,CAAC,CAAC,IAAIA,KAAK,CAAC,CAAC,CAAC,CAACnZ,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,EAAC;EACxD,IAAIsZ,QAAQ,GAAGJ,cAAc,CAAC1a,IAAI,CAAC2a,KAAK,CAAC,CAAC,CAAC,CAAC;EAE5C,IAAIE,MAAM,IAAIC,QAAQ,EAAE;IACtB;IACAH,KAAK,CAAC,CAAC,CAAC,GAAGG,QAAQ,CAAC,CAAC,CAAC,EAAC;IACvBH,KAAK,CAAC,CAAC,CAAC,GAAGG,QAAQ,CAAC,CAAC,CAAC,EAAC;IACvBH,KAAK,CAAC,CAAC,CAAC,GAAGG,QAAQ,CAAC,CAAC,CAAC,EAAC;EACzB;EAEA,OAAO;IACLrnB,IAAI,EAAEmnB,QAAQ,GAAG,CAACD,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE;IAChCI,MAAM,EAAEJ,KAAK,CAAC,CAAC,CAAC,GAAG,CAACA,KAAK,CAAC,CAAC,CAAC,GAAGxnB,SAAS;IACxCknB,IAAI,EAAEM,KAAK,CAAC,CAAC,CAAC,IAAInB,gBAAgB;IAClCO,IAAI,EAAEY,KAAK,CAAC,CAAC,CAAC,GAAG,CAACA,KAAK,CAAC,CAAC,CAAC,GAAGxnB,SAAS;IACtC2M,GAAG,EAAE,CAAC8a,QAAQ,GAAGD,KAAK,CAAC,CAAC,CAAC,GAAGxnB;EAC9B,CAAC;AACH;AAEA,IAAI6nB,4BAA4B,GAAG,IAAIrb,MAAM,CAC3C,WAAW,GAAG4a,OAAO,GAAGC,YAAY,GAAG,GAAG,GAAGA,YAAY,GAAG,SAAS,EACrE,GACF,CAAC;AAED,SAASN,wBAAwBA,CAACH,IAAI,EAAE;EACtC,IAAIY,KAAK,GAAGK,4BAA4B,CAAChb,IAAI,CAAC+Z,IAAI,CAAC;EAEnD,IAAI,CAACY,KAAK,EAAE;IACV;EACF;EAEA,OAAO;IACLlnB,IAAI,EAAE,EAAE;IACRsnB,MAAM,EAAEJ,KAAK,CAAC,CAAC,CAAC,GAAG,CAACA,KAAK,CAAC,CAAC,CAAC,GAAGxnB,SAAS;IACxCknB,IAAI,EAAEb,gBAAgB;IACtBO,IAAI,EAAEY,KAAK,CAAC,CAAC,CAAC,GAAG,CAACA,KAAK,CAAC,CAAC,CAAC,GAAGxnB,SAAS;IACtC2M,GAAG,EAAE6a,KAAK,CAAC,CAAC;EACd,CAAC;AACH;AAEA,IAAIM,aAAa,GACf,+GAA+G;AAEjH,SAASd,YAAYA,CAACJ,IAAI,EAAE;EAC1B,IAAIY,KAAK,GAAGM,aAAa,CAACjb,IAAI,CAAC+Z,IAAI,CAAC;EACpC,IAAI,CAACY,KAAK,EAAE;IACV;EACF;EAEA,OAAO;IACLlnB,IAAI,EAAE,EAAE;IACRsnB,MAAM,EAAEJ,KAAK,CAAC,CAAC,CAAC,GAAG,CAACA,KAAK,CAAC,CAAC,CAAC,GAAGxnB,SAAS;IACxCknB,IAAI,EAAEM,KAAK,CAAC,CAAC,CAAC,IAAInB,gBAAgB;IAClCO,IAAI,EAAE,CAACY,KAAK,CAAC,CAAC,CAAC;IACf7a,GAAG,EAAE6a,KAAK,CAAC,CAAC;EACd,CAAC;AACH;AAEA,IAAIO,aAAa,GACf,yJAAyJ;AAC3J,IAAIC,aAAa,GAAG,+CAA+C;AAEnE,SAASf,cAAcA,CAACL,IAAI,EAAE;EAC5B,IAAIY,KAAK,GAAGO,aAAa,CAAClb,IAAI,CAAC+Z,IAAI,CAAC;EACpC,IAAI,CAACY,KAAK,EAAE;IACV;EACF;EAEA,IAAIE,MAAM,GAAGF,KAAK,CAAC,CAAC,CAAC,IAAIA,KAAK,CAAC,CAAC,CAAC,CAACnZ,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;EACzD,IAAIsZ,QAAQ,GAAGK,aAAa,CAACnb,IAAI,CAAC2a,KAAK,CAAC,CAAC,CAAC,CAAC;EAE3C,IAAIE,MAAM,IAAIC,QAAQ,EAAE;IACtB;IACAH,KAAK,CAAC,CAAC,CAAC,GAAGG,QAAQ,CAAC,CAAC,CAAC;IACtBH,KAAK,CAAC,CAAC,CAAC,GAAGG,QAAQ,CAAC,CAAC,CAAC;IACtBH,KAAK,CAAC,CAAC,CAAC,GAAGxnB,SAAS,EAAC;EACvB;EAEA,OAAO;IACLM,IAAI,EAAEknB,KAAK,CAAC,CAAC,CAAC,GAAGA,KAAK,CAAC,CAAC,CAAC,CAAC1Z,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE;IACzC8Z,MAAM,EAAEJ,KAAK,CAAC,CAAC,CAAC,GAAG,CAACA,KAAK,CAAC,CAAC,CAAC,GAAGxnB,SAAS;IACxCknB,IAAI,EAAEM,KAAK,CAAC,CAAC,CAAC,IAAInB,gBAAgB;IAClCO,IAAI,EAAEY,KAAK,CAAC,CAAC,CAAC,GAAG,CAACA,KAAK,CAAC,CAAC,CAAC,GAAGxnB,SAAS;IACtC2M,GAAG,EAAE6a,KAAK,CAAC,CAAC;EACd,CAAC;AACH;AAEA,SAASd,cAAcA,CAAC5T,SAAS,EAAEmV,QAAQ,EAAE;EAC3C,IAAIhmB,wBAAA,CAAO6Q,SAAS,MAAK,QAAQ,IAAI,CAACA,SAAS,IAAI,EAAEmV,QAAQ,IAAInV,SAAS,CAAC,EAAE;IAC3E,OAAO9S,SAAS;EAClB;EACA,IAAIkF,KAAK,GAAG4N,SAAS,CAACmV,QAAQ,CAAC;EAC/B,OAAO,OAAO/iB,KAAK,KAAK,QAAQ,GAAGA,KAAK,GAAGlF,SAAS;AACtD,C;;AC1J6D;AACA;AACN;;AAEvD;AACA,IAAImoB,cAAc,GAChB,8GAA8G;AAChH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO,SAASC,6BAA6BA,CAAC9mB,QAAQ,EAAE;EACtD,IAAI+mB,kBAAkB,GAAGC,iBAAiB,CAAChnB,QAAQ,CAAC;EACpD,IAAIinB,6BAA6B,GAAGC,4BAA4B,CAAClnB,QAAQ,CAAC;EAC1E,OAAO;IACLoX,IAAI,EAAE,SAANA,IAAIA,CAAA,EAAc;MAChB2P,kBAAkB,CAAC3P,IAAI,CAAC,CAAC;MACzB6P,6BAA6B,CAAC7P,IAAI,CAAC,CAAC;IACtC;EACF,CAAC;AACH;;AAEA;AACA;AACA;AACA,SAAS4P,iBAAiBA,CAAChnB,QAAQ,EAAE;EACnC,OAAO4mB,iCAAgB,CAAC3lB,MAAM,EAAE,SAAS,EAAE,UAAUgV,MAAM,EAAE;IAC3D,IAAIkR,UAAU,GAAGlR,MAAM,CAACkR,UAAU;IAClC,IAAIC,UAAU,GAAGD,UAAU,CAAC,CAAC,CAAC;IAC9B,IAAI9b,GAAG,GAAG8b,UAAU,CAAC,CAAC,CAAC;IACvB,IAAI7B,IAAI,GAAG6B,UAAU,CAAC,CAAC,CAAC;IACxB,IAAIb,MAAM,GAAGa,UAAU,CAAC,CAAC,CAAC;IAC1B,IAAIE,QAAQ,GAAGF,UAAU,CAAC,CAAC,CAAC;IAC5B,IAAIG,UAAU;IACd,IAAID,QAAQ,YAAYE,KAAK,EAAE;MAC7BD,UAAU,GAAGtC,iBAAiB,CAACqC,QAAQ,CAAC;IAC1C,CAAC,MAAM;MACL,IAAI5U,QAAQ,GAAG;QACbpH,GAAG,EAAEA,GAAG;QACRib,MAAM,EAAEA,MAAM;QACdhB,IAAI,EAAEA;MACR,CAAC;MACD,IAAI3Z,KAAK,GAAG6b,iBAAiB,CAACJ,UAAU,CAAC;MAEzCE,UAAU,GAAG;QACXvpB,IAAI,EAAE4N,KAAK,CAAC5N,IAAI;QAChB8nB,OAAO,EAAEla,KAAK,CAACka,OAAO;QACtBX,KAAK,EAAE,CAACzS,QAAQ;MAClB,CAAC;IACH;IACAzS,QAAQ,CAACsnB,UAAU,EAAElU,iCAA2B,CAACiU,QAAQ,EAAED,UAAU,CAAC,CAAC;EACzE,CAAC,CAAC;AACJ;AACA,SAASI,iBAAiBA,CAACJ,UAAU,EAAE;EACrC,IAAIrpB,IAAI;EACR,IAAI8nB,OAAO;EACX,IAAI,CAAC,CAAC,CAAC5jB,QAAQ,CAAC5C,IAAI,CAAC+nB,UAAU,CAAC,KAAK,iBAAiB,EAAE;IACtD,IAAIK,MAAM,GAAGZ,cAAc,CAACtb,IAAI,CAAC6b,UAAU,CAAC;IAC5C,IAAIK,MAAM,EAAE;MACV1pB,IAAI,GAAG0pB,MAAM,CAAC,CAAC,CAAC;MAChB5B,OAAO,GAAG4B,MAAM,CAAC,CAAC,CAAC;IACrB;EACF;EACA,OAAO;IAAE1pB,IAAI,EAAEA,IAAI;IAAE8nB,OAAO,EAAEA;EAAQ,CAAC;AACzC;AACA;AACA;AACA;AACA,SAASqB,4BAA4BA,CAAClnB,QAAQ,EAAE;EAC9C,OAAO4mB,iCAAgB,CAAC3lB,MAAM,EAAE,sBAAsB,EAAE,UAAUgV,MAAM,EAAE;IACxE,IAAIkR,UAAU,GAAGlR,MAAM,CAACkR,UAAU;IAClC,IAAIjoB,CAAC,GAAGioB,UAAU,CAAC,CAAC,CAAC;IACrB,IAAIO,MAAM,GAAGxoB,CAAC,CAACwoB,MAAM,IAAI,cAAc;IACvC,IAAIxC,KAAK,GAAGF,iBAAiB,CAAC0C,MAAM,CAAC;IACrC1nB,QAAQ,CAACklB,KAAK,EAAEwC,MAAM,CAAC;EACzB,CAAC,CAAC;AACJ,C;;ACxGuD;;;ACAhD,IAAIC,aAAa,GAAG,IAAI;AACxB,IAAIC,aAAa,GAAG,IAAI,GAAGD,aAAa;AAC/C;AACA,IAAIE,0BAA0B,GAAG,kBAAkB;AAE5C,SAASC,iBAAiBA,CAACtW,SAAS,EAAE;EAC3C;EACA,IAAI,CAACqW,0BAA0B,CAACvkB,IAAI,CAACkO,SAAS,CAAC,EAAE;IAC/C,OAAOA,SAAS,CAAC/O,MAAM;EACzB;EAEA,IAAIxB,MAAM,CAAC8mB,WAAW,KAAKrpB,SAAS,EAAE;IACpC,OAAO,IAAIqpB,WAAW,CAAC,CAAC,CAACC,MAAM,CAACxW,SAAS,CAAC,CAAC/O,MAAM;EACnD;EAEA,OAAO,IAAIwlB,IAAI,CAAC,CAACzW,SAAS,CAAC,CAAC,CAAC6F,IAAI;AACnC;AACO,SAAS6Q,aAAaA,CAACC,OAAO,EAAE;EACrC,IAAI1lB,MAAM,GAAG0lB,OAAO,CAACC,MAAM,CAAC,UAAUC,KAAK,EAAE/S,MAAM,EAAE;IACnD,OAAO+S,KAAK,GAAG/S,MAAM,CAAC7S,MAAM;EAC9B,CAAC,EAAE,CAAC,CAAC;EACL,IAAI8J,MAAM,GAAG,IAAI+b,UAAU,CAAC7lB,MAAM,CAAC;EACnC,IAAI8lB,MAAM,GAAG,CAAC;EACd,KAAK,IAAIzR,EAAE,GAAG,CAAC,EAAE0R,SAAS,GAAGL,OAAO,EAAErR,EAAE,GAAG0R,SAAS,CAAC/lB,MAAM,EAAEqU,EAAE,EAAE,EAAE;IACjE,IAAIxB,MAAM,GAAGkT,SAAS,CAAC1R,EAAE,CAAC;IAC1BvK,MAAM,CAACR,GAAG,CAACuJ,MAAM,EAAEiT,MAAM,CAAC;IAC1BA,MAAM,IAAIjT,MAAM,CAAC7S,MAAM;EACzB;EACA,OAAO8J,MAAM;AACf,C;;;;;;;;;;;AC7BmC;AACQ;AACuB;;AAElE;AACA;AACA,IAAIkc,oCAAoC,GAAG,GAAG,GAAGd,aAAa;;AAE9D;AACA,IAAIe,sBAAsB,GAAG,GAAG;;AAEhC;AACA;AACA,IAAIC,qBAAqB,GAAG,CAAC;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO,SAASC,QAAQA,CAAC/lB,MAAM,EAAEgmB,iBAAiB,EAAE;EAClD,IAAIA,iBAAiB,KAAKnqB,SAAS,EAAE;IACnCmqB,iBAAiB,GAAGJ,oCAAoC;EAC1D;EACA;EACA,IAAInE,4BAA4B,GAAGC,kBAAkB,CAAC3mB,MAAM,CAACgD,SAAS,CAAC;EACvE,IAAI4jB,2BAA2B,GAAGD,kBAAkB,CAACxiB,KAAK,CAACnB,SAAS,CAAC;;EAErE;EACA,IAAIkoB,cAAc,GAAG,EAAE;EACvB,IAAIC,sBAAsB,GAAG,IAAIC,OAAO,CAAC,CAAC;EAC1C,IAAIC,aAAa,GAAGC,iBAAiB,CACnCrmB,MAAM,EACN6lB,sBAAsB,EACtBhqB,SAAS,EACToqB,cAAc,EACdC,sBACF,CAAC;EACD,IAAII,yBAAyB,GAC1Btd,IAAI,CAACwY,SAAS,CAAC4E,aAAa,CAAC,IAAIpd,IAAI,CAACwY,SAAS,CAAC4E,aAAa,CAAC,CAACxmB,MAAM,IAAK,CAAC;EAC9E,IAAI0mB,yBAAyB,GAAGN,iBAAiB,EAAE;IACjDO,sBAAsB,CAACP,iBAAiB,EAAE,WAAW,EAAEhmB,MAAM,CAAC;IAC9D,OAAOnE,SAAS;EAClB;EAEA,OACEoqB,cAAc,CAACrmB,MAAM,GAAG,CAAC,IACzB0mB,yBAAyB,GAAGN,iBAAiB,EAC7C;IACA,IAAIQ,kBAAkB,GAAGP,cAAc,CAACxX,KAAK,CAAC,CAAC;IAC/C,IAAIgY,eAAe,GAAG,CAAC,EAAC;;IAExB;IACA;IACA,IAAIvnB,KAAK,CAACM,OAAO,CAACgnB,kBAAkB,CAACxmB,MAAM,CAAC,EAAE;MAC5C,KAAK,IAAID,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAGymB,kBAAkB,CAACxmB,MAAM,CAACJ,MAAM,EAAEG,GAAG,EAAE,EAAE;QAC/D,IAAI2mB,UAAU,GAAGL,iBAAiB,CAChCG,kBAAkB,CAACxmB,MAAM,CAACD,GAAG,CAAC,EAC9BymB,kBAAkB,CAAC1f,IAAI,EACvB/G,GAAG,EACHkmB,cAAc,EACdC,sBACF,CAAC;QAED,IAAIQ,UAAU,KAAK7qB,SAAS,EAAE;UAC5ByqB,yBAAyB,IAAItd,IAAI,CAACwY,SAAS,CAACkF,UAAU,CAAC,CAAC9mB,MAAM;QAChE,CAAC,MAAM;UACL;UACA;UACA0mB,yBAAyB,IAAI,CAAC;QAChC;QACAA,yBAAyB,IAAIG,eAAe;QAC5CA,eAAe,GAAG,CAAC;QACnB,IAAIH,yBAAyB,GAAGN,iBAAiB,EAAE;UACjDO,sBAAsB,CAACP,iBAAiB,EAAE,WAAW,EAAEhmB,MAAM,CAAC;UAC9D;QACF;QACAwmB,kBAAkB,CAACloB,MAAM,CAACyB,GAAG,CAAC,GAAG2mB,UAAU;MAC7C;IACF,CAAC,MAAM;MACL,KAAK,IAAI3mB,GAAG,IAAIymB,kBAAkB,CAACxmB,MAAM,EAAE;QACzC,IACEjF,MAAM,CAACgD,SAAS,CAACsB,cAAc,CAAC7C,IAAI,CAACgqB,kBAAkB,CAACxmB,MAAM,EAAED,GAAG,CAAC,EACpE;UACA,IAAI2mB,UAAU,GAAGL,iBAAiB,CAChCG,kBAAkB,CAACxmB,MAAM,CAACD,GAAG,CAAC,EAC9BymB,kBAAkB,CAAC1f,IAAI,EACvB/G,GAAG,EACHkmB,cAAc,EACdC,sBACF,CAAC;UACD;UACA;UACA,IAAIQ,UAAU,KAAK7qB,SAAS,EAAE;YAC5ByqB,yBAAyB,IACvBtd,IAAI,CAACwY,SAAS,CAACkF,UAAU,CAAC,CAAC9mB,MAAM,GACjC6mB,eAAe,GACf1mB,GAAG,CAACH,MAAM,GACVkmB,qBAAqB;YACvBW,eAAe,GAAG,CAAC;UACrB;UACA,IAAIH,yBAAyB,GAAGN,iBAAiB,EAAE;YACjDO,sBAAsB,CAACP,iBAAiB,EAAE,WAAW,EAAEhmB,MAAM,CAAC;YAC9D;UACF;UACAwmB,kBAAkB,CAACloB,MAAM,CAACyB,GAAG,CAAC,GAAG2mB,UAAU;QAC7C;MACF;IACF;EACF;;EAEA;EACAjF,4BAA4B,CAAC,CAAC;EAC9BE,2BAA2B,CAAC,CAAC;EAE7B,OAAOyE,aAAa;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA,SAASC,iBAAiBA,CACxBrmB,MAAM,EACN2mB,UAAU,EACV5mB,GAAG,EACH6mB,KAAK,EACLV,sBAAsB,EACtB;EACA;EACA,IAAIW,gBAAgB,GAAGC,gBAAgB,CAAC9mB,MAAM,CAAC;EAE/C,IAAI,CAAC6mB,gBAAgB,IAAI/oB,eAAA,CAAO+oB,gBAAgB,MAAK,QAAQ,EAAE;IAC7D,OAAOE,8BAA8B,CAACF,gBAAgB,CAAC;EACzD;EAEA,IAAIG,eAAe,GAAGC,eAAe,CAACJ,gBAAgB,CAAC;EACvD,IACEG,eAAe,KAAK,UAAU,IAC9BA,eAAe,KAAK,SAAS,IAC7BA,eAAe,KAAK,SAAS,EAC7B;IACA,OAAOA,eAAe;EACxB;;EAEA;EACA;EACA;EACA,IAAIE,cAAc,GAAGlnB,MAAM;EAC3B,IAAIkmB,sBAAsB,CAAC5b,GAAG,CAAC4c,cAAc,CAAC,EAAE;IAC9C,OACE,qBAAqB,GAAGhB,sBAAsB,CAAC7oB,GAAG,CAAC6pB,cAAc,CAAC,GAAG,GAAG;EAE5E;;EAEA;EACA,IAAIC,WAAW,GAAGpnB,GAAG,KAAKlE,SAAS,GAAG8qB,UAAU,GAAG,GAAG,GAAG5mB,GAAG,GAAG4mB,UAAU;EACzE,IAAIroB,MAAM,GAAGY,KAAK,CAACM,OAAO,CAACqnB,gBAAgB,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;EACtDX,sBAAsB,CAAChd,GAAG,CAACge,cAAc,EAAEC,WAAW,CAAC;EACvDP,KAAK,CAACxlB,IAAI,CAAC;IAAEpB,MAAM,EAAE6mB,gBAAgB;IAAEvoB,MAAM,EAANA,MAAM;IAAEwI,IAAI,EAAEqgB;EAAY,CAAC,CAAC;EAEnE,OAAO7oB,MAAM;AACf;;AAEA;AACA;AACA;AACA;AACA,SAASyoB,8BAA8BA,CAAChmB,KAAK,EAAE;EAC7C;EACA,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;IAC7B,OAAO,WAAW,GAAGA,KAAK,CAAC3B,QAAQ,CAAC,CAAC;EACvC;EACA;EACA;EACA,IAAI,OAAO2B,KAAK,KAAK,UAAU,EAAE;IAC/B,OAAO,aAAa,GAAGA,KAAK,CAAC7F,IAAI,IAAI,CAAS;EAChD;EACA;EACA,IAAI4C,eAAA,CAAOiD,KAAK,MAAK,QAAQ,EAAE;IAC7B;IACA,OAAO,WAAW,GAAGA,KAAK,CAACqmB,WAAW,IAAIrmB,CAAgB;EAC5D;EAEA,OAAOA,KAAK;AACd;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASkmB,eAAeA,CAAClmB,KAAK,EAAE;EAC9B,IAAI;IACF;IACA,IAAIA,KAAK,YAAYsmB,KAAK,EAAE;MAC1B,OAAOC,aAAa,CAACvmB,KAAK,CAAC;IAC7B;IACA,IAAIA,KAAK,YAAYsH,MAAM,EAAE;MAC3B,mBAAA5L,MAAA,CAAmBsE,KAAK,CAAC3B,QAAQ,CAAC,CAAC;IACrC;IACA;IACA,IAAIsK,MAAM,GAAG3O,MAAM,CAACgD,SAAS,CAACqB,QAAQ,CAAC5C,IAAI,CAACuE,KAAK,CAAC;IAClD,IAAI0E,KAAK,GAAGiE,MAAM,CAACjE,KAAK,CAAC,iBAAiB,CAAC;IAC3C,IAAIA,KAAK,IAAIA,KAAK,CAAC,CAAC,CAAC,EAAE;MACrB,OAAO,GAAG,GAAGA,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG;IAC7B;EACF,CAAC,CAAC,OAAAsc,OAAA,EAAM;IACN;IACA;EAAA;EAEF,OAAO,kBAAkB;AAC3B;AACA,SAASuF,aAAaA,CAACC,KAAK,EAAE;EAC5B,OAAO;IACL3N,IAAI,EAAE2N,KAAK,CAAC3N,IAAI;IAChB4N,SAAS,EAAED,KAAK,CAACC,SAAS;IAC1BC,aAAa,EAAEF,KAAK,CAACE,aAAa,GAC9BR,eAAe,CAACM,KAAK,CAACE,aAAa,CAAC,GACpC,IAAI;IACRnpB,MAAM,EAAEipB,KAAK,CAACjpB,MAAM,GAAG2oB,eAAe,CAACM,KAAK,CAACjpB,MAAM,CAAC,GAAG;EACzD,CAAC;AACH;AACA;AACA;AACA;AACA;AACA,SAASwoB,gBAAgBA,CAAC/lB,KAAK,EAAE;EAC/B,IAAIZ,MAAM,GAAGY,KAAK;EAClB,IAAIZ,MAAM,IAAI,OAAOA,MAAM,CAAC8hB,MAAM,KAAK,UAAU,EAAE;IACjD,IAAI;MACF,OAAO9hB,MAAM,CAAC8hB,MAAM,CAAC,CAAC;IACxB,CAAC,CAAC,OAAAyF,QAAA,EAAM;MACN;IAAA;EAEJ;EAEA,OAAO3mB,KAAK;AACd;;AAEA;AACA;AACA;AACA,SAASwlB,sBAAsBA,CAACP,iBAAiB,EAAE2B,UAAU,EAAE3nB,MAAM,EAAE;EACrE5E,eAAO,CAACV,IAAI,CACV,6BAA6B,GAC3BitB,UAAU,GACV,8BAA8B,GAC9B3B,iBAAiB,GACjB,cAAc,EAChBhmB,MACF,CAAC;AACH,C;;AC5QoC;AACiC;AACtB;AACE;AACJ;AACtC,IAAI4nB,8BAA8B,GACvC,+CAA+C;AAC1C,IAAIC,sBAAW,GAAG;EACvBC,KAAK,EAAE,OAAO;EACdC,OAAO,EAAE,SAAS;EAClBC,OAAO,EAAE,SAAS;EAClBC,MAAM,EAAE,QAAQ;EAChBjI,MAAM,EAAE,QAAQ;EAChBX,MAAM,EAAE;AACV,CAAC;AAEM,SAAS6I,eAAeA,CAAC5iB,IAAI,EAAE;EACpC,IAAImf,UAAU,GAAGnf,IAAI,CAACmf,UAAU;EAChC,IAAI0D,aAAa,GAAG7iB,IAAI,CAAC6iB,aAAa;EACtC,IAAIC,aAAa,GAAG9iB,IAAI,CAAC8iB,aAAa;EACtC,IAAIC,WAAW,GAAG/iB,IAAI,CAAC+iB,WAAW;EAClC,IAAIC,cAAc,GAAGhjB,IAAI,CAACgjB,cAAc;EACxC,IAAItoB,MAAM,GAAGsF,IAAI,CAACtF,MAAM;EACxB,IAAIuoB,QAAQ,GAAGjjB,IAAI,CAACijB,QAAQ;EAC5B,IAAIC,eAAe,GAAGL,aAAa,YAAYzD,KAAK;EACpD,IAAI1B,OAAO,GAAGyF,cAAc,CAC1BhE,UAAU,EACV+D,eAAe,EACfF,cAAc,EACdH,aACF,CAAC;EACD,IAAI9F,KAAK,GAAGqG,cAAc,CAACF,eAAe,EAAE/D,UAAU,CAAC,GACnDkE,kBAAkB,CAAClE,UAAU,CAAC,GAC9BmD,8BAA8B;EAClC,IAAIgB,MAAM,GAAGJ,eAAe,GACxBK,kBAAkB,CAACV,aAAa,EAAEnoB,MAAM,CAAC,GACzCnE,SAAS;EACb,IAAI+d,IAAI,GAAG6K,UAAU,IAAIA,UAAU,CAACvpB,IAAI;EAExC,OAAO;IACLmtB,WAAW,EAAEA,WAAW;IACxBroB,MAAM,EAAEA,MAAM;IACduoB,QAAQ,EAAEA,QAAQ;IAClBJ,aAAa,EAAEA,aAAa;IAC5BnF,OAAO,EAAEA,OAAO;IAChBX,KAAK,EAAEA,KAAK;IACZ+F,aAAa,EAAEA,aAAa;IAC5BxO,IAAI,EAAEA,IAAI;IACVgP,MAAM,EAAEA;EACV,CAAC;AACH;AACA,SAASH,cAAcA,CACrBhE,UAAU,EACV+D,eAAe,EACfF,cAAc,EACdH,aAAa,EACb;EACA;EACA;EACA,OAAO1D,UAAU,IAAIA,UAAU,CAACzB,OAAO,IAAIyB,UAAU,IAAIA,UAAU,CAACvpB,IAAI,GACpEupB,UAAU,CAACzB,OAAO,GAClB,CAACwF,eAAe,GAChBF,cAAc,GAAG,GAAG,GAAGjH,2BAAa,CAAC0E,QAAQ,CAACoC,aAAa,CAAC,CAAC,GAC7D,eAAe;AACrB;AACA,SAASO,cAAcA,CAACF,eAAe,EAAE/D,UAAU,EAAE;EACnD,IAAIA,UAAU,KAAK5oB,SAAS,EAAE;IAC5B,OAAO,KAAK;EACd;EACA,IAAI2sB,eAAe,EAAE;IACnB,OAAO,IAAI;EACb;EACA;EACA;EACA,OACE/D,UAAU,CAACpC,KAAK,CAACziB,MAAM,GAAG,CAAC,KAC1B6kB,UAAU,CAACpC,KAAK,CAACziB,MAAM,GAAG,CAAC,IAAI6kB,UAAU,CAACpC,KAAK,CAAC,CAAC,CAAC,CAAC7Z,GAAG,KAAK3M,SAAS,CAAC;AAE1E;AAEO,SAASitB,kBAAkBA,CAChCrE,UAAU,EACVsE,WAAW,EACXT,cAAc,EACdF,aAAa,EACb;EACA,IACE,CAAC3D,UAAU,IACVA,UAAU,CAACzB,OAAO,KAAKnnB,SAAS,IAAI,EAAEktB,WAAW,YAAYrE,KAAK,CAAE,EACrE;IACA,OAAO;MACL1B,OAAO,EAAEsF,cAAc,GAAG,EAAE,GAAGjH,aAAa,CAAC0H,WAAW,CAAC;MACzD1G,KAAK,EAAE,+CAA+C;MACtD+F,aAAa,EAAEA,aAAa;MAC5BxO,IAAI,EAAE6K,UAAU,IAAIA,UAAU,CAACvpB;IACjC,CAAC;EACH;EACA,OAAO;IACL8nB,OAAO,EAAEyB,UAAU,CAACzB,OAAO,IAAI,eAAe;IAC9CX,KAAK,EAAEsG,kBAAkB,CAAClE,UAAU,CAAC;IACrC2D,aAAa,EAAEA,aAAa;IAC5BxO,IAAI,EAAE6K,UAAU,CAACvpB;EACnB,CAAC;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS8tB,mBAAmBA,CAAA,EAAG;EACpC;AACF;AACA;AACA;AACA;AACA;EACE,IAAIC,oBAAoB,GAAG,CAAC;EAC5B,IAAItuB,KAAK,GAAG,IAAI+pB,KAAK,CAAC,CAAC;EACvB,IAAIwE,cAAc;;EAElB;EACA,IAAI,CAACvuB,KAAK,CAAC0nB,KAAK,EAAE;IAChB,IAAI;MACF,MAAM1nB,KAAK;IACb,CAAC,CAAC,OAAO0B,CAAC,EAAE;MACVoP,UAAI,CAAC,CAAC;IACR;EACF;EACAzP,aAAa,CAAC,YAAY;IACxB,IAAIyoB,UAAU,GAAGtC,iBAAiB,CAACxnB,KAAK,CAAC;IACzC8pB,UAAU,CAACpC,KAAK,GAAGoC,UAAU,CAACpC,KAAK,CAAC9lB,KAAK,CAAC0sB,oBAAoB,CAAC;IAC/DC,cAAc,GAAGP,kBAAkB,CAAClE,UAAU,CAAC;EACjD,CAAC,CAAC;EAEF,OAAOyE,cAAc;AACvB;AACO,SAASP,kBAAkBA,CAACtG,KAAK,EAAE;EACxC,IAAI3Y,MAAM,GAAGyf,kBAAkB,CAAC9G,KAAK,CAAC;EACtCxlB,UAAI,CAACwlB,KAAK,CAACA,KAAK,EAAE,UAAU+G,KAAK,EAAE;IACjC,IAAIrG,IAAI,GAAGqG,KAAK,CAACrG,IAAI,KAAK,GAAG,GAAG,aAAa,GAAGqG,KAAK,CAACrG,IAAI;IAC1D,IAAI5mB,IAAI,GACNitB,KAAK,CAACjtB,IAAI,IAAIitB,KAAK,CAACjtB,IAAI,CAACyD,MAAM,GAAG,CAAC,GAC/B,GAAG,GAAGwpB,KAAK,CAACjtB,IAAI,CAACoK,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG,GACjC,EAAE;IACR,IAAIkc,IAAI,GAAG2G,KAAK,CAAC3G,IAAI,GAAG,GAAG,GAAG2G,KAAK,CAAC3G,IAAI,GAAG,EAAE;IAC7C,IAAIgB,MAAM,GAAG2F,KAAK,CAAC3G,IAAI,IAAI2G,KAAK,CAAC3F,MAAM,GAAG,GAAG,GAAG2F,KAAK,CAAC3F,MAAM,GAAG,EAAE;IACjE/Z,MAAM,IAAI,SAAS,GAAGqZ,IAAI,GAAG5mB,IAAI,GAAG,KAAK,GAAGitB,KAAK,CAAC5gB,GAAG,GAAGia,IAAI,GAAGgB,MAAM;EACvE,CAAC,CAAC;EACF,OAAO/Z,MAAM;AACf;AACO,SAASyf,kBAAkBA,CAAC9G,KAAK,EAAE;EACxC,OAAO,CAACA,KAAK,CAACnnB,IAAI,IAAI,OAAO,IAAI,IAAI,GAAGmnB,KAAK,CAACW,OAAO;AACvD;AACO,SAASqG,2BAA2BA,CAAChH,KAAK,EAAE;EACjD,IAAIiH,UAAU,GAAG,QAAQ,CAAC5gB,IAAI,CAAC2Z,KAAK,CAAC;EACrC,OAAOiH,UAAU,IAAIA,UAAU,CAAC,CAAC,CAAC;AACpC;AACO,SAAST,kBAAkBA,CAACluB,KAAK,EAAE4uB,YAAY,EAAE;EACtD,IAAIC,YAAY,GAAG7uB,KAAK;EACxB,IAAIiuB,MAAM,GAAG,EAAE;EACf,OACEY,YAAY,IACZA,YAAY,CAACC,KAAK,YAAY/E,KAAK,IACnCkE,MAAM,CAAChpB,MAAM,GAAG,EAAE,EAClB;IACA,IAAI6kB,UAAU,GAAGtC,iBAAiB,CAACqH,YAAY,CAACC,KAAK,CAAC;IACtDb,MAAM,CAACxnB,IAAI,CAAC;MACV4hB,OAAO,EAAEwG,YAAY,CAACC,KAAK,CAACzG,OAAO;MACnChjB,MAAM,EAAEupB,YAAY;MACpB3P,IAAI,EAAE6K,UAAU,IAAIA,UAAU,CAACvpB,IAAI;MACnCmnB,KAAK,EAAEoC,UAAU,IAAIkE,kBAAkB,CAAClE,UAAU;IACpD,CAAC,CAAC;IACF+E,YAAY,GAAGA,YAAY,CAACC,KAAK;EACnC;EACA,OAAOb,MAAM,CAAChpB,MAAM,GAAGgpB,MAAM,GAAG/sB,SAAS;AAC3C,C;;ACjLqD;AACjB;AACK;AACS;AAC3C,SAASkoB,iCAAgBA,CAAC2F,eAAe,EAAEC,MAAM,EAAEC,SAAS,EAAEC,IAAI,EAAE;EACzE,IAAIC,oBAAoB,GAAGD,IAAI,IAAIA,IAAI,CAACC,oBAAoB;EAC5D,IAAItrB,QAAQ,GAAGkrB,eAAe,CAACC,MAAM,CAAC;EAEtC,IAAI,OAAOnrB,QAAQ,KAAK,UAAU,EAAE;IAClC,IAAIsT,UAAU,CAAC6X,MAAM,EAAE,IAAI,CAAC,EAAE;MAC5BnrB,QAAQ,GAAGiN,UAAI;IACjB,CAAC,MAAM;MACL,OAAO;QAAE8I,IAAI,EAAE9I,UAAIA;MAAC,CAAC;IACvB;EACF;EAEA,IAAIse,OAAO,GAAG,KAAK;EAEnB,IAAIC,eAAe,GAAG,SAAlBA,eAAeA,CAAA,EAAe;IAChC,IAAID,OAAO,EAAE;MACX;MACA,OAAOvrB,QAAQ,CAACpC,KAAK,CAAC,IAAI,EAAEH,SAAS,CAAC;IACxC;IAEA,IAAIqoB,UAAU,GAAGlV,SAAS,CAACnT,SAAS,CAAC;IAErC,IAAIguB,gBAAgB;IAEpBjuB,aAAa,CAAC4tB,SAAS,EAAE,IAAI,EAAE,CAC7B;MACEtrB,MAAM,EAAE,IAAI;MACZgmB,UAAU,EAAEA,UAAU;MACtB4F,UAAU,EAAE,SAAZA,UAAUA,CAAY/sB,QAAQ,EAAE;QAC9B8sB,gBAAgB,GAAG9sB,QAAQ;MAC7B,CAAC;MACDirB,aAAa,EAAE0B,oBAAoB,GAAGd,mBAAmB,CAAC,CAAC,GAAGntB;IAChE,CAAC,CACF,CAAC;IAEF,IAAI6N,MAAM,GAAGlL,QAAQ,CAACpC,KAAK,CAAC,IAAI,EAAEkoB,UAAU,CAAC;IAE7C,IAAI2F,gBAAgB,EAAE;MACpBjuB,aAAa,CAACiuB,gBAAgB,EAAE,IAAI,EAAE,CAACvgB,MAAM,CAAC,CAAC;IACjD;;IAEA;IACA,OAAOA,MAAM;EACf,CAAC;EAEDggB,eAAe,CAACC,MAAM,CAAC,GAAGK,eAAe;EAEzC,OAAO;IACLzV,IAAI,EAAE,SAANA,IAAIA,CAAA,EAAc;MAChBwV,OAAO,GAAG,IAAI;MACd;MACA,IAAIL,eAAe,CAACC,MAAM,CAAC,KAAKK,eAAe,EAAE;QAC/CN,eAAe,CAACC,MAAM,CAAC,GAAGnrB,QAAQ;MACpC;IACF;EACF,CAAC;AACH;AAEO,SAAS2rB,gBAAgBA,CAACT,eAAe,EAAE5F,QAAQ,EAAEsG,KAAK,EAAE;EACjE,IAAIC,kBAAkB,GAAGtvB,MAAM,CAACuvB,wBAAwB,CACtDZ,eAAe,EACf5F,QACF,CAAC;EACD,IACE,CAACuG,kBAAkB,IACnB,CAACA,kBAAkB,CAACnhB,GAAG,IACvB,CAACmhB,kBAAkB,CAACrsB,YAAY,EAChC;IACA,OAAO;MAAEuW,IAAI,EAAE9I;IAAK,CAAC;EACvB;EAEA,IAAI8e,sBAAsB,GAAG9e,IAAI;EACjC,IAAI+e,gBAAe,GAAG,SAAlBR,eAAeA,CAAa1rB,MAAM,EAAEyC,KAAK,EAAE;IAC7C;IACApC,UAAU,CAAC,YAAY;MACrB,IAAI6rB,gBAAe,KAAKD,sBAAsB,EAAE;QAC9CH,KAAK,CAAC9rB,MAAM,EAAEyC,KAAK,CAAC;MACtB;IACF,CAAC,EAAE,CAAC,CAAC;EACP,CAAC;EAED,IAAI0pB,sBAAsB,GAAG,SAAzBA,sBAAsBA,CAAa1pB,KAAK,EAAE;IAC5CspB,kBAAkB,CAACnhB,GAAG,CAAC1M,IAAI,CAAC,IAAI,EAAEuE,KAAK,CAAC;IACxCypB,gBAAe,CAAC,IAAI,EAAEzpB,KAAK,CAAC;EAC9B,CAAC;EAEDhG,MAAM,CAACqC,cAAc,CAACssB,eAAe,EAAE5F,QAAQ,EAAE;IAC/C5a,GAAG,EAAEuhB;EACP,CAAC,CAAC;EAEF,OAAO;IACLlW,IAAI,EAAE,SAANA,IAAIA,CAAA,EAAc;MAChB,IACExZ,MAAM,CAACuvB,wBAAwB,CAACZ,eAAe,EAAE5F,QAAQ,CAAC,IAC1D/oB,MAAM,CAACuvB,wBAAwB,CAACZ,eAAe,EAAE5F,QAAQ,CAAC,CAAC5a,GAAG,KAC5DuhB,sBAAsB,EACxB;QACA1vB,MAAM,CAACqC,cAAc,CAACssB,eAAe,EAAE5F,QAAQ,EAAEuG,kBAAkB,CAAC;MACtE;MACAG,gBAAe,GAAGD,sBAAsB;IAC1C;EACF,CAAC;AACH,C;;AC1GmE;AACxB;AACoB;AACJ;AAEpD,SAASG,iBAAiBA,CAACC,eAAe,EAAE;EACjD,OAAO1G,6BAA6B,CAAC,UAAUQ,UAAU,EAAE0D,aAAa,EAAE;IACxEwC,eAAe,CAACC,MAAM,CACpB1C,eAAe,CAAC;MACdzD,UAAU,EAAEA,UAAU;MACtB0D,aAAa,EAAEA,aAAa;MAC5BE,WAAW,EAAElb,eAAS,CAAC,CAAC;MACxBmb,cAAc,EAAEpH,cAAc,CAACC,QAAQ;MACvCnhB,MAAM,EAAE6nB,sBAAW,CAACI,MAAM;MAC1BM,QAAQ,EAAExH,mBAAa,CAACE;IAC1B,CAAC,CACH,CAAC;EACH,CAAC,CAAC;AACJ,C;;AClB2C;AAC3C,IAAI4J,WAAW,GAAG,SAAdA,WAAWA,CAAaC,gBAAgB,EAAE;EAC5C,IAAI,CAACC,SAAS,GAAG,EAAE;EACnB,IAAI,CAACC,iBAAiB,GAAGnvB,SAAS;EAClC,IAAI,CAACivB,gBAAgB,GAAGA,gBAAgB;AAC1C,CAAC;AACDD,WAAW,CAAC9sB,SAAS,GAAG;EACtBktB,SAAS,EAAE,SAAXA,SAASA,CAAYzqB,CAAC,EAAE;IACtB,IAAI,CAACuqB,SAAS,CAAC3pB,IAAI,CAACZ,CAAC,CAAC;IACtB,IAAI,IAAI,CAACuqB,SAAS,CAACnrB,MAAM,KAAK,CAAC,IAAI,IAAI,CAACkrB,gBAAgB,EAAE;MACxD,IAAI,CAACE,iBAAiB,GAAG,IAAI,CAACF,gBAAgB,CAAC,IAAI,CAAC,IAAIjvB,SAAS;IACnE;IACA,IAAI2c,KAAK,GAAG,IAAI;IAChB,OAAO;MACL0S,WAAW,EAAE,SAAbA,WAAWA,CAAA,EAAc;QACvB1S,KAAK,CAACuS,SAAS,GAAG/pB,MAAM,CAACwX,KAAK,CAACuS,SAAS,EAAE,UAAUI,KAAK,EAAE;UACzD,OAAO3qB,CAAC,KAAK2qB,KAAK;QACpB,CAAC,CAAC;QACF,IAAI,CAAC3S,KAAK,CAACuS,SAAS,CAACnrB,MAAM,IAAI4Y,KAAK,CAACwS,iBAAiB,EAAE;UACtDxS,KAAK,CAACwS,iBAAiB,CAAC,CAAC;QAC3B;MACF;IACF,CAAC;EACH,CAAC;EACDJ,MAAM,EAAE,SAARA,MAAMA,CAAYtlB,IAAI,EAAE;IACtBzI,UAAI,CAAC,IAAI,CAACkuB,SAAS,EAAE,UAAUK,QAAQ,EAAE;MACvCA,QAAQ,CAAC9lB,IAAI,CAAC;IAChB,CAAC,CAAC;EACJ;AACF,CAAC;AACM,IAAI+lB,qBAAU,GAAGR,WAAW;AAE5B,SAASS,gBAAgBA,CAAA,EAAG;EACjC,IAAIC,WAAW,GAAG,EAAE,CAAChvB,KAAK,CAACC,IAAI,CAACP,SAAS,CAAC;EAC1C,OAAO,IAAIovB,qBAAU,CAAC,UAAUG,gBAAgB,EAAE;IAChD,IAAIC,aAAa,GAAGpqB,SAAG,CAACkqB,WAAW,EAAE,UAAUG,UAAU,EAAE;MACzD,OAAOA,UAAU,CAACT,SAAS,CAAC,UAAU3lB,IAAI,EAAE;QAC1C,OAAOkmB,gBAAgB,CAACZ,MAAM,CAACtlB,IAAI,CAAC;MACtC,CAAC,CAAC;IACJ,CAAC,CAAC;IACF,OAAO,YAAY;MACjB,OAAOzI,UAAI,CAAC4uB,aAAa,EAAE,UAAUE,YAAY,EAAE;QACjD,OAAOA,YAAY,CAACT,WAAW,CAAC,CAAC;MACnC,CAAC,CAAC;IACJ,CAAC;EACH,CAAC,CAAC;AACJ,C;;AC9C+C;AAMlB;AACsC;AACb;AACe;AACnB;AACD;AACF;AACG;AAClD,IAAIU,uBAAuB,GAAG,CAAC,CAAC;AAEzB,SAASC,qBAAqBA,CAACC,IAAI,EAAE;EAC1C,IAAIC,kBAAkB,GAAG1qB,SAAG,CAACyqB,IAAI,EAAE,UAAUruB,GAAG,EAAE;IAChD,IAAI,CAACmuB,uBAAuB,CAACnuB,GAAG,CAAC,EAAE;MACjCmuB,uBAAuB,CAACnuB,GAAG,CAAC,GAAGuuB,uBAAuB,CAACvuB,GAAG,CAAC;IAC7D;IACA,OAAOmuB,uBAAuB,CAACnuB,GAAG,CAAC;EACrC,CAAC,CAAC;EAEF,OAAO6tB,gBAAgB,CAAClvB,KAAK,CAAC,IAAI,EAAE2vB,kBAAkB,CAAC;AACzD;AACO,SAASE,sBAAsBA,CAAA,EAAG;EACvCL,uBAAuB,GAAG,CAAC,CAAC;AAC9B;AACA;AACA,SAASI,uBAAuBA,CAACvuB,GAAG,EAAE;EACpC,OAAO,IAAI4tB,qBAAU,CAAC,UAAUK,UAAU,EAAE;IAC1C,IAAIQ,kBAAkB,GAAGrxB,OAAO,CAAC4C,GAAG,CAAC;IACrC5C,OAAO,CAAC4C,GAAG,CAAC,GAAG,YAAY;MACzB,IAAI2V,MAAM,GAAG,EAAE,CAAC7W,KAAK,CAACC,IAAI,CAACP,SAAS,CAAC;MACrCiwB,kBAAkB,CAAC9vB,KAAK,CAACvB,OAAO,EAAEoB,SAAS,CAAC;MAC5C,IAAImsB,aAAa,GAAGY,mBAAmB,CAAC,CAAC;MACzChtB,aAAa,CAAC,YAAY;QACxB0vB,UAAU,CAACd,MAAM,CAACuB,eAAe,CAAC/Y,MAAM,EAAE3V,GAAG,EAAE2qB,aAAa,CAAC,CAAC;MAChE,CAAC,CAAC;IACJ,CAAC;IACD,OAAO,YAAY;MACjBvtB,OAAO,CAAC4C,GAAG,CAAC,GAAGyuB,kBAAkB;IACnC,CAAC;EACH,CAAC,CAAC;AACJ;AAEA,SAASC,eAAeA,CAAC/Y,MAAM,EAAE3V,GAAG,EAAE2qB,aAAa,EAAE;EACnD,IAAIpF,OAAO,GAAG3hB,SAAG,CAAC+R,MAAM,EAAE,UAAUgZ,KAAK,EAAE;IACzC,OAAOC,uBAAuB,CAACD,KAAK,CAAC;EACvC,CAAC,CAAC,CAAC7lB,IAAI,CAAC,GAAG,CAAC;EACZ,IAAI5L,KAAK;EACT,IAAI8C,GAAG,KAAKnD,cAAc,CAACK,KAAK,EAAE;IAChC,IAAI2xB,eAAe,GAAGpd,IAAI,CAACkE,MAAM,EAAE,UAAUgZ,KAAK,EAAE;MAClD,OAAOA,KAAK,YAAY1H,KAAK;IAC/B,CAAC,CAAC;IACF/pB,KAAK,GAAG;MACN0nB,KAAK,EAAEiK,eAAe,GAClB3D,kBAAkB,CAACxG,iBAAiB,CAACmK,eAAe,CAAC,CAAC,GACtDzwB,SAAS;MACb+sB,MAAM,EAAE0D,eAAe,GACnBzD,kBAAkB,CAACyD,eAAe,EAAE,SAAS,CAAC,GAC9CzwB,SAAS;MACbwsB,WAAW,EAAElb,eAAS,CAAC,CAAC;MACxB6V,OAAO,EAAEA,OAAO;MAChBhjB,MAAM,EAAE6nB,sBAAW,CAACE,OAAO;MAC3BQ,QAAQ,EAAExH,mBAAa,CAACC,OAAO;MAC/BoH,aAAa,EAAEA;IACjB,CAAC;EACH;EAEA,OAAO;IACL3qB,GAAG,EAAEA,GAAG;IACRulB,OAAO,EAAEA,OAAO;IAChBroB,KAAK,EAAEA,KAAK;IACZytB,aAAa,EAAEA;EACjB,CAAC;AACH;AAEA,SAASiE,uBAAuBA,CAACD,KAAK,EAAE;EACtC,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;IAC7B,OAAOA,KAAK;EACd;EACA,IAAIA,KAAK,YAAY1H,KAAK,EAAE;IAC1B,OAAOyE,kBAAkB,CAAChH,iBAAiB,CAACiK,KAAK,CAAC,CAAC;EACrD;EACA,OAAO/K,2BAAa,CAAC+K,KAAK,EAAEvwB,SAAS,EAAE,CAAC,CAAC;AAC3C,C;;ACvFsC;AACmC;AAC9B;AACpC,SAAS0wB,iCAAgBA,CAACC,WAAW,EAAEjF,KAAK,EAAEkF,QAAQ,EAAE1pB,OAAO,EAAE;EACtE,OAAO2pB,iBAAiB,CAACF,WAAW,EAAE,CAACjF,KAAK,CAAC,EAAEkF,QAAQ,EAAE1pB,OAAO,CAAC;AACnE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO,SAAS2pB,iBAAiBA,CAACF,WAAW,EAAEG,UAAU,EAAEF,QAAQ,EAAE1pB,OAAO,EAAE;EAC5E,IAAI6pB,eAAe,GAAG9wB,OAAO,CAC3BiH,OAAO,IAAIA,OAAO,CAAC8pB,IAAI,GACnB,UAAUtF,KAAK,EAAE;IACfhT,IAAI,CAAC,CAAC;IACNkY,QAAQ,CAAClF,KAAK,CAAC;EACjB,CAAC,GACDkF,QACN,CAAC;EACD1pB,OAAO,GACLA,OAAO,IAAIA,OAAO,CAAC+pB,OAAO,GACtB;IAAEC,OAAO,EAAEhqB,OAAO,CAACgqB,OAAO;IAAED,OAAO,EAAE/pB,OAAO,CAAC+pB;EAAQ,CAAC,GACtD/pB,OAAO,IAAIA,OAAO,CAACgqB,OAAO;EAChC;EACA,IAAMC,cAAc,GAClB5uB,MAAM,CAAC6uB,WAAW,IAAIT,WAAW,YAAYS,WAAW,GACpD7uB,MAAM,CAAC6uB,WAAW,CAAClvB,SAAS,GAC5ByuB,WAAW;EACjB,IAAIjiB,GAAG,GAAGlM,sBAAsB,CAAC2uB,cAAc,EAAE,kBAAkB,CAAC;EAEpEnwB,UAAI,CAAC8vB,UAAU,EAAE,UAAUO,SAAS,EAAE;IACpC3iB,GAAG,CAAC/N,IAAI,CAACgwB,WAAW,EAAEU,SAAS,EAAEN,eAAe,EAAE7pB,OAAO,CAAC;EAC5D,CAAC,CAAC;EACF,IAAIwR,IAAI,GAAG,SAAPA,IAAIA,CAAA,EAAe;IACrB,IAAInL,MAAM,GAAG/K,sBAAsB,CAAC2uB,cAAc,EAAE,qBAAqB,CAAC;IAC1EnwB,UAAI,CAAC8vB,UAAU,EAAE,UAAUO,SAAS,EAAE;MACpC9jB,MAAM,CAAC5M,IAAI,CAACgwB,WAAW,EAAEU,SAAS,EAAEN,eAAe,EAAE7pB,OAAO,CAAC;IAC/D,CAAC,CAAC;EACJ,CAAC;EACD,OAAO;IACLwR,IAAI,EAAEA;EACR,CAAC;AACH,C;;ACvDyD;AACU;AAQ3C;AACsC;AACnB;AACA;AACpC,IAAI4Y,aAAa,GAAG;EACzBC,YAAY,EAAE,cAAc;EAC5BC,WAAW,EAAE,aAAa;EAC1BC,YAAY,EAAE;AAChB,CAAC;AACM,SAASC,oBAAoBA,CAACC,aAAa,EAAE1B,IAAI,EAAE;EACxD,IAAIP,WAAW,GAAG,EAAE;EAEpB,IAAIvc,QAAQ,CAAC8c,IAAI,EAAEqB,aAAa,CAACG,YAAY,CAAC,EAAE;IAC9C/B,WAAW,CAACnqB,IAAI,CAACqsB,kCAAkC,CAACD,aAAa,CAAC,CAAC;EACrE;EAEA,IAAIE,WAAW,GAAG1sB,MAAM,CAAC8qB,IAAI,EAAE,UAAUruB,GAAG,EAAE;IAC5C,OAAOA,GAAG,KAAK0vB,aAAa,CAACG,YAAY;EAC3C,CAAC,CAAC;EACF,IAAII,WAAW,CAAC9tB,MAAM,EAAE;IACtB2rB,WAAW,CAACnqB,IAAI,CAACusB,sBAAsB,CAACD,WAAW,CAAC,CAAC;EACvD;EACA,OAAOpC,gBAAgB,CAAClvB,KAAK,CAAC,IAAI,EAAEmvB,WAAW,CAAC;AAClD;AAEA,SAASoC,sBAAsBA,CAACD,WAAW,EAAE;EAC3C,OAAO,IAAIrC,qBAAU,CAAC,UAAUK,UAAU,EAAE;IAC1C,IAAI,CAACttB,MAAM,CAACwvB,iBAAiB,EAAE;MAC7B;IACF;IAEA,IAAIC,aAAa,GAAG/xB,OAAO,CAAC,UAAUgyB,OAAO,EAAE;MAC7CjxB,UAAI,CAACixB,OAAO,EAAE,UAAUC,MAAM,EAAE;QAC9BrC,UAAU,CAACd,MAAM,CAACoD,6BAA6B,CAACD,MAAM,CAAC,CAAC;MAC1D,CAAC,CAAC;IACJ,CAAC,CAAC;IAEF,IAAI3C,QAAQ,GAAG,IAAIhtB,MAAM,CAACwvB,iBAAiB,CAACC,aAAa,EAAE;MACzDI,KAAK,EAAEP,WAAW;MAClBQ,QAAQ,EAAE;IACZ,CAAC,CAAC;IAEF9C,QAAQ,CAAC+C,OAAO,CAAC,CAAC;IAClB,OAAO,YAAY;MACjB/C,QAAQ,CAACgD,UAAU,CAAC,CAAC;IACvB,CAAC;EACH,CAAC,CAAC;AACJ;AAEA,SAASX,kCAAkCA,CAACD,aAAa,EAAE;EACzD,OAAO,IAAInC,qBAAU,CAAC,UAAUK,UAAU,EAAE;IAC1C,IAAI2C,iBAAiB,GAAG9B,iCAAgB,CACtCzb,QAAQ,EACR0L,SAAS,CAACgC,yBAAyB,EACnC,UAAU+I,KAAK,EAAE;MACfmE,UAAU,CAACd,MAAM,CAAC0D,mCAAmC,CAAC/G,KAAK,CAAC,CAAC;IAC/D,CACF,CAAC;IAED,OAAO8G,iBAAiB,CAAC9Z,IAAI;EAC/B,CAAC,CAAC;AACJ;AAEA,SAASyZ,6BAA6BA,CAACD,MAAM,EAAE;EAC7C,IAAIQ,IAAI,GAAGR,MAAM,CAACQ,IAAI;EACtB,IAAI3U,IAAI,GAAGmU,MAAM,CAACnU,IAAI;EACtB,OAAO4U,mBAAmB,CAAC;IACzB5U,IAAI,EAAE2U,IAAI,CAACE,EAAE;IACbzL,OAAO,EAAEpJ,IAAI,GAAG,IAAI,GAAG2U,IAAI,CAACvL,OAAO;IACnCmF,aAAa,EAAE4F,MAAM;IACrB1L,KAAK,EAAEqM,UAAU,CACfH,IAAI,CAACE,EAAE,EACPF,IAAI,CAACvL,OAAO,EACZuL,IAAI,CAACI,UAAU,EACfJ,IAAI,CAACK,UAAU,EACfL,IAAI,CAACM,YACP;EACF,CAAC,CAAC;AACJ;AACA,SAASL,mBAAmBA,CAACM,OAAO,EAAE;EACpC,OAAOhyB,YAAM,CACX;IACEurB,WAAW,EAAElb,eAAS,CAAC,CAAC;IACxBnN,MAAM,EAAE6nB,WAAW,CAACkH,MAAM;IAC1BxG,QAAQ,EAAExH,aAAa,CAACE;EAC1B,CAAC,EACD6N,OACF,CAAC;AACH;AACA,SAASR,mCAAmCA,CAAC/G,KAAK,EAAE;EAClD,IAAIvE,OAAO,GACT,GAAG,GACHuE,KAAK,CAACyH,UAAU,GAChB,gBAAgB,GAChBzH,KAAK,CAAC0H,kBAAkB,GACxB,aAAa;EACf,OAAOT,mBAAmB,CAAC;IACzB5U,IAAI,EAAE2N,KAAK,CAAC0H,kBAAkB;IAC9BjM,OAAO,EAAEmK,aAAa,CAACG,YAAY,GAAG,IAAI,GAAGtK,OAAO;IACpDmF,aAAa,EAAEZ,KAAK;IACpB2H,GAAG,EAAE;MACHC,WAAW,EAAE5H,KAAK,CAAC4H;IACrB,CAAC;IACD9M,KAAK,EAAEqM,UAAU,CACfnH,KAAK,CAAC0H,kBAAkB,EACxB1H,KAAK,CAAC6H,cAAc,MAAA3yB,MAAA,CACbumB,OAAO,uBAAAvmB,MAAA,CAAmBiS,YAAY,CACvC6Y,KAAK,CAAC6H,cAAc,EACpB,GAAG,EACH,KACF,CAAC,UACD,WAAW,EACf7H,KAAK,CAACoH,UAAU,EAChBpH,KAAK,CAACqH,UAAU,EAChBrH,KAAK,CAACsH,YACR;EACF,CAAC,CAAC;AACJ;AAEA,SAASH,UAAUA,CAACxzB,IAAI,EAAE8nB,OAAO,EAAE2L,UAAU,EAAEC,UAAU,EAAEC,YAAY,EAAE;EACvE,OACEF,UAAU,IACVhG,kBAAkB,CAAC;IACjBztB,IAAI,EAAEA,IAAI;IACV8nB,OAAO,EAAEA,OAAO;IAChBX,KAAK,EAAE,CACL;MACEU,IAAI,EAAE,GAAG;MACTva,GAAG,EAAEmmB,UAAU;MACflM,IAAI,EAAEmM,UAAU;MAChBnL,MAAM,EAAEoL;IACV,CAAC;EAEL,CAAC,CAAC;AAEN,C;;AChJsC;AAC/B,IAAIQ,kBAAkB,GAAG;EAC9BC,qBAAqB,EAAE,uBAAuB;EAC9CC,mBAAmB,EAAE,qBAAqB;EAC1CC,YAAY,EAAE,cAAc;EAC5BC,YAAY,EAAE,cAAc;EAC5BC,mBAAmB,EAAE,qBAAqB;EAC1CC,UAAU,EAAE,YAAY;EACxBC,gBAAgB,EAAE,kBAAkB;EACpCC,eAAe,EAAE,iBAAiB;EAClCC,eAAe,EAAE,iBAAiB;EAClCC,WAAW,EAAE,aAAa;EAC1BC,eAAe,EAAE,iBAAiB;EAClCC,iBAAiB,EAAE,mBAAmB;EACtCC,uBAAuB,EAAE,yBAAyB;EAClDC,mBAAmB,EAAE,qBAAqB;EAC1CC,mBAAmB,EAAE,qBAAqB;EAC1CC,iBAAiB,EAAE,mBAAmB;EACtCC,aAAa,EAAE;AACjB,CAAC;AACM,SAASC,SAASA,CAAA,EAAG;EAC1B,IAAI,CAACC,SAAS,GAAG,CAAC,CAAC;AACrB;AACAD,SAAS,CAACxyB,SAAS,GAAG;EACpB6sB,MAAM,EAAE,SAARA,MAAMA,CAAY6F,SAAS,EAAEnrB,IAAI,EAAE;IACjC,IAAIorB,cAAc,GAAG,IAAI,CAACF,SAAS,CAACC,SAAS,CAAC;IAC9C,IAAIC,cAAc,EAAE;MAClB7zB,UAAI,CAAC6zB,cAAc,EAAE,UAAUvzB,QAAQ,EAAE;QACvCA,QAAQ,CAACmI,IAAI,CAAC;MAChB,CAAC,CAAC;IACJ;EACF,CAAC;EACD2lB,SAAS,EAAE,SAAXA,SAASA,CAAYwF,SAAS,EAAEtzB,QAAQ,EAAE;IACxC,IAAI,CAAC,IAAI,CAACqzB,SAAS,CAACC,SAAS,CAAC,EAAE;MAC9B,IAAI,CAACD,SAAS,CAACC,SAAS,CAAC,GAAG,EAAE;IAChC;IACA,IAAI,CAACD,SAAS,CAACC,SAAS,CAAC,CAACrvB,IAAI,CAACjE,QAAQ,CAAC;IACxC,IAAIqb,KAAK,GAAG,IAAI;IAChB,OAAO;MACL0S,WAAW,EAAE,SAAbA,WAAWA,CAAA,EAAc;QACvB1S,KAAK,CAACgY,SAAS,CAACC,SAAS,CAAC,GAAGzvB,MAAM,CACjCwX,KAAK,CAACgY,SAAS,CAACC,SAAS,CAAC,EAC1B,UAAUtF,KAAK,EAAE;UACf,OAAOA,KAAK,KAAKhuB,QAAQ;QAC3B,CACF,CAAC;MACH;IACF,CAAC;EACH;AACF,CAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjD0D;AACtB;AAE9B,SAASwzB,iBAAiBA,CAACxwB,MAAM,EAAEywB,oBAAoB,EAAEC,QAAQ,EAAE;EACxE,IAAMC,KAAK,GAAGzlB,SAAS,CAAClL,MAAM,CAAC;EAC/B,IAAMuJ,MAAM,GAAGmnB,QAAQ,CAACC,KAAK,CAAC;EAE9B7uB,aAAa,CAAC2uB,oBAAoB,CAAC,CAAC31B,OAAO,CAAC,UAAA81B,IAAA;IAAA,IAAAC,KAAA,GAAAC,cAAA,CAAAF,IAAA;MAAEG,SAAS,GAAAF,KAAA;MAAEG,SAAS,GAAAH,KAAA;IAAA;MAChE;MACAI,cAAc,CAACjxB,MAAM,EAAE2wB,KAAK,EAAEI,SAAS,CAACvnB,KAAK,CAAC,aAAa,CAAC,EAAEwnB,SAAS;IAAA;EAAC,CAC1E,CAAC;EAED,OAAOznB,MAAM;AACf;AAEA,SAAS0nB,cAAcA,CAACjxB,MAAM,EAAE2wB,KAAK,EAAEO,YAAY,EAAEF,SAAS,EAAE;EAC9D,IAAAG,aAAA,GAAAC,QAAA,CAAqCF,YAAY;IAA1CG,KAAK,GAAAF,aAAA;IAAKG,gBAAgB,GAAAH,aAAA,CAAA/0B,KAAA;EAEjC,IAAIi1B,KAAK,KAAK,IAAI,EAAE;IAClB,IAAItyB,KAAK,CAACM,OAAO,CAACW,MAAM,CAAC,IAAIjB,KAAK,CAACM,OAAO,CAACsxB,KAAK,CAAC,EAAE;MACjD3wB,MAAM,CAAClF,OAAO,CAAC,UAAC6T,IAAI,EAAEjP,CAAC;QAAA,OACrBuxB,cAAc,CAACtiB,IAAI,EAAEgiB,KAAK,CAACjxB,CAAC,CAAC,EAAE4xB,gBAAgB,EAAEN,SAAS,CAAC;MAAA,CAC7D,CAAC;IACH;IAEA;EACF;EAEA,IAAI,CAACO,aAAa,CAACvxB,MAAM,CAAC,IAAI,CAACuxB,aAAa,CAACZ,KAAK,CAAC,EAAE;IACnD;EACF;EAEA,IAAIW,gBAAgB,CAAC7xB,MAAM,GAAG,CAAC,EAAE;IAC/B,OAAOwxB,cAAc,CACnBjxB,MAAM,CAACqxB,KAAK,CAAC,EACbV,KAAK,CAACU,KAAK,CAAC,EACZC,gBAAgB,EAChBN,SACF,CAAC;EACH;EAEAQ,cAAc,CAACxxB,MAAM,EAAEqxB,KAAK,EAAEV,KAAK,CAACU,KAAK,CAAC,EAAEL,SAAS,CAAC;AACxD;AAEA,SAASQ,cAAcA,CAACxxB,MAAM,EAAEqxB,KAAK,EAAEzwB,KAAK,EAAEowB,SAAS,EAAE;EACvD,IAAMS,OAAO,GAAGnnB,OAAO,CAAC1J,KAAK,CAAC;EAE9B,IAAI6wB,OAAO,KAAKT,SAAS,EAAE;IACzBhxB,MAAM,CAACqxB,KAAK,CAAC,GAAGzL,QAAQ,CAAChlB,KAAK,CAAC;EACjC,CAAC,MAAM,IACLowB,SAAS,KAAK,QAAQ,KACrBS,OAAO,KAAK,WAAW,IAAIA,OAAO,KAAK,MAAM,CAAC,EAC/C;IACAzxB,MAAM,CAACqxB,KAAK,CAAC,GAAG,CAAC,CAAC;EACpB;AACF;AAEA,SAASE,aAAaA,CAACvxB,MAAM,EAAE;EAC7B,OAAOsK,OAAO,CAACtK,MAAM,CAAC,KAAK,QAAQ;AACrC,C;;AC3D0C;AACK;AACX;AAC7B,SAAS0xB,sBAAsBA,CAACpB,SAAS,EAAEqB,KAAK,EAAEC,cAAc,EAAE;EACvE,IAAIC,UAAU,GAAG,CAAC;EAClB,IAAIC,cAAc,GAAG,KAAK;EAC1B,OAAO;IACLC,cAAc,EAAE,SAAhBA,cAAcA,CAAA,EAAc;MAC1B,IAAIF,UAAU,KAAK,CAAC,EAAE;QACpBrzB,gBAAU,CAAC,YAAY;UACrBqzB,UAAU,GAAG,CAAC;QAChB,CAAC,EAAErmB,UAAU,CAAC;MAChB;MACAqmB,UAAU,IAAI,CAAC;MACf,IAAIA,UAAU,IAAIF,KAAK,IAAIG,cAAc,EAAE;QACzCA,cAAc,GAAG,KAAK;QACtB,OAAO,KAAK;MACd;MACA,IAAID,UAAU,KAAKF,KAAK,GAAG,CAAC,EAAE;QAC5BG,cAAc,GAAG,IAAI;QACrB,IAAI;UACFF,cAAc,CAAC;YACb/O,OAAO,EACL,wBAAwB,GAAGyN,SAAS,GAAG,eAAe,GAAGqB,KAAK;YAChE9xB,MAAM,EAAE6nB,sBAAW,CAACC,KAAK;YACzBO,WAAW,EAAElb,eAAS,CAAC;UACzB,CAAC,CAAC;QACJ,CAAC,SAAS;UACR8kB,cAAc,GAAG,KAAK;QACxB;MACF;MACA,OAAO,IAAI;IACb;EACF,CAAC;AACH,C;;AClCiE;AAE1D,SAASE,wBAAYA,CAAC3pB,GAAG,EAAE;EAChC,OAAO4pB,QAAQ,CAAC5pB,GAAG,EAAEkH,iBAAiB,CAAC,CAAC,CAAC,CAAC2iB,IAAI;AAChD;AAEO,SAASC,UAAUA,CAAC9pB,GAAG,EAAE;EAC9B,IAAI;IACF,OAAO,CAAC,CAAC4pB,QAAQ,CAAC5pB,GAAG,CAAC;EACxB,CAAC,CAAC,OAAOnM,CAAC,EAAE;IACV,OAAO,KAAK;EACd;AACF;;AAEA;AACA;AACA;;AAEO,SAASk2B,qBAASA,CAAC/pB,GAAG,EAAE;EAC7B,OAAOmH,oBAAoB,CAACyiB,QAAQ,CAAC5pB,GAAG,CAAC,CAAC;AAC5C;AAEO,SAASgqB,WAAWA,CAAChqB,GAAG,EAAE;EAC/B,IAAIiqB,QAAQ,GAAGL,QAAQ,CAAC5pB,GAAG,CAAC,CAACiqB,QAAQ;EACrC,OAAOA,QAAQ,CAAC,CAAC,CAAC,KAAK,GAAG,GAAGA,QAAQ,GAAG,GAAG,GAAGA,QAAQ;AACxD;AAEO,SAASC,SAASA,CAAClqB,GAAG,EAAE;EAC7B,OAAO4pB,QAAQ,CAAC5pB,GAAG,CAAC,CAACyG,MAAM;AAC7B;AAEO,SAAS0jB,OAAOA,CAACnqB,GAAG,EAAE;EAC3B,OAAO4pB,QAAQ,CAAC5pB,GAAG,CAAC,CAAC0J,IAAI;AAC3B;AAEO,SAASkgB,QAAQA,CAAC5pB,GAAG,EAAEoqB,IAAI,EAAE;EAClC,IAAIC,iBAAiB,CAAC,CAAC,EAAE;IACvB,OAAOD,IAAI,KAAK/2B,SAAS,GAAG,IAAI6L,GAAG,CAACc,GAAG,EAAEoqB,IAAI,CAAC,GAAG,IAAIlrB,GAAG,CAACc,GAAG,CAAC;EAC/D;EACA,IAAIoqB,IAAI,KAAK/2B,SAAS,IAAI,CAAC,GAAG,CAAC4E,IAAI,CAAC+H,GAAG,CAAC,EAAE;IACxC,MAAM,IAAIkc,KAAK,CAAC,eAAe,GAAGlc,GAAG,CAAC;EACxC;EACA,IAAIsqB,GAAG,GAAGhiB,QAAQ;EAClB,IAAIiiB,aAAa,GAAGD,GAAG,CAACE,aAAa,CAAC,GAAG,CAAC;EAC1C,IAAIJ,IAAI,KAAK/2B,SAAS,EAAE;IACtBi3B,GAAG,GAAGhiB,QAAQ,CAACmiB,cAAc,CAACC,kBAAkB,CAAC,EAAE,CAAC;IACpD,IAAIC,WAAW,GAAGL,GAAG,CAACE,aAAa,CAAC,MAAM,CAAC;IAC3CG,WAAW,CAACd,IAAI,GAAGO,IAAI;IACvBE,GAAG,CAACM,IAAI,CAACC,WAAW,CAACF,WAAW,CAAC;IACjCL,GAAG,CAACvE,IAAI,CAAC8E,WAAW,CAACN,aAAa,CAAC;EACrC;EACAA,aAAa,CAACV,IAAI,GAAG7pB,GAAG;EACxB,OAAOuqB,aAAa;AACtB;AAEA,IAAIO,cAAc;AAClB,SAAST,iBAAiBA,CAAA,EAAG;EAC3B,IAAIS,cAAc,KAAKz3B,SAAS,EAAE;IAChC,OAAOy3B,cAAc;EACvB;EACA,IAAI;IACF,IAAI9qB,GAAG,GAAG,IAAId,GAAG,CAAC,kBAAkB,CAAC;IACrC4rB,cAAc,GAAG9qB,GAAG,CAAC6pB,IAAI,KAAK,kBAAkB;IAChD,OAAOiB,cAAc;EACvB,CAAC,CAAC,OAAOj3B,CAAC,EAAE;IACVi3B,cAAc,GAAG,KAAK;EACxB;EACA,OAAOA,cAAc;AACvB,C;;ACpEO,IAAI5iB,SAAS,GAAGC,SAAS,CAACD,SAAS,CAACiB,WAAW,CAAC,CAAC;AACjD,IAAI4hB,SAAS,GAAG,SAAZA,SAASA,CAAA,EAAe;EACjC,OAAO,SAAS,CAAC9yB,IAAI,CAACiQ,SAAS,CAAC;AAClC,CAAC;AACM,IAAI8iB,KAAK,GAAG,SAARA,KAAKA,CAAA,EAAe;EAC7B,OAAO,WAAW,CAAC/yB,IAAI,CAACiQ,SAAS,CAAC;AACpC,CAAC;AAED,IAAI+iB,QAAQ,GAAG,SAAXA,QAAQA,CAAA,EAAe;EACzB,IAAI,CAACC,MAAM,GAAGt1B,MAAM,CAAC,2BAA2B,CAAC;EACjD,IAAI,CAACu1B,OAAO,GAAG,CAAC,CAAC;EACjBv1B,MAAM,CAACw1B,kBAAkB,GAAG,CAAC,CAAC;EAC9B,IAAI;IACF,IAAI,CAACC,UAAU,CAAC,CAAC;EACnB,CAAC,CAAC,OAAOj3B,GAAG,EAAE,CAAC;AACjB,CAAC;AACD62B,QAAQ,CAAC11B,SAAS,GAAG;EACnB81B,UAAU,EAAE,SAAZA,UAAUA,CAAA,EAAc;IACtB,IAAIrb,KAAK,GAAG,IAAI;IAChB,IAAIgb,KAAK,CAAC,CAAC,EAAE;MACX,IAAI,CAAChb,KAAK,CAACkb,MAAM,EAAE;QACjB,IAAIt1B,MAAM,CAAC01B,aAAa,EAAE;UACxB11B,MAAM,CAAC01B,aAAa,CAAC1yB,IAAI,CAAC,UAAUsyB,MAAM,EAAE;YAC1Clb,KAAK,CAACkb,MAAM,GAAGA,MAAM;UACvB,CAAC,CAAC;UACF;QACF,CAAC,MAAM;UACLt1B,MAAM,CAAC01B,aAAa,GAAG,CACrB,UAAUJ,MAAM,EAAE;YAChBlb,KAAK,CAACkb,MAAM,GAAGA,MAAM;YACrB;UACF,CAAC,CACF;UACD,IAAIK,UAAU,GAAGjjB,QAAQ,CAACkiB,aAAa,CAAC,QAAQ,CAAC;UACjDe,UAAU,CAACC,KAAK,CAAC54B,OAAO,GAAG,MAAM;UACjC24B,UAAU,CAACE,GAAG,GAAG,gCAAgC;UACjDnjB,QAAQ,CAACojB,eAAe,CAACb,WAAW,CAACU,UAAU,CAAC;UAChDp1B,UAAU,CAAC,YAAY;YACrBmS,QAAQ,CAACojB,eAAe,CAACC,WAAW,CAACJ,UAAU,CAAC;UAClD,CAAC,EAAE,CAAC,CAAC;QACP;MACF;IACF;EACF,CAAC;EACDK,SAAS,EAAE,SAAXA,SAASA,CAAYhhB,MAAM,EAAEjW,QAAQ,EAAE;IACrC,IAAI,OAAOiW,MAAM,KAAK,WAAW,EAAE;MACjCA,MAAM,GAAG,CAAC,CAAC;IACb;IACA,IAAIoF,KAAK,GAAG,IAAI;IAChB,IAAI6b,GAAG,GAAG,YAAY,GAAG,IAAIxpB,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC;IAC7C,IAAIsI,MAAM,CAAClY,IAAI,EAAE;MACfsd,KAAK,CAACmb,OAAO,CAACvgB,MAAM,CAAClY,IAAI,CAAC,GAAGm5B,GAAG;MAChCj2B,MAAM,CAACw1B,kBAAkB,CAACS,GAAG,CAAC,GAAG,UAAUnzB,GAAG,EAAEtE,GAAG,EAAE;QACnD,OAAO03B,OAAO,CAACC,OAAO,CAACrzB,GAAG,EAAEtE,GAAG,CAAC;MAClC,CAAC;MACDwW,MAAM,CAAC,MAAM,CAAC,GAAGihB,GAAG;MACpB,IAAI;QACF,IAAIb,KAAK,CAAC,CAAC,EAAE;UACXhb,KAAK,CAACkb,MAAM,CAACc,WAAW,CACtB,WAAW,EACXxrB,IAAI,CAACwY,SAAS,CAACpO,MAAM,CAAC,EACtB,oBACF,CAAC;QACH,CAAC,MAAM;UACLoF,KAAK,CAACkb,MAAM,CAACU,SAAS,CAACprB,IAAI,CAACwY,SAAS,CAACpO,MAAM,CAAC,EAAE,oBAAoB,CAAC;QACtE;MACF,CAAC,CAAC,OAAOxW,GAAG,EAAE,CAAC;IACjB,CAAC,MAAM;MACLO,QAAQ,CAAC;QAAExC,KAAK,EAAE;MAAe,CAAC,CAAC;IACrC;EACF,CAAC;EACD4xB,gBAAgB,EAAE,SAAlBA,gBAAgBA,CAAYnZ,MAAM,EAAEjW,QAAQ,EAAE;IAC5C,IAAIk3B,GAAG,GAAG,YAAY,GAAG,IAAIxpB,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC;IAC7C,IAAI0N,KAAK,GAAG,IAAI;IAChB,IAAIpF,MAAM,CAAClY,IAAI,EAAE;MACfsd,KAAK,CAACmb,OAAO,CAACvgB,MAAM,CAAClY,IAAI,CAAC,GAAGm5B,GAAG;MAChCj2B,MAAM,CAACw1B,kBAAkB,CAACS,GAAG,CAAC,GAAG,UAAUnzB,GAAG,EAAEtE,GAAG,EAAE;QACnDO,QAAQ,CAAC+D,GAAG,EAAEtE,GAAG,CAAC;QAClB;MACF,CAAC;MACDwW,MAAM,CAAC,MAAM,CAAC,GAAGihB,GAAG;MACpB,IAAI;QACF,IAAIb,KAAK,CAAC,CAAC,EAAE;UACXhb,KAAK,CAACkb,MAAM,CAACc,WAAW,CACtB,kBAAkB,EAClBxrB,IAAI,CAACwY,SAAS,CAACpO,MAAM,CAAC,EACtB,oBACF,CAAC;QACH,CAAC,MAAM;UACLoF,KAAK,CAACkb,MAAM,CAACnH,gBAAgB,CAC3BvjB,IAAI,CAACwY,SAAS,CAACpO,MAAM,CAAC,EACtB,oBACF,CAAC;QACH;MACF,CAAC,CAAC,OAAOxW,GAAG,EAAE,CAAC;IACjB,CAAC,MAAM;MACLO,QAAQ,CAAC;QAAExC,KAAK,EAAE;MAAe,CAAC,CAAC;IACrC;EACF;AACF,CAAC;AAEM,IAAI84B,QAAQ,GAAGA,QAAQ,C;;ACrGoB;AACf;AACF;;AAEjC;AACA;AACA;AACO,SAASgB,mBAAmBA,CAACt3B,QAAQ,EAAE0sB,IAAI,EAAE;EAClD;EACA,IAAIzrB,MAAM,CAACq2B,mBAAmB,IAAIr2B,MAAM,CAACs2B,kBAAkB,EAAE;IAC3D,IAAMjG,EAAE,GAAGrwB,MAAM,CAACq2B,mBAAmB,CAAC34B,OAAO,CAACqB,QAAQ,CAAC,EAAE0sB,IAAI,CAAC;IAC9D,OAAO,YAAY;MACjB,OAAOzrB,MAAM,CAACs2B,kBAAkB,CAACjG,EAAE,CAAC;IACtC,CAAC;EACH;EACA,OAAOkG,uBAAuB,CAACx3B,QAAQ,CAAC;AAC1C;AAEO,IAAMy3B,aAAa,GAAG,EAAE;;AAE/B;AACA;AACA;AACA;AACO,SAASD,uBAAuBA,CAACx3B,QAAQ,EAAE;EAChD,IAAM2H,KAAK,GAAGyI,OAAO,CAAC,CAAC;EACvB,IAAMzO,SAAS,GAAGH,gBAAU,CAAC,YAAY;IACvCxB,QAAQ,CAAC;MACP03B,UAAU,EAAE,KAAK;MACjBC,aAAa,EAAE,SAAfA,aAAaA,CAAA,EAAc;QACzB,OAAOnuB,IAAI,CAACouB,GAAG,CAAC,CAAC,EAAEH,aAAa,IAAIrnB,OAAO,CAAC,CAAC,GAAGzI,KAAK,CAAC,CAAC;MACzD;IACF,CAAC,CAAC;EACJ,CAAC,EAAE,CAAC,CAAC;EACL,OAAO,YAAY;IACjB,OAAOjG,kBAAY,CAACC,SAAS,CAAC;EAChC,CAAC;AACH,C;;ACrCoC;AACuB;;AAE3D;AACA;AACA;AACA;AACA;AACA;AACA,IAAMk2B,qBAAqB,GAAGtpB,UAAU;;AAExC;AACA;AACA;AACA;AACA;AACA;AACA;AACO,IAAMupB,6BAA6B,GAAG,EAAE;AAExC,SAASC,eAAeA,CAAA,EAAG;EAChC,IAAMC,YAAY,GAAG,EAAE;EAEvB,SAASC,GAAGA,CAACC,QAAQ,EAAE;IACrB,IAAIC,sBAAsB;IAC1B,IAAID,QAAQ,CAACR,UAAU,EAAE;MACvB,IAAM/vB,KAAK,GAAGmI,WAAW,CAACC,GAAG,CAAC,CAAC;MAC/BooB,sBAAsB,GAAG,SAAzBA,sBAAsBA,CAAA,EAAe;QACnC,OAAOL,6BAA6B,IAAIhoB,WAAW,CAACC,GAAG,CAAC,CAAC,GAAGpI,KAAK,CAAC;MACpE,CAAC;IACH,CAAC,MAAM;MACLwwB,sBAAsB,GAAGD,QAAQ,CAACP,aAAa,CAACz5B,IAAI,CAACg6B,QAAQ,CAAC;IAChE;IAEA,OAAOC,sBAAsB,CAAC,CAAC,GAAG,CAAC,IAAIH,YAAY,CAACv1B,MAAM,EAAE;MAC1Du1B,YAAY,CAAC1mB,KAAK,CAAC,CAAC,CAAC,CAAC;IACxB;IAEA,IAAI0mB,YAAY,CAACv1B,MAAM,EAAE;MACvB21B,eAAe,CAAC,CAAC;IACnB;EACF;EAEA,SAASA,eAAeA,CAAA,EAAG;IACzBd,mBAAmB,CAACW,GAAG,EAAE;MAAEI,OAAO,EAAER;IAAsB,CAAC,CAAC;EAC9D;EAEA,OAAO;IACL5zB,IAAI,EAAE,SAANA,IAAIA,CAAY8R,IAAI,EAAE;MACpB,IAAIiiB,YAAY,CAAC/zB,IAAI,CAAC8R,IAAI,CAAC,KAAK,CAAC,EAAE;QACjCqiB,eAAe,CAAC,CAAC;MACnB;IACF;EACF,CAAC;AACH,C;;ACtD6D;AAC7D,IAAIE,UAAU,GAAG,YAAY;AAC7B,IAAIC,OAAO,GAAG;EACZC,GAAG,EAAE,MAAM;EACXp7B,GAAG,EAAE,UAAU;EACfq7B,aAAa,EAAE;AACjB,CAAC;AACD,SAASC,cAAcA,CAACrI,aAAa,EAAE5T,IAAI,EAAE;EAC3C;EACA,IAAIkc,MAAM,GAAGJ,OAAO,CAAC9b,IAAI,CAAC;EAC1B,IAAI,CAACkc,MAAM,EAAE,OAAO,EAAE;EACtB,IAAIttB,GAAG,GACLglB,aAAa,CAACuI,aAAa,IAC3BvI,aAAa,CAACwI,UAAU,IACxBxI,aAAa,CAACyI,IAAI;EACpB,IAAIztB,GAAG,CAAC0B,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;IAC1B;IACA1B,GAAG,GAAGoH,QAAQ,CAACqB,MAAM,GAAGilB,IAAI,CAAC1tB,GAAG,CAAC;EACnC;EACA,IAAI2tB,QAAQ,GAAG3tB,GAAG;EAClB,IAAIA,GAAG,CAAC4tB,WAAW,CAAC,GAAG,CAAC,KAAK5tB,GAAG,CAAC5I,MAAM,GAAG,CAAC,EAAE;IAC3Cu2B,QAAQ,GAAGD,IAAI,CAAC1tB,GAAG,CAAC,GAAG,UAAU,GAAGstB,MAAM;EAC5C,CAAC,MAAM;IACLK,QAAQ,GAAGD,IAAI,CAAC1tB,GAAG,CAAC,GAAG,WAAW,GAAGstB,MAAM;EAC7C;EACA,IAAItI,aAAa,CAACyI,IAAI,IAAIzI,aAAa,CAAC6I,WAAW,EAAE;IACnDF,QAAQ,GACNA,QAAQ,GAAG,SAAS,GAAG3I,aAAa,CAAC6I,WAAW,GAAG,mBAAmB;EAC1E;EACA,OAAOF,QAAQ;AACjB;AAEO,SAASD,IAAIA,CAACz0B,GAAG,EAAE;EACxB,OAAOA,GAAG,CAACG,OAAO,CAAC6zB,UAAU,EAAE,EAAE,CAAC;AACpC;AAEO,SAASa,6BAA6BA,CAACC,iBAAiB,EAAE;EAC/D,IAAIC,WAAW,GAAG,SAAdA,WAAWA,CAAahuB,GAAG,EAAE;IAC/B,OAAO,KAAK;EACd,CAAC;EACD,IACE,aAAa,IAAI+tB,iBAAiB,IAClCh2B,UAAU,CAACg2B,iBAAiB,CAACC,WAAW,CAAC,IACzCn0B,SAAS,CAACk0B,iBAAiB,CAACC,WAAW,CAAC,CAAC,CAAC,EAC1C;IACAA,WAAW,GAAGD,iBAAiB,CAACC,WAAW;EAC7C;EACA,IAAIC,aAAa,GAAG,SAAhBA,aAAaA,CAAaC,OAAO,EAAE;IACrC,OAAO,KAAK;EACd,CAAC;EACD,IACE,eAAe,IAAIH,iBAAiB,IACpCh2B,UAAU,CAACg2B,iBAAiB,CAACE,aAAa,CAAC,IAC3Cp0B,SAAS,CAACk0B,iBAAiB,CAACE,aAAa,CAAC,CAAC,CAAC,EAC5C;IACAA,aAAa,GAAGF,iBAAiB,CAACE,aAAa;EACjD;EACA,OAAO;IACLE,WAAW,EAAEd,cAAc,CAACU,iBAAiB,EAAE,KAAK,CAAC;IACrDK,YAAY,EAAEf,cAAc,CAACU,iBAAiB,EAAE,KAAK,CAAC;IACtDM,qBAAqB,EAAEhB,cAAc,CAACU,iBAAiB,EAAE,eAAe,CAAC;IACzEC,WAAW,EAAEA,WAAW;IACxBC,aAAa,EAAEA;EACjB,CAAC;AACH;AACO,SAASK,eAAeA,CAACtuB,GAAG,EAAEglB,aAAa,EAAE;EAClD,IAAIuJ,cAAc,GAAG,CAACvJ,aAAa,CAACmJ,WAAW,CAAC;EAChD,IAAInJ,aAAa,CAACoJ,YAAY,EAAE;IAC9BG,cAAc,CAAC31B,IAAI,CAACosB,aAAa,CAACoJ,YAAY,CAAC;EACjD;EACA,IAAIpJ,aAAa,CAACqJ,qBAAqB,EAAE;IACvCE,cAAc,CAAC31B,IAAI,CAACosB,aAAa,CAACqJ,qBAAqB,CAAC;EAC1D;EACA;EACA,OACEv1B,IAAI,CAACy1B,cAAc,EAAE,UAAUC,OAAO,EAAE;IACtC,OAAOxuB,GAAG,CAAC0B,OAAO,CAAC8sB,OAAO,CAAC,KAAK,CAAC;EACnC,CAAC,CAAC,IAAIxJ,aAAa,CAACgJ,WAAW,CAAChuB,GAAG,CAAC;AAExC,C;;ACzEwB;AAExB,SAAS0uB,aAAaA,CAACh8B,IAAI,EAAE6H,OAAO,EAAE;EACpC,UAAAtG,MAAA,CAAUvB,IAAI,OAAAuB,MAAA,CAAIsG,OAAO,IAAIA,OAAO,CAACo0B,SAAS,GAAG,KAAK,GAAG,KAAK,OAAA16B,MAAA,CAC5DsG,OAAO,IAAIA,OAAO,CAACq0B,MAAM,GAAG,IAAI,GAAG,IAAI,OAAA36B,MAAA,CACrCsG,OAAO,IAAIA,OAAO,CAACs0B,MAAM,GAAG,MAAM,GAAG,MAAM,OAAA56B,MAAA,CAC7CsG,OAAO,IAAIA,OAAO,CAACu0B,WAAW,GAAG,OAAO,GAAG,OAAO;AAEtD;AACO,SAASC,SAASA,CAACr8B,IAAI,EAAE6F,KAAK,EAAEsS,WAAW,EAAEtQ,OAAO,EAAE;EAC3D,IAAIy0B,IAAI,GAAG,IAAI3sB,IAAI,CAAC,CAAC;EACrB2sB,IAAI,CAACC,OAAO,CAACD,IAAI,CAAC1sB,OAAO,CAAC,CAAC,GAAGuI,WAAW,CAAC;EAC1C,IAAIqkB,OAAO,GAAG,UAAU,GAAGF,IAAI,CAACG,WAAW,CAAC,CAAC;EAC7C,IAAIC,QAAQ,GAAG70B,OAAO,IAAIA,OAAO,CAACo0B,SAAS,GAAG,MAAM,GAAG,QAAQ;EAC/D,IAAIC,MAAM,GAAGr0B,OAAO,IAAIA,OAAO,CAACq0B,MAAM,GAAG,UAAU,GAAGr0B,OAAO,CAACq0B,MAAM,GAAG,EAAE;EACzE,IAAIC,MAAM,GAAGt0B,OAAO,IAAIA,OAAO,CAACs0B,MAAM,GAAG,SAAS,GAAG,EAAE;EACvD,IAAIC,WAAW,GAAGv0B,OAAO,IAAIA,OAAO,CAACu0B,WAAW,GAAG,cAAc,GAAG,EAAE;EAEtExmB,QAAQ,CAAC+mB,MAAM,GACbX,aAAa,CAACh8B,IAAI,EAAE6H,OAAO,CAAC,GAC5B,GAAG,GACHhC,KAAK,GACL,GAAG,GACH22B,OAAO,GACP,mBAAmB,GACnBE,QAAQ,GACRR,MAAM,GACNC,MAAM,GACNC,WAAW;AACf;AAEO,SAASQ,gBAASA,CAAC58B,IAAI,EAAE6H,OAAO,EAAE;EACvC,OAAOqL,uBAAuB,CAAC0C,QAAQ,CAAC+mB,MAAM,EAAEX,aAAa,CAACh8B,IAAI,EAAE6H,OAAO,CAAC,CAAC;AAC/E;AACA,IAAIg1B,gBAAgB;AACpB;AACA;AACA;AACA;AACO,SAASC,aAAaA,CAAC98B,IAAI,EAAE;EAClC,IAAI,CAAC68B,gBAAgB,EAAE;IACrBA,gBAAgB,GAAGd,wBAAwB,CAACnmB,QAAQ,CAAC+mB,MAAM,CAAC;EAC9D;EACA,OAAOE,gBAAgB,CAAC16B,GAAG,CAACnC,IAAI,CAAC;AACnC;AAEO,SAAS+8B,gBAAgBA,CAAA,EAAG;EACjCF,gBAAgB,GAAGl8B,SAAS;AAC9B;AACO,SAASq8B,YAAYA,CAACh9B,IAAI,EAAE6H,OAAO,EAAE;EAC1Cw0B,SAAS,CAACr8B,IAAI,EAAE,EAAE,EAAE,CAAC,EAAE6H,OAAO,CAAC;AACjC;AAEO,SAASo1B,oBAAoBA,CAACp1B,OAAO,EAAE;EAC5C,IAAI+N,QAAQ,CAAC+mB,MAAM,KAAKh8B,SAAS,IAAIiV,QAAQ,CAAC+mB,MAAM,KAAK,IAAI,EAAE;IAC7D,OAAO,KAAK;EACd;EACA,IAAI;IACF;IACA;IACA,IAAIO,cAAc,qBAAA37B,MAAA,CAAqB+J,IAAI,CAAC,CAAC,CAAE;IAC/C,IAAI6xB,eAAe,GAAG,MAAM;IAC5Bd,SAAS,CAACa,cAAc,EAAEC,eAAe,EAAE1sB,UAAU,EAAE5I,OAAO,CAAC;IAC/D,IAAMu1B,oBAAoB,GACxBR,gBAAS,CAACM,cAAc,EAAEr1B,OAAO,CAAC,KAAKs1B,eAAe;IACxDH,YAAY,CAACE,cAAc,EAAEr1B,OAAO,CAAC;IACrC,OAAOu1B,oBAAoB;EAC7B,CAAC,CAAC,OAAO39B,KAAK,EAAE;IACd,OAAO,KAAK;EACd;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI49B,mBAAmB;AAChB,SAASC,cAAcA,CAAA,EAAG;EAC/B,IAAID,mBAAmB,KAAK18B,SAAS,EAAE;IACrC;IACA;IACA,IAAMu8B,cAAc,mBAAA37B,MAAA,CAAmB+J,IAAI,CAAC,CAAC,CAAE;IAC/C,IAAM6xB,eAAe,GAAG,MAAM;IAC9B,IAAMI,YAAY,GAAGr6B,MAAM,CAACwR,QAAQ,CAAC8oB,QAAQ,CAAC/uB,KAAK,CAAC,GAAG,CAAC;IACxD,IAAIgvB,eAAe,GAAGF,YAAY,CAAC9kB,GAAG,CAAC,CAAC;IACxC,OACE8kB,YAAY,CAAC74B,MAAM,IACnB,CAACk4B,gBAAS,CAACM,cAAc,EAAE;MACzBhB,MAAM,EAAEuB;IACV,CAAC,CAAC,EACF;MACAA,eAAe,MAAAl8B,MAAA,CAAMg8B,YAAY,CAAC9kB,GAAG,CAAC,CAAC,OAAAlX,MAAA,CAAIk8B,eAAe,CAAE;MAC5DpB,SAAS,CAACa,cAAc,EAAEC,eAAe,EAAE3sB,UAAU,EAAE;QACrD0rB,MAAM,EAAEuB;MACV,CAAC,CAAC;IACJ;IACAT,YAAY,CAACE,cAAc,EAAE;MAAEhB,MAAM,EAAEuB;IAAgB,CAAC,CAAC;IACzDJ,mBAAmB,GAAGI,eAAe;EACvC;EACA,OAAOJ,mBAAmB;AAC5B,C;;AC3GsD;AAC/C,IAAIK,sBAAsB,GAAG,CAAC,GAAGhtB,QAAQ;AACzC,IAAIitB,wBAAwB,GAAG,EAAE,GAAGltB,UAAU;AAC9C,IAAImtB,iBAAiB,GAAG,OAAO,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHsC;AAIjD;AAE3B,IAAMC,oBAAoB,GAAG,4BAA4B;AACzD,IAAMC,uBAAuB,GAAG,GAAG;AAE5B,IAAMC,OAAO,GAAG,GAAG;AAEnB,SAASC,sBAAsBA,CAAA,EAAG;EACvC,OAAO;IACLC,SAAS,EAAEF;EACb,CAAC;AACH;AAEO,SAASG,0BAA0BA,CAACC,OAAO,EAAE;EAClD,OAAOr3B,aAAa,CAACq3B,OAAO,CAAC;AAC/B;AAEO,SAASC,gBAAgBA,CAACD,OAAO,EAAE;EACxC,OAAO,CAACD,0BAA0B,CAACC,OAAO,CAAC;AAC7C;AAEO,SAASE,uBAAuBA,CAACF,OAAO,EAAE;EAC/C,OAAOA,OAAO,CAACF,SAAS,KAAKt9B,SAAS,IAAI,CAAC29B,eAAe,CAACH,OAAO,CAAC;AACrE;AAEA,SAASG,eAAeA,CAACC,YAAY,EAAE;EACrC,OACE,CAACA,YAAY,CAACC,OAAO,KAAK79B,SAAS,IACjC0R,OAAO,CAAC,CAAC,GAAGosB,MAAM,CAACF,YAAY,CAACC,OAAO,CAAC,GAAGd,sBAAsB,MAClEa,YAAY,CAACG,MAAM,KAAK/9B,SAAS,IAChC0R,OAAO,CAAC,CAAC,GAAGosB,MAAM,CAACF,YAAY,CAACG,MAAM,CAAC,CAAC;AAE9C;AAEO,SAASC,kBAAkBA,CAACR,OAAO,EAAE;EAC1CA,OAAO,CAACO,MAAM,GAAGr3B,MAAM,CAACgL,OAAO,CAAC,CAAC,GAAGsrB,wBAAwB,CAAC;AAC/D;AAEO,SAASiB,eAAeA,CAACT,OAAO,EAAE;EACvC,OAAOh4B,SAAG,CAACY,aAAa,CAACo3B,OAAO,CAAC,EAAE,UAAUvqB,IAAI,EAAE;IACjD,OAAOA,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,GAAGA,IAAI,CAAC,CAAC,CAAC;EAChC,CAAC,CAAC,CAACvI,IAAI,CAACyyB,uBAAuB,CAAC;AAClC;AAEO,SAASe,cAAcA,CAACC,aAAa,EAAE;EAC5C,IAAMX,OAAO,GAAG,CAAC,CAAC;EAClB,IAAIY,oBAAoB,CAACD,aAAa,CAAC,EAAE;IACvCA,aAAa,CAACrwB,KAAK,CAACqvB,uBAAuB,CAAC,CAAC/9B,OAAO,CAAC,UAAU4Y,KAAK,EAAE;MACpE,IAAMyF,OAAO,GAAGyf,oBAAoB,CAACrwB,IAAI,CAACmL,KAAK,CAAC;MAChD,IAAIyF,OAAO,KAAK,IAAI,EAAE;QACpB,IAAA4gB,QAAA,GAAAjJ,0BAAA,CAAuB3X,OAAO;UAArBvZ,GAAG,GAAAm6B,QAAA;UAAEn5B,KAAK,GAAAm5B,QAAA;QACnBb,OAAO,CAACt5B,GAAG,CAAC,GAAGgB,KAAK;MACtB;IACF,CAAC,CAAC;EACJ;EACA,OAAOs4B,OAAO;AAChB;AAEA,SAASY,oBAAoBA,CAACD,aAAa,EAAE;EAC3C,OACE,CAAC,CAACA,aAAa,KACdA,aAAa,CAAC9vB,OAAO,CAAC8uB,uBAAuB,CAAC,KAAK,CAAC,CAAC,IACpDD,oBAAoB,CAACt4B,IAAI,CAACu5B,aAAa,CAAC,CAAC;AAE/C,C;;ACpE4C;AAMlB;AAKC;AAKJ;AAEhB,SAASG,oBAAoBA,CAAC5D,iBAAiB,EAAE;EACtD,IAAM6D,aAAa,GAAGC,kBAAkB,CAAC9D,iBAAiB,CAAC;EAC3D,OAAO4B,oBAAoB,CAACiC,aAAa,CAAC,GACtC;IAAExgB,IAAI,EAAE,QAAQ;IAAEwgB,aAAa,EAAbA;EAAc,CAAC,GACjCv+B,SAAS;AACf;AAEO,SAASy+B,kBAAkBA,CAACF,aAAa,EAAE;EAChD,IAAMG,WAAW,GAAG;IAClB;AACJ;AACA;AACA;IACIC,aAAa,EAAEpqB,UAAU,CAAC,CAAC;IAC3BqqB,cAAc,EAAEC,oBAAoB,CAACN,aAAa,CAAC;IACnDO,eAAe,EAAEC,qBAAqB,CAACR,aAAa,CAAC;IACrDS,aAAa,EAAE,SAAfA,aAAaA,CAAA,EAAc;MACzB,OAAOC,mBAAmB,CAACV,aAAa,CAAC;IAC3C;EACF,CAAC;EACD,OAAOG,WAAW;AACpB;AAEA,SAASG,oBAAoBA,CAAC33B,OAAO,EAAE;EACrC,OAAO,UAAUs2B,OAAO,EAAE;IACxB9B,SAAS,CACPuB,iBAAiB,EACjBgB,eAAe,CAACT,OAAO,CAAC,EACxBR,wBAAwB,EACxB91B,OACF,CAAC;EACH,CAAC;AACH;AAEA,SAAS+3B,mBAAmBA,CAAC/3B,OAAO,EAAE;EACpCw0B,SAAS,CACPuB,iBAAiB,EACjBgB,eAAe,CAACZ,sBAAsB,CAAC,CAAC,CAAC,EACzCN,sBAAsB,EACtB71B,OACF,CAAC;AACH;AAEA,SAAS63B,qBAAqBA,CAAC73B,OAAO,EAAE;EACtC,OAAO,YAAY;IACjB,IAAIi3B,aAAa,GAAGlC,gBAAS,CAACgB,iBAAiB,EAAE/1B,OAAO,CAAC;IACzD,OAAOg3B,cAAc,CAACC,aAAa,CAAC;EACtC,CAAC;AACH;AAEO,SAASK,kBAAkBA,CAAC9D,iBAAiB,EAAE;EACpD,IAAM6D,aAAa,GAAG,CAAC,CAAC;EAExBA,aAAa,CAAC/C,MAAM,GAClB,CAAC,CAACd,iBAAiB,CAACwE,sBAAsB,IAC1C,CAAC,CAACxE,iBAAiB,CAACyE,oCAAoC,IACxD,CAAC,CAACzE,iBAAiB,CAAC0E,yBAAyB;EAC/Cb,aAAa,CAACjD,SAAS,GACrB,CAAC,CAACZ,iBAAiB,CAACyE,oCAAoC,IACxD,CAAC,CAACzE,iBAAiB,CAAC0E,yBAAyB;EAC/Cb,aAAa,CAAC9C,WAAW,GACvB,CAAC,CAACf,iBAAiB,CAACyE,oCAAoC;EAE1D,IAAIzE,iBAAiB,CAAC2E,4BAA4B,EAAE;IAClDd,aAAa,CAAChD,MAAM,GAAGoB,cAAc,CAAC,CAAC;EACzC;EAEA,OAAO4B,aAAa;AACtB,C;;ACtFsC;AAKf;AAE+B;AAEtD,IAAMe,sBAAsB,GAAG,WAAW;AAEnC,SAASC,0BAA0BA,CAAA,EAAG;EAC3C,IAAI;IACF,IAAM3M,EAAE,GAAGjoB,IAAI,CAAC,CAAC;IACjB,IAAM60B,OAAO,MAAA5+B,MAAA,CAAM0+B,sBAAsB,EAAA1+B,MAAA,CAAGgyB,EAAE,CAAE;IAChD7lB,YAAY,CAACO,OAAO,CAACkyB,OAAO,EAAE5M,EAAE,CAAC;IACjC,IAAM6M,WAAW,GAAG1yB,YAAY,CAACC,OAAO,CAACwyB,OAAO,CAAC;IACjDzyB,YAAY,CAACS,UAAU,CAACgyB,OAAO,CAAC;IAChC,OAAO5M,EAAE,KAAK6M,WAAW,GAAG;MAAE1hB,IAAI,EAAE;IAAe,CAAC,GAAG/d,SAAS;EAClE,CAAC,CAAC,OAAOQ,CAAC,EAAE;IACV,OAAOR,SAAS;EAClB;AACF;AAEO,SAAS0/B,wBAAwBA,CAAA,EAAG;EACzC,OAAO;IACLf,aAAa,EAAE,KAAK;IACpBC,cAAc,EAAEe,qBAAqB;IACrCb,eAAe,EAAEc,+BAA+B;IAChDZ,aAAa,EAAEa;EACjB,CAAC;AACH;AAEA,SAASF,qBAAqBA,CAAC/B,YAAY,EAAE;EAC3C7wB,YAAY,CAACO,OAAO,CAAC2vB,iBAAiB,EAAEgB,eAAe,CAACL,YAAY,CAAC,CAAC;AACxE;AAEA,SAASgC,+BAA+BA,CAAA,EAAG;EACzC,IAAMzB,aAAa,GAAGpxB,YAAY,CAACC,OAAO,CAACiwB,iBAAiB,CAAC;EAC7D,OAAOiB,cAAc,CAACC,aAAa,CAAC;AACtC;AAEA,SAAS0B,6BAA6BA,CAAA,EAAG;EACvCF,qBAAqB,CAACtC,sBAAsB,CAAC,CAAC,CAAC;AACjD,C;;AC5C4C;AACE;AAKvB;AAEhB,IAAMyC,gBAAgB,GAAG,EAAE;AAC3B,IAAMC,cAAc,GAAG,GAAG;AACjC,IAAMC,kBAAkB,GAAG,EAAE;AAC7B,IAAIC,iBAAiB;AAEd,SAASC,6BAA6BA,CAC3CC,UAAU,EACVC,oBAAoB,EAEpB;EAAA,IADAC,eAAe,GAAAjgC,SAAA,CAAA2D,MAAA,QAAA3D,SAAA,QAAAJ,SAAA,GAAAI,SAAA,MAAG,CAAC;EAEnB,IAAQu+B,aAAa,GAAoCyB,oBAAoB,CAArEzB,aAAa;IAAEC,cAAc,GAAoBwB,oBAAoB,CAAtDxB,cAAc;IAAEI,aAAa,GAAKoB,oBAAoB,CAAtCpB,aAAa;EACpD,IAAMsB,eAAe,GAAG,SAAlBA,eAAeA,CAAa9C,OAAO,EAAE;IACzC,OAAOoB,cAAc,CAAC39B,YAAM,CAAC,CAAC,CAAC,EAAEu8B,OAAO,EAAE;MAAE+C,IAAI,EAAEC;IAAY,CAAC,CAAC,CAAC;EACnE,CAAC;EACD,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CAAA,EAAe;IAChC,IAAMjD,OAAO,GAAG4C,oBAAoB,CAACtB,eAAe,CAAC,CAAC;IACtD,IAAMyB,IAAI,GAAG/C,OAAO,CAAC+C,IAAI;IACzB,IAAI/C,OAAO,CAAC+C,IAAI,EAAE;MAChB,OAAO/C,OAAO,CAAC+C,IAAI;IACrB;IAEA,OAAO;MACL/C,OAAO,EAAPA,OAAO;MACP+C,IAAI,EAAJA;IACF,CAAC;EACH,CAAC;EAED,IAAI,CAACN,iBAAiB,EAAE;IACtBA,iBAAiB,GAAGE,UAAU;EAChC;EACA,IAAIA,UAAU,KAAKF,iBAAiB,EAAE;IACpCD,kBAAkB,CAACz6B,IAAI,CAAC46B,UAAU,CAAC;IACnC;EACF;EACA,IAAIxB,aAAa,IAAI0B,eAAe,IAAIN,cAAc,EAAE;IACtDW,IAAI,CAACN,oBAAoB,CAAC;IAC1B;EACF;EACA,IAAII,WAAW;EACf,IAAIG,YAAY,GAAGF,aAAa,CAAC,CAAC;EAClC,IAAI9B,aAAa,EAAE;IACjB;IACA,IAAIgC,YAAY,CAACJ,IAAI,EAAE;MACrBK,UAAU,CAACT,UAAU,EAAEC,oBAAoB,EAAEC,eAAe,CAAC;MAC7D;IACF;IACA;IACAG,WAAW,GAAG71B,IAAI,CAAC,CAAC;IACpB21B,eAAe,CAACK,YAAY,CAACnD,OAAO,CAAC;IACrC;IACAmD,YAAY,GAAGF,aAAa,CAAC,CAAC;IAC9B,IAAIE,YAAY,CAACJ,IAAI,KAAKC,WAAW,EAAE;MACrCI,UAAU,CAACT,UAAU,EAAEC,oBAAoB,EAAEC,eAAe,CAAC;MAC7D;IACF;EACF;EACA,IAAIQ,gBAAgB,GAAGV,UAAU,CAACW,OAAO,CAACH,YAAY,CAACnD,OAAO,CAAC;EAC/D,IAAImB,aAAa,EAAE;IACjB;IACAgC,YAAY,GAAGF,aAAa,CAAC,CAAC;IAC9B,IAAIE,YAAY,CAACJ,IAAI,KAAKC,WAAW,EAAE;MACrCI,UAAU,CAACT,UAAU,EAAEC,oBAAoB,EAAEC,eAAe,CAAC;MAC7D;IACF;EACF;EACA,IAAIQ,gBAAgB,EAAE;IACpB,IAAInD,uBAAuB,CAACmD,gBAAgB,CAAC,EAAE;MAC7C7B,aAAa,CAAC,CAAC;IACjB,CAAC,MAAM;MACLhB,kBAAkB,CAAC6C,gBAAgB,CAAC;MACpClC,aAAa,GACT2B,eAAe,CAACO,gBAAgB,CAAC,GACjCjC,cAAc,CAACiC,gBAAgB,CAAC;IACtC;EACF;EACA,IAAIlC,aAAa,EAAE;IACjB;IACA;IACA,IAAI,EAAEkC,gBAAgB,IAAInD,uBAAuB,CAACmD,gBAAgB,CAAC,CAAC,EAAE;MACpE;MACAF,YAAY,GAAGF,aAAa,CAAC,CAAC;MAC9B,IAAIE,YAAY,CAACJ,IAAI,KAAKC,WAAW,EAAE;QACrCI,UAAU,CAACT,UAAU,EAAEC,oBAAoB,EAAEC,eAAe,CAAC;QAC7D;MACF;MACAzB,cAAc,CAAC+B,YAAY,CAACnD,OAAO,CAAC;MACpCqD,gBAAgB,GAAGF,YAAY,CAACnD,OAAO;IACzC;EACF;EACA;EACA;EACA,IAAI2C,UAAU,CAAC5R,KAAK,EAAE;IACpB4R,UAAU,CAAC5R,KAAK,CAACsS,gBAAgB,IAAIF,YAAY,CAACnD,OAAO,CAAC;EAC5D;EACAkD,IAAI,CAACN,oBAAoB,CAAC;AAC5B;AAEA,SAASQ,UAAUA,CAACT,UAAU,EAAEY,YAAY,EAAEC,sBAAsB,EAAE;EACpEl+B,gBAAU,CAAC,YAAY;IACrBo9B,6BAA6B,CAC3BC,UAAU,EACVY,YAAY,EACZC,sBAAsB,GAAG,CAC3B,CAAC;EACH,CAAC,EAAElB,gBAAgB,CAAC;AACtB;AAEA,SAASY,IAAIA,CAACK,YAAY,EAAE;EAC1Bd,iBAAiB,GAAGjgC,SAAS;EAC7B,IAAMihC,cAAc,GAAGjB,kBAAkB,CAACptB,KAAK,CAAC,CAAC;EACjD,IAAIquB,cAAc,EAAE;IAClBf,6BAA6B,CAACe,cAAc,EAAEF,YAAY,CAAC;EAC7D;AACF,C;;ACzH4D;AACX;AAC4B;AACD;AAMrD;AAIS;AACwC;;AAExE;AACA;AACA;AACA;AACA;AACO,IAAMG,kBAAkB,GAAGrxB,UAAU;;AAE5C;AACA;AACA;AACA;AACO,SAASsxB,8BAA8BA,CAACzG,iBAAiB,EAAE;EAChE,IAAI0G,wBAAwB,GAAG9C,oBAAoB,CAAC5D,iBAAiB,CAAC;EACtE,IACE,CAAC0G,wBAAwB,IACzB1G,iBAAiB,CAAC2G,2BAA2B,EAC7C;IACAD,wBAAwB,GAAG7B,0BAA0B,CAAC,CAAC;EACzD;EACA,OAAO6B,wBAAwB;AACjC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,SAASE,iBAAiBA,CAC/BF,wBAAwB,EACxBG,UAAU,EACVC,mBAAmB,EACnB;EACA,IAAMC,eAAe,GAAG,IAAIjS,qBAAU,CAAC,CAAC;EACxC,IAAMkS,gBAAgB,GAAG,IAAIlS,qBAAU,CAAC,CAAC;EACzC,IAAMmS,4BAA4B,GAAG,IAAInS,qBAAU,CAAC,CAAC;EACrD,IAAM4Q,oBAAoB,GACxBgB,wBAAwB,CAACrjB,IAAI,KAAK,QAAQ,GACtC0gB,kBAAkB,CAAC2C,wBAAwB,CAAC7C,aAAa,CAAC,GAC1DmB,wBAAwB,CAAC,CAAC;EAChC,IAAQV,aAAa,GAAKoB,oBAAoB,CAAtCpB,aAAa;EAErB,IAAM4C,qBAAqB,GAAG1+B,iBAAW,CAAC2+B,YAAY,EAAEX,kBAAkB,CAAC;EAC3E,IAAIY,YAAY;EAEhBC,YAAY,CAAC,CAAC;EAEd,IAAAC,SAAA,GAGIh7B,QAAQ,CAAC,YAAY;MACvBk5B,6BAA6B,CAC3B;QACEY,OAAO,EAAE,SAATA,OAAOA,CAAYlD,YAAY,EAAE;UAC/B,IAAIL,0BAA0B,CAACK,YAAY,CAAC,EAAE;YAC5C;UACF;UAEA,IAAMqE,mBAAmB,GAAGC,kBAAkB,CAACtE,YAAY,CAAC;UAC5DuE,yBAAyB,CAACF,mBAAmB,CAAC;UAC9C,OAAOA,mBAAmB;QAC5B,CAAC;QACD1T,KAAK,EAAE,SAAPA,KAAKA,CAAYqP,YAAY,EAAE;UAC7B,IAAIH,gBAAgB,CAACG,YAAY,CAAC,IAAI,CAACwE,iBAAiB,CAAC,CAAC,EAAE;YAC1DC,mBAAmB,CAACzE,YAAY,CAAC;UACnC;UACAkE,YAAY,GAAGlE,YAAY;QAC7B;MACF,CAAC,EACDwC,oBACF,CAAC;IACH,CAAC,EAAEc,kBAAkB,CAAC;IAvBToB,6BAA6B,GAAAN,SAAA,CAAxCt6B,SAAS;IACD66B,0BAA0B,GAAAP,SAAA,CAAlCr6B,MAAM;EAwBR,SAAS66B,aAAaA,CAAA,EAAG;IACvBtC,6BAA6B,CAC3B;MACEY,OAAO,EAAE,SAATA,OAAOA,CAAYlD,YAAY,EAAE;QAC/B,OAAOwE,iBAAiB,CAAC,CAAC,GACtBF,kBAAkB,CAACtE,YAAY,CAAC,GAChC59B,SAAS;MACf;IACF,CAAC,EACDogC,oBACF,CAAC;EACH;;EAEA;AACF;AACA;AACA;AACA;EACE,SAASyB,YAAYA,CAAA,EAAG;IACtB3B,6BAA6B,CAC3B;MACEY,OAAO,EAAE,SAATA,OAAOA,CAAYlD,YAAY,EAAE;QAC/B,OAAOF,uBAAuB,CAACE,YAAY,CAAC,GACxCP,sBAAsB,CAAC,CAAC,GACxBr9B,SAAS;MACf,CAAC;MACDuuB,KAAK,EAAE2T;IACT,CAAC,EACD9B,oBACF,CAAC;EACH;EAEA,SAAS8B,kBAAkBA,CAACtE,YAAY,EAAE;IACxC,IAAIF,uBAAuB,CAACE,YAAY,CAAC,EAAE;MACzCA,YAAY,GAAGP,sBAAsB,CAAC,CAAC;IACzC;IACA,IAAI+E,iBAAiB,CAAC,CAAC,EAAE;MACvB,IAAIK,wBAAwB,CAAC7E,YAAY,CAAC,EAAE;QAC1C8E,oBAAoB,CAAC,CAAC;MACxB,CAAC,MAAM;QACLf,4BAA4B,CAAC5S,MAAM,CAAC;UAClC4T,aAAa,EAAEb,YAAY;UAC3Bc,QAAQ,EAAEhF;QACZ,CAAC,CAAC;QACFkE,YAAY,GAAGlE,YAAY;MAC7B;IACF;IACA,OAAOA,YAAY;EACrB;EAEA,SAASmE,YAAYA,CAAA,EAAG;IACtB7B,6BAA6B,CAC3B;MACEY,OAAO,EAAE,SAATA,OAAOA,CAAYlD,YAAY,EAAE;QAC/B,IAAIL,0BAA0B,CAACK,YAAY,CAAC,EAAE;UAC5C,OAAOP,sBAAsB,CAAC,CAAC;QACjC;MACF,CAAC;MACD9O,KAAK,EAAE,SAAPA,KAAKA,CAAYqP,YAAY,EAAE;QAC7BkE,YAAY,GAAGlE,YAAY;MAC7B;IACF,CAAC,EACDwC,oBACF,CAAC;EACH;EAEA,SAAS+B,yBAAyBA,CAACvE,YAAY,EAAE;IAC/C,IAAIL,0BAA0B,CAACK,YAAY,CAAC,EAAE;MAC5C,OAAO,KAAK;IACd;IAEA,IAAAiF,oBAAA,GAAoCrB,mBAAmB,CACrD5D,YAAY,CAAC2D,UAAU,CACzB,CAAC;MAFOuB,YAAY,GAAAD,oBAAA,CAAZC,YAAY;MAAEC,SAAS,GAAAF,oBAAA,CAATE,SAAS;IAG/BnF,YAAY,CAAC2D,UAAU,CAAC,GAAGuB,YAAY;IACvC,OAAOlF,YAAY,CAACN,SAAS;IAC7B,IAAIyF,SAAS,IAAI,CAACnF,YAAY,CAAChL,EAAE,EAAE;MACjCgL,YAAY,CAAChL,EAAE,GAAGjoB,IAAI,CAAC,CAAC;MACxBizB,YAAY,CAACC,OAAO,GAAGn3B,MAAM,CAACgL,OAAO,CAAC,CAAC,CAAC;IAC1C;EACF;EAEA,SAAS0wB,iBAAiBA,CAAA,EAAG;IAC3B,OAAON,YAAY,CAACP,UAAU,CAAC,KAAKvhC,SAAS;EAC/C;EAEA,SAASyiC,wBAAwBA,CAAC7E,YAAY,EAAE;IAC9C,OACEkE,YAAY,CAAClP,EAAE,KAAKgL,YAAY,CAAChL,EAAE,IACnCkP,YAAY,CAACP,UAAU,CAAC,KAAK3D,YAAY,CAAC2D,UAAU,CAAC;EAEzD;EAEA,SAASmB,oBAAoBA,CAAA,EAAG;IAC9BZ,YAAY,GAAGzE,sBAAsB,CAAC,CAAC;IACvCqE,gBAAgB,CAAC3S,MAAM,CAAC,CAAC;EAC3B;EAEA,SAASsT,mBAAmBA,CAACzE,YAAY,EAAE;IACzCkE,YAAY,GAAGlE,YAAY;IAC3B6D,eAAe,CAAC1S,MAAM,CAAC,CAAC;EAC1B;EAEA,SAASiU,kBAAkBA,CAACC,mBAAmB,EAAE;IAC/C/C,6BAA6B,CAC3B;MACEY,OAAO,EAAE,SAATA,OAAOA,CAAYlD,YAAY,EAAE;QAC/B,OAAO38B,YAAM,CAAC,CAAC,CAAC,EAAE28B,YAAY,EAAEqF,mBAAmB,CAAC;MACtD,CAAC;MACD1U,KAAK,EAAE2T;IACT,CAAC,EACD9B,oBACF,CAAC;EACH;EAEA,OAAO;IACL8C,oBAAoB,EAAEZ,6BAA6B;IACnDE,aAAa,EAAbA,aAAa;IACbW,UAAU,EAAE,SAAZA,UAAUA,CAAA,EAAc;MACtB,OAAOrB,YAAY;IACrB,CAAC;IACDL,eAAe,EAAfA,eAAe;IACfC,gBAAgB,EAAhBA,gBAAgB;IAChBC,4BAA4B,EAA5BA,4BAA4B;IAC5ByB,cAAc,EAAErB,YAAY;IAC5BhE,MAAM,EAAE,SAARA,MAAMA,CAAA,EAAc;MAClBwE,0BAA0B,CAAC,CAAC;MAC5BvD,aAAa,CAAC,CAAC;MACfkD,kBAAkB,CAAC7E,sBAAsB,CAAC,CAAC,CAAC;IAC9C,CAAC;IACD3kB,IAAI,EAAE,SAANA,IAAIA,CAAA,EAAc;MAChBvV,mBAAa,CAACy+B,qBAAqB,CAAC;IACtC,CAAC;IACDoB,kBAAkB,EAAlBA;EACF,CAAC;AACH,C;;AChO2D;AAChB;AAMnB;AAC2B;AACqB;AACA;AACjE,IAAIK,mBAAmB,GAAG;EAC/BC,KAAK,EAAE,OAAO;EACdC,IAAI,EAAE,MAAM;EACZC,eAAe,EAAE;AACnB,CAAC;AACM,SAASC,6BAA6BA,CAAC/I,iBAAiB,EAAE;EAC/D,IACEA,iBAAiB,CAACgJ,UAAU,KAAK1jC,SAAS,IAC1C,CAAC4T,YAAY,CAAC8mB,iBAAiB,CAACgJ,UAAU,CAAC,EAC3C;IACAnkC,eAAO,CAACT,KAAK,CAAC,kDAAkD,CAAC;IACjE;EACF;EACA,IACE47B,iBAAiB,CAACiJ,iBAAiB,KAAK3jC,SAAS,IACjD,CAAC4T,YAAY,CAAC8mB,iBAAiB,CAACiJ,iBAAiB,CAAC,EAClD;IACApkC,eAAO,CAACT,KAAK,CAAC,kDAAkD,CAAC;IACjE;EACF;EACA,IACE47B,iBAAiB,CAACkJ,mBAAmB,KAAK5jC,SAAS,IACnD,CAAC4T,YAAY,CAAC8mB,iBAAiB,CAACkJ,mBAAmB,CAAC,EACpD;IACArkC,eAAO,CAACT,KAAK,CAAC,4DAA4D,CAAC;IAC3E;EACF;EAEA,IAAI6kC,iBAAiB,GAAGjvB,iCAA2B,CACjDgmB,iBAAiB,CAACiJ,iBAAiB,EACnCjJ,iBAAiB,CAACgJ,UACpB,CAAC;EACD,OAAOziC,YAAM,CACX;IACE4iC,UAAU,EACRnJ,iBAAiB,CAACmJ,UAAU,IAC5BhjC,+BAAe,CACb65B,iBAAiB,CAACmJ,UAAU,EAC5B,4BACF,CAAC;IACHzC,wBAAwB,EACtBD,8BAA8B,CAACzG,iBAAiB,CAAC;IACnDiJ,iBAAiB,EAAEjvB,iCAA2B,CAACivB,iBAAiB,EAAE,GAAG,CAAC;IACtEG,OAAO,EAAEpJ,iBAAiB,CAACoJ,OAAO;IAClC1mB,OAAO,EAAEsd,iBAAiB,CAACtd,OAAO;IAClC2mB,GAAG,EAAErJ,iBAAiB,CAACqJ,GAAG;IAC1BH,mBAAmB,EAAElvB,iCAA2B,CAC9CgmB,iBAAiB,CAACkJ,mBAAmB,EACrC,GACF,CAAC;IACDI,gBAAgB,EAAEtvB,iCAA2B,CAC3CgmB,iBAAiB,CAACsJ,gBAAgB,EAClC,KACF,CAAC;IACDC,kBAAkB,EAAE,CAAC,CAACvJ,iBAAiB,CAACuJ,kBAAkB;IAE1D;AACN;AACA;AACA;IACMC,eAAe,EAAE,EAAE,GAAGjb,aAAa;IAEnCkb,yBAAyB,EAAE,IAAI;IAC/BC,yBAAyB,EAAE,EAAE;IAE7B;AACN;AACA;AACA;IACMC,YAAY,EAAE,EAAE,GAAGx0B,UAAU;IAE7B;AACN;AACA;IACMy0B,kBAAkB,EAAE,EAAE;IACtBC,iBAAiB,EAAE,GAAG,GAAGtb,aAAa;IACtCub,gBAAgB,EAAE,CAAC,GAAGvb,aAAa;IACnCwb,oBAAoB,EAAE,CAAC,CAAC/J,iBAAiB,CAAC+J,oBAAoB;IAC9D;IACAC,gBAAgB,EAAEhK,iBAAiB,CAACgK,gBAAgB;IACpDC,qBAAqB,EAAE,CAAC,CAACjK,iBAAiB,CAACiK,qBAAqB;IAChEC,YAAY,EAAElwB,iCAA2B,CACvCgmB,iBAAiB,CAACkK,YAAY,EAC9B,CAAC,CACH;EACF,CAAC,EACDnK,6BAA6B,CAACC,iBAAiB,CACjD,CAAC;AACH;AACO,SAASmK,6CAA6CA,CAC3DnK,iBAAiB,EACjB;EACA,IACE,CAACA,iBAAiB,CAACN,IAAI,IACvB,CAACM,iBAAiB,CAACR,aAAa,IAChC,CAACQ,iBAAiB,CAACP,UAAU,EAC7B;IACA56B,eAAO,CAACT,KAAK,CACX,yEACF,CAAC;IACD,OAAO,KAAK;EACd;EACA;EACA;EACA;EACA;EACA;EACA;EACA,IAAI47B,iBAAiB,CAACN,IAAI,IAAI,CAACM,iBAAiB,CAACF,WAAW,EAAE;IAC5Dj7B,eAAO,CAACT,KAAK,CACX,+DACF,CAAC;IACD,OAAO,KAAK;EACd;EACA,OAAO,IAAI;AACb,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9H8D;AACnB;AACI;AACS;AACjD,SAASgmC,gCAAgCA,CAACpK,iBAAiB,EAAEp5B,QAAQ,EAAE;EAC5EyjC,wBAAwB,CAACrK,iBAAiB,EAAE,UAACsK,uBAAuB,EAAK;IACvE1jC,QAAQ,CACN2jC,wBAAwB,CAACvK,iBAAiB,EAAEsK,uBAAuB,CACrE,CAAC;EACH,CAAC,CAAC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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","sources":["webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///../../src/helper/display.js","webpack:///../../src/helper/monitor.js","webpack:///../../src/helper/catchUserErrors.js","webpack:///../src/init.js","webpack:///../../src/helper/getZoneJsOriginalValue.js","webpack:///../../src/helper/timer.js","webpack:///../../src/helper/tools.js","webpack:///../../src/helper/boundedBuffer.js","webpack:///../../src/helper/valueHistory.js","webpack:///../../src/helper/deviceInfo.js","webpack:///../../src/helper/enums.js","webpack:///../../../src/helper/serialisation/jsonStringify.js","webpack:///../../src/tracekit/computeStackTrace.js","webpack:///../../src/tracekit/tracekit.js","webpack:///../../src/tracekit/index.js","webpack:///../../src/helper/byteUtils.js","webpack:///../../src/helper/sanitize.js","webpack:///../../src/helper/errorTools.js","webpack:///../../src/helper/instrumentMethod.js","webpack:///../../src/error/trackRuntimeError.js","webpack:///../../src/helper/observable.js","webpack:///../../src/console/consoleObservable.js","webpack:///../../src/browser/addEventListener.js","webpack:///../../src/report/reportObservable.js","webpack:///../../src/helper/lifeCycle.js","webpack:///../../src/helper/limitModification.js","webpack:///../../src/helper/createEventRateLimiter.js","webpack:///../../src/helper/urlPolyfill.js","webpack:///../../src/helper/mobileUtil.js","webpack:///../../src/helper/requestIdleCallback.js","webpack:///../../src/helper/taskQueue.js","webpack:///../../src/configuration/transportConfiguration.js","webpack:///../../src/browser/cookie.js","webpack:///../../src/session/sessionConstants.js","webpack:///../../src/session/sessionState.js","webpack:///../../src/session/sessionInCookie.js","webpack:///../../src/session/sessionInLocalStorage.js","webpack:///../../src/session/sessionStoreOperations.js","webpack:///../../src/session/sessionStore.js","webpack:///../../src/configuration/configuration.js","webpack:///../../src/configuration/remoteConfiguration.js","webpack:///../../src/browser/fetchObservable.js","webpack:///../../src/browser/xhrObservable.js","webpack:///../../src/browser/pageExitObservable.js","webpack:///../../src/browser/htmlDomUtils.js","webpack:///../../src/browser/runOnReadyState.js","webpack:///../src/dataMap.js","webpack:///../../src/session/sessionManagement.js","webpack:///../../src/transport/sendWithRetryStrategy.js","webpack:///../../src/telemetry/types.js","webpack:///../../src/telemetry/telemetry.js","webpack:///../../src/transport/httpRequest.js","webpack:///../../../src/helper/serialisation/rowData.js","webpack:///../../src/transport/batch.js","webpack:///../../src/transport/flushController.js","webpack:///../../src/transport/startBatchWithReplica.js","webpack:///../../src/transport/eventBridge.js","webpack:///../../src/transport/index.js","webpack:///../../src/synthetics/syntheticsWorkerValues.js","webpack:///../../../src/helper/serialisation/contextManager.js","webpack:///../../../src/helper/serialisation/const.js","webpack:///../../../src/helper/serialisation/storedContextManager.js","webpack:///../../../src/helper/serialisation/customerDataTracker.js","webpack:///../../src/helper/encoder.js","webpack:///../../src/user/user.js","webpack:///../core/esm/user/index.js","webpack:///../../src/helper/polyfills.js","webpack:///../../src/helper/displayAlreadyInitializedError.js","webpack:///../src/index.js","webpack:///./src/domain/rumSessionManager.js","webpack:///./src/domain/usr/index.js","webpack:///./src/domain/locationChangeObservable.js","webpack:///./src/domain/deflate/deflateEncoder.js","webpack:///./src/domain/deflate/deflateWorker.js","webpack:///./src/domain/deflate/index.js","webpack:///./src/transport/startRumBatch.js","webpack:///./src/transport/startRumEventBridge.js","webpack:///../../node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:///../../node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack:///../../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack:///../../node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./src/domain/assembly.js","webpack:///./src/domain/initViewportObservable.js","webpack:///./src/domain/contexts/displayContext.js","webpack:///./src/domain/contexts/internalContext.js","webpack:///./src/domain/contexts/urlContexts.js","webpack:///./src/domain/contexts/viewContexts.js","webpack:///./src/domain/contexts/pageStateHistory.js","webpack:///./src/domain/rumEventsCollection/error/trackConsoleError.js","webpack:///./src/domain/rumEventsCollection/error/trackReportError.js","webpack:///./src/domain/rumEventsCollection/error/errorCollection.js","webpack:///./src/domain/rumEventsCollection/resource/resourceUtils.js","webpack:///./src/domain/firstInputPolyfill.js","webpack:///./src/domain/performanceObservable.js","webpack:///./src/domain/rumEventsCollection/view/trackFirstContentfulPaint.js","webpack:///./src/domain/rumEventsCollection/actions/__constants.js","webpack:///./src/domain/rumEventsCollection/actions/getSelectorsFromElement.js","webpack:///./src/domain/rumEventsCollection/view/trackFirstInput.js","webpack:///./src/domain/performanceUtils.js","webpack:///./src/domain/rumEventsCollection/view/trackNavigationTimings.js","webpack:///./src/domain/rumEventsCollection/view/trackLargestContentfulPaint.js","webpack:///./src/domain/rumEventsCollection/view/trackFirstHidden.js","webpack:///./src/domain/rumEventsCollection/view/trackInitialViewTimings.js","webpack:///./src/domain/rumEventsCollection/view/trackViews.js","webpack:///./src/domain/rumEventsCollection/view/viewCollection.js","webpack:///./src/domain/rumEventsCollection/resource/matchRequestResourceEntry.js","webpack:///./src/domain/rumEventsCollection/resource/retrieveInitialDocumentResourceTiming.js","webpack:///./src/domain/rumEventsCollection/resource/resourceCollection.js","webpack:///./src/boot/rum.js","webpack:///./src/domain/contexts/commonContext.js","webpack:///./src/boot/buildEnv.js","webpack:///./src/domain/configuration.js","webpack:///./src/boot/perStartRum.js","webpack:///./src/boot/rumPublicApi.js","webpack:///./src/boot/rum.entry.js","webpack:///./src/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export var ConsoleApiName = {\n  log: 'log',\n  debug: 'debug',\n  info: 'info',\n  warn: 'warn',\n  error: 'error'\n}\nexport var globalConsole = console\n\nexport var originalConsoleMethods = {}\nObject.keys(ConsoleApiName).forEach(function (name) {\n  originalConsoleMethods[name] = globalConsole[name]\n})\n\nvar PREFIX = 'GUANCE Browser SDK:'\n\nexport var display = {\n  debug: originalConsoleMethods.debug.bind(globalConsole, PREFIX),\n  log: originalConsoleMethods.log.bind(globalConsole, PREFIX),\n  info: originalConsoleMethods.info.bind(globalConsole, PREFIX),\n  warn: originalConsoleMethods.warn.bind(globalConsole, PREFIX),\n  error: originalConsoleMethods.error.bind(globalConsole, PREFIX)\n}\n","import { ConsoleApiName, display } from './display'\nvar onMonitorErrorCollected\nvar debugMode = false\n\nexport function startMonitorErrorCollection(newOnMonitorErrorCollected) {\n  onMonitorErrorCollected = newOnMonitorErrorCollected\n}\n\nexport function setDebugMode(newDebugMode) {\n  debugMode = newDebugMode\n}\n\nexport function resetMonitor() {\n  onMonitorErrorCollected = undefined\n  debugMode = false\n}\n\nexport function monitor(fn) {\n  return function () {\n    return callMonitored(fn, this, arguments)\n  }\n}\n\nexport function callMonitored(fn, context, args) {\n  try {\n    return fn.apply(context, args)\n  } catch (e) {\n    displayIfDebugEnabled(e)\n    if (onMonitorErrorCollected) {\n      try {\n        onMonitorErrorCollected(e)\n      } catch (e) {\n        displayIfDebugEnabled(e)\n      }\n    }\n  }\n}\n\nexport function displayIfDebugEnabled() {\n  var args = [].slice.call(arguments)\n  //   display.error.apply(null, ['[MONITOR]'].concat(args))\n  if (debugMode) {\n    display.error.apply(null, ['[MONITOR]'].concat(args))\n  }\n}\n","import { display } from './display'\n\nexport function catchUserErrors(fn, errorMsg) {\n  return function() {\n    var args = [].slice.call(arguments)\n    try {\n      return fn.apply(this, args)\n    } catch (err) {\n      display.error(errorMsg, err)\n    }\n  }\n}","import { each, assign } from './helper/tools'\nimport { setDebugMode } from './helper/monitor'\nimport { catchUserErrors } from './helper/catchUserErrors'\n\nexport function makePublicApi(stub) {\n  var publicApi = assign(\n    {\n      onReady: function (callback) {\n        callback()\n      }\n    },\n    stub\n  )\n\n  // Add an \"hidden\" property to set debug mode. We define it that way to hide it\n  // as much as possible but of course it's not a real protection.\n  Object.defineProperty(publicApi, '_setDebug', {\n    get: function () {\n      return setDebugMode\n    },\n    enumerable: false\n  })\n\n  return publicApi\n}\nexport function defineGlobal(global, name, api) {\n  var existingGlobalVariable = global[name]\n  global[name] = api\n  if (existingGlobalVariable && existingGlobalVariable.q) {\n    each(existingGlobalVariable.q, function (fn) {\n      catchUserErrors(fn, 'onReady callback threw an error:')()\n    })\n  }\n}\n\nexport function getGlobalObject() {\n  if (typeof globalThis === 'object') {\n    return globalThis\n  }\n  Object.defineProperty(Object.prototype, '_gc_temp_', {\n    get: function () {\n      return this\n    },\n    configurable: true\n  })\n  // @ts-ignore\n  var globalObject = _gc_temp_\n  // @ts-ignore\n  delete Object.prototype._gc_temp_\n  if (typeof globalObject !== 'object') {\n    // on safari _gc_temp_ is available on window but not globally\n    // fallback on other browser globals check\n    if (typeof self === 'object') {\n      globalObject = self\n    } else if (typeof window === 'object') {\n      globalObject = window\n    } else {\n      globalObject = {}\n    }\n  }\n  return globalObject\n}\n","import { getGlobalObject } from '../init'\n/**\n * Gets the original value for a DOM API that was potentially patched by Zone.js.\n *\n * Zone.js[1] is a library that patches a bunch of JS and DOM APIs. It usually stores the original\n * value of the patched functions/constructors/methods in a hidden property prefixed by\n * __zone_symbol__.\n *\n * In multiple occasions, we observed that Zone.js is the culprit of important issues leading to\n * browser resource exhaustion (memory leak, high CPU usage). This method is used as a workaround to\n * use the original DOM API instead of the one patched by Zone.js.\n *\n * [1]: https://github.com/angular/angular/tree/main/packages/zone.js\n */\nexport function getZoneJsOriginalValue(target, name) {\n  var browserWindow = getGlobalObject()\n  var original\n  if (\n    browserWindow.Zone &&\n    typeof browserWindow.Zone.__symbol__ === 'function'\n  ) {\n    original = target[browserWindow.Zone.__symbol__(name)]\n  }\n  if (!original) {\n    original = target[name]\n  }\n  return original\n}\n","import { getZoneJsOriginalValue } from './getZoneJsOriginalValue'\nimport { getGlobalObject } from '../init'\nimport { monitor } from './monitor'\nexport function setTimeout(callback, delay) {\n  return getZoneJsOriginalValue(getGlobalObject(), 'setTimeout')(\n    monitor(callback),\n    delay\n  )\n}\n\nexport function clearTimeout(timeoutId) {\n  getZoneJsOriginalValue(getGlobalObject(), 'clearTimeout')(timeoutId)\n}\n\nexport function setInterval(callback, delay) {\n  return getZoneJsOriginalValue(getGlobalObject(), 'setInterval')(\n    monitor(callback),\n    delay\n  )\n}\n\nexport function clearInterval(timeoutId) {\n  getZoneJsOriginalValue(getGlobalObject(), 'clearInterval')(timeoutId)\n}\n","import { display } from './display'\nimport { setTimeout, clearTimeout } from './timer'\nvar ArrayProto = Array.prototype\n// var FuncProto = Function.prototype\nvar ObjProto = Object.prototype\nvar slice = ArrayProto.slice\nvar toString = ObjProto.toString\nvar hasOwnProperty = ObjProto.hasOwnProperty\nvar nativeForEach = ArrayProto.forEach\nvar nativeIsArray = Array.isArray\nvar breaker = false\nexport var each = function (obj, iterator, context) {\n  if (obj === null) return false\n  if (nativeForEach && obj.forEach === nativeForEach) {\n    obj.forEach(iterator, context)\n  } else if (obj.length === +obj.length) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (i in obj && iterator.call(context, obj[i], i, obj) === breaker) {\n        return false\n      }\n    }\n  } else {\n    for (var key in obj) {\n      if (hasOwnProperty.call(obj, key)) {\n        if (iterator.call(context, obj[key], key, obj) === breaker) {\n          return false\n        }\n      }\n    }\n  }\n}\nexport function assign(target) {\n  each(slice.call(arguments, 1), function (source) {\n    for (var prop in source) {\n      if (Object.prototype.hasOwnProperty.call(source, prop)) {\n        target[prop] = source[prop]\n      }\n    }\n  })\n  return target\n}\n\nexport function shallowClone(object) {\n  return assign({}, object)\n}\nexport var extend = function (obj) {\n  each(slice.call(arguments, 1), function (source) {\n    for (var prop in source) {\n      if (source[prop] !== void 0) {\n        obj[prop] = source[prop]\n      }\n    }\n  })\n  return obj\n}\nexport var extend2Lev = function (obj) {\n  each(slice.call(arguments, 1), function (source) {\n    for (var prop in source) {\n      if (source[prop] !== void 0) {\n        if (isObject(source[prop]) && isObject(obj[prop])) {\n          extend(obj[prop], source[prop])\n        } else {\n          obj[prop] = source[prop]\n        }\n      }\n    }\n  })\n  return obj\n}\n// export var coverExtend = function (obj) {\n//   each(slice.call(arguments, 1), function (source) {\n//     for (var prop in source) {\n//       if (source[prop] !== void 0 && obj[prop] === void 0) {\n//         obj[prop] = source[prop]\n//       }\n//     }\n//   })\n//   return obj\n// }\nexport var isArray =\n  nativeIsArray ||\n  function (obj) {\n    return toString.call(obj) === '[object Array]'\n  }\nexport var isFunction = function (f) {\n  if (!f) {\n    return false\n  }\n  try {\n    return /^\\s*\\bfunction\\b/.test(f)\n  } catch (err) {\n    return false\n  }\n}\nexport var isArguments = function (obj) {\n  return !!(obj && hasOwnProperty.call(obj, 'callee'))\n}\nexport var toArray = function (iterable) {\n  if (!iterable) return []\n  if (iterable.toArray) {\n    return iterable.toArray()\n  }\n  if (isArray(iterable)) {\n    return slice.call(iterable)\n  }\n  if (isArguments(iterable)) {\n    return slice.call(iterable)\n  }\n  return values(iterable)\n}\nexport var values = function (obj) {\n  var results = []\n  if (obj === null) {\n    return results\n  }\n  each(obj, function (value) {\n    results[results.length] = value\n  })\n  return results\n}\nexport var keys = function (obj) {\n  var results = []\n  if (obj === null) {\n    return results\n  }\n  each(obj, function (value, key) {\n    results[results.length] = key\n  })\n  return results\n}\n// export var indexOf = function (arr, target) {\n//   var indexOf = arr.indexOf\n//   if (indexOf) {\n//     return indexOf.call(arr, target)\n//   } else {\n//     for (var i = 0; i < arr.length; i++) {\n//       if (target === arr[i]) {\n//         return i\n//       }\n//     }\n//     return -1\n//   }\n// }\n// export var hasAttribute = function (ele, attr) {\n//   if (ele.hasAttribute) {\n//     return ele.hasAttribute(attr)\n//   } else {\n//     return !!(ele.attributes[attr] && ele.attributes[attr].specified)\n//   }\n// }\nexport var filter = function (arr, fn, self) {\n  if (arr.filter) {\n    return arr.filter(fn)\n  }\n  var ret = []\n  for (var i = 0; i < arr.length; i++) {\n    if (!hasOwnProperty.call(arr, i)) {\n      continue\n    }\n    var val = arr[i]\n    if (fn.call(self, val, i, arr)) {\n      ret.push(val)\n    }\n  }\n  return ret\n}\nexport var map = function (arr, fn, self) {\n  if (arr.map) {\n    return arr.map(fn)\n  }\n  var ret = []\n  for (var i = 0; i < arr.length; i++) {\n    if (!hasOwnProperty.call(arr, i)) {\n      continue\n    }\n    var val = arr[i]\n    ret.push(fn.call(self, val, i, arr))\n  }\n  return ret\n}\nexport var some = function (arr, fn, self) {\n  if (arr.some) {\n    return arr.some(fn)\n  }\n  var flag = false\n  for (var i = 0; i < arr.length; i++) {\n    if (!hasOwnProperty.call(arr, i)) {\n      continue\n    }\n    var val = arr[i]\n    if (fn.call(self, val, i, arr)) {\n      flag = true\n      break\n    }\n  }\n  return flag\n}\n// export var every = function (arr, fn, self) {\n//   if (arr.every) {\n//     return arr.every(fn)\n//   }\n//   var flag = true\n//   for (var i = 0; i < arr.length; i++) {\n//     if (!hasOwnProperty.call(arr, i)) {\n//       continue\n//     }\n//     var val = arr[i]\n//     if (!fn.call(self, val, i, arr)) {\n//       flag = false\n//       break\n//     }\n//   }\n//   return flag\n// }\n// export var matchList = function (list, value, useStartsWith) {\n//   if (useStartsWith === undefined) {\n//     useStartsWith = false\n//   }\n//   return some(list, function (item) {\n//     try {\n//       if (typeof item === 'function') {\n//         return item(value)\n//       } else if (item instanceof RegExp) {\n//         return item.test(value)\n//       } else if (typeof item === 'string') {\n//         return useStartsWith ? startsWith(value, item) : item === value\n//       }\n//     } catch (e) {\n//       display.error(e)\n//     }\n//     return false\n//   })\n// }\n// https://github.com/jquery/jquery/blob/a684e6ba836f7c553968d7d026ed7941e1a612d8/src/selector/escapeSelector.js\nexport var cssEscape = function (str) {\n  str = str + ''\n  if (window.CSS && window.CSS.escape) {\n    return window.CSS.escape(str)\n  }\n\n  // eslint-disable-next-line no-control-regex\n  return str.replace(\n    /([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\x80-\\uFFFF\\w-]/g,\n    function (ch, asCodePoint) {\n      if (asCodePoint) {\n        // U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER\n        if (ch === '\\0') {\n          return '\\uFFFD'\n        }\n        // Control characters and (dependent upon position) numbers get escaped as code points\n        return (\n          ch.slice(0, -1) +\n          '\\\\' +\n          ch.charCodeAt(ch.length - 1).toString(16) +\n          ' '\n        )\n      }\n      // Other potentially-special ASCII characters get backslash-escaped\n      return '\\\\' + ch\n    }\n  )\n}\n// export var inherit = function (subclass, superclass) {\n//   var F = function () {}\n//   F.prototype = superclass.prototype\n//   subclass.prototype = new F()\n//   subclass.prototype.constructor = subclass\n//   subclass.superclass = superclass.prototype\n//   return subclass\n// }\n// export var tirm = function (str) {\n//   return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '')\n// }\nexport var isObject = function (obj) {\n  if (obj === null) return false\n  return toString.call(obj) === '[object Object]'\n}\n\nexport var isEmptyObject = function (obj) {\n  if (isObject(obj)) {\n    for (var key in obj) {\n      if (hasOwnProperty.call(obj, key)) {\n        return false\n      }\n    }\n    return true\n  } else {\n    return false\n  }\n}\nexport var objectEntries = function (object) {\n  var res = []\n  each(object, function (value, key) {\n    res.push([key, value])\n  })\n  return res\n}\n// export var isUndefined = function (obj) {\n//   return obj === void 0\n// }\nexport var isString = function (obj) {\n  return toString.call(obj) === '[object String]'\n}\nexport var isDate = function (obj) {\n  return toString.call(obj) === '[object Date]'\n}\nexport var isBoolean = function (obj) {\n  return toString.call(obj) === '[object Boolean]'\n}\nexport var isNumber = function (obj) {\n  return toString.call(obj) === '[object Number]' && /[\\d\\.]+/.test(String(obj))\n}\n// export var isElement = function (obj) {\n//   return !!(obj && obj.nodeType === 1)\n// }\n// export var isJSONString = function (str) {\n//   try {\n//     JSON.parse(str)\n//   } catch (e) {\n//     return false\n//   }\n//   return true\n// }\n// export var safeJSONParse = function (str) {\n//   var val = null\n//   try {\n//     val = JSON.parse(str)\n//   } catch (e) {\n//     return false\n//   }\n//   return val\n// }\n\nexport var encodeDates = function (obj) {\n  each(obj, function (v, k) {\n    if (isDate(v)) {\n      obj[k] = formatDate(v)\n    } else if (isObject(v)) {\n      obj[k] = encodeDates(v)\n    }\n  })\n  return obj\n}\n// export var mediaQueriesSupported = function () {\n//   return (\n//     typeof window.matchMedia !== 'undefined' ||\n//     typeof window.msMatchMedia !== 'undefined'\n//   )\n// }\n// export var getScreenOrientation = function () {\n//   var screenOrientationAPI =\n//     screen.msOrientation ||\n//     screen.mozOrientation ||\n//     (screen.orientation || {}).type\n//   var screenOrientation = '未取到值'\n//   if (screenOrientationAPI) {\n//     screenOrientation =\n//       screenOrientationAPI.indexOf('landscape') > -1 ? 'landscape' : 'portrait'\n//   } else if (mediaQueriesSupported()) {\n//     var matchMediaFunc = window.matchMedia || window.msMatchMedia\n//     if (matchMediaFunc('(orientation: landscape)').matches) {\n//       screenOrientation = 'landscape'\n//     } else if (matchMediaFunc('(orientation: portrait)').matches) {\n//       screenOrientation = 'portrait'\n//     }\n//   }\n//   return screenOrientation\n// }\n// export var now =\n//   Date.now ||\n//   function () {\n//     return new Date().getTime()\n//   }\n\nexport var throttle = function (fn, wait, options) {\n  var needLeadingExecution =\n    options && options.leading !== undefined ? options.leading : true\n  var needTrailingExecution =\n    options && options.trailing !== undefined ? options.trailing : true\n  let inWaitPeriod = false\n  let pendingExecutionWithParameters\n  let pendingTimeoutId\n  var context = this\n  return {\n    throttled: function () {\n      if (inWaitPeriod) {\n        pendingExecutionWithParameters = arguments\n        return\n      }\n\n      if (needLeadingExecution) {\n        fn.apply(context, arguments)\n      } else {\n        pendingExecutionWithParameters = arguments\n      }\n      inWaitPeriod = true\n      pendingTimeoutId = setTimeout(function () {\n        if (needTrailingExecution && pendingExecutionWithParameters) {\n          fn.apply(context, pendingExecutionWithParameters)\n        }\n        inWaitPeriod = false\n        pendingExecutionWithParameters = undefined\n      }, wait)\n    },\n    cancel: function () {\n      clearTimeout(pendingTimeoutId)\n      inWaitPeriod = false\n      pendingExecutionWithParameters = undefined\n    }\n  }\n}\n// export var hashCode = function (str) {\n//   if (typeof str !== 'string') {\n//     return 0\n//   }\n//   var hash = 0\n//   var char = null\n//   if (str.length == 0) {\n//     return hash\n//   }\n//   for (var i = 0; i < str.length; i++) {\n//     char = str.charCodeAt(i)\n//     hash = (hash << 5) - hash + char\n//     hash = hash & hash\n//   }\n//   return hash\n// }\nexport var formatDate = function (d) {\n  function pad(n) {\n    return n < 10 ? '0' + n : n\n  }\n\n  return (\n    d.getFullYear() +\n    '-' +\n    pad(d.getMonth() + 1) +\n    '-' +\n    pad(d.getDate()) +\n    ' ' +\n    pad(d.getHours()) +\n    ':' +\n    pad(d.getMinutes()) +\n    ':' +\n    pad(d.getSeconds()) +\n    '.' +\n    pad(d.getMilliseconds())\n  )\n}\nexport var searchObjDate = function (o) {\n  if (isObject(o)) {\n    each(o, function (a, b) {\n      if (isObject(a)) {\n        searchObjDate(o[b])\n      } else {\n        if (isDate(a)) {\n          o[b] = formatDate(a)\n        }\n      }\n    })\n  }\n}\n// export var formatJsonString = function (obj) {\n//   try {\n//     return JSON.stringify(obj, null, '  ')\n//   } catch (e) {\n//     return JSON.stringify(obj)\n//   }\n// }\n// export var formatString = function (str) {\n//   if (str.length > MAX_STRING_LENGTH) {\n//     sd.log('字符串长度超过限制，已经做截取--' + str)\n//     return str.slice(0, MAX_STRING_LENGTH)\n//   } else {\n//     return str\n//   }\n// }\nexport var searchObjString = function (o) {\n  if (isObject(o)) {\n    each(o, function (a, b) {\n      if (isObject(a)) {\n        searchObjString(o[b])\n      } else {\n        if (isString(a)) {\n          o[b] = formatString(a)\n        }\n      }\n    })\n  }\n}\n// export var unique = function (ar) {\n//   var temp,\n//     n = [],\n//     o = {}\n//   for (var i = 0; i < ar.length; i++) {\n//     temp = ar[i]\n//     if (!(temp in o)) {\n//       o[temp] = true\n//       n.push(temp)\n//     }\n//   }\n//   return n\n// }\n// export var strip_empty_properties = function (p) {\n//   var ret = {}\n//   each(p, function (v, k) {\n//     if (v != null) {\n//       ret[k] = v\n//     }\n//   })\n//   return ret\n// }\nexport var utf8Encode = function (string) {\n  string = (string + '').replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n')\n\n  var utftext = '',\n    start,\n    end\n  var stringl = 0,\n    n\n\n  start = end = 0\n  stringl = string.length\n\n  for (n = 0; n < stringl; n++) {\n    var c1 = string.charCodeAt(n)\n    var enc = null\n\n    if (c1 < 128) {\n      end++\n    } else if (c1 > 127 && c1 < 2048) {\n      enc = String.fromCharCode((c1 >> 6) | 192, (c1 & 63) | 128)\n    } else {\n      enc = String.fromCharCode(\n        (c1 >> 12) | 224,\n        ((c1 >> 6) & 63) | 128,\n        (c1 & 63) | 128\n      )\n    }\n    if (enc !== null) {\n      if (end > start) {\n        utftext += string.substring(start, end)\n      }\n      utftext += enc\n      start = end = n + 1\n    }\n  }\n\n  if (end > start) {\n    utftext += string.substring(start, string.length)\n  }\n\n  return utftext\n}\nexport var base64Encode = function (data) {\n  if (typeof btoa === 'function') {\n    return btoa(\n      encodeURIComponent(data).replace(/%([0-9A-F]{2})/g, function (match, p1) {\n        return String.fromCharCode('0x' + p1)\n      })\n    )\n  }\n  data = String(data)\n  var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\n  var o1,\n    o2,\n    o3,\n    h1,\n    h2,\n    h3,\n    h4,\n    bits,\n    i = 0,\n    ac = 0,\n    enc = '',\n    tmp_arr = []\n  if (!data) {\n    return data\n  }\n  data = utf8Encode(data)\n  do {\n    o1 = data.charCodeAt(i++)\n    o2 = data.charCodeAt(i++)\n    o3 = data.charCodeAt(i++)\n\n    bits = (o1 << 16) | (o2 << 8) | o3\n\n    h1 = (bits >> 18) & 0x3f\n    h2 = (bits >> 12) & 0x3f\n    h3 = (bits >> 6) & 0x3f\n    h4 = bits & 0x3f\n    tmp_arr[ac++] =\n      b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4)\n  } while (i < data.length)\n\n  enc = tmp_arr.join('')\n\n  switch (data.length % 3) {\n    case 1:\n      enc = enc.slice(0, -2) + '=='\n      break\n    case 2:\n      enc = enc.slice(0, -1) + '='\n      break\n  }\n\n  return enc\n}\n/**\n * UUID v4\n * from https://gist.github.com/jed/982883\n */\nexport function UUID(placeholder) {\n  return placeholder\n    ? // eslint-disable-next-line  no-bitwise\n      (\n        parseInt(placeholder, 10) ^\n        ((Math.random() * 16) >> (parseInt(placeholder, 10) / 4))\n      ).toString(16)\n    : `${1e7}-${1e3}-${4e3}-${8e3}-${1e11}`.replace(/[018]/g, UUID)\n}\n\n// 替换url包含数字的路由\nexport function replaceNumberCharByPath(path) {\n  var pathGroup = ''\n  if (path) {\n    pathGroup = path.replace(/\\/([^\\/]*)\\d([^\\/]*)/g, '/?').replace(/\\/$/g, '')\n  }\n  return pathGroup || '/'\n}\n\nexport var urlParse = function (para) {\n  var URLParser = function (a) {\n    this._fields = {\n      Username: 4,\n      Password: 5,\n      Port: 7,\n      Protocol: 2,\n      Host: 6,\n      Path: 8,\n      URL: 0,\n      QueryString: 9,\n      Fragment: 10\n    }\n    this._values = {}\n    this._regex = null\n    this._regex =\n      /^((\\w+):\\/\\/)?((\\w+):?(\\w+)?@)?([^\\/\\?:]+):?(\\d+)?(\\/?[^\\?#]+)?\\??([^#]+)?#?(\\w*)/\n\n    if (typeof a != 'undefined') {\n      this._parse(a)\n    }\n  }\n  URLParser.prototype.setUrl = function (a) {\n    this._parse(a)\n  }\n  URLParser.prototype._initValues = function () {\n    for (var a in this._fields) {\n      this._values[a] = ''\n    }\n  }\n  URLParser.prototype.addQueryString = function (queryObj) {\n    if (typeof queryObj !== 'object') {\n      return false\n    }\n    var query = this._values.QueryString || ''\n    for (var i in queryObj) {\n      if (new RegExp(i + '[^&]+').test(query)) {\n        query = query.replace(new RegExp(i + '[^&]+'), i + '=' + queryObj[i])\n      } else {\n        if (query.slice(-1) === '&') {\n          query = query + i + '=' + queryObj[i]\n        } else {\n          if (query === '') {\n            query = i + '=' + queryObj[i]\n          } else {\n            query = query + '&' + i + '=' + queryObj[i]\n          }\n        }\n      }\n    }\n    this._values.QueryString = query\n  }\n  URLParser.prototype.getParse = function () {\n    return this._values\n  }\n  URLParser.prototype.getUrl = function () {\n    var url = ''\n    url += this._values.Origin\n    // url += this._values.Port ? ':' + this._values.Port : ''\n    url += this._values.Path\n    url += this._values.QueryString ? '?' + this._values.QueryString : ''\n    return url\n  }\n  URLParser.prototype._parse = function (a) {\n    this._initValues()\n    var b = this._regex.exec(a)\n    if (!b) {\n      throw 'DPURLParser::_parse -> Invalid URL'\n    }\n    for (var c in this._fields) {\n      if (typeof b[this._fields[c]] != 'undefined') {\n        this._values[c] = b[this._fields[c]]\n      }\n    }\n    this._values['Path'] = this._values['Path'] || '/'\n    this._values['Hostname'] = this._values['Host'].replace(/:\\d+$/, '')\n    this._values['Origin'] =\n      this._values['Protocol'] +\n      '://' +\n      this._values['Hostname'] +\n      (this._values.Port ? ':' + this._values.Port : '')\n    // this._values['Hostname'] = this._values['Host'].replace(/:\\d+$/, '')\n    // this._values['Origin'] =\n    //   this._values['Protocol'] + '://' + this._values['Hostname']\n  }\n  return new URLParser(para)\n}\n// export function elementMatches(element, selector) {\n//   if (element.matches) {\n//     return element.matches(selector)\n//   }\n//   // IE11 support\n//   if (element.msMatchesSelector) {\n//     return element.msMatchesSelector(selector)\n//   }\n//   return false\n// }\n\nexport var localStorage = {\n  get: function (name) {\n    return window.localStorage.getItem(name)\n  },\n\n  parse: function (name) {\n    var storedValue\n    try {\n      storedValue = JSON.parse(localStorage.get(name)) || null\n    } catch (err) {\n      sd.log(err)\n    }\n    return storedValue\n  },\n\n  set: function (name, value) {\n    window.localStorage.setItem(name, value)\n  },\n\n  remove: function (name) {\n    window.localStorage.removeItem(name)\n  },\n\n  isSupport: function () {\n    var supported = true\n    try {\n      var key = '__sensorsdatasupport__'\n      var val = 'testIsSupportStorage'\n      localStorage.set(key, val)\n      if (localStorage.get(key) !== val) {\n        supported = false\n      }\n      localStorage.remove(key)\n    } catch (err) {\n      supported = false\n    }\n    return supported\n  }\n}\nexport var sessionStorage = {\n  isSupport: function () {\n    var supported = true\n\n    var key = '__sensorsdatasupport__'\n    var val = 'testIsSupportStorage'\n    try {\n      if (sessionStorage && sessionStorage.setItem) {\n        sessionStorage.setItem(key, val)\n        sessionStorage.removeItem(key, val)\n        supported = true\n      } else {\n        supported = false\n      }\n    } catch (e) {\n      supported = false\n    }\n    return supported\n  }\n}\n// export var isSupportCors = function () {\n//   if (typeof window.XMLHttpRequest === 'undefined') {\n//     return false\n//   }\n//   if ('withCredentials' in new XMLHttpRequest()) {\n//     return true\n//   } else if (typeof XDomainRequest !== 'undefined') {\n//     return true\n//   } else {\n//     return false\n//   }\n// }\n// export var xhr = function (cors) {\n//   if (cors) {\n//     if (\n//       typeof window.XMLHttpRequest !== 'undefined' &&\n//       'withCredentials' in new XMLHttpRequest()\n//     ) {\n//       return new XMLHttpRequest()\n//     } else if (typeof XDomainRequest !== 'undefined') {\n//       return new XDomainRequest()\n//     } else {\n//       return null\n//     }\n//   } else {\n//     if (typeof window.XMLHttpRequest !== 'undefined') {\n//       return new XMLHttpRequest()\n//     }\n//     if (window.ActiveXObject) {\n//       try {\n//         return new ActiveXObject('Msxml2.XMLHTTP')\n//       } catch (d) {\n//         try {\n//           return new ActiveXObject('Microsoft.XMLHTTP')\n//         } catch (d) {\n//           console.log(d)\n//         }\n//       }\n//     }\n//   }\n// }\n// export var ajax = function (para) {\n//   para.timeout = para.timeout || 20000\n\n//   para.credentials =\n//     typeof para.credentials === 'undefined' ? true : para.credentials\n\n//   function getJSON(data) {\n//     if (!data) {\n//       return ''\n//     }\n//     try {\n//       return JSON.parse(data)\n//     } catch (e) {\n//       return {}\n//     }\n//   }\n\n//   var g = xhr(para.cors)\n\n//   if (!g) {\n//     return false\n//   }\n\n//   if (!para.type) {\n//     para.type = para.data ? 'POST' : 'GET'\n//   }\n//   para = extend(\n//     {\n//       success: function () {},\n//       error: function () {}\n//     },\n//     para\n//   )\n\n//   try {\n//     if (typeof g === 'object' && 'timeout' in g) {\n//       g.timeout = para.timeout\n//     } else {\n//       setTimeout(function () {\n//         g.abort()\n//       }, para.timeout + 500)\n//     }\n//   } catch (e) {\n//     try {\n//       setTimeout(function () {\n//         g.abort()\n//       }, para.timeout + 500)\n//     } catch (e2) {}\n//   }\n\n//   g.onreadystatechange = function () {\n//     try {\n//       if (g.readyState == 4) {\n//         if ((g.status >= 200 && g.status < 300) || g.status == 304) {\n//           para.success(getJSON(g.responseText))\n//         } else {\n//           para.error(getJSON(g.responseText), g.status)\n//         }\n//         g.onreadystatechange = null\n//         g.onload = null\n//       }\n//     } catch (e) {\n//       g.onreadystatechange = null\n//       g.onload = null\n//     }\n//   }\n\n//   g.open(para.type, para.url, true)\n\n//   try {\n//     if (para.credentials) {\n//       g.withCredentials = true\n//     }\n//     if (isObject(para.header)) {\n//       for (var i in para.header) {\n//         g.setRequestHeader(i, para.header[i])\n//       }\n//     }\n\n//     if (para.data) {\n//       if (!para.cors) {\n//         g.setRequestHeader('X-Requested-With', 'XMLHttpRequest')\n//       }\n//       if (para.contentType === 'application/json') {\n//         g.setRequestHeader('Content-type', 'application/json; charset=UTF-8')\n//       } else {\n//         g.setRequestHeader('Content-type', 'application/x-www-form-urlencoded')\n//       }\n//     }\n//   } catch (e) {}\n\n//   g.send(para.data || null)\n// }\n// export var loadScript = function (para) {\n//   para = extend(\n//     {\n//       success: function () {},\n//       error: function () {},\n//       appendCall: function (g) {\n//         document.getElementsByTagName('head')[0].appendChild(g)\n//       }\n//     },\n//     para\n//   )\n\n//   var g = null\n//   if (para.type === 'css') {\n//     g = document.createElement('link')\n//     g.rel = 'stylesheet'\n//     g.href = para.url\n//   }\n//   if (para.type === 'js') {\n//     g = document.createElement('script')\n//     g.async = 'async'\n//     g.setAttribute('charset', 'UTF-8')\n//     g.src = para.url\n//     g.type = 'text/javascript'\n//   }\n//   g.onload = g.onreadystatechange = function () {\n//     if (\n//       !this.readyState ||\n//       this.readyState === 'loaded' ||\n//       this.readyState === 'complete'\n//     ) {\n//       para.success()\n//       g.onload = g.onreadystatechange = null\n//     }\n//   }\n//   g.onerror = function () {\n//     para.error()\n//     g.onerror = null\n//   }\n//   para.appendCall(g)\n// }\n// export var getHostname = function (url, defaultValue) {\n//   if (!defaultValue || typeof defaultValue !== 'string') {\n//     defaultValue = 'hostname解析异常'\n//   }\n//   var hostname = null\n//   try {\n//     hostname = URL(url).hostname\n//   } catch (e) {}\n//   return hostname || defaultValue\n// }\nexport var getQueryParamsFromUrl = function (url) {\n  var result = {}\n  var arr = url.split('?')\n  var queryString = arr[1] || ''\n  if (queryString) {\n    result = getURLSearchParams('?' + queryString)\n  }\n  return result\n}\n\nexport var getURLSearchParams = function (queryString) {\n  queryString = queryString || ''\n  var decodeParam = function (str) {\n    return decodeURIComponent(str)\n  }\n  var args = {}\n  var query = queryString.substring(1)\n  var pairs = query.split('&')\n  for (var i = 0; i < pairs.length; i++) {\n    var pos = pairs[i].indexOf('=')\n    if (pos === -1) continue\n    var name = pairs[i].substring(0, pos)\n    var value = pairs[i].substring(pos + 1)\n    name = decodeParam(name)\n    value = decodeParam(value)\n    args[name] = value\n  }\n  return args\n}\nfunction createCircularReferenceChecker() {\n  if (typeof WeakSet !== 'undefined') {\n    var set = new WeakSet()\n    return {\n      hasAlreadyBeenSeen: function (value) {\n        var has = set.has(value)\n        if (!has) {\n          set.add(value)\n        }\n        return has\n      }\n    }\n  }\n  var array = []\n  return {\n    hasAlreadyBeenSeen: function (value) {\n      var has = array.indexOf(value) >= 0\n      if (!has) {\n        array.push(value)\n      }\n      return has\n    }\n  }\n}\n/**\n * Similar to `typeof`, but distinguish plain objects from `null` and arrays\n */\nexport function getType(value) {\n  if (value === null) {\n    return 'null'\n  }\n  if (Array.isArray(value)) {\n    return 'array'\n  }\n  return typeof value\n}\n/**\n * Iterate over source and affect its sub values into destination, recursively.\n * If the source and destination can't be merged, return source.\n */\nexport function mergeInto(destination, source, circularReferenceChecker) {\n  // ignore the source if it is undefined\n  if (typeof circularReferenceChecker === 'undefined') {\n    circularReferenceChecker = createCircularReferenceChecker()\n  }\n  if (source === undefined) {\n    return destination\n  }\n\n  if (typeof source !== 'object' || source === null) {\n    // primitive values - just return source\n    return source\n  } else if (source instanceof Date) {\n    return new Date(source.getTime())\n  } else if (source instanceof RegExp) {\n    var flags =\n      source.flags ||\n      // old browsers compatibility\n      [\n        source.global ? 'g' : '',\n        source.ignoreCase ? 'i' : '',\n        source.multiline ? 'm' : '',\n        source.sticky ? 'y' : '',\n        source.unicode ? 'u' : ''\n      ].join('')\n    return new RegExp(source.source, flags)\n  }\n\n  if (circularReferenceChecker.hasAlreadyBeenSeen(source)) {\n    // remove circular references\n    return undefined\n  } else if (Array.isArray(source)) {\n    var merged = Array.isArray(destination) ? destination : []\n    for (var i = 0; i < source.length; ++i) {\n      merged[i] = mergeInto(merged[i], source[i], circularReferenceChecker)\n    }\n    return merged\n  }\n\n  var merged = getType(destination) === 'object' ? destination : {}\n  for (var key in source) {\n    if (Object.prototype.hasOwnProperty.call(source, key)) {\n      merged[key] = mergeInto(\n        merged[key],\n        source[key],\n        circularReferenceChecker\n      )\n    }\n  }\n  return merged\n}\n\n/**\n * A simplistic implementation of a deep clone algorithm.\n * Caveats:\n * - It doesn't maintain prototype chains - don't use with instances of custom classes.\n * - It doesn't handle Map and Set\n */\nexport function deepClone(value) {\n  return mergeInto(undefined, value)\n}\n\n// export var getCurrentDomain = function (url) {\n//   var cookieTopLevelDomain = getCookieTopLevelDomain()\n//   if (url === '') {\n//     return 'url解析失败'\n//   } else if (cookieTopLevelDomain === '') {\n//     return 'url解析失败'\n//   } else {\n//     return cookieTopLevelDomain\n//   }\n// }\n// export var getCookieTopLevelDomain = function (hostname) {\n//   hostname = hostname || window.location.hostname\n//   var splitResult = hostname.split('.')\n//   if (\n//     isArray(splitResult) &&\n//     splitResult.length >= 2 &&\n//     !/^(\\d+\\.)+\\d+$/.test(hostname)\n//   ) {\n//     var domainStr = '.' + splitResult.splice(splitResult.length - 1, 1)\n//     while (splitResult.length > 0) {\n//       domainStr =\n//         '.' + splitResult.splice(splitResult.length - 1, 1) + domainStr\n//       document.cookie = 'domain_test=true; path=/; domain=' + domainStr\n//       if (document.cookie.indexOf('domain_test=true') !== -1) {\n//         var now = new Date()\n//         now.setTime(now.getTime() - 1000)\n//         document.cookie =\n//           'domain_test=true; expires=' +\n//           now.toGMTString() +\n//           '; path=/; domain=' +\n//           domainStr\n//         return domainStr\n//       }\n//     }\n//   }\n//   return ''\n// }\n// export var strToUnicode = function (str) {\n//   if (typeof str !== 'string') {\n//     return str\n//   }\n//   var nstr = ''\n//   for (var i = 0; i < str.length; i++) {\n//     nstr += '\\\\' + str.charCodeAt(i).toString(16)\n//   }\n//   return nstr\n// }\n// export var autoExeQueue = function () {\n//   var queue = {\n//     items: [],\n//     enqueue: function (val) {\n//       this.items.push(val)\n//       this.start()\n//     },\n//     dequeue: function () {\n//       return this.items.shift()\n//     },\n//     getCurrentItem: function () {\n//       return this.items[0]\n//     },\n//     isRun: false,\n//     start: function () {\n//       if (this.items.length > 0 && !this.isRun) {\n//         this.isRun = true\n//         this.getCurrentItem().start()\n//       }\n//     },\n//     close: function () {\n//       this.dequeue()\n//       this.isRun = false\n//       this.start()\n//     }\n//   }\n//   return queue\n// }\n// export var strip_sa_properties = function (p) {\n//   if (!isObject(p)) {\n//     return p\n//   }\n//   each(p, function (v, k) {\n//     if (isArray(v)) {\n//       var temp = []\n//       each(v, function (arrv) {\n//         if (isString(arrv)) {\n//           temp.push(arrv)\n//         } else {\n//           console.log(\n//             '您的数据-',\n//             k,\n//             v,\n//             '的数组里的值必须是字符串,已经将其删除'\n//           )\n//         }\n//       })\n//       if (temp.length !== 0) {\n//         p[k] = temp\n//       } else {\n//         delete p[k]\n//         console.log('已经删除空的数组')\n//       }\n//     }\n//     if (\n//       !(\n//         isString(v) ||\n//         isNumber(v) ||\n//         isDate(v) ||\n//         isBoolean(v) ||\n//         isArray(v) ||\n//         isFunction(v) ||\n//         k === '$option'\n//       )\n//     ) {\n//       console.log('您的数据-', k, v, '-格式不满足要求，我们已经将其删除')\n//       delete p[k]\n//     }\n//   })\n//   return p\n// }\n\n// export var searchConfigData = function (data) {\n//   if (typeof data === 'object' && data.$option) {\n//     var data_config = data.$option\n//     delete data.$option\n//     return data_config\n//   } else {\n//     return {}\n//   }\n// }\n// 从字符串 src 中查找 k+sp 和  e 之间的字符串，如果 k==e 且 k 只有一个，或者 e 不存在，从 k+sp 截取到字符串结束\n// abcd=1&b=1&c=3;\n// abdc=1;b=1;a=3;\n// export var stringSplice = function (src, k, e, sp) {\n//   if (src === '') {\n//     return ''\n//   }\n//   sp = sp === '' ? '=' : sp\n//   k += sp\n//   var ps = src.indexOf(k)\n//   if (ps < 0) {\n//     return ''\n//   }\n//   ps += k.length\n//   var pe = pe < ps ? src.length : src.indexOf(e, ps)\n//   return src.substring(ps, pe)\n// }\nexport function getStatusGroup(status) {\n  if (!status) return status === 0 ? undefined : status\n  return (\n    String(status).substr(0, 1) + String(status).substr(1).replace(/\\d*/g, 'x')\n  )\n}\n// export var getReferrer = function () {\n//   var ref = document.referrer.toLowerCase()\n//   var re = /^[^\\?&#]*.swf([\\?#])?/\n//   // 如果页面 Referer 为空，从 URL 中获取\n//   if (ref === '' || ref.match(re)) {\n//     ref = stringSplice(window.location.href, 'ref', '&', '')\n//     if (ref !== '') {\n//       return encodeURIComponent(ref)\n//     }\n//   }\n//   return encodeURIComponent(ref)\n// }\n// export var typeDecide = function (o, type) {\n//   return toString.call(o) === '[object ' + type + ']'\n// }\n\nexport function noop() {}\n\nexport var ONE_SECOND = 1000\nexport var ONE_MINUTE = 60 * ONE_SECOND\nexport var ONE_HOUR = 60 * ONE_MINUTE\nexport var ONE_DAY = 24 * ONE_HOUR\nexport var ONE_YEAR = 365 * ONE_DAY\n\n/**\n * Return true if the draw is successful\n * @param threshold between 0 and 100\n */\nexport function performDraw(threshold) {\n  return threshold !== 0 && Math.random() * 100 <= threshold\n}\n\nexport function round(num, decimals) {\n  return +num.toFixed(decimals)\n}\n\nexport function msToNs(duration) {\n  if (typeof duration !== 'number') {\n    return duration\n  }\n  return round(duration * 1e6, 0)\n}\nexport function mapValues(object, fn) {\n  var newObject = {}\n  each(object, function (value, key) {\n    newObject[key] = fn(value)\n  })\n\n  return newObject\n}\n\nexport function toServerDuration(duration) {\n  if (!isNumber(duration)) {\n    return duration\n  }\n  return round(duration * 1e6, 0)\n}\nexport function getRelativeTime(timestamp) {\n  return timestamp - getNavigationStart()\n}\nexport function preferredNow() {\n  return relativeNow()\n}\nexport function getTimestamp(relativeTime) {\n  return Math.round(getNavigationStart() + relativeTime)\n}\nexport function relativeNow() {\n  return performance.now()\n}\n\nexport function clocksNow() {\n  return { relative: relativeNow(), timeStamp: timeStampNow() }\n}\nexport function timeStampNow() {\n  return dateNow()\n}\n\nexport function looksLikeRelativeTime(time) {\n  return time < ONE_YEAR\n}\nexport function dateNow() {\n  // Do not use `Date.now` because sometimes websites are wrongly \"polyfilling\" it. For example, we\n  // had some users using a very old version of `datejs`, which patched `Date.now` to return a Date\n  // instance instead of a timestamp[1]. Those users are unlikely to fix this, so let's handle this\n  // case ourselves.\n  // [1]: https://github.com/datejs/Datejs/blob/97f5c7c58c5bc5accdab8aa7602b6ac56462d778/src/core-debug.js#L14-L16\n  return new Date().getTime()\n}\n\nexport function elapsed(start, end) {\n  return end - start\n}\n\nexport function clocksOrigin() {\n  return { relative: 0, timeStamp: getNavigationStart() }\n}\n// export function preferredClock(clocks) {\n//   return clocks.relative\n// }\n// export function preferredTimeStamp(clocks) {\n//   return getTimestamp(clocks.relative)\n// }\nexport function relativeToClocks(relative) {\n  return { relative: relative, timeStamp: getCorrectedTimeStamp(relative) }\n}\nexport function currentDrift() {\n  // eslint-disable-next-line @typescript-eslint/restrict-plus-operands\n  return Math.round(dateNow() - (getNavigationStart() + performance.now()))\n}\nexport function addDuration(a, b) {\n  return a + b\n}\nfunction getCorrectedTimeStamp(relativeTime) {\n  var correctedOrigin = dateNow() - performance.now()\n  // apply correction only for positive drift\n  if (correctedOrigin > getNavigationStart()) {\n    return Math.round(correctedOrigin + relativeTime)\n  }\n  return getTimestamp(relativeTime)\n}\n/**\n * Navigation start slightly change on some rare cases\n */\nvar navigationStart\nexport function getNavigationStart() {\n  if (navigationStart === undefined) {\n    navigationStart = performance.timing.navigationStart\n  }\n  return navigationStart\n}\n\nvar COMMA_SEPARATED_KEY_VALUE = /([\\w-]+)\\s*=\\s*([^;]+)/g\nexport function findCommaSeparatedValue(rawString, name) {\n  COMMA_SEPARATED_KEY_VALUE.lastIndex = 0\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    var match = COMMA_SEPARATED_KEY_VALUE.exec(rawString)\n    if (match) {\n      if (match[1] === name) {\n        return match[2]\n      }\n    } else {\n      break\n    }\n  }\n}\n\n// export function findCommaSeparatedValues(rawString) {\n//   var result = new Map()\n//   COMMA_SEPARATED_KEY_VALUE.lastIndex = 0\n//   // eslint-disable-next-line no-constant-condition\n//   while (true) {\n//     var match = COMMA_SEPARATED_KEY_VALUE.exec(rawString)\n//     if (match) {\n//       result.set(match[1], match[2])\n//     } else {\n//       break\n//     }\n//   }\n//   return result\n// }\nexport function findByPath(source, path) {\n  var pathArr = path.split('.')\n  while (pathArr.length) {\n    var key = pathArr.shift()\n    if (\n      source &&\n      isObject(source) &&\n      key in source &&\n      hasOwnProperty.call(source, key)\n    ) {\n      source = source[key]\n    } else {\n      return undefined\n    }\n  }\n  return source\n}\nexport function safeTruncate(candidate, length) {\n  var lastChar = candidate.charCodeAt(length - 1)\n  // check if it is the high part of a surrogate pair\n  if (lastChar >= 0xd800 && lastChar <= 0xdbff) {\n    return candidate.slice(0, length + 1)\n  }\n  return candidate.slice(0, length)\n}\nexport function isMatchOption(item) {\n  const itemType = getType(item)\n  return (\n    itemType === 'string' || itemType === 'function' || item instanceof RegExp\n  )\n}\nexport function includes(candidate, search) {\n  // tslint:disable-next-line: no-unsafe-any\n  return candidate.indexOf(search) !== -1\n}\n\nexport function find(array, predicate) {\n  for (var i = 0; i < array.length; i += 1) {\n    var item = array[i]\n    if (predicate(item, i, array)) {\n      return item\n    }\n  }\n  return undefined\n}\nexport function arrayFrom(arrayLike) {\n  if (Array.from) {\n    return Array.from(arrayLike)\n  }\n  var array = []\n  if (arrayLike instanceof Set) {\n    arrayLike.forEach(function (item) {\n      array.push(item)\n    })\n  } else {\n    for (var i = 0; i < arrayLike.length; i++) {\n      array.push(arrayLike[i])\n    }\n  }\n  return array\n}\nexport function findLast(array, predicate) {\n  for (var i = array.length - 1; i >= 0; i -= 1) {\n    var item = array[i]\n    if (predicate(item, i, array)) {\n      return item\n    }\n  }\n  return undefined\n}\nexport function isPercentage(value) {\n  return isNumber(value) && value >= 0 && value <= 100\n}\n\nexport function getLocationOrigin() {\n  return getLinkElementOrigin(window.location)\n}\nexport var Browser = {\n  IE: 0,\n  CHROMIUM: 1,\n  SAFARI: 2,\n  OTHER: 3\n}\nexport function isIE() {\n  return detectBrowserCached() === Browser.IE\n}\nexport function isChromium() {\n  return detectBrowserCached() === Browser.CHROMIUM\n}\nexport function isSafari() {\n  return detectBrowserCached() === Browser.SAFARI\n}\nvar browserCache\nfunction detectBrowserCached() {\n  return isNullUndefinedDefaultValue(\n    browserCache,\n    (browserCache = detectBrowser())\n  )\n}\nexport function detectBrowser(browserWindow) {\n  if (typeof browserWindow === 'undefined') {\n    browserWindow = window\n  }\n  var userAgent = browserWindow.navigator.userAgent\n  if (browserWindow.chrome || /HeadlessChrome/.test(userAgent)) {\n    return Browser.CHROMIUM\n  }\n\n  if (\n    // navigator.vendor is deprecated, but it is the most resilient way we found to detect\n    // \"Apple maintained browsers\" (AKA Safari). If one day it gets removed, we still have the\n    // useragent test as a semi-working fallback.\n    browserWindow.navigator.vendor?.indexOf('Apple') === 0 ||\n    (/safari/i.test(userAgent) && !/chrome|android/i.test(userAgent))\n  ) {\n    return Browser.SAFARI\n  }\n\n  if (browserWindow.document.documentMode) {\n    return Browser.IE\n  }\n\n  return Browser.OTHER\n}\n\n/**\n * IE fallback\n * https://developer.mozilla.org/en-US/docs/Web/API/HTMLHyperlinkElementUtils/origin\n */\nexport function getLinkElementOrigin(element) {\n  if (element.origin && element.origin !== 'null') {\n    return element.origin\n  }\n  var sanitizedHost = element.host.replace(/(:80|:443)$/, '')\n  return element.protocol + '//' + sanitizedHost\n}\n\nexport function withSnakeCaseKeys(candidate) {\n  var result = {}\n  each(candidate, function (value, key) {\n    result[toSnakeCase(key)] = deepSnakeCase(value)\n  })\n  return result\n}\n\nexport function deepSnakeCase(candidate) {\n  if (isArray(candidate)) {\n    return map(candidate, function (value) {\n      return deepSnakeCase(value)\n    })\n  }\n  if (typeof candidate === 'object' && candidate !== null) {\n    return withSnakeCaseKeys(candidate)\n  }\n  return candidate\n}\n\nexport function toSnakeCase(word) {\n  return word\n    .replace(/[A-Z]/g, function (uppercaseLetter, index) {\n      return (index !== 0 ? '_' : '') + uppercaseLetter.toLowerCase()\n    })\n    .replace(/-/g, '_')\n}\n\nexport function isNullUndefinedDefaultValue(data, defaultValue) {\n  if (data !== null && data !== void 0) {\n    return data\n  } else {\n    return defaultValue\n  }\n}\n\nexport function objectHasValue(object, value) {\n  return some(keys(object), function (key) {\n    return object[key] === value\n  })\n}\nexport function startsWith(candidate, search) {\n  return candidate.slice(0, search.length) === search\n}\n\nexport function endsWith(candidate, search) {\n  return candidate.slice(-search.length) === search\n}\n// export function removeDuplicates(array) {\n//   var set = new Set()\n//   array.forEach(function (item) {\n//     set.add(item)\n//   })\n//   return arrayFrom(set)\n// }\n\nexport function removeItem(array, item) {\n  var index = array.indexOf(item)\n  if (index >= 0) {\n    array.splice(index, 1)\n  }\n}\n// export function tryToClone(response) {\n//   try {\n//     return response.clone()\n//   } catch (e) {\n//     // clone can throw if the response has already been used by another instrumentation or is disturbed\n//     return\n//   }\n// }\nexport function isHashAnAnchor(hash) {\n  var correspondingId = hash.substr(1)\n  if (!correspondingId) return false\n  return !!document.getElementById(correspondingId)\n}\nexport function getPathFromHash(hash) {\n  var index = hash.indexOf('?')\n  return index < 0 ? hash : hash.slice(0, index)\n}\n\nexport function discardNegativeDuration(duration) {\n  return isNumber(duration) && duration < 0 ? undefined : duration\n}\n","import { removeItem } from './tools'\nvar BUFFER_LIMIT = 500\nexport function createBoundedBuffer() {\n  var buffer = []\n\n  var add = function (callback) {\n    var length = buffer.push(callback)\n    if (length > BUFFER_LIMIT) {\n      buffer.splice(0, 1)\n    }\n  }\n\n  var remove = function (callback) {\n    removeItem(buffer, callback)\n  }\n\n  const drain = function (arg) {\n    buffer.forEach(function (callback) {\n      callback(arg)\n    })\n    buffer.length = 0\n  }\n\n  return {\n    add: add,\n    remove: add,\n    drain: drain\n  }\n}\n","import { relativeNow, ONE_MINUTE, removeItem, addDuration } from './tools'\nimport { setInterval, clearInterval } from './timer'\nvar END_OF_TIMES = Infinity\n\nexport var CLEAR_OLD_VALUES_INTERVAL = ONE_MINUTE\nlet cleanupHistoriesInterval = null\n\nconst cleanupTasks = new Set()\n\nfunction cleanupHistories() {\n  cleanupTasks.forEach((task) => task())\n}\n/**\n *\n * @param {expireDelay,maxEntries } params\n * @returns\n */\nexport function createValueHistory(params) {\n  var expireDelay = params.expireDelay\n  var maxEntries = params.maxEntries\n\n  var entries = []\n  if (cleanupHistoriesInterval) {\n    cleanupHistoriesInterval = setInterval(function () {\n      return clearExpiredValues()\n    }, CLEAR_OLD_VALUES_INTERVAL)\n  }\n\n  function clearExpiredValues() {\n    var oldTimeThreshold = relativeNow() - expireDelay\n    while (\n      entries.length > 0 &&\n      entries[entries.length - 1].endTime < oldTimeThreshold\n    ) {\n      entries.pop()\n    }\n  }\n  cleanupTasks.add(clearExpiredValues)\n  function add(value, startTime) {\n    var entry = {\n      value: value,\n      startTime: startTime,\n      endTime: END_OF_TIMES,\n      remove: function () {\n        removeItem(entries, entry)\n      },\n      close: function (endTime) {\n        entry.endTime = endTime\n      }\n    }\n\n    if (maxEntries && entries.length >= maxEntries) {\n      entries.pop()\n    }\n\n    entries.unshift(entry)\n\n    return entry\n  }\n\n  function find(startTime, options) {\n    if (typeof startTime === 'undefined') {\n      startTime = END_OF_TIMES\n    }\n    if (typeof options === 'undefined') {\n      options = { returnInactive: false }\n    }\n    for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n      var entry = entries_1[_i]\n      if (entry.startTime <= startTime) {\n        if (options.returnInactive || startTime <= entry.endTime) {\n          return entry.value\n        }\n        break\n      }\n    }\n  }\n\n  function closeActive(endTime) {\n    var latestEntry = entries[0]\n    if (latestEntry && latestEntry.endTime === END_OF_TIMES) {\n      latestEntry.close(endTime)\n    }\n  }\n\n  function findAll(startTime, duration) {\n    if (startTime === undefined) {\n      startTime = END_OF_TIMES\n    }\n    if (duration === undefined) {\n      duration = 0\n    }\n    var endTime = addDuration(startTime, duration)\n    return entries\n      .filter(function (entry) {\n        return entry.startTime <= endTime && startTime <= entry.endTime\n      })\n      .map(function (entry) {\n        return entry.value\n      })\n  }\n\n  /**\n   * Remove all entries from this collection.\n   */\n  function reset() {\n    entries = []\n  }\n\n  /**\n   * Stop internal garbage collection of past entries.\n   */\n  function stop() {\n    cleanupTasks.delete(clearExpiredValues)\n    if (cleanupTasks.size === 0 && cleanupHistoriesInterval) {\n      clearInterval(cleanupHistoriesInterval)\n      cleanupHistoriesInterval = null\n    }\n  }\n\n  return {\n    add: add,\n    find: find,\n    closeActive: closeActive,\n    findAll: findAll,\n    reset: reset,\n    stop: stop\n  }\n}\n","import { display } from '../helper/display'\nimport { monitor } from '../helper/monitor'\nvar VariableLibrary = {\n  navigator:\n    typeof window !== 'undefined' && typeof window.navigator != 'undefined'\n      ? window.navigator\n      : {},\n  // 信息map\n  infoMap: {\n    engine: ['WebKit', 'Trident', 'Gecko', 'Presto'],\n    browser: [\n      'Safari',\n      'Chrome',\n      'Edge',\n      'IE',\n      'IE 11',\n      'IE 10',\n      'IE 9',\n      'IE 8',\n      'IE 7',\n      'Firefox',\n      'Firefox Focus',\n      'Chromium',\n      'Opera',\n      'Vivaldi',\n      'Yandex',\n      'Arora',\n      'Lunascape',\n      'QupZilla',\n      'Coc Coc',\n      'Kindle',\n      'Iceweasel',\n      'Konqueror',\n      'Iceape',\n      'SeaMonkey',\n      'Epiphany',\n      '360',\n      '360SE',\n      '360EE',\n      'UC',\n      'QQBrowser',\n      'QQ',\n      'Baidu',\n      'Maxthon',\n      'Sogou',\n      'LBBROWSER',\n      '2345Explorer',\n      'TheWorld',\n      'XiaoMi',\n      'Quark',\n      'Qiyu',\n      'Wechat',\n      ,\n      'WechatWork',\n      'Taobao',\n      'Alipay',\n      'Weibo',\n      'Douban',\n      'Suning',\n      'iQiYi'\n    ],\n    os: [\n      'Windows',\n      'Linux',\n      'Mac OS',\n      'Android',\n      'Ubuntu',\n      'FreeBSD',\n      'Debian',\n      'iOS',\n      'Windows Phone',\n      'BlackBerry',\n      'MeeGo',\n      'Symbian',\n      'Chrome OS',\n      'WebOS'\n    ],\n    device: ['Mobile', 'Tablet', 'iPad']\n  }\n}\n// 方法库\nvar MethodLibrary = {\n  // 获取匹配库\n  getMatchMap: monitor(function (u) {\n    return {\n      // 内核\n      Trident: u.indexOf('Trident') > -1 || u.indexOf('NET CLR') > -1,\n      Presto: u.indexOf('Presto') > -1,\n      WebKit: u.indexOf('AppleWebKit') > -1,\n      Gecko: u.indexOf('Gecko/') > -1,\n      // 浏览器\n      Safari: u.indexOf('Safari') > -1,\n      Chrome: u.indexOf('Chrome') > -1 || u.indexOf('CriOS') > -1,\n      IE: u.indexOf('MSIE') > -1 || u.indexOf('Trident') > -1,\n      Edge: u.indexOf('Edge') > -1 || u.indexOf('Edg') > -1,\n      Firefox: u.indexOf('Firefox') > -1 || u.indexOf('FxiOS') > -1,\n      'Firefox Focus': u.indexOf('Focus') > -1,\n      Chromium: u.indexOf('Chromium') > -1,\n      Opera: u.indexOf('Opera') > -1 || u.indexOf('OPR') > -1,\n      Vivaldi: u.indexOf('Vivaldi') > -1,\n      Yandex: u.indexOf('YaBrowser') > -1,\n      Arora: u.indexOf('Arora') > -1,\n      Lunascape: u.indexOf('Lunascape') > -1,\n      QupZilla: u.indexOf('QupZilla') > -1,\n      'Coc Coc': u.indexOf('coc_coc_browser') > -1,\n      Kindle: u.indexOf('Kindle') > -1 || u.indexOf('Silk/') > -1,\n      Iceweasel: u.indexOf('Iceweasel') > -1,\n      Konqueror: u.indexOf('Konqueror') > -1,\n      Iceape: u.indexOf('Iceape') > -1,\n      SeaMonkey: u.indexOf('SeaMonkey') > -1,\n      Epiphany: u.indexOf('Epiphany') > -1,\n      360: u.indexOf('QihooBrowser') > -1 || u.indexOf('QHBrowser') > -1,\n      '360EE': u.indexOf('360EE') > -1,\n      '360SE': u.indexOf('360SE') > -1,\n      UC: u.indexOf('UC') > -1 || u.indexOf(' UBrowser') > -1,\n      QQBrowser: u.indexOf('QQBrowser') > -1,\n      QQ: u.indexOf('QQ/') > -1,\n      Baidu: u.indexOf('Baidu') > -1 || u.indexOf('BIDUBrowser') > -1,\n      Maxthon: u.indexOf('Maxthon') > -1,\n      Sogou: u.indexOf('MetaSr') > -1 || u.indexOf('Sogou') > -1,\n      LBBROWSER: u.indexOf('LBBROWSER') > -1,\n      '2345Explorer': u.indexOf('2345Explorer') > -1,\n      TheWorld: u.indexOf('TheWorld') > -1,\n      XiaoMi: u.indexOf('MiuiBrowser') > -1,\n      Quark: u.indexOf('Quark') > -1,\n      Qiyu: u.indexOf('Qiyu') > -1,\n      Wechat: u.indexOf('MicroMessenger') > -1,\n      Taobao: u.indexOf('AliApp(TB') > -1,\n      Alipay: u.indexOf('AliApp(AP') > -1,\n      Weibo: u.indexOf('Weibo') > -1,\n      Douban: u.indexOf('com.douban.frodo') > -1,\n      Suning: u.indexOf('SNEBUY-APP') > -1,\n      iQiYi: u.indexOf('IqiyiApp') > -1,\n      // 系统或平台\n      Windows: u.indexOf('Windows') > -1,\n      Linux: u.indexOf('Linux') > -1 || u.indexOf('X11') > -1,\n      'Mac OS': u.indexOf('Macintosh') > -1,\n      Android: u.indexOf('Android') > -1 || u.indexOf('Adr') > -1,\n      Ubuntu: u.indexOf('Ubuntu') > -1,\n      FreeBSD: u.indexOf('FreeBSD') > -1,\n      Debian: u.indexOf('Debian') > -1,\n      'Windows Phone':\n        u.indexOf('IEMobile') > -1 || u.indexOf('Windows Phone') > -1,\n      BlackBerry: u.indexOf('BlackBerry') > -1 || u.indexOf('RIM') > -1,\n      MeeGo: u.indexOf('MeeGo') > -1,\n      Symbian: u.indexOf('Symbian') > -1,\n      iOS: u.indexOf('like Mac OS X') > -1,\n      'Chrome OS': u.indexOf('CrOS') > -1,\n      WebOS: u.indexOf('hpwOS') > -1,\n      // 设备\n      Mobile:\n        u.indexOf('Mobi') > -1 ||\n        u.indexOf('iPh') > -1 ||\n        u.indexOf('480') > -1,\n      Tablet: u.indexOf('Tablet') > -1 || u.indexOf('Nexus 7') > -1,\n      iPad: u.indexOf('iPad') > -1\n    }\n  }),\n  // 在信息map和匹配库中进行匹配\n  matchInfoMap: monitor(function (_this) {\n    var u = VariableLibrary.navigator.userAgent || ''\n    var match = MethodLibrary.getMatchMap(u)\n    for (var s in VariableLibrary.infoMap) {\n      for (var i = 0; i < VariableLibrary.infoMap[s].length; i++) {\n        var value = VariableLibrary.infoMap[s][i]\n        if (match[value]) {\n          _this[s] = value\n        }\n      }\n    }\n  }),\n  // 获取当前操作系统\n  getOS: monitor(function () {\n    var _this = this\n    MethodLibrary.matchInfoMap(_this)\n    return _this.os || 'Unknown'\n  }),\n  // 获取操作系统版本\n  getOSVersion: monitor(function () {\n    var _this = this\n    var u = VariableLibrary.navigator.userAgent || ''\n    _this.osVersion = ''\n    _this.osMajor = ''\n    // 系统版本信息\n    var osVersion = {\n      Windows: function () {\n        var v = u.replace(/^.*Windows NT ([\\d.]+);.*$/, '$1')\n        var oldWindowsVersionMap = {\n          6.4: '10',\n          6.3: '8.1',\n          6.2: '8',\n          6.1: '7',\n          '6.0': 'Vista',\n          5.2: 'XP',\n          5.1: 'XP',\n          '5.0': '2000'\n        }\n        return oldWindowsVersionMap[v] || v\n      },\n      Android: function () {\n        return u.replace(/^.*Android ([\\d.]+);.*$/, '$1')\n      },\n      iOS: function () {\n        return u.replace(/^.*OS ([\\d_]+) like.*$/, '$1').replace(/_/g, '.')\n      },\n      Debian: function () {\n        return u.replace(/^.*Debian\\/([\\d.]+).*$/, '$1')\n      },\n      'Windows Phone': function () {\n        return u.replace(/^.*Windows Phone( OS)? ([\\d.]+);.*$/, '$2')\n      },\n      'Mac OS': function () {\n        return u.replace(/^.*Mac OS X ([\\d_]+).*$/, '$1').replace(/_/g, '.')\n      },\n      WebOS: function () {\n        return u.replace(/^.*hpwOS\\/([\\d.]+);.*$/, '$1')\n      }\n    }\n    if (osVersion[_this.os]) {\n      _this.osVersion = osVersion[_this.os]()\n      if (_this.osVersion === u) {\n        _this.osVersion = ''\n      }\n    }\n    if (_this.osVersion) {\n      _this.osMajor =\n        _this.osVersion.split('.').length && _this.osVersion.split('.')[0]\n    }\n    return {\n      version: _this.osVersion,\n      osMajor: _this.osMajor\n    }\n  }),\n  // 获取横竖屏状态\n  getOrientationStatu: monitor(function () {\n    var orientationStatus = ''\n    var orientation = window.matchMedia('(orientation: portrait)')\n    if (orientation.matches) {\n      orientationStatus = '竖屏'\n    } else {\n      orientationStatus = '横屏'\n    }\n    return orientationStatus\n  }),\n  // 获取设备类型\n  getDeviceType: monitor(function () {\n    var _this = this\n    _this.device = 'PC'\n    MethodLibrary.matchInfoMap(_this)\n    return _this.device\n  }),\n  // 获取网络状态\n  getNetwork: monitor(function () {\n    var connection =\n      window.navigator.connection ||\n      window.navigator.mozConnection ||\n      window.navigator.webkitConnection\n    var result = 'unknown'\n    var type = connection ? connection.type || connection.effectiveType : null\n    if (type && typeof type === 'string') {\n      switch (type) {\n        // possible type values\n        case 'bluetooth':\n        case 'cellular':\n          result = 'cellular'\n          break\n        case 'none':\n          result = 'none'\n          break\n        case 'ethernet':\n        case 'wifi':\n        case 'wimax':\n          result = 'wifi'\n          break\n        case 'other':\n        case 'unknown':\n          result = 'unknown'\n          break\n        // possible effectiveType values\n        case 'slow-2g':\n        case '2g':\n        case '3g':\n          result = 'cellular'\n          break\n        case '4g':\n          result = 'wifi'\n          break\n        default:\n          break\n      }\n    }\n    return result\n  }),\n  // 获取当前语言\n  getLanguage: monitor(function () {\n    var _this = this\n    _this.language = (function () {\n      var language =\n        VariableLibrary.navigator.browserLanguage ||\n        VariableLibrary.navigator.language ||\n        ''\n      var arr = language.split('-')\n      if (arr[1]) {\n        arr[1] = arr[1].toUpperCase()\n      }\n      return arr.join('_')\n    })()\n    return _this.language\n  }),\n  getTimeZone: monitor(function () {\n    const timeZone = Intl.DateTimeFormat().resolvedOptions().timeZone\n    return timeZone\n  }),\n  // 浏览器信息\n  getBrowserInfo: monitor(function () {\n    var _this = this\n    MethodLibrary.matchInfoMap(_this)\n\n    var u = VariableLibrary.navigator.userAgent || ''\n\n    var _mime = function (option, value) {\n      var mimeTypes = VariableLibrary.navigator.mimeTypes\n      for (var key in mimeTypes) {\n        if (mimeTypes[key][option] == value) {\n          return true\n        }\n      }\n      return false\n    }\n\n    var match = MethodLibrary.getMatchMap(u)\n\n    var is360 = false\n    if (typeof window !== 'undefined' && window.chrome) {\n      var chrome_version = u.replace(/^.*Chrome\\/([\\d]+).*$/, '$1')\n      if (chrome_version > 36 && window.showModalDialog) {\n        is360 = true\n      } else if (chrome_version > 45) {\n        is360 = _mime('type', 'application/vnd.chromium.remoting-viewer')\n      }\n    }\n    if (match['Baidu'] && match['Opera']) {\n      match['Baidu'] = false\n    }\n    if (match['Mobile']) {\n      match['Mobile'] = !(u.indexOf('iPad') > -1)\n    }\n    if (is360) {\n      if (_mime('type', 'application/gameplugin')) {\n        match['360SE'] = true\n      } else if (\n        VariableLibrary.navigator &&\n        VariableLibrary.navigator.connection &&\n        typeof VariableLibrary.navigator['connection']['saveData'] ==\n          'undefined'\n      ) {\n        match['360SE'] = true\n      } else {\n        match['360EE'] = true\n      }\n    }\n    if (match['IE'] || match['Edge']) {\n      var navigator_top = window.screenTop - window.screenY\n      switch (navigator_top) {\n        case 71: // 无收藏栏,贴边\n          break\n        case 74: // 无收藏栏,非贴边\n          break\n        case 99: // 有收藏栏,贴边\n          break\n        case 102: // 有收藏栏,非贴边\n          match['360EE'] = true\n          break\n        case 75: // 无收藏栏,贴边\n          break\n        case 74: // 无收藏栏,非贴边\n          break\n        case 105: // 有收藏栏,贴边\n          break\n        case 104: // 有收藏栏,非贴边\n          match['360SE'] = true\n          break\n        default:\n          break\n      }\n    }\n\n    var browerVersionMap = {\n      Safari: function () {\n        return u.replace(/^.*Version\\/([\\d.]+).*$/, '$1')\n      },\n      Chrome: function () {\n        return u\n          .replace(/^.*Chrome\\/([\\d.]+).*$/, '$1')\n          .replace(/^.*CriOS\\/([\\d.]+).*$/, '$1')\n      },\n      IE: function () {\n        return u\n          .replace(/^.*MSIE ([\\d.]+).*$/, '$1')\n          .replace(/^.*rv:([\\d.]+).*$/, '$1')\n      },\n      Edge: function () {\n        return u.replace(/^.*Edge?\\/([\\d.]+).*$/, '$1')\n      },\n      Firefox: function () {\n        return u\n          .replace(/^.*Firefox\\/([\\d.]+).*$/, '$1')\n          .replace(/^.*FxiOS\\/([\\d.]+).*$/, '$1')\n      },\n      'Firefox Focus': function () {\n        return u.replace(/^.*Focus\\/([\\d.]+).*$/, '$1')\n      },\n      Chromium: function () {\n        return u.replace(/^.*Chromium\\/([\\d.]+).*$/, '$1')\n      },\n      Opera: function () {\n        return u\n          .replace(/^.*Opera\\/([\\d.]+).*$/, '$1')\n          .replace(/^.*OPR\\/([\\d.]+).*$/, '$1')\n      },\n      Vivaldi: function () {\n        return u.replace(/^.*Vivaldi\\/([\\d.]+).*$/, '$1')\n      },\n      Yandex: function () {\n        return u.replace(/^.*YaBrowser\\/([\\d.]+).*$/, '$1')\n      },\n      Arora: function () {\n        return u.replace(/^.*Arora\\/([\\d.]+).*$/, '$1')\n      },\n      Lunascape: function () {\n        return u.replace(/^.*Lunascape[\\/\\s]([\\d.]+).*$/, '$1')\n      },\n      QupZilla: function () {\n        return u.replace(/^.*QupZilla[\\/\\s]([\\d.]+).*$/, '$1')\n      },\n      'Coc Coc': function () {\n        return u.replace(/^.*coc_coc_browser\\/([\\d.]+).*$/, '$1')\n      },\n      Kindle: function () {\n        return u.replace(/^.*Version\\/([\\d.]+).*$/, '$1')\n      },\n      Iceweasel: function () {\n        return u.replace(/^.*Iceweasel\\/([\\d.]+).*$/, '$1')\n      },\n      Konqueror: function () {\n        return u.replace(/^.*Konqueror\\/([\\d.]+).*$/, '$1')\n      },\n      Iceape: function () {\n        return u.replace(/^.*Iceape\\/([\\d.]+).*$/, '$1')\n      },\n      SeaMonkey: function () {\n        return u.replace(/^.*SeaMonkey\\/([\\d.]+).*$/, '$1')\n      },\n      Epiphany: function () {\n        return u.replace(/^.*Epiphany\\/([\\d.]+).*$/, '$1')\n      },\n      360: function () {\n        return u.replace(/^.*QihooBrowser\\/([\\d.]+).*$/, '$1')\n      },\n      '360SE': function () {\n        var hash = {\n          63: '10.0',\n          55: '9.1',\n          45: '8.1',\n          42: '8.0',\n          31: '7.0',\n          21: '6.3'\n        }\n        var chrome_version = u.replace(/^.*Chrome\\/([\\d]+).*$/, '$1')\n        return hash[chrome_version] || ''\n      },\n      '360EE': function () {\n        var hash = { 69: '11.0', 63: '9.5', 55: '9.0', 50: '8.7', 30: '7.5' }\n        var chrome_version = u.replace(/^.*Chrome\\/([\\d]+).*$/, '$1')\n        return hash[chrome_version] || ''\n      },\n      Maxthon: function () {\n        return u.replace(/^.*Maxthon\\/([\\d.]+).*$/, '$1')\n      },\n      QQBrowser: function () {\n        return u.replace(/^.*QQBrowser\\/([\\d.]+).*$/, '$1')\n      },\n      QQ: function () {\n        return u.replace(/^.*QQ\\/([\\d.]+).*$/, '$1')\n      },\n      Baidu: function () {\n        return u.replace(/^.*BIDUBrowser[\\s\\/]([\\d.]+).*$/, '$1')\n      },\n      UC: function () {\n        return u.replace(/^.*UC?Browser\\/([\\d.]+).*$/, '$1')\n      },\n      Sogou: function () {\n        return u\n          .replace(/^.*SE ([\\d.X]+).*$/, '$1')\n          .replace(/^.*SogouMobileBrowser\\/([\\d.]+).*$/, '$1')\n      },\n      LBBROWSER: function () {\n        var version = ''\n        if (u.indexOf('LieBaoFast') > -1) {\n          version = u.replace(/^.*LieBaoFast\\/([\\d.]+).*$/, '$1')\n        }\n        var hash = {\n          57: '6.5',\n          49: '6.0',\n          46: '5.9',\n          42: '5.3',\n          39: '5.2',\n          34: '5.0',\n          29: '4.5',\n          21: '4.0'\n        }\n        var chrome_version = u.replace(/^.*Chrome\\/([\\d]+).*$/, '$1')\n        return version || hash[chrome_version] || ''\n      },\n      '2345Explorer': function () {\n        return u.replace(/^.*2345Explorer\\/([\\d.]+).*$/, '$1')\n      },\n      TheWorld: function () {\n        return u.replace(/^.*TheWorld ([\\d.]+).*$/, '$1')\n      },\n      XiaoMi: function () {\n        return u.replace(/^.*MiuiBrowser\\/([\\d.]+).*$/, '$1')\n      },\n      Quark: function () {\n        return u.replace(/^.*Quark\\/([\\d.]+).*$/, '$1')\n      },\n      Qiyu: function () {\n        return u.replace(/^.*Qiyu\\/([\\d.]+).*$/, '$1')\n      },\n      Wechat: function () {\n        return u.replace(/^.*MicroMessenger\\/([\\d.]+).*$/, '$1')\n      },\n      WechatWork: function () {\n        return u.replace(/^.*wxwork\\/([\\d.]+).*$/, '$1')\n      },\n      Taobao: function () {\n        return u.replace(/^.*AliApp\\(TB\\/([\\d.]+).*$/, '$1')\n      },\n      Alipay: function () {\n        return u.replace(/^.*AliApp\\(AP\\/([\\d.]+).*$/, '$1')\n      },\n      Weibo: function () {\n        return u.replace(/^.*weibo__([\\d.]+).*$/, '$1')\n      },\n      Douban: function () {\n        return u.replace(/^.*com.douban.frodo\\/([\\d.]+).*$/, '$1')\n      },\n      Suning: function () {\n        return u.replace(/^.*SNEBUY-APP([\\d.]+).*$/, '$1')\n      },\n      iQiYi: function () {\n        return u.replace(/^.*IqiyiVersion\\/([\\d.]+).*$/, '$1')\n      }\n    }\n    _this.browserVersion = ''\n    _this.browserMajor = ''\n    if (browerVersionMap[_this.browser]) {\n      _this.browserVersion = browerVersionMap[_this.browser]()\n      if (_this.browserVersion == u) {\n        _this.browserVersion = ''\n      }\n    }\n    if (_this.browser == 'Chrome' && u.match(/\\S+Browser/)) {\n      _this.browser = u.match(/\\S+Browser/)[0]\n      _this.version = u.replace(/^.*Browser\\/([\\d.]+).*$/, '$1')\n    }\n    if (_this.browser == 'Edge') {\n      if (_this.version > '75') {\n        _this.engine = 'Blink'\n      } else {\n        _this.engine = 'EdgeHTML'\n      }\n    }\n    if (_this.browser == 'Chrome' && parseInt(_this.browserVersion) > 27) {\n      _this.engine = 'Blink'\n    } else if (\n      match['Chrome'] &&\n      _this.engine == 'WebKit' &&\n      parseInt(_this.browserVersion) > 27\n    ) {\n      _this.engine = 'Blink'\n    } else if (_this.browser == 'Opera' && parseInt(_this.version) > 12) {\n      _this.engine = 'Blink'\n    } else if (_this.browser == 'Yandex') {\n      _this.engine = 'Blink'\n    }\n    if (_this.browserVersion) {\n      _this.browserMajor =\n        _this.browserVersion.split('.').length &&\n        this.browserVersion.split('.')[0]\n    }\n    return {\n      browser: _this.browser,\n      browserVersion: _this.browserVersion,\n      engine: _this.engine,\n      browserMajor: _this.browserMajor\n    }\n  }),\n  // 获取地理位置\n  getGeoPostion: monitor(function (callback) {\n    navigator &&\n      navigator.geolocation &&\n      navigator.geolocation.getCurrentPosition(\n        // 位置获取成功\n        function (position) {\n          callback(position)\n        },\n        // 位置获取失败\n        function (error) {\n          display.warn(error)\n        }\n      )\n  })\n}\nvar _deviceInfo = {}\nif (typeof window !== 'undefined') {\n  _deviceInfo = {\n    os: MethodLibrary.getOS(),\n    osVersion: MethodLibrary.getOSVersion().version,\n    osVersionMajor: MethodLibrary.getOSVersion().osMajor,\n    browser: MethodLibrary.getBrowserInfo().browser,\n    browserVersion: MethodLibrary.getBrowserInfo().browserVersion,\n    browserVersionMajor: MethodLibrary.getBrowserInfo().browserMajor,\n    screenSize: window.screen.width + '*' + window.screen.height,\n    networkType: MethodLibrary.getNetwork(),\n    device: MethodLibrary.getDeviceType(),\n    timeZone: MethodLibrary.getTimeZone()\n  }\n}\nexport var deviceInfo = _deviceInfo\n","export var DOM_EVENT = {\n  BEFORE_UNLOAD: 'beforeunload',\n  CLICK: 'click',\n  DBL_CLICK: 'dblclick',\n  KEY_DOWN: 'keydown',\n  LOAD: 'load',\n  POP_STATE: 'popstate',\n  SCROLL: 'scroll',\n  TOUCH_START: 'touchstart',\n  TOUCH_END: 'touchend',\n  TOUCH_MOVE: 'touchmove',\n  VISIBILITY_CHANGE: 'visibilitychange',\n  PAGE_SHOW: 'pageshow',\n  FREEZE: 'freeze',\n  RESUME: 'resume',\n  DOM_CONTENT_LOADED: 'DOMContentLoaded',\n  POINTER_DOWN: 'pointerdown',\n  POINTER_UP: 'pointerup',\n  POINTER_CANCEL: 'pointercancel',\n  HASH_CHANGE: 'hashchange',\n  PAGE_HIDE: 'pagehide',\n  MOUSE_DOWN: 'mousedown',\n  MOUSE_UP: 'mouseup',\n  MOUSE_MOVE: 'mousemove',\n  FOCUS: 'focus',\n  BLUR: 'blur',\n  CONTEXT_MENU: 'contextmenu',\n  RESIZE: 'resize',\n  CHANGE: 'change',\n  INPUT: 'input',\n  PLAY: 'play',\n  PAUSE: 'pause',\n  SECURITY_POLICY_VIOLATION: 'securitypolicyviolation',\n  SELECTION_CHANGE: 'selectionchange',\n  STORAGE: 'storage'\n}\nexport var ResourceType = {\n  DOCUMENT: 'document',\n  XHR: 'xhr',\n  BEACON: 'beacon',\n  FETCH: 'fetch',\n  CSS: 'css',\n  JS: 'js',\n  IMAGE: 'image',\n  FONT: 'font',\n  MEDIA: 'media',\n  OTHER: 'other'\n}\n\nexport var ActionType = {\n  CLICK: 'click',\n  CUSTOM: 'custom'\n}\nexport var FrustrationType = {\n  RAGE_CLICK: 'rage_click',\n  ERROR_CLICK: 'error_click',\n  DEAD_CLICK: 'dead_click'\n}\nexport var RumEventType = {\n  ACTION: 'action',\n  ERROR: 'error',\n  LONG_TASK: 'long_task',\n  VIEW: 'view',\n  RESOURCE: 'resource',\n  LOGGER: 'logger'\n}\nexport var RumLongTaskEntryType = {\n  LONG_TASK: 'long-task',\n  LONG_ANIMATION_FRAME: 'long-animation-frame'\n}\nexport var ViewLoadingType = {\n  INITIAL_LOAD: 'initial_load',\n  ROUTE_CHANGE: 'route_change'\n}\nexport var RequestType = {\n  FETCH: ResourceType.FETCH,\n  XHR: ResourceType.XHR\n}\n\nexport var TraceType = {\n  DDTRACE: 'ddtrace',\n  ZIPKIN_MULTI_HEADER: 'zipkin',\n  ZIPKIN_SINGLE_HEADER: 'zipkin_single_header',\n  W3C_TRACEPARENT: 'w3c_traceparent',\n  W3C_TRACEPARENT_64: 'w3c_traceparent_64bit',\n  SKYWALKING_V3: 'skywalking_v3',\n  JAEGER: 'jaeger'\n}\nexport var ErrorHandling = {\n  HANDLED: 'handled',\n  UNHANDLED: 'unhandled'\n}\nexport var NonErrorPrefix = {\n  UNCAUGHT: 'Uncaught',\n  PROVIDED: 'Provided'\n}\n","import { noop } from '../tools'\n\n/**\n * Custom implementation of JSON.stringify that ignores some toJSON methods. We need to do that\n * because some sites badly override toJSON on certain objects. Removing all toJSON methods from\n * nested values would be too costly, so we just detach them from the root value, and native classes\n * used to build JSON values (Array and Object).\n *\n * Note: this still assumes that JSON.stringify is correct.\n */\nexport function jsonStringify(value, replacer, space) {\n  if (typeof value !== 'object' || value === null) {\n    return JSON.stringify(value)\n  }\n\n  // Note: The order matter here. We need to detach toJSON methods on parent classes before their\n  // subclasses.\n  var restoreObjectPrototypeToJson = detachToJsonMethod(Object.prototype)\n  var restoreArrayPrototypeToJson = detachToJsonMethod(Array.prototype)\n  var restoreValuePrototypeToJson = detachToJsonMethod(\n    Object.getPrototypeOf(value)\n  )\n  var restoreValueToJson = detachToJsonMethod(value)\n\n  try {\n    return JSON.stringify(value, replacer, space)\n  } catch {\n    return '<error: unable to serialize object>'\n  } finally {\n    restoreObjectPrototypeToJson()\n    restoreArrayPrototypeToJson()\n    restoreValuePrototypeToJson()\n    restoreValueToJson()\n  }\n}\n\nexport function detachToJsonMethod(value) {\n  const object = value\n  const objectToJson = object.toJSON\n  if (objectToJson) {\n    delete object.toJSON\n    return function () {\n      object.toJSON = objectToJson\n    }\n  }\n  return noop\n}\n","import { each } from '../helper/tools'\nvar UNKNOWN_FUNCTION = '?'\n\n/**\n * Computes a stack trace for an exception.\n */\nexport function computeStackTrace(ex) {\n  var stack = []\n\n  var stackProperty = tryToGetString(ex, 'stack')\n  var exString = String(ex)\n  if (stackProperty && stackProperty.startsWith(exString)) {\n    stackProperty = stackProperty.slice(exString.length)\n  }\n  if (stackProperty) {\n    each(stackProperty.split('\\n'), function (line) {\n      var stackFrame =\n        parseChromeLine(line) ||\n        parseChromeAnonymousLine(line) ||\n        parseWinLine(line) ||\n        parseGeckoLine(line)\n      if (stackFrame) {\n        if (!stackFrame.func && stackFrame.line) {\n          stackFrame.func = UNKNOWN_FUNCTION\n        }\n        stack.push(stackFrame)\n      }\n    })\n  }\n\n  return {\n    message: tryToGetString(ex, 'message'),\n    name: tryToGetString(ex, 'name'),\n    stack: stack\n  }\n}\nvar fileUrl =\n  '((?:file|https?|blob|chrome-extension|electron|native|eval|webpack|<anonymous>|\\\\w+\\\\.|\\\\/).*?)'\n\nvar filePosition = '(?::(\\\\d+))'\nvar CHROME_LINE_RE = new RegExp(\n  '^\\\\s*at (.*?) ?\\\\(' +\n    fileUrl +\n    filePosition +\n    '?' +\n    filePosition +\n    '?\\\\)?\\\\s*$',\n  'i'\n)\nvar CHROME_EVAL_RE = new RegExp(\n  '\\\\((\\\\S*)' + filePosition + filePosition + '\\\\)'\n)\n\nfunction parseChromeLine(line) {\n  var parts = CHROME_LINE_RE.exec(line)\n\n  if (!parts) {\n    return\n  }\n\n  var isNative = parts[2] && parts[2].indexOf('native') === 0 // start of line\n  var isEval = parts[2] && parts[2].indexOf('eval') === 0 // start of line\n  var submatch = CHROME_EVAL_RE.exec(parts[2])\n\n  if (isEval && submatch) {\n    // throw out eval line/column and use top-most line/column number\n    parts[2] = submatch[1] // url\n    parts[3] = submatch[2] // line\n    parts[4] = submatch[3] // column\n  }\n\n  return {\n    args: isNative ? [parts[2]] : [],\n    column: parts[4] ? +parts[4] : undefined,\n    func: parts[1] || UNKNOWN_FUNCTION,\n    line: parts[3] ? +parts[3] : undefined,\n    url: !isNative ? parts[2] : undefined\n  }\n}\n\nvar CHROME_ANONYMOUS_FUNCTION_RE = new RegExp(\n  '^\\\\s*at ?' + fileUrl + filePosition + '?' + filePosition + '??\\\\s*$',\n  'i'\n)\n\nfunction parseChromeAnonymousLine(line) {\n  var parts = CHROME_ANONYMOUS_FUNCTION_RE.exec(line)\n\n  if (!parts) {\n    return\n  }\n\n  return {\n    args: [],\n    column: parts[3] ? +parts[3] : undefined,\n    func: UNKNOWN_FUNCTION,\n    line: parts[2] ? +parts[2] : undefined,\n    url: parts[1]\n  }\n}\n\nvar WINJS_LINE_RE =\n  /^\\s*at (?:((?:\\[object object\\])?.+) )?\\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i\n\nfunction parseWinLine(line) {\n  var parts = WINJS_LINE_RE.exec(line)\n  if (!parts) {\n    return\n  }\n\n  return {\n    args: [],\n    column: parts[4] ? +parts[4] : undefined,\n    func: parts[1] || UNKNOWN_FUNCTION,\n    line: +parts[3],\n    url: parts[2]\n  }\n}\n\nvar GECKO_LINE_RE =\n  /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\\[native).*?|[^@]*bundle|\\[wasm code\\])(?::(\\d+))?(?::(\\d+))?\\s*$/i\nvar GECKO_EVAL_RE = /(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i\n\nfunction parseGeckoLine(line) {\n  var parts = GECKO_LINE_RE.exec(line)\n  if (!parts) {\n    return\n  }\n\n  var isEval = parts[3] && parts[3].indexOf(' > eval') > -1\n  var submatch = GECKO_EVAL_RE.exec(parts[3])\n\n  if (isEval && submatch) {\n    // throw out eval line/column and use top-most line number\n    parts[3] = submatch[1]\n    parts[4] = submatch[2]\n    parts[5] = undefined // no column when eval\n  }\n\n  return {\n    args: parts[2] ? parts[2].split(',') : [],\n    column: parts[5] ? +parts[5] : undefined,\n    func: parts[1] || UNKNOWN_FUNCTION,\n    line: parts[4] ? +parts[4] : undefined,\n    url: parts[3]\n  }\n}\n\nfunction tryToGetString(candidate, property) {\n  if (typeof candidate !== 'object' || !candidate || !(property in candidate)) {\n    return undefined\n  }\n  var value = candidate[property]\n  return typeof value === 'string' ? value : undefined\n}\n","import { instrumentMethod } from '../helper/instrumentMethod'\nimport { isNullUndefinedDefaultValue } from '../helper/tools'\nimport { computeStackTrace } from './computeStackTrace'\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Error_types\nvar ERROR_TYPES_RE =\n  /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\\s\\S]*)$/\n/**\n * Cross-browser collection of unhandled errors\n *\n * Supports:\n * - Firefox: full stack trace with line numbers, plus column number\n * on top frame; column number is not guaranteed\n * - Opera: full stack trace with line and column numbers\n * - Chrome: full stack trace with line and column numbers\n * - Safari: line and column number for the top frame only; some frames\n * may be missing, and column number is not guaranteed\n * - IE: line and column number for the top frame only; some frames\n * may be missing, and column number is not guaranteed\n *\n * In theory, TraceKit should work on all of the following versions:\n * - IE5.5+ (only 8.0 tested)\n * - Firefox 0.9+ (only 3.5+ tested)\n * - Opera 7+ (only 10.50 tested; versions 9 and earlier may require\n * Exceptions Have Stacktrace to be enabled in opera:config)\n * - Safari 3+ (only 4+ tested)\n * - Chrome 1+ (only 5+ tested)\n * - Konqueror 3.5+ (untested)\n *\n * Tries to catch all unhandled errors and report them to the\n * callback.\n *\n * Callbacks receive a StackTrace object as described in the\n * computeStackTrace docs.\n *\n * @memberof TraceKit\n * @namespace\n */\n\nexport function startUnhandledErrorCollection(callback) {\n  var _instrumentOnError = instrumentOnError(callback)\n  var _instrumentUnhandledRejection = instrumentUnhandledRejection(callback)\n  return {\n    stop: function () {\n      _instrumentOnError.stop()\n      _instrumentUnhandledRejection.stop()\n    }\n  }\n}\n\n/**\n * Install a global onerror handler\n */\nfunction instrumentOnError(callback) {\n  return instrumentMethod(window, 'onerror', function (params) {\n    var parameters = params.parameters\n    var messageObj = parameters[0]\n    var url = parameters[1]\n    var line = parameters[2]\n    var column = parameters[3]\n    var errorObj = parameters[4]\n    var stackTrace\n    if (errorObj instanceof Error) {\n      stackTrace = computeStackTrace(errorObj)\n    } else {\n      var location = {\n        url: url,\n        column: column,\n        line: line\n      }\n      var parse = tryToParseMessage(messageObj)\n\n      stackTrace = {\n        name: parse.name,\n        message: parse.message,\n        stack: [location]\n      }\n    }\n    callback(stackTrace, isNullUndefinedDefaultValue(errorObj, messageObj))\n  })\n}\nfunction tryToParseMessage(messageObj) {\n  let name\n  let message\n  if ({}.toString.call(messageObj) === '[object String]') {\n    var groups = ERROR_TYPES_RE.exec(messageObj)\n    if (groups) {\n      name = groups[1]\n      message = groups[2]\n    }\n  }\n  return { name: name, message: message }\n}\n/**\n * Install a global onunhandledrejection handler\n */\nfunction instrumentUnhandledRejection(callback) {\n  return instrumentMethod(window, 'onunhandledrejection', function (params) {\n    var parameters = params.parameters\n    var e = parameters[0]\n    var reason = e.reason || 'Empty reason'\n    var stack = computeStackTrace(reason)\n    callback(stack, reason)\n  })\n}\n","export { computeStackTrace } from './computeStackTrace'\nexport { startUnhandledErrorCollection } from './tracekit'\n","export var ONE_KIBI_BYTE = 1024\nexport var ONE_MEBI_BYTE = 1024 * ONE_KIBI_BYTE\n// eslint-disable-next-line no-control-regex\nvar HAS_MULTI_BYTES_CHARACTERS = /[^\\u0000-\\u007F]/\n\nexport function computeBytesCount(candidate) {\n  // Accurate bytes count computations can degrade performances when there is a lot of events to process\n  if (!HAS_MULTI_BYTES_CHARACTERS.test(candidate)) {\n    return candidate.length\n  }\n\n  if (window.TextEncoder !== undefined) {\n    return new TextEncoder().encode(candidate).length\n  }\n\n  return new Blob([candidate]).size\n}\nexport function concatBuffers(buffers) {\n  var length = buffers.reduce(function (total, buffer) {\n    return total + buffer.length\n  }, 0)\n  var result = new Uint8Array(length)\n  var offset = 0\n  for (var _i = 0, buffers_1 = buffers; _i < buffers_1.length; _i++) {\n    var buffer = buffers_1[_i]\n    result.set(buffer, offset)\n    offset += buffer.length\n  }\n  return result\n}\n","import { display } from './display'\nimport { ONE_KIBI_BYTE } from './byteUtils'\nimport { detachToJsonMethod } from './serialisation/jsonStringify'\n\n// The maximum size of a single event is 256KiB. By default, we ensure that user-provided data\n// going through sanitize fits inside our events, while leaving room for other contexts, metadata, ...\nvar SANITIZE_DEFAULT_MAX_CHARACTER_COUNT = 220 * ONE_KIBI_BYTE\n\n// Symbol for the root element of the JSONPath used for visited objects\nvar JSON_PATH_ROOT_ELEMENT = '$'\n\n// When serializing (using JSON.stringify) a key of an object, { key: 42 } gets wrapped in quotes as \"key\".\n// With the separator (:), we need to add 3 characters to the count.\nvar KEY_DECORATION_LENGTH = 3\n\n/**\n * Ensures user-provided data is 'safe' for the SDK\n * - Deep clones data\n * - Removes cyclic references\n * - Transforms unserializable types to a string representation\n *\n * LIMITATIONS:\n * - Size is in characters, not byte count (may differ according to character encoding)\n * - Size does not take into account indentation that can be applied to JSON.stringify\n * - Non-numerical properties of Arrays are ignored. Same behavior as JSON.stringify\n *\n * @param source              User-provided data meant to be serialized using JSON.stringify\n * @param maxCharacterCount   Maximum number of characters allowed in serialized form\n */\n\nexport function sanitize(source, maxCharacterCount) {\n  if (maxCharacterCount === undefined) {\n    maxCharacterCount = SANITIZE_DEFAULT_MAX_CHARACTER_COUNT\n  }\n  // Unbind any toJSON function we may have on [] or {} prototypes\n  var restoreObjectPrototypeToJson = detachToJsonMethod(Object.prototype)\n  var restoreArrayPrototypeToJson = detachToJsonMethod(Array.prototype)\n\n  // Initial call to sanitizeProcessor - will populate containerQueue if source is an Array or a plain Object\n  var containerQueue = []\n  var visitedObjectsWithPath = new WeakMap()\n  var sanitizedData = sanitizeProcessor(\n    source,\n    JSON_PATH_ROOT_ELEMENT,\n    undefined,\n    containerQueue,\n    visitedObjectsWithPath\n  )\n  var accumulatedCharacterCount =\n    (JSON.stringify(sanitizedData) && JSON.stringify(sanitizedData).length) || 0\n  if (accumulatedCharacterCount > maxCharacterCount) {\n    warnOverCharacterLimit(maxCharacterCount, 'discarded', source)\n    return undefined\n  }\n\n  while (\n    containerQueue.length > 0 &&\n    accumulatedCharacterCount < maxCharacterCount\n  ) {\n    var containerToProcess = containerQueue.shift()\n    var separatorLength = 0 // 0 for the first element, 1 for subsequent elements\n\n    // Arrays and Objects have to be handled distinctly to ensure\n    // we do not pick up non-numerical properties from Arrays\n    if (Array.isArray(containerToProcess.source)) {\n      for (var key = 0; key < containerToProcess.source.length; key++) {\n        var targetData = sanitizeProcessor(\n          containerToProcess.source[key],\n          containerToProcess.path,\n          key,\n          containerQueue,\n          visitedObjectsWithPath\n        )\n\n        if (targetData !== undefined) {\n          accumulatedCharacterCount += JSON.stringify(targetData).length\n        } else {\n          // When an element of an Array (targetData) is undefined, it is serialized as null:\n          // JSON.stringify([undefined]) => '[null]' - This accounts for 4 characters\n          accumulatedCharacterCount += 4\n        }\n        accumulatedCharacterCount += separatorLength\n        separatorLength = 1\n        if (accumulatedCharacterCount > maxCharacterCount) {\n          warnOverCharacterLimit(maxCharacterCount, 'truncated', source)\n          break\n        }\n        containerToProcess.target[key] = targetData\n      }\n    } else {\n      for (var key in containerToProcess.source) {\n        if (\n          Object.prototype.hasOwnProperty.call(containerToProcess.source, key)\n        ) {\n          var targetData = sanitizeProcessor(\n            containerToProcess.source[key],\n            containerToProcess.path,\n            key,\n            containerQueue,\n            visitedObjectsWithPath\n          )\n          // When a property of an object has an undefined value, it will be dropped during serialization:\n          // JSON.stringify({a:undefined}) => '{}'\n          if (targetData !== undefined) {\n            accumulatedCharacterCount +=\n              JSON.stringify(targetData).length +\n              separatorLength +\n              key.length +\n              KEY_DECORATION_LENGTH\n            separatorLength = 1\n          }\n          if (accumulatedCharacterCount > maxCharacterCount) {\n            warnOverCharacterLimit(maxCharacterCount, 'truncated', source)\n            break\n          }\n          containerToProcess.target[key] = targetData\n        }\n      }\n    }\n  }\n\n  // Rebind detached toJSON functions\n  restoreObjectPrototypeToJson()\n  restoreArrayPrototypeToJson()\n\n  return sanitizedData\n}\n\n/**\n * Internal function to factorize the process common to the\n * initial call to sanitize, and iterations for Arrays and Objects\n *\n */\nfunction sanitizeProcessor(\n  source,\n  parentPath,\n  key,\n  queue,\n  visitedObjectsWithPath\n) {\n  // Start by handling toJSON, as we want to sanitize its output\n  var sourceToSanitize = tryToApplyToJSON(source)\n\n  if (!sourceToSanitize || typeof sourceToSanitize !== 'object') {\n    return sanitizePrimitivesAndFunctions(sourceToSanitize)\n  }\n\n  var sanitizedSource = sanitizeObjects(sourceToSanitize)\n  if (\n    sanitizedSource !== '[Object]' &&\n    sanitizedSource !== '[Array]' &&\n    sanitizedSource !== '[Error]'\n  ) {\n    return sanitizedSource\n  }\n\n  // Handle potential cyclic references\n  // We need to use source as sourceToSanitize could be a reference to a new object\n  // At this stage, we know the source is an object type\n  var sourceAsObject = source\n  if (visitedObjectsWithPath.has(sourceAsObject)) {\n    return (\n      '[Reference seen at ' + visitedObjectsWithPath.get(sourceAsObject) + ']'\n    )\n  }\n\n  // Add processed source to queue\n  var currentPath = key !== undefined ? parentPath + '.' + key : parentPath\n  var target = Array.isArray(sourceToSanitize) ? [] : {}\n  visitedObjectsWithPath.set(sourceAsObject, currentPath)\n  queue.push({ source: sourceToSanitize, target, path: currentPath })\n\n  return target\n}\n\n/**\n * Handles sanitization of simple, non-object types\n *\n */\nfunction sanitizePrimitivesAndFunctions(value) {\n  // BigInt cannot be serialized by JSON.stringify(), convert it to a string representation\n  if (typeof value === 'bigint') {\n    return '[BigInt] ' + value.toString()\n  }\n  // Functions cannot be serialized by JSON.stringify(). Moreover, if a faulty toJSON is present, it needs to be converted\n  // so it won't prevent stringify from serializing later\n  if (typeof value === 'function') {\n    return '[Function] ' + value.name || 'unknown'\n  }\n  // JSON.stringify() does not serialize symbols.\n  if (typeof value === 'symbol') {\n    // symbol.description is part of ES2019+\n    return '[Symbol] ' + value.description || value.toString()\n  }\n\n  return value\n}\n\n/**\n * Handles sanitization of object types\n *\n * LIMITATIONS\n * - If a class defines a toStringTag Symbol, it will fall in the catch-all method and prevent enumeration of properties.\n * To avoid this, a toJSON method can be defined.\n * - IE11 does not return a distinct type for objects such as Map, WeakMap, ... These objects will pass through and their\n * properties enumerated if any.\n *\n */\nfunction sanitizeObjects(value) {\n  try {\n    // Handle events - Keep a simple implementation to avoid breaking changes\n    if (value instanceof Event) {\n      return sanitizeEvent(value)\n    }\n    if (value instanceof RegExp) {\n      return `[RegExp] ${value.toString()}`\n    }\n    // Handle all remaining object types in a generic way\n    var result = Object.prototype.toString.call(value)\n    var match = result.match(/\\[object (.*)\\]/)\n    if (match && match[1]) {\n      return '[' + match[1] + ']'\n    }\n  } catch {\n    // If the previous serialization attempts failed, and we cannot convert using\n    // Object.prototype.toString, declare the value unserializable\n  }\n  return '[Unserializable]'\n}\nfunction sanitizeEvent(event) {\n  return {\n    type: event.type,\n    isTrusted: event.isTrusted,\n    currentTarget: event.currentTarget\n      ? sanitizeObjects(event.currentTarget)\n      : null,\n    target: event.target ? sanitizeObjects(event.target) : null\n  }\n}\n/**\n * Checks if a toJSON function exists and tries to execute it\n *\n */\nfunction tryToApplyToJSON(value) {\n  var object = value\n  if (object && typeof object.toJSON === 'function') {\n    try {\n      return object.toJSON()\n    } catch {\n      // If toJSON fails, we continue by trying to serialize the value manually\n    }\n  }\n\n  return value\n}\n\n/**\n * Helper function to display the warning when the accumulated character count is over the limit\n */\nfunction warnOverCharacterLimit(maxCharacterCount, changeType, source) {\n  display.warn(\n    'The data provided has been ' +\n      changeType +\n      ' as it is over the limit of ' +\n      maxCharacterCount +\n      ' characters:',\n    source\n  )\n}\n","import { each, noop } from './tools'\nimport { jsonStringify } from '../helper/serialisation/jsonStringify'\nimport { computeStackTrace } from '../tracekit'\nimport { callMonitored } from '../helper/monitor'\nimport { sanitize } from '../helper/sanitize'\nexport var NO_ERROR_STACK_PRESENT_MESSAGE =\n  'No stack, consider using an instance of Error'\nexport var ErrorSource = {\n  AGENT: 'agent',\n  CONSOLE: 'console',\n  NETWORK: 'network',\n  SOURCE: 'source',\n  LOGGER: 'logger',\n  CUSTOM: 'custom'\n}\n\nexport function computeRawError(data) {\n  var stackTrace = data.stackTrace\n  var originalError = data.originalError\n  var handlingStack = data.handlingStack\n  var startClocks = data.startClocks\n  var nonErrorPrefix = data.nonErrorPrefix\n  var source = data.source\n  var handling = data.handling\n  var isErrorInstance = originalError instanceof Error\n  var message = computeMessage(\n    stackTrace,\n    isErrorInstance,\n    nonErrorPrefix,\n    originalError\n  )\n  var stack = hasUsableStack(isErrorInstance, stackTrace)\n    ? toStackTraceString(stackTrace)\n    : NO_ERROR_STACK_PRESENT_MESSAGE\n  var causes = isErrorInstance\n    ? flattenErrorCauses(originalError, source)\n    : undefined\n  var type = stackTrace && stackTrace.name\n\n  return {\n    startClocks: startClocks,\n    source: source,\n    handling: handling,\n    originalError: originalError,\n    message: message,\n    stack: stack,\n    handlingStack: handlingStack,\n    type: type,\n    causes: causes\n  }\n}\nfunction computeMessage(\n  stackTrace,\n  isErrorInstance,\n  nonErrorPrefix,\n  originalError\n) {\n  // Favor stackTrace message only if tracekit has really been able to extract something meaningful (message + name)\n  // TODO rework tracekit integration to avoid scattering error building logic\n  return stackTrace && stackTrace.message && stackTrace && stackTrace.name\n    ? stackTrace.message\n    : !isErrorInstance\n    ? nonErrorPrefix + ' ' + jsonStringify(sanitize(originalError))\n    : 'Empty message'\n}\nfunction hasUsableStack(isErrorInstance, stackTrace) {\n  if (stackTrace === undefined) {\n    return false\n  }\n  if (isErrorInstance) {\n    return true\n  }\n  // handle cases where tracekit return stack = [] or stack = [{url: undefined, line: undefined, column: undefined}]\n  // TODO rework tracekit integration to avoid generating those unusable stack\n  return (\n    stackTrace.stack.length > 0 &&\n    (stackTrace.stack.length > 1 || stackTrace.stack[0].url !== undefined)\n  )\n}\n\nexport function formatUnknownError(\n  stackTrace,\n  errorObject,\n  nonErrorPrefix,\n  handlingStack\n) {\n  if (\n    !stackTrace ||\n    (stackTrace.message === undefined && !(errorObject instanceof Error))\n  ) {\n    return {\n      message: nonErrorPrefix + '' + jsonStringify(errorObject),\n      stack: 'No stack, consider using an instance of Error',\n      handlingStack: handlingStack,\n      type: stackTrace && stackTrace.name\n    }\n  }\n  return {\n    message: stackTrace.message || 'Empty message',\n    stack: toStackTraceString(stackTrace),\n    handlingStack: handlingStack,\n    type: stackTrace.name\n  }\n}\n/**\n Creates a stacktrace without SDK internal frames.\n \n Constraints:\n - Has to be called at the utmost position of the call stack.\n - No internal monitoring should encapsulate the function, that is why we need to use callMonitored inside of it.\n */\nexport function createHandlingStack() {\n  /**\n   * Skip the two internal frames:\n   * - SDK API (console.error, ...)\n   * - this function\n   * in order to keep only the user calls\n   */\n  var internalFramesToSkip = 2\n  var error = new Error()\n  var formattedStack\n\n  // IE needs to throw the error to fill in the stack trace\n  if (!error.stack) {\n    try {\n      throw error\n    } catch (e) {\n      noop()\n    }\n  }\n  callMonitored(function () {\n    var stackTrace = computeStackTrace(error)\n    stackTrace.stack = stackTrace.stack.slice(internalFramesToSkip)\n    formattedStack = toStackTraceString(stackTrace)\n  })\n\n  return formattedStack\n}\nexport function toStackTraceString(stack) {\n  var result = formatErrorMessage(stack)\n  each(stack.stack, function (frame) {\n    var func = frame.func === '?' ? '<anonymous>' : frame.func\n    var args =\n      frame.args && frame.args.length > 0\n        ? '(' + frame.args.join(', ') + ')'\n        : ''\n    var line = frame.line ? ':' + frame.line : ''\n    var column = frame.line && frame.column ? ':' + frame.column : ''\n    result += '\\n  at ' + func + args + ' @ ' + frame.url + line + column\n  })\n  return result\n}\nexport function formatErrorMessage(stack) {\n  return (stack.name || 'Error') + ': ' + stack.message\n}\nexport function getFileFromStackTraceString(stack) {\n  var execResult = /@ (.+)/.exec(stack)\n  return execResult && execResult[1]\n}\nexport function flattenErrorCauses(error, parentSource) {\n  var currentError = error\n  var causes = []\n  while (\n    currentError &&\n    currentError.cause instanceof Error &&\n    causes.length < 10\n  ) {\n    var stackTrace = computeStackTrace(currentError.cause)\n    causes.push({\n      message: currentError.cause.message,\n      source: parentSource,\n      type: stackTrace && stackTrace.name,\n      stack: stackTrace && toStackTraceString(stackTrace)\n    })\n    currentError = currentError.cause\n  }\n  return causes.length ? causes : undefined\n}\n","import { noop, arrayFrom, startsWith } from './tools'\nimport { setTimeout } from './timer'\nimport { callMonitored } from './monitor'\nimport { createHandlingStack } from './errorTools'\nexport function instrumentMethod(targetPrototype, method, onPreCall, opts) {\n  var computeHandlingStack = opts && opts.computeHandlingStack\n  var original = targetPrototype[method]\n\n  if (typeof original !== 'function') {\n    if (startsWith(method, 'on')) {\n      original = noop\n    } else {\n      return { stop: noop }\n    }\n  }\n\n  var stopped = false\n\n  var instrumentation = function () {\n    if (stopped) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-return, @typescript-eslint/no-unsafe-call\n      return original.apply(this, arguments)\n    }\n\n    var parameters = arrayFrom(arguments)\n\n    var postCallCallback\n\n    callMonitored(onPreCall, null, [\n      {\n        target: this,\n        parameters: parameters,\n        onPostCall: function (callback) {\n          postCallCallback = callback\n        },\n        handlingStack: computeHandlingStack ? createHandlingStack() : undefined\n      }\n    ])\n\n    var result = original.apply(this, parameters)\n\n    if (postCallCallback) {\n      callMonitored(postCallCallback, null, [result])\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n    return result\n  }\n\n  targetPrototype[method] = instrumentation\n\n  return {\n    stop: function () {\n      stopped = true\n      // If the instrumentation has been removed by a third party, keep the last one\n      if (targetPrototype[method] === instrumentation) {\n        targetPrototype[method] = original\n      }\n    }\n  }\n}\n\nexport function instrumentSetter(targetPrototype, property, after) {\n  var originalDescriptor = Object.getOwnPropertyDescriptor(\n    targetPrototype,\n    property\n  )\n  if (\n    !originalDescriptor ||\n    !originalDescriptor.set ||\n    !originalDescriptor.configurable\n  ) {\n    return { stop: noop }\n  }\n\n  var stoppedInstrumentation = noop\n  var instrumentation = function (target, value) {\n    // put hooked setter into event loop to avoid of set latency\n    setTimeout(function () {\n      if (instrumentation !== stoppedInstrumentation) {\n        after(target, value)\n      }\n    }, 0)\n  }\n\n  var instrumentationWrapper = function (value) {\n    originalDescriptor.set.call(this, value)\n    instrumentation(this, value)\n  }\n\n  Object.defineProperty(targetPrototype, property, {\n    set: instrumentationWrapper\n  })\n\n  return {\n    stop: function () {\n      if (\n        Object.getOwnPropertyDescriptor(targetPrototype, property) &&\n        Object.getOwnPropertyDescriptor(targetPrototype, property).set ===\n          instrumentationWrapper\n      ) {\n        Object.defineProperty(targetPrototype, property, originalDescriptor)\n      }\n      instrumentation = stoppedInstrumentation\n    }\n  }\n}\n","import { ErrorSource, computeRawError } from '../helper/errorTools'\nimport { clocksNow } from '../helper/tools'\nimport { ErrorHandling, NonErrorPrefix } from '../helper/enums'\nimport { startUnhandledErrorCollection } from '../tracekit'\n\nexport function trackRuntimeError(errorObservable) {\n  return startUnhandledErrorCollection(function (stackTrace, originalError) {\n    errorObservable.notify(\n      computeRawError({\n        stackTrace: stackTrace,\n        originalError: originalError,\n        startClocks: clocksNow(),\n        nonErrorPrefix: NonErrorPrefix.UNCAUGHT,\n        source: ErrorSource.SOURCE,\n        handling: ErrorHandling.UNHANDLED\n      })\n    )\n  })\n}\n","import { each, filter, map } from './tools'\nvar _Observable = function (onFirstSubscribe) {\n  this.observers = []\n  this.onLastUnsubscribe = undefined\n  this.onFirstSubscribe = onFirstSubscribe\n}\n_Observable.prototype = {\n  subscribe: function (f) {\n    this.observers.push(f)\n    if (this.observers.length === 1 && this.onFirstSubscribe) {\n      this.onLastUnsubscribe = this.onFirstSubscribe(this) || undefined\n    }\n    var _this = this\n    return {\n      unsubscribe: function () {\n        _this.observers = filter(_this.observers, function (other) {\n          return f !== other\n        })\n        if (!_this.observers.length && _this.onLastUnsubscribe) {\n          _this.onLastUnsubscribe()\n        }\n      }\n    }\n  },\n  notify: function (data) {\n    each(this.observers, function (observer) {\n      observer(data)\n    })\n  }\n}\nexport var Observable = _Observable\n\nexport function mergeObservables() {\n  var observables = [].slice.call(arguments)\n  return new Observable(function (globalObservable) {\n    var subscriptions = map(observables, function (observable) {\n      return observable.subscribe(function (data) {\n        return globalObservable.notify(data)\n      })\n    })\n    return function () {\n      return each(subscriptions, function (subscription) {\n        return subscription.unsubscribe()\n      })\n    }\n  })\n}\n","import { computeStackTrace } from '../tracekit'\nimport {\n  createHandlingStack,\n  formatErrorMessage,\n  toStackTraceString,\n  flattenErrorCauses\n} from '../helper/errorTools'\nimport { mergeObservables, Observable } from '../helper/observable'\nimport { find, map, clocksNow } from '../helper/tools'\nimport { jsonStringify } from '../helper/serialisation/jsonStringify'\nimport { ConsoleApiName } from '../helper/display'\nimport { callMonitored } from '../helper/monitor'\nimport { ErrorHandling } from '../helper/enums'\nimport { ErrorSource } from '../helper/errorTools'\nvar consoleObservablesByApi = {}\n\nexport function initConsoleObservable(apis) {\n  var consoleObservables = map(apis, function (api) {\n    if (!consoleObservablesByApi[api]) {\n      consoleObservablesByApi[api] = createConsoleObservable(api)\n    }\n    return consoleObservablesByApi[api]\n  })\n\n  return mergeObservables.apply(this, consoleObservables)\n}\nexport function resetConsoleObservable() {\n  consoleObservablesByApi = {}\n}\n/* eslint-disable no-console */\nfunction createConsoleObservable(api) {\n  return new Observable(function (observable) {\n    var originalConsoleApi = console[api]\n    console[api] = function () {\n      var params = [].slice.call(arguments)\n      originalConsoleApi.apply(console, arguments)\n      var handlingStack = createHandlingStack()\n      callMonitored(function () {\n        observable.notify(buildConsoleLog(params, api, handlingStack))\n      })\n    }\n    return function () {\n      console[api] = originalConsoleApi\n    }\n  })\n}\n\nfunction buildConsoleLog(params, api, handlingStack) {\n  var message = map(params, function (param) {\n    return formatConsoleParameters(param)\n  }).join(' ')\n  var error\n  if (api === ConsoleApiName.error) {\n    var firstErrorParam = find(params, function (param) {\n      return param instanceof Error\n    })\n    error = {\n      stack: firstErrorParam\n        ? toStackTraceString(computeStackTrace(firstErrorParam))\n        : undefined,\n      causes: firstErrorParam\n        ? flattenErrorCauses(firstErrorParam, 'console')\n        : undefined,\n      startClocks: clocksNow(),\n      message: message,\n      source: ErrorSource.CONSOLE,\n      handling: ErrorHandling.HANDLED,\n      handlingStack: handlingStack\n    }\n  }\n\n  return {\n    api: api,\n    message: message,\n    error: error,\n    handlingStack: handlingStack\n  }\n}\n\nfunction formatConsoleParameters(param) {\n  if (typeof param === 'string') {\n    return param\n  }\n  if (param instanceof Error) {\n    return formatErrorMessage(computeStackTrace(param))\n  }\n  return jsonStringify(param, undefined, 2)\n}\n","import { each } from '../helper/tools'\nimport { getZoneJsOriginalValue } from '../helper/getZoneJsOriginalValue'\nimport { monitor } from '../helper/monitor'\nexport function addEventListener(eventTarget, event, listener, options) {\n  return addEventListeners(eventTarget, [event], listener, options)\n}\n\n/**\n * Add event listeners to an event emitter object (Window, Element, mock object...).  This provides\n * a few conveniences compared to using `element.addEventListener` directly:\n *\n * * supports IE11 by:\n *   * using an option object only if needed\n *   * emulating the `once` option\n *\n * * wraps the listener with a `monitor` function\n *\n * * returns a `stop` function to remove the listener\n *\n * * with `once: true`, the listener will be called at most once, even if different events are\n *   listened\n */\n\nexport function addEventListeners(eventTarget, eventNames, listener, options) {\n  var wrappedListener = monitor(\n    options && options.once\n      ? function (event) {\n          stop()\n          listener(event)\n        }\n      : listener\n  )\n  options =\n    options && options.passive\n      ? { capture: options.capture, passive: options.passive }\n      : options && options.capture\n  // Use the window.EventTarget.prototype when possible to avoid wrong overrides (e.g: https://github.com/salesforce/lwc/issues/1824)\n  const listenerTarget =\n    window.EventTarget && eventTarget instanceof EventTarget\n      ? window.EventTarget.prototype\n      : eventTarget\n  var add = getZoneJsOriginalValue(listenerTarget, 'addEventListener')\n\n  each(eventNames, function (eventName) {\n    add.call(eventTarget, eventName, wrappedListener, options)\n  })\n  var stop = function () {\n    var remove = getZoneJsOriginalValue(listenerTarget, 'removeEventListener')\n    each(eventNames, function (eventName) {\n      remove.call(eventTarget, eventName, wrappedListener, options)\n    })\n  }\n  return {\n    stop: stop\n  }\n}\n","import { toStackTraceString } from '../helper/errorTools'\nimport { mergeObservables, Observable } from '../helper/observable'\nimport {\n  includes,\n  safeTruncate,\n  filter,\n  each,\n  assign,\n  clocksNow\n} from '../helper/tools'\nimport { addEventListener } from '../browser/addEventListener'\nimport { DOM_EVENT } from '../helper/enums'\nimport { monitor } from '../helper/monitor'\nexport var RawReportType = {\n  intervention: 'intervention',\n  deprecation: 'deprecation',\n  cspViolation: 'csp_violation'\n}\nexport function initReportObservable(configuration, apis) {\n  var observables = []\n\n  if (includes(apis, RawReportType.cspViolation)) {\n    observables.push(createCspViolationReportObservable(configuration))\n  }\n\n  var reportTypes = filter(apis, function (api) {\n    return api !== RawReportType.cspViolation\n  })\n  if (reportTypes.length) {\n    observables.push(createReportObservable(reportTypes))\n  }\n  return mergeObservables.apply(this, observables)\n}\n\nfunction createReportObservable(reportTypes) {\n  return new Observable(function (observable) {\n    if (!window.ReportingObserver) {\n      return\n    }\n\n    var handleReports = monitor(function (reports) {\n      each(reports, function (report) {\n        observable.notify(buildRawReportErrorFromReport(report))\n      })\n    })\n\n    var observer = new window.ReportingObserver(handleReports, {\n      types: reportTypes,\n      buffered: true\n    })\n\n    observer.observe()\n    return function () {\n      observer.disconnect()\n    }\n  })\n}\n\nfunction createCspViolationReportObservable(configuration) {\n  return new Observable(function (observable) {\n    var _addEventListener = addEventListener(\n      document,\n      DOM_EVENT.SECURITY_POLICY_VIOLATION,\n      function (event) {\n        observable.notify(buildRawReportErrorFromCspViolation(event))\n      }\n    )\n\n    return _addEventListener.stop\n  })\n}\n\nfunction buildRawReportErrorFromReport(report) {\n  var body = report.body\n  var type = report.type\n  return buildRawReportError({\n    type: body.id,\n    message: type + ': ' + body.message,\n    originalError: report,\n    stack: buildStack(\n      body.id,\n      body.message,\n      body.sourceFile,\n      body.lineNumber,\n      body.columnNumber\n    )\n  })\n}\nfunction buildRawReportError(partial) {\n  return assign(\n    {\n      startClocks: clocksNow(),\n      source: ErrorSource.REPORT,\n      handling: ErrorHandling.UNHANDLED\n    },\n    partial\n  )\n}\nfunction buildRawReportErrorFromCspViolation(event) {\n  var message =\n    \"'\" +\n    event.blockedURI +\n    \"' blocked by '\" +\n    event.effectiveDirective +\n    \"' directive\"\n  return buildRawReportError({\n    type: event.effectiveDirective,\n    message: RawReportType.cspViolation + ': ' + message,\n    originalError: event,\n    csp: {\n      disposition: event.disposition\n    },\n    stack: buildStack(\n      event.effectiveDirective,\n      event.originalPolicy\n        ? `${message} of the policy \"${safeTruncate(\n            event.originalPolicy,\n            100,\n            '...'\n          )}\"`\n        : 'no policy',\n      event.sourceFile,\n      event.lineNumber,\n      event.columnNumber\n    )\n  })\n}\n\nfunction buildStack(name, message, sourceFile, lineNumber, columnNumber) {\n  return (\n    sourceFile &&\n    toStackTraceString({\n      name: name,\n      message: message,\n      stack: [\n        {\n          func: '?',\n          url: sourceFile,\n          line: lineNumber,\n          column: columnNumber\n        }\n      ]\n    })\n  )\n}\n","import { each, filter } from './tools'\nexport var LifeCycleEventType = {\n  AUTO_ACTION_COMPLETED: 'AUTO_ACTION_COMPLETED',\n  BEFORE_VIEW_CREATED: 'BEFORE_VIEW_CREATED',\n  VIEW_CREATED: 'VIEW_CREATED',\n  VIEW_UPDATED: 'VIEW_UPDATED',\n  BEFORE_VIEW_UPDATED: 'BEFORE_VIEW_UPDATED',\n  VIEW_ENDED: 'VIEW_ENDED',\n  AFTER_VIEW_ENDED: 'AFTER_VIEW_ENDED',\n  SESSION_RENEWED: 'SESSION_RENEWED',\n  SESSION_EXPIRED: 'SESSION_EXPIRED',\n  PAGE_EXITED: 'PAGE_EXITED',\n  REQUEST_STARTED: 'REQUEST_STARTED',\n  REQUEST_COMPLETED: 'REQUEST_COMPLETED',\n  RAW_RUM_EVENT_COLLECTED: 'RAW_RUM_EVENT_COLLECTED',\n  RUM_EVENT_COLLECTED: 'RUM_EVENT_COLLECTED',\n  RAW_ERROR_COLLECTED: 'RAW_ERROR_COLLECTED',\n  RAW_LOG_COLLECTED: 'RAW_LOG_COLLECTED',\n  LOG_COLLECTED: 'LOG_COLLECTED'\n}\nexport function LifeCycle() {\n  this.callbacks = {}\n}\nLifeCycle.prototype = {\n  notify: function (eventType, data) {\n    var eventCallbacks = this.callbacks[eventType]\n    if (eventCallbacks) {\n      each(eventCallbacks, function (callback) {\n        callback(data)\n      })\n    }\n  },\n  subscribe: function (eventType, callback) {\n    if (!this.callbacks[eventType]) {\n      this.callbacks[eventType] = []\n    }\n    this.callbacks[eventType].push(callback)\n    var _this = this\n    return {\n      unsubscribe: function () {\n        _this.callbacks[eventType] = filter(\n          _this.callbacks[eventType],\n          function (other) {\n            return other !== callback\n          }\n        )\n      }\n    }\n  }\n}\n","import { objectEntries, getType, deepClone } from './tools'\nimport { sanitize } from './sanitize'\n\nexport function limitModification(object, modifiableFieldPaths, modifier) {\n  const clone = deepClone(object)\n  const result = modifier(clone)\n\n  objectEntries(modifiableFieldPaths).forEach(([fieldPath, fieldType]) =>\n    // Traverse both object and clone simultaneously up to the path and apply the modification from the clone to the original object when the type is valid\n    setValueAtPath(object, clone, fieldPath.split(/\\.|(?=\\[\\])/), fieldType)\n  )\n\n  return result\n}\n\nfunction setValueAtPath(object, clone, pathSegments, fieldType) {\n  const [field, ...restPathSegments] = pathSegments\n\n  if (field === '[]') {\n    if (Array.isArray(object) && Array.isArray(clone)) {\n      object.forEach((item, i) =>\n        setValueAtPath(item, clone[i], restPathSegments, fieldType)\n      )\n    }\n\n    return\n  }\n\n  if (!isValidObject(object) || !isValidObject(clone)) {\n    return\n  }\n\n  if (restPathSegments.length > 0) {\n    return setValueAtPath(\n      object[field],\n      clone[field],\n      restPathSegments,\n      fieldType\n    )\n  }\n\n  setNestedValue(object, field, clone[field], fieldType)\n}\n\nfunction setNestedValue(object, field, value, fieldType) {\n  const newType = getType(value)\n\n  if (newType === fieldType) {\n    object[field] = sanitize(value)\n  } else if (\n    fieldType === 'object' &&\n    (newType === 'undefined' || newType === 'null')\n  ) {\n    object[field] = {}\n  }\n}\n\nfunction isValidObject(object) {\n  return getType(object) === 'object'\n}\n","import { ErrorSource } from './errorTools'\nimport { clocksNow, ONE_MINUTE } from './tools'\nimport { setTimeout } from './timer'\nexport function createEventRateLimiter(eventType, limit, onLimitReached) {\n  var eventCount = 0\n  var allowNextEvent = false\n  return {\n    isLimitReached: function () {\n      if (eventCount === 0) {\n        setTimeout(function () {\n          eventCount = 0\n        }, ONE_MINUTE)\n      }\n      eventCount += 1\n      if (eventCount <= limit || allowNextEvent) {\n        allowNextEvent = false\n        return false\n      }\n      if (eventCount === limit + 1) {\n        allowNextEvent = true\n        try {\n          onLimitReached({\n            message:\n              'Reached max number of ' + eventType + 's by minute: ' + limit,\n            source: ErrorSource.AGENT,\n            startClocks: clocksNow()\n          })\n        } finally {\n          allowNextEvent = false\n        }\n      }\n      return true\n    }\n  }\n}\n","import { getLinkElementOrigin, getLocationOrigin } from './tools'\n\nexport function normalizeUrl(url) {\n  return buildUrl(url, getLocationOrigin()).href\n}\n\nexport function isValidUrl(url) {\n  try {\n    return !!buildUrl(url)\n  } catch (e) {\n    return false\n  }\n}\n\n// export function haveSameOrigin(url1, url2) {\n//   return getOrigin(url1) === getOrigin(url2)\n// }\n\nexport function getOrigin(url) {\n  return getLinkElementOrigin(buildUrl(url))\n}\n\nexport function getPathName(url) {\n  var pathname = buildUrl(url).pathname\n  return pathname[0] === '/' ? pathname : '/' + pathname\n}\n\nexport function getSearch(url) {\n  return buildUrl(url).search\n}\n\nexport function getHash(url) {\n  return buildUrl(url).hash\n}\n\nexport function buildUrl(url, base) {\n  if (checkURLSupported()) {\n    return base !== undefined ? new URL(url, base) : new URL(url)\n  }\n  if (base === undefined && !/:/.test(url)) {\n    throw new Error('Invalid URL: ' + url)\n  }\n  var doc = document\n  var anchorElement = doc.createElement('a')\n  if (base !== undefined) {\n    doc = document.implementation.createHTMLDocument('')\n    var baseElement = doc.createElement('base')\n    baseElement.href = base\n    doc.head.appendChild(baseElement)\n    doc.body.appendChild(anchorElement)\n  }\n  anchorElement.href = url\n  return anchorElement\n}\n\nvar isURLSupported\nfunction checkURLSupported() {\n  if (isURLSupported !== undefined) {\n    return isURLSupported\n  }\n  try {\n    var url = new URL('http://test/path')\n    isURLSupported = url.href === 'http://test/path'\n    return isURLSupported\n  } catch (e) {\n    isURLSupported = false\n  }\n  return isURLSupported\n}\n","export var userAgent = navigator.userAgent.toLowerCase()\nexport var isAndroid = function () {\n  return /android/.test(userAgent)\n}\nexport var isIos = function () {\n  return /iphone os/.test(userAgent)\n}\n\nvar JsBirdge = function () {\n  this.bridge = window['FTWebViewJavascriptBridge']\n  this.tagMaps = {}\n  window.mapWebViewCallBack = {}\n  try {\n    this.initBridge()\n  } catch (err) {}\n}\nJsBirdge.prototype = {\n  initBridge: function () {\n    var _this = this\n    if (isIos()) {\n      if (!_this.bridge) {\n        if (window.WVJBCallbacks) {\n          window.WVJBCallbacks.push(function (bridge) {\n            _this.bridge = bridge\n          })\n          return\n        } else {\n          window.WVJBCallbacks = [\n            function (bridge) {\n              _this.bridge = bridge\n              return\n            }\n          ]\n          var WVJBIframe = document.createElement('iframe')\n          WVJBIframe.style.display = 'none'\n          WVJBIframe.src = 'wvjbscheme://__BRIDGE_LOADED__'\n          document.documentElement.appendChild(WVJBIframe)\n          setTimeout(function () {\n            document.documentElement.removeChild(WVJBIframe)\n          }, 0)\n        }\n      }\n    }\n  },\n  sendEvent: function (params, callback) {\n    if (typeof params === 'undefined') {\n      params = {}\n    }\n    var _this = this\n    var tag = 'Unique id:' + new Date().getTime()\n    if (params.name) {\n      _this.tagMaps[params.name] = tag\n      window.mapWebViewCallBack[tag] = function (ret, err) {\n        return Promise.resolve(ret, err)\n      }\n      params['_tag'] = tag\n      try {\n        if (isIos()) {\n          _this.bridge.callHandler(\n            'sendEvent',\n            JSON.stringify(params),\n            'mapWebViewCallBack'\n          )\n        } else {\n          _this.bridge.sendEvent(JSON.stringify(params), 'mapWebViewCallBack')\n        }\n      } catch (err) {}\n    } else {\n      callback({ error: '请传入发送事件的名称！！' })\n    }\n  },\n  addEventListener: function (params, callback) {\n    var tag = 'Unique id:' + new Date().getTime()\n    var _this = this\n    if (params.name) {\n      _this.tagMaps[params.name] = tag\n      window.mapWebViewCallBack[tag] = function (ret, err) {\n        callback(ret, err)\n        return\n      }\n      params['_tag'] = tag\n      try {\n        if (isIos()) {\n          _this.bridge.callHandler(\n            'addEventListener',\n            JSON.stringify(params),\n            'mapWebViewCallBack'\n          )\n        } else {\n          _this.bridge.addEventListener(\n            JSON.stringify(params),\n            'mapWebViewCallBack'\n          )\n        }\n      } catch (err) {}\n    } else {\n      callback({ error: '请传入监听事件的名称！！' })\n    }\n  }\n}\n\nexport var JsBirdge = JsBirdge\n","import { setTimeout, clearTimeout } from './timer'\nimport { monitor } from './monitor'\nimport { dateNow } from './tools'\n\n/**\n * 'requestIdleCallback' with a shim.\n */\nexport function requestIdleCallback(callback, opts) {\n  // Note: check both 'requestIdleCallback' and 'cancelIdleCallback' existence because some polyfills only implement 'requestIdleCallback'.\n  if (window.requestIdleCallback && window.cancelIdleCallback) {\n    const id = window.requestIdleCallback(monitor(callback), opts)\n    return function () {\n      return window.cancelIdleCallback(id)\n    }\n  }\n  return requestIdleCallbackShim(callback)\n}\n\nexport const MAX_TASK_TIME = 50\n\n/*\n * Shim from https://developer.chrome.com/blog/using-requestidlecallback#checking_for_requestidlecallback\n * Note: there is no simple way to support the \"timeout\" option, so we ignore it.\n */\nexport function requestIdleCallbackShim(callback) {\n  const start = dateNow()\n  const timeoutId = setTimeout(function () {\n    callback({\n      didTimeout: false,\n      timeRemaining: function () {\n        return Math.max(0, MAX_TASK_TIME - (dateNow() - start))\n      }\n    })\n  }, 0)\n  return function () {\n    return clearTimeout(timeoutId)\n  }\n}\n","import { ONE_SECOND } from './tools'\nimport { requestIdleCallback } from './requestIdleCallback'\n\n/**\n * Maximum delay before starting to execute tasks in the queue. We don't want to wait too long\n * before running tasks, as it might hurt reliability (ex: if the user navigates away, we might lose\n * the opportunity to send some data). We also don't want to run tasks too often, as it might hurt\n * performance.\n */\nconst IDLE_CALLBACK_TIMEOUT = ONE_SECOND\n\n/**\n * Maximum amount of time allocated to running tasks when a timeout (`IDLE_CALLBACK_TIMEOUT`) is\n * reached. We should not run tasks for too long as it will hurt performance, but we should still\n * run some tasks to avoid postponing them forever.\n *\n * Rational: Running tasks for 30ms every second (IDLE_CALLBACK_TIMEOUT) should be acceptable.\n */\nexport const MAX_EXECUTION_TIME_ON_TIMEOUT = 30\n\nexport function createTaskQueue() {\n  const pendingTasks = []\n\n  function run(deadline) {\n    let executionTimeRemaining\n    if (deadline.didTimeout) {\n      const start = performance.now()\n      executionTimeRemaining = function () {\n        return MAX_EXECUTION_TIME_ON_TIMEOUT - (performance.now() - start)\n      }\n    } else {\n      executionTimeRemaining = deadline.timeRemaining.bind(deadline)\n    }\n\n    while (executionTimeRemaining() > 0 && pendingTasks.length) {\n      pendingTasks.shift()()\n    }\n\n    if (pendingTasks.length) {\n      scheduleNextRun()\n    }\n  }\n\n  function scheduleNextRun() {\n    requestIdleCallback(run, { timeout: IDLE_CALLBACK_TIMEOUT })\n  }\n\n  return {\n    push: function (task) {\n      if (pendingTasks.push(task) === 1) {\n        scheduleNextRun()\n      }\n    }\n  }\n}\n","import { isFunction, isBoolean, some } from '../helper/tools'\nvar TRIM_REGIX = /^\\s+|\\s+$/g\nvar typeMap = {\n  rum: '/rum',\n  log: '/logging',\n  sessionReplay: '/rum/replay'\n}\nfunction getEndPointUrl(configuration, type) {\n  // type: rum, log,replay\n  var subUrl = typeMap[type]\n  if (!subUrl) return ''\n  var url =\n    configuration.datakitOrigin ||\n    configuration.datakitUrl ||\n    configuration.site\n  if (url.indexOf('/') === 0) {\n    // 绝对路径这种 /xxx\n    url = location.origin + trim(url)\n  }\n  var endpoint = url\n  if (url.lastIndexOf('/') === url.length - 1) {\n    endpoint = trim(url) + 'v1/write' + subUrl\n  } else {\n    endpoint = trim(url) + '/v1/write' + subUrl\n  }\n  if (configuration.site && configuration.clientToken) {\n    endpoint =\n      endpoint + '?token=' + configuration.clientToken + '&to_headless=true'\n  }\n  return endpoint\n}\n\nexport function trim(str) {\n  return str.replace(TRIM_REGIX, '')\n}\n\nexport function computeTransportConfiguration(initConfiguration) {\n  var isIntakeUrl = function (url) {\n    return false\n  }\n  if (\n    'isIntakeUrl' in initConfiguration &&\n    isFunction(initConfiguration.isIntakeUrl) &&\n    isBoolean(initConfiguration.isIntakeUrl())\n  ) {\n    isIntakeUrl = initConfiguration.isIntakeUrl\n  }\n  var isServerError = function (request) {\n    return false\n  }\n  if (\n    'isServerError' in initConfiguration &&\n    isFunction(initConfiguration.isServerError) &&\n    isBoolean(initConfiguration.isServerError())\n  ) {\n    isServerError = initConfiguration.isServerError\n  }\n  return {\n    rumEndpoint: getEndPointUrl(initConfiguration, 'rum'),\n    logsEndpoint: getEndPointUrl(initConfiguration, 'log'),\n    sessionReplayEndPoint: getEndPointUrl(initConfiguration, 'sessionReplay'),\n    isIntakeUrl: isIntakeUrl,\n    isServerError: isServerError\n  }\n}\nexport function isIntakeRequest(url, configuration) {\n  var notTakeRequest = [configuration.rumEndpoint]\n  if (configuration.logsEndpoint) {\n    notTakeRequest.push(configuration.logsEndpoint)\n  }\n  if (configuration.sessionReplayEndPoint) {\n    notTakeRequest.push(configuration.sessionReplayEndPoint)\n  }\n  // datakit 地址，log 地址，以及客户自定义过滤方法定义url\n  return (\n    some(notTakeRequest, function (takeUrl) {\n      return url.indexOf(takeUrl) === 0\n    }) || configuration.isIntakeUrl(url)\n  )\n}\n","import {\n  findCommaSeparatedValue,\n  UUID,\n  ONE_SECOND,\n  ONE_MINUTE,\n  findCommaSeparatedValues\n} from '../helper/tools'\n\nfunction getCookieName(name, options) {\n  return `${name}_${options && options.crossSite ? 'cs1' : 'cs0'}_${\n    options && options.domain ? 'd1' : 'd0'\n  }_${options && options.secure ? 'sec1' : 'sec0'}_${\n    options && options.partitioned ? 'part1' : 'part0'\n  }`\n}\nexport function setCookie(name, value, expireDelay, options) {\n  var date = new Date()\n  date.setTime(date.getTime() + expireDelay)\n  var expires = 'expires=' + date.toUTCString()\n  var sameSite = options && options.crossSite ? 'none' : 'strict'\n  var domain = options && options.domain ? ';domain=' + options.domain : ''\n  var secure = options && options.secure ? ';secure' : ''\n  var partitioned = options && options.partitioned ? ';partitioned' : ''\n\n  document.cookie =\n    getCookieName(name, options) +\n    '=' +\n    value +\n    ';' +\n    expires +\n    ';path=/;samesite=' +\n    sameSite +\n    domain +\n    secure +\n    partitioned\n}\n\nexport function getCookie(name, options) {\n  return findCommaSeparatedValue(document.cookie, getCookieName(name, options))\n}\nvar initCookieParsed\n/**\n * Returns a cached value of the cookie. Use this during SDK initialization (and whenever possible)\n * to avoid accessing document.cookie multiple times.\n */\nexport function getInitCookie(name) {\n  if (!initCookieParsed) {\n    initCookieParsed = findCommaSeparatedValues(document.cookie)\n  }\n  return initCookieParsed.get(name)\n}\n\nexport function resetInitCookies() {\n  initCookieParsed = undefined\n}\nexport function deleteCookie(name, options) {\n  setCookie(name, '', 0, options)\n}\n\nexport function areCookiesAuthorized(options) {\n  if (document.cookie === undefined || document.cookie === null) {\n    return false\n  }\n  try {\n    // Use a unique cookie name to avoid issues when the SDK is initialized multiple times during\n    // the test cookie lifetime\n    var testCookieName = `gc_cookie_test_${UUID()}`\n    var testCookieValue = 'test'\n    setCookie(testCookieName, testCookieValue, ONE_MINUTE, options)\n    const isCookieCorrectlySet =\n      getCookie(testCookieName, options) === testCookieValue\n    deleteCookie(testCookieName, options)\n    return isCookieCorrectlySet\n  } catch (error) {\n    return false\n  }\n}\n\n/**\n * No API to retrieve it, number of levels for subdomain and suffix are unknown\n * strategy: find the minimal domain on which cookies are allowed to be set\n * https://web.dev/same-site-same-origin/#site\n */\nvar getCurrentSiteCache\nexport function getCurrentSite() {\n  if (getCurrentSiteCache === undefined) {\n    // Use a unique cookie name to avoid issues when the SDK is initialized multiple times during\n    // the test cookie lifetime\n    const testCookieName = `gc_site_test_${UUID()}`\n    const testCookieValue = 'test'\n    const domainLevels = window.location.hostname.split('.')\n    let candidateDomain = domainLevels.pop()\n    while (\n      domainLevels.length &&\n      !getCookie(testCookieName, {\n        domain: candidateDomain\n      })\n    ) {\n      candidateDomain = `${domainLevels.pop()}.${candidateDomain}`\n      setCookie(testCookieName, testCookieValue, ONE_SECOND, {\n        domain: candidateDomain\n      })\n    }\n    deleteCookie(testCookieName, { domain: candidateDomain })\n    getCurrentSiteCache = candidateDomain\n  }\n  return getCurrentSiteCache\n}\n","import { ONE_HOUR, ONE_MINUTE } from '../helper/tools'\nexport var SESSION_TIME_OUT_DELAY = 4 * ONE_HOUR\nexport var SESSION_EXPIRATION_DELAY = 15 * ONE_MINUTE\nexport var SESSION_STORE_KEY = '_gc_s'\n","import { isEmptyObject, objectEntries, dateNow, map } from '../helper/tools'\nimport {\n  SESSION_EXPIRATION_DELAY,\n  SESSION_TIME_OUT_DELAY\n} from './sessionConstants'\n\nconst SESSION_ENTRY_REGEXP = /^([a-zA-Z]+)=([a-z0-9-]+)$/\nconst SESSION_ENTRY_SEPARATOR = '&'\n\nexport const EXPIRED = '1'\n\nexport function getExpiredSessionState() {\n  return {\n    isExpired: EXPIRED\n  }\n}\n\nexport function isSessionInNotStartedState(session) {\n  return isEmptyObject(session)\n}\n\nexport function isSessionStarted(session) {\n  return !isSessionInNotStartedState(session)\n}\n\nexport function isSessionInExpiredState(session) {\n  return session.isExpired !== undefined || !isActiveSession(session)\n}\n\nfunction isActiveSession(sessionState) {\n  return (\n    (sessionState.created === undefined ||\n      dateNow() - Number(sessionState.created) < SESSION_TIME_OUT_DELAY) &&\n    (sessionState.expire === undefined ||\n      dateNow() < Number(sessionState.expire))\n  )\n}\n\nexport function expandSessionState(session) {\n  session.expire = String(dateNow() + SESSION_EXPIRATION_DELAY)\n}\n\nexport function toSessionString(session) {\n  return map(objectEntries(session), function (item) {\n    return item[0] + '=' + item[1]\n  }).join(SESSION_ENTRY_SEPARATOR)\n}\n\nexport function toSessionState(sessionString) {\n  const session = {}\n  if (isValidSessionString(sessionString)) {\n    sessionString.split(SESSION_ENTRY_SEPARATOR).forEach(function (entry) {\n      const matches = SESSION_ENTRY_REGEXP.exec(entry)\n      if (matches !== null) {\n        const [, key, value] = matches\n        session[key] = value\n      }\n    })\n  }\n  return session\n}\n\nfunction isValidSessionString(sessionString) {\n  return (\n    !!sessionString &&\n    (sessionString.indexOf(SESSION_ENTRY_SEPARATOR) !== -1 ||\n      SESSION_ENTRY_REGEXP.test(sessionString))\n  )\n}\n","import { isChromium } from '../helper/tools'\nimport {\n  getCurrentSite,\n  areCookiesAuthorized,\n  getCookie,\n  setCookie\n} from '../browser/cookie'\nimport {\n  SESSION_EXPIRATION_DELAY,\n  SESSION_TIME_OUT_DELAY,\n  SESSION_STORE_KEY\n} from './sessionConstants'\nimport {\n  toSessionString,\n  toSessionState,\n  getExpiredSessionState\n} from './sessionState'\n\nexport function selectCookieStrategy(initConfiguration) {\n  const cookieOptions = buildCookieOptions(initConfiguration)\n  return areCookiesAuthorized(cookieOptions)\n    ? { type: 'Cookie', cookieOptions }\n    : undefined\n}\n\nexport function initCookieStrategy(cookieOptions) {\n  const cookieStore = {\n    /**\n     * Lock strategy allows mitigating issues due to concurrent access to cookie.\n     * This issue concerns only chromium browsers and enabling this on firefox increases cookie write failures.\n     */\n    isLockEnabled: isChromium(),\n    persistSession: persistSessionCookie(cookieOptions),\n    retrieveSession: retrieveSessionCookie(cookieOptions),\n    expireSession: function () {\n      return expireSessionCookie(cookieOptions)\n    }\n  }\n  return cookieStore\n}\n\nfunction persistSessionCookie(options) {\n  return function (session) {\n    setCookie(\n      SESSION_STORE_KEY,\n      toSessionString(session),\n      SESSION_EXPIRATION_DELAY,\n      options\n    )\n  }\n}\n\nfunction expireSessionCookie(options) {\n  setCookie(\n    SESSION_STORE_KEY,\n    toSessionString(getExpiredSessionState()),\n    SESSION_TIME_OUT_DELAY,\n    options\n  )\n}\n\nfunction retrieveSessionCookie(options) {\n  return function () {\n    var sessionString = getCookie(SESSION_STORE_KEY, options)\n    return toSessionState(sessionString)\n  }\n}\n\nexport function buildCookieOptions(initConfiguration) {\n  const cookieOptions = {}\n\n  cookieOptions.secure =\n    !!initConfiguration.useSecureSessionCookie ||\n    !!initConfiguration.usePartitionedCrossSiteSessionCookie ||\n    !!initConfiguration.useCrossSiteSessionCookie\n  cookieOptions.crossSite =\n    !!initConfiguration.usePartitionedCrossSiteSessionCookie ||\n    !!initConfiguration.useCrossSiteSessionCookie\n  cookieOptions.partitioned =\n    !!initConfiguration.usePartitionedCrossSiteSessionCookie\n\n  if (initConfiguration.trackSessionAcrossSubdomains) {\n    cookieOptions.domain = getCurrentSite()\n  }\n\n  return cookieOptions\n}\n","import { UUID } from '../helper/tools'\nimport {\n  toSessionString,\n  toSessionState,\n  getExpiredSessionState\n} from './sessionState'\n\nimport { SESSION_STORE_KEY } from './sessionConstants'\n\nconst LOCAL_STORAGE_TEST_KEY = '_gc_test_'\n\nexport function selectLocalStorageStrategy() {\n  try {\n    const id = UUID()\n    const testKey = `${LOCAL_STORAGE_TEST_KEY}${id}`\n    localStorage.setItem(testKey, id)\n    const retrievedId = localStorage.getItem(testKey)\n    localStorage.removeItem(testKey)\n    return id === retrievedId ? { type: 'LocalStorage' } : undefined\n  } catch (e) {\n    return undefined\n  }\n}\n\nexport function initLocalStorageStrategy() {\n  return {\n    isLockEnabled: false,\n    persistSession: persistInLocalStorage,\n    retrieveSession: retrieveSessionFromLocalStorage,\n    expireSession: expireSessionFromLocalStorage\n  }\n}\n\nfunction persistInLocalStorage(sessionState) {\n  localStorage.setItem(SESSION_STORE_KEY, toSessionString(sessionState))\n}\n\nfunction retrieveSessionFromLocalStorage() {\n  const sessionString = localStorage.getItem(SESSION_STORE_KEY)\n  return toSessionState(sessionString)\n}\n\nfunction expireSessionFromLocalStorage() {\n  persistInLocalStorage(getExpiredSessionState())\n}\n","import { setTimeout } from '../helper/timer'\nimport { UUID, assign } from '../helper/tools'\nimport {\n  expandSessionState,\n  isSessionInExpiredState,\n  isSessionInNotStartedState\n} from './sessionState'\n\nexport const LOCK_RETRY_DELAY = 10\nexport const LOCK_MAX_TRIES = 100\nconst bufferedOperations = []\nlet ongoingOperations\n\nexport function processSessionStoreOperations(\n  operations,\n  sessionStoreStrategy,\n  numberOfRetries = 0\n) {\n  const { isLockEnabled, persistSession, expireSession } = sessionStoreStrategy\n  const persistWithLock = function (session) {\n    return persistSession(assign({}, session, { lock: currentLock }))\n  }\n  const retrieveStore = function () {\n    const session = sessionStoreStrategy.retrieveSession()\n    const lock = session.lock\n    if (session.lock) {\n      delete session.lock\n    }\n\n    return {\n      session,\n      lock\n    }\n  }\n\n  if (!ongoingOperations) {\n    ongoingOperations = operations\n  }\n  if (operations !== ongoingOperations) {\n    bufferedOperations.push(operations)\n    return\n  }\n  if (isLockEnabled && numberOfRetries >= LOCK_MAX_TRIES) {\n    next(sessionStoreStrategy)\n    return\n  }\n  let currentLock\n  let currentStore = retrieveStore()\n  if (isLockEnabled) {\n    // if someone has lock, retry later\n    if (currentStore.lock) {\n      retryLater(operations, sessionStoreStrategy, numberOfRetries)\n      return\n    }\n    // acquire lock\n    currentLock = UUID()\n    persistWithLock(currentStore.session)\n    // if lock is not acquired, retry later\n    currentStore = retrieveStore()\n    if (currentStore.lock !== currentLock) {\n      retryLater(operations, sessionStoreStrategy, numberOfRetries)\n      return\n    }\n  }\n  let processedSession = operations.process(currentStore.session)\n  if (isLockEnabled) {\n    // if lock corrupted after process, retry later\n    currentStore = retrieveStore()\n    if (currentStore.lock !== currentLock) {\n      retryLater(operations, sessionStoreStrategy, numberOfRetries)\n      return\n    }\n  }\n  if (processedSession) {\n    if (isSessionInExpiredState(processedSession)) {\n      expireSession()\n    } else {\n      expandSessionState(processedSession)\n      isLockEnabled\n        ? persistWithLock(processedSession)\n        : persistSession(processedSession)\n    }\n  }\n  if (isLockEnabled) {\n    // correctly handle lock around expiration would require to handle this case properly at several levels\n    // since we don't have evidence of lock issues around expiration, let's just not do the corruption check for it\n    if (!(processedSession && isSessionInExpiredState(processedSession))) {\n      // if lock corrupted after persist, retry later\n      currentStore = retrieveStore()\n      if (currentStore.lock !== currentLock) {\n        retryLater(operations, sessionStoreStrategy, numberOfRetries)\n        return\n      }\n      persistSession(currentStore.session)\n      processedSession = currentStore.session\n    }\n  }\n  // call after even if session is not persisted in order to perform operations on\n  // up-to-date session state value => the value could have been modified by another tab\n  if (operations.after) {\n    operations.after(processedSession || currentStore.session)\n  }\n  next(sessionStoreStrategy)\n}\n\nfunction retryLater(operations, sessionStore, currentNumberOfRetries) {\n  setTimeout(function () {\n    processSessionStoreOperations(\n      operations,\n      sessionStore,\n      currentNumberOfRetries + 1\n    )\n  }, LOCK_RETRY_DELAY)\n}\n\nfunction next(sessionStore) {\n  ongoingOperations = undefined\n  const nextOperations = bufferedOperations.shift()\n  if (nextOperations) {\n    processSessionStoreOperations(nextOperations, sessionStore)\n  }\n}\n","import { clearInterval, setInterval } from '../helper/timer'\nimport { Observable } from '../helper/observable'\nimport { ONE_SECOND, dateNow, throttle, UUID, assign } from '../helper/tools'\nimport { selectCookieStrategy, initCookieStrategy } from './sessionInCookie'\nimport {\n  getExpiredSessionState,\n  isSessionInExpiredState,\n  isSessionInNotStartedState,\n  isSessionStarted\n} from './sessionState'\nimport {\n  initLocalStorageStrategy,\n  selectLocalStorageStrategy\n} from './sessionInLocalStorage'\nimport { processSessionStoreOperations } from './sessionStoreOperations'\n\n/**\n * Every second, the storage will be polled to check for any change that can occur\n * to the session state in another browser tab, or another window.\n * This value has been determined from our previous cookie-only implementation.\n */\nexport const STORAGE_POLL_DELAY = ONE_SECOND\n\n/**\n * Checks if cookies are available as the preferred storage\n * Else, checks if LocalStorage is allowed and available\n */\nexport function selectSessionStoreStrategyType(initConfiguration) {\n  let sessionStoreStrategyType = selectCookieStrategy(initConfiguration)\n  if (\n    !sessionStoreStrategyType &&\n    initConfiguration.allowFallbackToLocalStorage\n  ) {\n    sessionStoreStrategyType = selectLocalStorageStrategy()\n  }\n  return sessionStoreStrategyType\n}\n\n/**\n * Different session concepts:\n * - tracked, the session has an id and is updated along the user navigation\n * - not tracked, the session does not have an id but it is updated along the user navigation\n * - inactive, no session in store or session expired, waiting for a renew session\n */\nexport function startSessionStore(\n  sessionStoreStrategyType,\n  productKey,\n  computeSessionState\n) {\n  const renewObservable = new Observable()\n  const expireObservable = new Observable()\n  const sessionStateUpdateObservable = new Observable()\n  const sessionStoreStrategy =\n    sessionStoreStrategyType.type === 'Cookie'\n      ? initCookieStrategy(sessionStoreStrategyType.cookieOptions)\n      : initLocalStorageStrategy()\n  const { expireSession } = sessionStoreStrategy\n\n  const watchSessionTimeoutId = setInterval(watchSession, STORAGE_POLL_DELAY)\n  let sessionCache\n\n  startSession()\n\n  const {\n    throttled: throttledExpandOrRenewSession,\n    cancel: cancelExpandOrRenewSession\n  } = throttle(function () {\n    processSessionStoreOperations(\n      {\n        process: function (sessionState) {\n          if (isSessionInNotStartedState(sessionState)) {\n            return\n          }\n\n          const synchronizedSession = synchronizeSession(sessionState)\n          expandOrRenewSessionState(synchronizedSession)\n          return synchronizedSession\n        },\n        after: function (sessionState) {\n          if (isSessionStarted(sessionState) && !hasSessionInCache()) {\n            renewSessionInCache(sessionState)\n          }\n          sessionCache = sessionState\n        }\n      },\n      sessionStoreStrategy\n    )\n  }, STORAGE_POLL_DELAY)\n\n  function expandSession() {\n    processSessionStoreOperations(\n      {\n        process: function (sessionState) {\n          return hasSessionInCache()\n            ? synchronizeSession(sessionState)\n            : undefined\n        }\n      },\n      sessionStoreStrategy\n    )\n  }\n\n  /**\n   * allows two behaviors:\n   * - if the session is active, synchronize the session cache without updating the session store\n   * - if the session is not active, clear the session store and expire the session cache\n   */\n  function watchSession() {\n    processSessionStoreOperations(\n      {\n        process: function (sessionState) {\n          return isSessionInExpiredState(sessionState)\n            ? getExpiredSessionState()\n            : undefined\n        },\n        after: synchronizeSession\n      },\n      sessionStoreStrategy\n    )\n  }\n\n  function synchronizeSession(sessionState) {\n    if (isSessionInExpiredState(sessionState)) {\n      sessionState = getExpiredSessionState()\n    }\n    if (hasSessionInCache()) {\n      if (isSessionInCacheOutdated(sessionState)) {\n        expireSessionInCache()\n      } else {\n        sessionStateUpdateObservable.notify({\n          previousState: sessionCache,\n          newState: sessionState\n        })\n        sessionCache = sessionState\n      }\n    }\n    return sessionState\n  }\n\n  function startSession() {\n    processSessionStoreOperations(\n      {\n        process: function (sessionState) {\n          if (isSessionInNotStartedState(sessionState)) {\n            return getExpiredSessionState()\n          }\n        },\n        after: function (sessionState) {\n          sessionCache = sessionState\n        }\n      },\n      sessionStoreStrategy\n    )\n  }\n\n  function expandOrRenewSessionState(sessionState) {\n    if (isSessionInNotStartedState(sessionState)) {\n      return false\n    }\n\n    const { trackingType, isTracked } = computeSessionState(\n      sessionState[productKey]\n    )\n    sessionState[productKey] = trackingType\n    delete sessionState.isExpired\n    if (isTracked && !sessionState.id) {\n      sessionState.id = UUID()\n      sessionState.created = String(dateNow())\n    }\n  }\n\n  function hasSessionInCache() {\n    return sessionCache[productKey] !== undefined\n  }\n\n  function isSessionInCacheOutdated(sessionState) {\n    return (\n      sessionCache.id !== sessionState.id ||\n      sessionCache[productKey] !== sessionState[productKey]\n    )\n  }\n\n  function expireSessionInCache() {\n    sessionCache = getExpiredSessionState()\n    expireObservable.notify()\n  }\n\n  function renewSessionInCache(sessionState) {\n    sessionCache = sessionState\n    renewObservable.notify()\n  }\n\n  function updateSessionState(partialSessionState) {\n    processSessionStoreOperations(\n      {\n        process: function (sessionState) {\n          return assign({}, sessionState, partialSessionState)\n        },\n        after: synchronizeSession\n      },\n      sessionStoreStrategy\n    )\n  }\n\n  return {\n    expandOrRenewSession: throttledExpandOrRenewSession,\n    expandSession,\n    getSession: function () {\n      return sessionCache\n    },\n    renewObservable,\n    expireObservable,\n    sessionStateUpdateObservable,\n    restartSession: startSession,\n    expire: function () {\n      cancelExpandOrRenewSession()\n      expireSession()\n      synchronizeSession(getExpiredSessionState())\n    },\n    stop: function () {\n      clearInterval(watchSessionTimeoutId)\n    },\n    updateSessionState\n  }\n}\n","import { catchUserErrors } from '../helper/catchUserErrors'\nimport { display } from '../helper/display'\nimport {\n  assign,\n  isPercentage,\n  ONE_SECOND,\n  isNullUndefinedDefaultValue\n} from '../helper/tools'\nimport { ONE_KIBI_BYTE } from '../helper/byteUtils'\nimport { computeTransportConfiguration } from './transportConfiguration'\nimport { selectSessionStoreStrategyType } from '../session/sessionStore'\nexport var DefaultPrivacyLevel = {\n  ALLOW: 'allow',\n  MASK: 'mask',\n  MASK_USER_INPUT: 'mask-user-input'\n}\nexport function validateAndBuildConfiguration(initConfiguration) {\n  if (\n    initConfiguration.sampleRate !== undefined &&\n    !isPercentage(initConfiguration.sampleRate)\n  ) {\n    display.error('Sample Rate should be a number between 0 and 100')\n    return\n  }\n  if (\n    initConfiguration.sessionSampleRate !== undefined &&\n    !isPercentage(initConfiguration.sessionSampleRate)\n  ) {\n    display.error('Sample Rate should be a number between 0 and 100')\n    return\n  }\n  if (\n    initConfiguration.telemetrySampleRate !== undefined &&\n    !isPercentage(initConfiguration.telemetrySampleRate)\n  ) {\n    display.error('Telemetry Sample Rate should be a number between 0 and 100')\n    return\n  }\n\n  var sessionSampleRate = isNullUndefinedDefaultValue(\n    initConfiguration.sessionSampleRate,\n    initConfiguration.sampleRate\n  )\n  return assign(\n    {\n      beforeSend:\n        initConfiguration.beforeSend &&\n        catchUserErrors(\n          initConfiguration.beforeSend,\n          'beforeSend threw an error:'\n        ),\n      sessionStoreStrategyType:\n        selectSessionStoreStrategyType(initConfiguration),\n      sessionSampleRate: isNullUndefinedDefaultValue(sessionSampleRate, 100),\n      service: initConfiguration.service,\n      version: initConfiguration.version,\n      env: initConfiguration.env,\n      telemetrySampleRate: isNullUndefinedDefaultValue(\n        initConfiguration.telemetrySampleRate,\n        100\n      ),\n      telemetryEnabled: isNullUndefinedDefaultValue(\n        initConfiguration.telemetryEnabled,\n        false\n      ),\n      silentMultipleInit: !!initConfiguration.silentMultipleInit,\n\n      /**\n       * beacon payload max queue size implementation is 64kb\n       * ensure that we leave room for logs, rum and potential other users\n       */\n      batchBytesLimit: 16 * ONE_KIBI_BYTE,\n\n      eventRateLimiterThreshold: 3000,\n      maxTelemetryEventsPerPage: 15,\n\n      /**\n       * flush automatically, aim to be lower than ALB connection timeout\n       * to maximize connection reuse.\n       */\n      flushTimeout: 30 * ONE_SECOND,\n\n      /**\n       * Logs intake limit\n       */\n      batchMessagesLimit: 50,\n      messageBytesLimit: 256 * ONE_KIBI_BYTE,\n      resourceUrlLimit: 5 * ONE_KIBI_BYTE,\n      storeContextsToLocal: !!initConfiguration.storeContextsToLocal,\n      // 存储到localstorage key ，默认不填，自动生成\n      storeContextsKey: initConfiguration.storeContextsKey,\n      sendContentTypeByJson: !!initConfiguration.sendContentTypeByJson,\n      retryMaxSize: isNullUndefinedDefaultValue(\n        initConfiguration.retryMaxSize,\n        -1\n      )\n    },\n    computeTransportConfiguration(initConfiguration)\n  )\n}\nexport function validatePostRequestRequireParamsConfiguration(\n  initConfiguration\n) {\n  if (\n    !initConfiguration.site &&\n    !initConfiguration.datakitOrigin &&\n    !initConfiguration.datakitUrl\n  ) {\n    display.error(\n      'datakitOrigin or site is not configured, no RUM data will be collected.'\n    )\n    return false\n  }\n  //   if (!initConfiguration.datakitUrl && !initConfiguration.datakitOrigin) {\n  //     display.error(\n  //       'datakitOrigin is not configured, no RUM data will be collected.'\n  //     )\n  //     return false\n  //   }\n  if (initConfiguration.site && !initConfiguration.clientToken) {\n    display.error(\n      'clientToken is not configured, no RUM data will be collected.'\n    )\n    return false\n  }\n  return true\n}\n","import { addEventListener } from '../browser/addEventListener'\nimport { display } from '../helper/display'\nimport { trim } from './transportConfiguration'\nimport { objectEntries, getType } from '../helper/tools'\nexport function fetchAndApplyRemoteConfiguration(initConfiguration, callback) {\n  fetchRemoteConfiguration(initConfiguration, (remoteInitConfiguration) => {\n    callback(\n      applyRemoteConfiguration(initConfiguration, remoteInitConfiguration)\n    )\n  })\n}\n/**\n * 数据上报采样率，100 表示全收集；0 表示不收集。默认 100\n */\n//   sessionSampleRate?: number | undefined\n//   telemetrySampleRate?: number | undefined\n//   silentMultipleInit?: boolean | undefined\n\n//   service?: string | undefined\n//   /** Web 应用当前环境，如 prod：线上环境；gray：灰度环境；pre：预发布环境；common：日常环境；local：本地环境。 */\n//   env?: string | undefined\n//   /** Web 应用的版本号。 */\n//   version?: string | undefined\n//   /** 链路数据采样百分比：100 表示全收集；0 表示不收集。 */\n//   tracingSampleRate?: number | undefined\n//   /**\n//    * @deprecated use usePartitionedCrossSiteSessionCookie instead\n//    */\n//   useCrossSiteSessionCookie?: boolean | undefined\n//   /**\n//    * 是否使用跨域 cookie，开启第三方 cookie 跨分区实现。默认不允许跨域，例如嵌套跨域 iframe 的情况。\n//    */\n//   usePartitionedCrossSiteSessionCookie?: boolean | undefined\n//   useSecureSessionCookie?: boolean | undefined\n//   trackSessionAcrossSubdomains?: boolean | undefined\n//   /**\n//    * 是否把公共数据存储到localstorage,默认不存储\n//    */\n//   storeContextsToLocal?: boolean | undefined\n//   /**\n//    * 定义存储到 localstorage 的 key ，默认不填，自动生成, 该参数主要是为了区分在同一个域名下，不同子路径共用store 的问题\n//    */\n//   storeContextsKey?: string | undefined\n//   /**\n//    * 数据以 application/json 的发送方式，默认text\n//    */\n//   sendContentTypeByJson?: boolean | undefined\n//   /**\n//    * 在 cookie 不可用的情况下，可以开启该选项，把数据储存到 localstorage\n//    */\n// allowFallbackToLocalStorage ?: boolean | undefined\n//   /**\n//    * 错误会话补偿采样率：\n//    * - 当会话未被 `sessionSampleRate` 采样时，若会话期间发生错误，则按此比例采集\n//    * 此类会话将在错误发生时开始记录事件，并持续记录直到会话结束。\n//    * - 取值范围 0-100，100 表示全采错误会话，0 表示忽略错误会话\n//    */\n//   sessionOnErrorSampleRate?: number | undefined\n\n//   /**\n//    * Session Replay 全量采集采样率：\n//    * - 用于控制所有会话重放的全量数据采集比例\n//    * - 取值范围 0-100，100 表示全量采集，0 表示不采集\n//    **/\n//   sessionReplaySampleRate?: number | undefined\n\n//   /** 错误会话重放补偿采样率：\n//    * - 当会话未被 `sessionReplaySampleRate` 采样时，若会话期间发生错误，则按此比例采集\n//    * 此类回放将记录错误发生前最多一分钟的事件，并持续记录直到会话结束。\n// 100 表示全收集；0 表示不收集。\n//      */\n//   sessionReplayOnErrorSampleRate?: number | undefined\n//   /**\n//    * 是否开启用户行为采集。\n//    */\n//   trackUserInteractions?: boolean | undefined\n//   /**\n//    * 指定 action 数据 name 获取方式，默认自动获取，可以指定元素特定属性名称,alt,name,title,aria-labelledby,aria-label,data-guance-action-name 这些属性\n//    */\n//   actionNameAttribute?: string | undefined\n//   trackViewsManually?: boolean | undefined\n//   /**\n//    * sessionReplay 和 compressIntakeRequests数据压缩都是在 webwork 线程中完成，所以默认情况下，需要在开启csp 安全访问的情况下，允许 worker-src blob:; workerUrl 配置允许自行托管 worker 地址\n//    */\n//   workerUrl?: string\n//   /**\n//    * 压缩 RUM 数据请求内容，以减少发送大量数据时的带宽使用量。压缩在 Worker 线程中完成。\n//    */\n// compressIntakeRequests ?: boolean | undefined\n//    /**\n//      * 配置链路追踪工具类型，如果不配置默认为 ddtrace。目前支持 ddtrace、zipkin、skywalking_v3、jaeger、zipkin_single_header、w3c_traceparent 6 种数据类型。\n//      */\n//     traceType?: TraceType\n\nconst modifiableFieldPaths = {\n  sessionSampleRate: 'number',\n  telemetrySampleRate: 'number',\n  silentMultipleInit: 'boolean',\n  service: 'string',\n  env: 'string',\n  version: 'string',\n  tracingSampleRate: 'number',\n  useCrossSiteSessionCookie: 'boolean',\n  usePartitionedCrossSiteSessionCookie: 'boolean',\n  useSecureSessionCookie: 'boolean',\n  trackSessionAcrossSubdomains: 'boolean',\n  storeContextsToLocal: 'boolean',\n  storeContextsKey: 'string',\n  sendContentTypeByJson: 'boolean',\n  allowFallbackToLocalStorage: 'boolean',\n  sessionOnErrorSampleRate: 'number',\n  sessionReplaySampleRate: 'number',\n  sessionReplayOnErrorSampleRate: 'number',\n  trackUserInteractions: 'boolean',\n  trackInteractions: 'boolean',\n  actionNameAttribute: 'string',\n  trackViewsManually: 'boolean',\n  workerUrl: 'string',\n  compressIntakeRequests: 'boolean',\n  traceType: 'string'\n}\nfunction modificationByFieldsPath(remoteConfiguration, modifiableFieldPaths) {\n  const result = {}\n  objectEntries(modifiableFieldPaths).forEach(([fieldPath, fieldType]) => {\n    // const sourceValue = sourceConfiguration[fieldPath]\n    const remoteValue = remoteConfiguration[fieldPath]\n    if (getType(remoteValue) === fieldType) {\n      result[fieldPath] = remoteValue\n    }\n  })\n  return result\n}\nexport function applyRemoteConfiguration(\n  initConfiguration,\n  remoteInitConfiguration\n) {\n  const simpleRemoteInitConfiguration = {}\n  for (const key in remoteInitConfiguration) {\n    if (remoteInitConfiguration[key] !== undefined) {\n      //  ex\n      //        {\n      //     \"R.d1b454d0_22eb_11ef_9b66_95ca11aa2c6c.sessionSampleRate\": 80\n      // }\n      //  transform to\n      // {\n      //     \"sessionSampleRate\": 80\n      // }\n      const simpleKey = key.replace(\n        'R.' + initConfiguration.applicationId + '.',\n        ''\n      )\n      simpleRemoteInitConfiguration[simpleKey] = remoteInitConfiguration[key]\n    }\n  }\n  return {\n    ...initConfiguration,\n    ...modificationByFieldsPath(\n      simpleRemoteInitConfiguration,\n      modifiableFieldPaths\n    )\n  }\n}\n\nexport function fetchRemoteConfiguration(configuration, callback) {\n  const xhr = new XMLHttpRequest()\n\n  addEventListener(xhr, 'load', function () {\n    if (xhr.status === 200) {\n      const remoteConfiguration = JSON.parse(xhr.responseText)\n      callback(remoteConfiguration.content)\n    } else {\n      callback({})\n      displayRemoteConfigurationFetchingError()\n    }\n  })\n\n  addEventListener(xhr, 'error', function () {\n    callback({})\n    displayRemoteConfigurationFetchingError()\n  })\n\n  xhr.open('GET', buildEndpoint(configuration))\n  xhr.send()\n}\n\nexport function buildEndpoint(configuration) {\n  var url =\n    configuration.datakitOrigin ||\n    configuration.datakitUrl ||\n    configuration.site\n  if (url.indexOf('/') === 0) {\n    // 绝对路径这种 /xxx\n    url = location.origin + trim(url)\n  }\n  var endpoint = url\n  if (url.lastIndexOf('/') === url.length - 1) {\n    endpoint = trim(url) + 'v1/env_variable'\n  } else {\n    endpoint = trim(url) + '/v1/env_variable'\n  }\n  // 这里需要加上token和app_id\n  endpoint += '?app_id=' + configuration.applicationId\n  //testing-openway.dataflux.cn/v1/env_variable?token=a47fb0cdddaa4561a90d941317cdbc0b&app_id=d1b454d0_22eb_11ef_9b66_95ca11aa2c6c&to_headless=true\n  if (configuration.site && configuration.clientToken) {\n    endpoint =\n      endpoint + '&token=' + configuration.clientToken + '&to_headless=true'\n  }\n  return endpoint\n}\n\nfunction displayRemoteConfigurationFetchingError() {\n  display.error('Error fetching the remote configuration.')\n}\n","import { instrumentMethod } from '../helper/instrumentMethod'\nimport { Observable } from '../helper/observable'\nimport { clocksNow, assign } from '../helper/tools'\nimport { monitor } from '../helper/monitor'\nimport { normalizeUrl } from '../helper/urlPolyfill'\n\nvar fetchObservable\n\nexport function initFetchObservable() {\n  if (!fetchObservable) {\n    fetchObservable = createFetchObservable()\n  }\n  return fetchObservable\n}\nexport function resetFetchObservable() {\n  fetchObservable = undefined\n}\nfunction createFetchObservable() {\n  return new Observable(function (observable) {\n    if (!window.fetch) {\n      return\n    }\n\n    var fetchMethod = instrumentMethod(\n      window,\n      'fetch',\n      function (call) {\n        return beforeSend(call, observable)\n      },\n      {\n        computeHandlingStack: true\n      }\n    )\n    return fetchMethod.stop\n  })\n}\n\nfunction beforeSend(params, observable) {\n  var parameters = params.parameters\n  var onPostCall = params.onPostCall\n  var handlingStack = params.handlingStack\n  var input = parameters[0]\n  var init = parameters[1]\n  //   var method =\n  //       (init && init.method) || (input instanceof Request && input.method) || 'GET'\n  //     const methodFromParams =\n  //       (init && init.method) || (input instanceof Request && input.method)\n  //     const method = methodFromParams ? methodFromParams.toUpperCase() : 'GET'\n  var methodFromParams = init && init.method\n\n  if (methodFromParams === undefined && input instanceof Request) {\n    methodFromParams = input.method\n  }\n\n  var method =\n    methodFromParams !== undefined\n      ? String(methodFromParams).toUpperCase()\n      : 'GET'\n  var url = input instanceof Request ? input.url : normalizeUrl(String(input))\n\n  var startClocks = clocksNow()\n\n  var context = {\n    state: 'start',\n    init: init,\n    input: input,\n    method: method,\n    startClocks: startClocks,\n    url: url,\n    handlingStack: handlingStack\n  }\n\n  observable.notify(context)\n  parameters[0] = context.input\n  parameters[1] = context.init\n  onPostCall(function (responsePromise) {\n    return afterSend(observable, responsePromise, context)\n  })\n}\n\nfunction afterSend(observable, responsePromise, startContext) {\n  var context = startContext\n  var reportFetch = function (partialContext) {\n    context.state = 'resolve'\n    assign(context, partialContext)\n    // context.duration = elapsed(context.startClocks.timeStamp, timeStampNow())\n    // if ('stack' in response || response instanceof Error) {\n    //   context.status = 0\n    //   context.isAborted =\n    //     response instanceof DOMException &&\n    //     response.code === DOMException.ABORT_ERR\n    //   context.error = response\n    // } else if ('status' in response) {\n    //   context.response = response\n    //   try {\n    //     context.responseType =\n    //       (response.constructor === Response && response.type) || '' // issue The Response type getter can only be used on instances of Response\n    //   } catch (err) {\n    //     context.responseType = ''\n    //   }\n\n    //   context.status = response.status\n    //   context.isAborted = false\n    // }\n    observable.notify(context)\n  }\n  responsePromise.then(\n    monitor(function (response) {\n      var responseType = ''\n      try {\n        responseType =\n          (response.constructor === Response && response.type) || '' // issue The Response type getter can only be used on instances of Response\n      } catch (err) {\n        responseType = ''\n      }\n      reportFetch({\n        response: response,\n        responseType: responseType,\n        status: response.status,\n        isAborted: false\n      })\n    }),\n    monitor(function (error) {\n      reportFetch({\n        status: 0,\n        isAborted:\n          (context.init &&\n            context.init.signal &&\n            context.init.signal.aborted) ||\n          (error instanceof DOMException &&\n            error.code === DOMException.ABORT_ERR),\n        error: error\n      })\n    })\n  )\n}\n","import { instrumentMethod } from '../helper/instrumentMethod'\nimport { Observable } from '../helper/observable'\nimport { normalizeUrl } from '../helper/urlPolyfill'\nimport { shallowClone, elapsed, clocksNow, timeStampNow } from '../helper/tools'\nimport { addEventListener } from '../browser/addEventListener'\nvar xhrObservable\nvar xhrContexts = new WeakMap()\nexport function initXhrObservable() {\n  if (!xhrObservable) {\n    xhrObservable = createXhrObservable()\n  }\n  return xhrObservable\n}\n\nfunction createXhrObservable() {\n  return new Observable(function (observable) {\n    var openInstrumentMethod = instrumentMethod(\n      XMLHttpRequest.prototype,\n      'open',\n      openXhr\n    )\n\n    var sendInstrumentMethod = instrumentMethod(\n      XMLHttpRequest.prototype,\n      'send',\n      function (call) {\n        sendXhr(call, observable)\n      },\n      { computeHandlingStack: true }\n    )\n\n    var abortInstrumentMethod = instrumentMethod(\n      XMLHttpRequest.prototype,\n      'abort',\n      abortXhr\n    )\n\n    return function () {\n      openInstrumentMethod.stop()\n      sendInstrumentMethod.stop()\n      abortInstrumentMethod.stop()\n    }\n  })\n}\n\nfunction openXhr(params) {\n  var xhr = params.target\n  var method = params.parameters[0]\n  var url = params.parameters[1]\n  xhrContexts.set(xhr, {\n    state: 'open',\n    method: String(method).toUpperCase(),\n    url: normalizeUrl(String(url))\n  })\n}\n\nfunction sendXhr(params, observable) {\n  var xhr = params.target\n  var handlingStack = params.handlingStack\n  var context = xhrContexts.get(xhr)\n  if (!context) {\n    return\n  }\n  var startContext = context\n  startContext.state = 'start'\n  startContext.startClocks = clocksNow()\n  startContext.isAborted = false\n  startContext.xhr = xhr\n  startContext.handlingStack = handlingStack\n  var hasBeenReported = false\n  var stopInstrumentingOnReadyStateChange = instrumentMethod(\n    xhr,\n    'onreadystatechange',\n    function () {\n      if (xhr.readyState === XMLHttpRequest.DONE) {\n        // Try to report the XHR as soon as possible, because the XHR may be mutated by the\n        // application during a future event. For example, Angular is calling .abort() on\n        // completed requests during a onreadystatechange event, so the status becomes '0'\n        // before the request is collected.\n        onEnd()\n      }\n    }\n  ).stop\n\n  var onEnd = function () {\n    unsubscribeLoadEndListener()\n    stopInstrumentingOnReadyStateChange()\n    if (hasBeenReported) {\n      return\n    }\n    hasBeenReported = true\n    var completeContext = context\n    completeContext.state = 'complete'\n    completeContext.duration = elapsed(\n      startContext.startClocks.timeStamp,\n      timeStampNow()\n    )\n    completeContext.status = xhr.status\n    observable.notify(shallowClone(completeContext))\n  }\n  var unsubscribeLoadEndListener = addEventListener(xhr, 'loadend', onEnd).stop\n  observable.notify(startContext)\n}\n\nfunction abortXhr(params) {\n  var xhr = params.target\n  var context = xhrContexts.get(xhr)\n  if (context) {\n    context.isAborted = true\n  }\n}\n","import { Observable } from '../helper/observable'\nimport { includes, values } from '../helper/tools'\nimport { DOM_EVENT } from '../helper/enums'\nimport {\n  addEventListener,\n  addEventListeners\n} from '../browser/addEventListener'\nexport var PageExitReason = {\n  HIDDEN: 'visibility_hidden',\n  UNLOADING: 'before_unload',\n  PAGEHIDE: 'page_hide',\n  FROZEN: 'page_frozen'\n}\n\nexport function createPageExitObservable() {\n  return new Observable(function (observable) {\n    /**\n     * Only event that guarantee to fire on mobile devices when the page transitions to background state\n     * (e.g. when user switches to a different application, goes to homescreen, etc), or is being unloaded.\n     */\n    var visibilityChangeListener = addEventListeners(\n      window,\n      [DOM_EVENT.VISIBILITY_CHANGE, DOM_EVENT.FREEZE],\n      function (event) {\n        if (\n          event.type === DOM_EVENT.VISIBILITY_CHANGE &&\n          document.visibilityState === 'hidden'\n        ) {\n          /**\n           * Only event that guarantee to fire on mobile devices when the page transitions to background state\n           * (e.g. when user switches to a different application, goes to homescreen, etc), or is being unloaded.\n           */\n          observable.notify({ reason: PageExitReason.HIDDEN })\n        } else if (event.type === DOM_EVENT.FREEZE) {\n          /**\n           * After transitioning in background a tab can be freezed to preserve resources. (cf: https://developer.chrome.com/blog/page-lifecycle-api)\n           * Allow to collect events happening between hidden and frozen state.\n           */\n          observable.notify({ reason: PageExitReason.FROZEN })\n        }\n      },\n      { capture: true }\n    )\n\n    /**\n     * Safari does not support yet to send a request during:\n     * - a visibility change during doc unload (cf: https://bugs.webkit.org/show_bug.cgi?id=194897)\n     * - a page hide transition (cf: https://bugs.webkit.org/show_bug.cgi?id=188329)\n     */\n    var beforeUnloadListener = addEventListener(\n      window,\n      DOM_EVENT.BEFORE_UNLOAD,\n      function () {\n        observable.notify({ reason: PageExitReason.UNLOADING })\n      }\n    )\n\n    return function () {\n      visibilityChangeListener.stop()\n      beforeUnloadListener.stop()\n    }\n  })\n}\n\nexport function isPageExitReason(reason) {\n  return includes(values(PageExitReason), reason)\n}\n","export function isTextNode(node) {\n  return node.nodeType === Node.TEXT_NODE\n}\n\nexport function isCommentNode(node) {\n  return node.nodeType === Node.COMMENT_NODE\n}\n\nexport function isElementNode(node) {\n  return node.nodeType === Node.ELEMENT_NODE\n}\n\nexport function isNodeShadowHost(node) {\n  return isElementNode(node) && Boolean(node.shadowRoot)\n}\n\nexport function isNodeShadowRoot(node) {\n  var shadowRoot = node\n  return (\n    !!shadowRoot.host &&\n    shadowRoot.nodeType === Node.DOCUMENT_FRAGMENT_NODE &&\n    isElementNode(shadowRoot.host)\n  )\n}\nexport function hasChildNodes(node) {\n  return node.childNodes.length > 0 || isNodeShadowHost(node)\n}\n// export function getChildNodes(node) {\n//   return isNodeShadowHost(node) ? node.shadowRoot.childNodes : node.childNodes\n// }\nexport function forEachChildNodes(node, callback) {\n  // node.childNodes.forEach(callback)\n  var child = node.firstChild\n\n  while (child) {\n    callback(child)\n    child = child.nextSibling\n  }\n  if (isNodeShadowHost(node)) {\n    callback(node.shadowRoot)\n  }\n}\n/**\n * Return `host` in case if the current node is a shadow root otherwise will return the `parentNode`\n */\nexport function getParentNode(node) {\n  return isNodeShadowRoot(node) ? node.host : node.parentNode\n}\n","import { addEventListener } from './addEventListener'\nimport { DOM_EVENT } from '../helper/enums'\nimport { noop } from '../helper/tools'\nexport function runOnReadyState(expectedReadyState, callback) {\n  if (\n    document.readyState === expectedReadyState ||\n    document.readyState === 'complete'\n  ) {\n    callback()\n    return { stop: noop }\n  } else {\n    var eventName =\n      expectedReadyState === 'complete'\n        ? DOM_EVENT.LOAD\n        : DOM_EVENT.DOM_CONTENT_LOADED\n    return addEventListener(window, eventName, callback, { once: true })\n  }\n}\n","import { RumEventType } from './helper/enums'\nexport var commonTags = {\n  sdk_name: '_gc.sdk_name',\n  sdk_version: '_gc.sdk_version',\n  app_id: 'application.id',\n  env: 'env',\n  service: 'service',\n  version: 'version',\n  source: 'source',\n  userid: 'user.id',\n  user_email: 'user.email',\n  user_name: 'user.name',\n  session_id: 'session.id',\n  session_type: 'session.type',\n  session_sampling: 'session.is_sampling',\n  is_signin: 'user.is_signin',\n  os: 'device.os',\n  os_version: 'device.os_version',\n  os_version_major: 'device.os_version_major',\n  browser: 'device.browser',\n  browser_version: 'device.browser_version',\n  browser_version_major: 'device.browser_version_major',\n  screen_size: 'device.screen_size',\n  network_type: 'device.network_type',\n  time_zone: 'device.time_zone',\n  device: 'device.device',\n  view_id: 'view.id',\n  view_referrer: 'view.referrer',\n  view_url: 'view.url',\n  view_host: 'view.host',\n  view_path: 'view.path',\n  view_name: 'view.name', // 冗余一个字段\n  view_path_group: 'view.path_group'\n}\nexport var commonFields = {\n  view_url_query: 'view.url_query',\n  action_id: 'action.id',\n  action_ids: 'action.ids',\n  view_in_foreground: 'view.in_foreground',\n  display: 'display',\n  session_has_replay: 'session.has_replay',\n  is_login: 'user.is_login',\n  page_states: '_gc.page_states',\n  session_sample_rate: '_gc.configuration.session_sample_rate',\n  session_replay_sample_rate: '_gc.configuration.session_replay_sample_rate',\n  session_on_error_sample_rate:\n    '_gc.configuration.session_on_error_sample_rate',\n  session_replay_on_error_sample_rate:\n    '_gc.configuration.session_replay_on_error_sample_rate',\n  drift: '_gc.drift'\n}\n// 需要用双引号将字符串类型的field value括起来， 这里有数组标示[string, path]\nexport var dataMap = {\n  view: {\n    type: RumEventType.VIEW,\n    tags: {\n      view_loading_type: 'view.loading_type',\n      view_apdex_level: 'view.apdex_level',\n      view_privacy_replay_level: 'privacy.replay_level'\n    },\n    fields: {\n      sampled_for_replay: 'session.sampled_for_replay',\n      sampled_for_error_replay: 'session.sampled_for_error_replay',\n      sampled_for_error_session: 'session.sampled_for_error_session',\n      session_error_timestamp: 'session.error_timestamp_for_session',\n      is_active: 'view.is_active',\n      session_replay_stats: '_gc.replay_stats',\n      session_is_active: 'session.is_active',\n      view_error_count: 'view.error.count',\n      view_resource_count: 'view.resource.count',\n      view_long_task_count: 'view.long_task.count',\n      view_action_count: 'view.action.count',\n      first_contentful_paint: 'view.first_contentful_paint',\n      largest_contentful_paint: 'view.largest_contentful_paint',\n      largest_contentful_paint_element_selector:\n        'view.largest_contentful_paint_element_selector',\n      cumulative_layout_shift: 'view.cumulative_layout_shift',\n      cumulative_layout_shift_time: 'view.cumulative_layout_shift_time',\n      cumulative_layout_shift_target_selector:\n        'view.cumulative_layout_shift_target_selector',\n      first_input_delay: 'view.first_input_delay',\n      loading_time: 'view.loading_time',\n      dom_interactive: 'view.dom_interactive',\n      dom_content_loaded: 'view.dom_content_loaded',\n      dom_complete: 'view.dom_complete',\n      load_event: 'view.load_event',\n      first_input_time: 'view.first_input_time',\n      first_input_target_selector: 'view.first_input_target_selector',\n      first_paint_time: 'view.fpt',\n      interaction_to_next_paint: 'view.interaction_to_next_paint',\n      interaction_to_next_paint_target_selector:\n        'view.interaction_to_next_paint_target_selector',\n      resource_load_time: 'view.resource_load_time',\n      time_to_interactive: 'view.tti',\n      dom: 'view.dom',\n      dom_ready: 'view.dom_ready',\n      time_spent: 'view.time_spent',\n      first_byte: 'view.first_byte',\n      frustration_count: 'view.frustration.count',\n      custom_timings: 'view.custom_timings'\n    }\n  },\n  resource: {\n    type: RumEventType.RESOURCE,\n    tags: {\n      trace_id: '_gc.trace_id',\n      span_id: '_gc.span_id',\n      resource_id: 'resource.id',\n      resource_status: 'resource.status',\n      resource_status_group: 'resource.status_group',\n      resource_method: 'resource.method'\n    },\n    fields: {\n      duration: 'resource.duration',\n      resource_size: 'resource.size',\n      resource_url: 'resource.url',\n      resource_url_host: 'resource.url_host',\n      resource_url_path: 'resource.url_path',\n      resource_url_path_group: 'resource.url_path_group',\n      resource_url_query: 'resource.url_query',\n      resource_delivery_type: 'resource.delivery_type',\n      resource_type: 'resource.type',\n      resource_protocol: 'resource.protocol',\n      resource_encode_size: 'resource.encoded_body_size',\n      resource_decode_size: 'resource.decoded_body_size',\n      resource_transfer_size: 'resource.transfer_size',\n      resource_render_blocking_status: 'resource.render_blocking_status',\n      resource_dns: 'resource.dns',\n      resource_tcp: 'resource.tcp',\n      resource_ssl: 'resource.ssl',\n      resource_ttfb: 'resource.ttfb',\n      resource_trans: 'resource.trans',\n      resource_redirect: 'resource.redirect',\n      resource_first_byte: 'resource.firstbyte',\n      resource_dns_time: 'resource.dns_time',\n      resource_download_time: 'resource.download_time',\n      resource_first_byte_time: 'resource.first_byte_time',\n      resource_connect_time: 'resource.connect_time',\n      resource_ssl_time: 'resource.ssl_time',\n      resource_redirect_time: 'resource.redirect_time'\n    }\n  },\n  error: {\n    type: RumEventType.ERROR,\n    tags: {\n      error_id: 'error.id',\n      trace_id: '_gc.trace_id',\n      span_id: '_gc.span_id',\n      error_source: 'error.source',\n      error_type: 'error.type',\n      error_handling: 'error.handling'\n      //   resource_url: 'error.resource.url',\n      //   resource_url_host: 'error.resource.url_host',\n      //   resource_url_path: 'error.resource.url_path',\n      //   resource_url_path_group: 'error.resource.url_path_group',\n      //   resource_status: 'error.resource.status',\n      //   resource_status_group: 'error.resource.status_group',\n      //   resource_method: 'error.resource.method'\n    },\n    fields: {\n      error_message: ['string', 'error.message'],\n      error_stack: ['string', 'error.stack'],\n      error_causes: ['string', 'error.causes'],\n      error_handling_stack: ['string', 'error.handling_stack']\n    }\n  },\n  long_task: {\n    type: RumEventType.LONG_TASK,\n    tags: {\n      long_task_id: 'long_task.id'\n    },\n    fields: {\n      duration: 'long_task.duration',\n      blocking_duration: 'long_task.blocking_duration',\n      first_ui_event_timestamp: 'long_task.first_ui_event_timestamp',\n      render_start: 'long_task.render_start',\n      style_and_layout_start: 'long_task.style_and_layout_start',\n      long_task_start_time: 'long_task.start_time',\n      scripts: ['string', 'long_task.scripts']\n    }\n  },\n  action: {\n    type: RumEventType.ACTION,\n    tags: {\n      action_type: 'action.type'\n    },\n    fields: {\n      action_name: 'action.target.name',\n      duration: 'action.loading_time',\n      action_error_count: 'action.error.count',\n      action_resource_count: 'action.resource.count',\n      action_frustration_types: 'action.frustration.type',\n      action_long_task_count: 'action.long_task.count',\n      action_target: '_gc.action.target',\n      action_position: '_gc.action.position'\n    }\n  },\n  telemetry: {\n    type: 'telemetry',\n    fields: {\n      status: 'telemetry.status',\n      message: ['string', 'telemetry.message'],\n      type: 'telemetry.type',\n      error_stack: ['string', 'telemetry.error.stack'],\n      error_kind: ['string', 'telemetry.error.kind'],\n      connectivity: ['string', 'telemetry.connectivity'],\n      runtime_env: ['string', 'telemetry.runtime_env'],\n      usage: ['string', 'telemetry.usage'],\n      configuration: ['string', 'telemetry.configuration']\n    }\n  },\n  browser_log: {\n    type: RumEventType.LOGGER,\n    tags: {\n      error_source: 'error.source',\n      error_type: 'error.type',\n      error_resource_url: 'http.url',\n      error_resource_url_host: 'http.url_host',\n      error_resource_url_path: 'http.url_path',\n      error_resource_url_path_group: 'http.url_path_group',\n      error_resource_status: 'http.status_code',\n      error_resource_status_group: 'http.status_group',\n      error_resource_method: 'http.method',\n      action_id: 'user_action.id',\n      service: 'service',\n      status: 'status'\n    },\n    fields: {\n      message: ['string', 'message'],\n      error_message: ['string', 'error.message'],\n      error_stack: ['string', 'error.stack']\n    }\n  }\n}\n","import { Observable } from '../helper/observable'\nimport { createValueHistory } from '../helper/valueHistory'\nimport { relativeNow, clocksOrigin, ONE_MINUTE } from '../helper/tools'\nimport { DOM_EVENT } from '../helper/enums'\nimport {\n  addEventListener,\n  addEventListeners\n} from '../browser/addEventListener'\nimport { clearInterval, setInterval } from '../helper/timer'\nimport { SESSION_TIME_OUT_DELAY } from './sessionConstants'\nimport { startSessionStore } from './sessionStore'\n\nexport const VISIBILITY_CHECK_DELAY = ONE_MINUTE\nconst SESSION_CONTEXT_TIMEOUT_DELAY = SESSION_TIME_OUT_DELAY\nlet stopCallbacks = []\n\nexport function startSessionManager(\n  configuration,\n  productKey,\n  computeSessionState\n) {\n  const renewObservable = new Observable()\n  const expireObservable = new Observable()\n\n  const sessionStore = startSessionStore(\n    configuration.sessionStoreStrategyType,\n    productKey,\n    computeSessionState\n  )\n  stopCallbacks.push(function () {\n    return sessionStore.stop()\n  })\n\n  const sessionContextHistory = createValueHistory({\n    expireDelay: SESSION_CONTEXT_TIMEOUT_DELAY\n  })\n  stopCallbacks.push(function () {\n    return sessionContextHistory.stop()\n  })\n\n  sessionStore.renewObservable.subscribe(function () {\n    sessionContextHistory.add(buildSessionContext(), relativeNow())\n    renewObservable.notify()\n  })\n  sessionStore.expireObservable.subscribe(function () {\n    expireObservable.notify()\n    sessionContextHistory.closeActive(relativeNow())\n  })\n\n  // manager is started.\n  sessionStore.expandOrRenewSession()\n  sessionContextHistory.add(buildSessionContext(), clocksOrigin().relative)\n\n  trackActivity(function () {\n    sessionStore.expandOrRenewSession()\n  })\n  trackVisibility(function () {\n    return sessionStore.expandSession()\n  })\n  trackResume(function () {\n    sessionStore.restartSession()\n  })\n\n  function buildSessionContext() {\n    return {\n      id: sessionStore.getSession().id,\n      trackingType: sessionStore.getSession()[productKey],\n      hasError: !!sessionStore.getSession().hasError\n    }\n  }\n\n  return {\n    findSession: function (startTime, options) {\n      return sessionContextHistory.find(startTime, options)\n    },\n    renewObservable,\n    expireObservable,\n    sessionStateUpdateObservable: sessionStore.sessionStateUpdateObservable,\n    expire: sessionStore.expire,\n    updateSessionState: sessionStore.updateSessionState\n  }\n}\n\nexport function stopSessionManager() {\n  stopCallbacks.forEach(function (e) {\n    e()\n  })\n  stopCallbacks = []\n}\n\nfunction trackActivity(expandOrRenewSession) {\n  const { stop } = addEventListeners(\n    window,\n    [\n      DOM_EVENT.CLICK,\n      DOM_EVENT.TOUCH_START,\n      DOM_EVENT.KEY_DOWN,\n      DOM_EVENT.SCROLL\n    ],\n    expandOrRenewSession,\n    { capture: true, passive: true }\n  )\n  stopCallbacks.push(stop)\n}\n\nfunction trackVisibility(expandSession) {\n  const expandSessionWhenVisible = function () {\n    if (document.visibilityState === 'visible') {\n      expandSession()\n    }\n  }\n\n  const { stop } = addEventListener(\n    document,\n    DOM_EVENT.VISIBILITY_CHANGE,\n    expandSessionWhenVisible\n  )\n  stopCallbacks.push(stop)\n\n  const visibilityCheckInterval = setInterval(\n    expandSessionWhenVisible,\n    VISIBILITY_CHECK_DELAY\n  )\n  stopCallbacks.push(function () {\n    clearInterval(visibilityCheckInterval)\n  })\n}\n\nfunction trackResume(cb) {\n  const { stop } = addEventListener(window, DOM_EVENT.RESUME, cb, {\n    capture: true\n  })\n  stopCallbacks.push(stop)\n}\n","import { clocksNow, ONE_SECOND } from '../helper/tools'\nimport { ONE_MEBI_BYTE, ONE_KIBI_BYTE } from '../helper/byteUtils'\nimport { ErrorSource } from '../helper/errorTools'\nimport { setTimeout } from '../helper/timer'\nexport var MAX_ONGOING_BYTES_COUNT = 80 * ONE_KIBI_BYTE\nexport var MAX_ONGOING_REQUESTS = 32\nexport var MAX_QUEUE_BYTES_COUNT = 3 * ONE_MEBI_BYTE\nexport var MAX_BACKOFF_TIME = 256 * ONE_SECOND\nexport var INITIAL_BACKOFF_TIME = ONE_SECOND\n\nvar TransportStatus = {\n  UP: 0,\n  FAILURE_DETECTED: 1,\n  DOWN: 2\n}\n\nvar RetryReason = {\n  AFTER_SUCCESS: 0,\n  AFTER_RESUME: 1\n}\n\nexport function sendWithRetryStrategy(\n  payload,\n  state,\n  sendStrategy,\n  endpointUrl,\n  reportError\n) {\n  if (\n    state.transportStatus === TransportStatus.UP &&\n    state.queuedPayloads.size() === 0 &&\n    state.bandwidthMonitor.canHandle(payload)\n  ) {\n    send(payload, state, sendStrategy, {\n      onSuccess: function () {\n        return retryQueuedPayloads(\n          RetryReason.AFTER_SUCCESS,\n          state,\n          sendStrategy,\n          endpointUrl,\n          reportError\n        )\n      },\n      onFailure: function () {\n        state.queuedPayloads.enqueue(payload)\n        scheduleRetry(state, sendStrategy, endpointUrl, reportError)\n      }\n    })\n  } else {\n    state.queuedPayloads.enqueue(payload)\n  }\n}\n\nfunction scheduleRetry(state, sendStrategy, endpointUrl, reportError) {\n  if (state.transportStatus !== TransportStatus.DOWN) {\n    return\n  }\n  setTimeout(function () {\n    var payload = state.queuedPayloads.first()\n    send(payload, state, sendStrategy, {\n      onSuccess: function () {\n        state.queuedPayloads.dequeue()\n\n        state.currentBackoffTime = INITIAL_BACKOFF_TIME\n        retryQueuedPayloads(\n          RetryReason.AFTER_RESUME,\n          state,\n          sendStrategy,\n          endpointUrl,\n          reportError\n        )\n      },\n      onFailure: function () {\n        state.currentBackoffTime = Math.min(\n          MAX_BACKOFF_TIME,\n          state.currentBackoffTime * 2\n        )\n        scheduleRetry(state, sendStrategy, endpointUrl, reportError)\n      }\n    })\n  }, state.currentBackoffTime)\n}\n\nfunction send(payload, state, sendStrategy, responseData) {\n  var onSuccess = responseData.onSuccess\n  var onFailure = responseData.onFailure\n  state.bandwidthMonitor.add(payload)\n  sendStrategy(payload, function (response) {\n    state.bandwidthMonitor.remove(payload)\n    if (!shouldRetryRequest(response, state, payload)) {\n      state.transportStatus = TransportStatus.UP\n      onSuccess()\n    } else {\n      // do not consider transport down if another ongoing request could succeed\n      state.transportStatus =\n        state.bandwidthMonitor.ongoingRequestCount > 0\n          ? TransportStatus.FAILURE_DETECTED\n          : TransportStatus.DOWN\n      payload.retry = {\n        count: payload.retry ? payload.retry.count + 1 : 1,\n        lastFailureStatus: response.status\n      }\n      onFailure()\n    }\n  })\n}\n\nfunction retryQueuedPayloads(\n  reason,\n  state,\n  sendStrategy,\n  endpointUrl,\n  reportError\n) {\n  if (\n    reason === RetryReason.AFTER_SUCCESS &&\n    state.queuedPayloads.isFull() &&\n    !state.queueFullReported\n  ) {\n    reportError({\n      message:\n        'Reached max ' +\n        endpointUrl +\n        ' events size queued for upload: ' +\n        MAX_QUEUE_BYTES_COUNT / ONE_MEBI_BYTE +\n        'MiB',\n      source: ErrorSource.AGENT,\n      startClocks: clocksNow()\n    })\n    state.queueFullReported = true\n  }\n  var previousQueue = state.queuedPayloads\n  state.queuedPayloads = newPayloadQueue()\n  while (previousQueue.size() > 0) {\n    sendWithRetryStrategy(\n      previousQueue.dequeue(),\n      state,\n      sendStrategy,\n      endpointUrl,\n      reportError\n    )\n  }\n}\n\nfunction shouldRetryRequest(response, state, payload) {\n  if (\n    state.retryMaxSize > -1 &&\n    payload.retry &&\n    payload.retry.count > state.retryMaxSize\n  )\n    return false\n  return (\n    response.type !== 'opaque' &&\n    ((response.status === 0 && !navigator.onLine) ||\n      response.status === 408 ||\n      response.status === 429 ||\n      response.status >= 500)\n  )\n}\nexport function newRetryState(retryMaxSize) {\n  return {\n    transportStatus: TransportStatus.UP,\n    currentBackoffTime: INITIAL_BACKOFF_TIME,\n    bandwidthMonitor: newBandwidthMonitor(),\n    queuedPayloads: newPayloadQueue(),\n    queueFullReported: false,\n    retryMaxSize: retryMaxSize\n  }\n}\n\nfunction newPayloadQueue() {\n  var queue = []\n  return {\n    bytesCount: 0,\n    enqueue: function (payload) {\n      if (this.isFull()) {\n        return\n      }\n      queue.push(payload)\n      this.bytesCount += payload.bytesCount\n    },\n    first: function () {\n      return queue[0]\n    },\n    dequeue: function () {\n      var payload = queue.shift()\n      if (payload) {\n        this.bytesCount -= payload.bytesCount\n      }\n      return payload\n    },\n    size: function () {\n      return queue.length\n    },\n    isFull: function () {\n      return this.bytesCount >= MAX_QUEUE_BYTES_COUNT\n    }\n  }\n}\n\nfunction newBandwidthMonitor() {\n  return {\n    ongoingRequestCount: 0,\n    ongoingByteCount: 0,\n    canHandle: function (payload) {\n      return (\n        this.ongoingRequestCount === 0 ||\n        (this.ongoingByteCount + payload.bytesCount <=\n          MAX_ONGOING_BYTES_COUNT &&\n          this.ongoingRequestCount < MAX_ONGOING_REQUESTS)\n      )\n    },\n    add: function (payload) {\n      this.ongoingRequestCount += 1\n      this.ongoingByteCount += payload.bytesCount\n    },\n    remove: function (payload) {\n      this.ongoingRequestCount -= 1\n      this.ongoingByteCount -= payload.bytesCount\n    }\n  }\n}\n","export var TelemetryType = {\n  log: 'log',\n  configuration: 'configuration',\n  usage: 'usage'\n}\n\nexport var TelemetryStatusType = {\n  debug: 'debug',\n  error: 'error'\n}\n","import { ConsoleApiName } from '../helper/display'\nimport {\n  toStackTraceString,\n  NO_ERROR_STACK_PRESENT_MESSAGE\n} from '../helper/errorTools'\nimport { createBoundedBuffer } from '../helper/boundedBuffer'\nimport { computeStackTrace } from '../tracekit'\nimport { Observable } from '../helper/observable'\nimport { getConnectivity } from '../helper/connectivity'\nimport {\n  displayIfDebugEnabled,\n  startMonitorErrorCollection\n} from '..//helper/monitor'\nimport {\n  startsWith,\n  assign,\n  performDraw,\n  timeStampNow,\n  extend2Lev\n} from '../helper/tools'\nimport { jsonStringify } from '../helper/serialisation/jsonStringify'\nimport { NonErrorPrefix } from '../helper/enums'\nimport { TelemetryStatusType, TelemetryType } from './types'\n\nconst ALLOWED_FRAME_URLS = [\n  'https://static.guance.com',\n  'http://localhost',\n  '<anonymous>'\n]\n\nexport var TelemetryService = {\n  LOGS: 'browser-logs-sdk',\n  RUM: 'browser-rum-sdk'\n}\n\n// eslint-disable-next-line local-rules/disallow-side-effects\nvar preStartTelemetryBuffer = createBoundedBuffer()\nvar onRawTelemetryEventCollected = function (event) {\n  preStartTelemetryBuffer.add(function () {\n    onRawTelemetryEventCollected(event)\n  })\n}\n\nexport function startTelemetry(telemetryService, configuration) {\n  let contextProvider\n  var observable = new Observable()\n  const alreadySentEvents = new Set()\n  const telemetryEnabled =\n    configuration.telemetryEnabled &&\n    performDraw(configuration.telemetrySampleRate)\n  const runtimeEnvInfo = getRuntimeEnvInfo()\n  onRawTelemetryEventCollected = function (rawEvent) {\n    const stringifiedEvent = jsonStringify(rawEvent)\n    if (\n      telemetryEnabled &&\n      alreadySentEvents.size < configuration.maxTelemetryEventsPerPage &&\n      !alreadySentEvents.has(stringifiedEvent)\n    ) {\n      var event = toTelemetryEvent(telemetryService, rawEvent, runtimeEnvInfo)\n      observable.notify(event)\n      alreadySentEvents.add(stringifiedEvent)\n    }\n  }\n  startMonitorErrorCollection(addTelemetryError)\n\n  function toTelemetryEvent(telemetryService, event, runtimeEnvInfo) {\n    return extend2Lev(\n      {\n        type: 'telemetry',\n        date: timeStampNow(),\n        service: telemetryService,\n        version: __BUILD_ENV__SDK_VERSION__,\n        source: 'browser',\n        telemetry: extend2Lev(event, {\n          runtime_env: runtimeEnvInfo,\n          connectivity: getConnectivity()\n        })\n      },\n      contextProvider !== undefined ? contextProvider() : {}\n    )\n  }\n\n  return {\n    setContextProvider: function (provider) {\n      contextProvider = provider\n    },\n    observable: observable,\n    enabled: telemetryEnabled\n  }\n}\nfunction getRuntimeEnvInfo() {\n  return {\n    is_local_file: window.location.protocol === 'file:',\n    is_worker: 'WorkerGlobalScope' in self\n  }\n}\nexport function startFakeTelemetry() {\n  const events = []\n\n  onRawTelemetryEventCollected = function (event) {\n    events.push(event)\n  }\n\n  return events\n}\nexport function drainPreStartTelemetry() {\n  preStartTelemetryBuffer.drain()\n}\nexport function resetTelemetry() {\n  preStartTelemetryBuffer = createBoundedBuffer()\n  onRawTelemetryEventCollected = function (event) {\n    preStartTelemetryBuffer.add(function () {\n      onRawTelemetryEventCollected(event)\n    })\n  }\n}\n\nexport function addTelemetryDebug(message, context) {\n  displayIfDebugEnabled(message, context)\n  onRawTelemetryEventCollected(\n    assign(\n      {\n        type: TelemetryType.log,\n        message: message,\n        status: TelemetryStatusType.debug\n      },\n      context\n    )\n  )\n}\n\nexport function addTelemetryError(e, context) {\n  onRawTelemetryEventCollected(\n    assign(\n      {\n        type: TelemetryType.log,\n        status: TelemetryStatusType.error\n      },\n      formatError(e),\n      context\n    )\n  )\n}\n\nexport function addTelemetryConfiguration(configuration) {\n  onRawTelemetryEventCollected({\n    type: TelemetryType.configuration,\n    configuration: configuration\n  })\n}\n\nexport function addTelemetryUsage(usage) {\n  onRawTelemetryEventCollected({\n    type: TelemetryType.usage,\n    usage: usage\n  })\n}\n\nexport function formatError(e) {\n  if (e instanceof Error) {\n    var stackTrace = computeStackTrace(e)\n    return {\n      error: {\n        kind: stackTrace.name,\n        stack: toStackTraceString(scrubCustomerFrames(stackTrace))\n      },\n      message: stackTrace.message\n    }\n  }\n  return {\n    error: {\n      stack: NO_ERROR_STACK_PRESENT_MESSAGE\n    },\n    message: NonErrorPrefix.UNCAUGHT + ' ' + jsonStringify(e)\n  }\n}\n\nexport function scrubCustomerFrames(stackTrace) {\n  stackTrace.stack = stackTrace.stack.filter(function (frame) {\n    return (\n      !frame.url ||\n      ALLOWED_FRAME_URLS.some(function (allowedFrameUrl) {\n        return startsWith(frame.url, allowedFrameUrl)\n      })\n    )\n  })\n  return stackTrace\n}\n","import { newRetryState, sendWithRetryStrategy } from './sendWithRetryStrategy'\nimport { addEventListener } from '../browser/addEventListener'\nimport { monitor } from '../helper/monitor'\nimport { addTelemetryError } from '../telemetry/telemetry'\n/**\n * Use POST request without content type to:\n * - avoid CORS preflight requests\n * - allow usage of sendBeacon\n *\n * multiple elements are sent separated by \\n in order\n * to be parsed correctly without content type header\n */\nfunction addBatchPrecision(url, encoding) {\n  if (!url) return url\n  url = url + (url.indexOf('?') === -1 ? '?' : '&') + 'precision=ms'\n  if (encoding) {\n    url = url + '&encoding=' + encoding\n  }\n  return url\n}\nexport function createHttpRequest(\n  endpointUrl,\n  bytesLimit,\n  retryMaxSize,\n  reportError\n) {\n  if (retryMaxSize === undefined) {\n    retryMaxSize = -1\n  }\n  var retryState = newRetryState(retryMaxSize)\n  var sendStrategyForRetry = function (payload, onResponse) {\n    return fetchKeepAliveStrategy(endpointUrl, bytesLimit, payload, onResponse)\n  }\n\n  return {\n    send: function (payload) {\n      sendWithRetryStrategy(\n        payload,\n        retryState,\n        sendStrategyForRetry,\n        endpointUrl,\n        reportError\n      )\n    },\n    /**\n     * Since fetch keepalive behaves like regular fetch on Firefox,\n     * keep using sendBeaconStrategy on exit\n     */\n    sendOnExit: function (payload) {\n      sendBeaconStrategy(endpointUrl, bytesLimit, payload)\n    }\n  }\n}\n\nfunction sendBeaconStrategy(endpointUrl, bytesLimit, payload) {\n  var data = payload.data\n  var bytesCount = payload.bytesCount\n  var url = addBatchPrecision(endpointUrl, payload.encoding)\n  var canUseBeacon = !!navigator.sendBeacon && bytesCount < bytesLimit\n  if (canUseBeacon) {\n    try {\n      var beaconData\n      if (payload.type) {\n        beaconData = new Blob([data], {\n          type: payload.type\n        })\n      } else {\n        beaconData = data\n      }\n\n      var isQueued = navigator.sendBeacon(url, beaconData)\n\n      if (isQueued) {\n        return\n      }\n    } catch (e) {\n      reportBeaconError(e)\n    }\n  }\n  sendXHR(url, payload)\n}\nvar hasReportedBeaconError = false\n\nfunction reportBeaconError(e) {\n  if (!hasReportedBeaconError) {\n    hasReportedBeaconError = true\n    addTelemetryError(e)\n  }\n}\nexport function fetchKeepAliveStrategy(\n  endpointUrl,\n  bytesLimit,\n  payload,\n  onResponse\n) {\n  var data = payload.data\n  var bytesCount = payload.bytesCount\n  var url = addBatchPrecision(endpointUrl, payload.encoding)\n  var canUseKeepAlive = isKeepAliveSupported() && bytesCount < bytesLimit\n  if (canUseKeepAlive) {\n    var fetchOption = {\n      method: 'POST',\n      body: data,\n      keepalive: true,\n      mode: 'cors'\n    }\n    if (payload.type) {\n      fetchOption.headers = {\n        'Content-Type': payload.type\n      }\n    }\n    fetch(url, fetchOption).then(\n      monitor(function (response) {\n        if (typeof onResponse === 'function') {\n          onResponse({ status: response.status, type: response.type })\n        }\n      }),\n      monitor(function () {\n        // failed to queue the request\n        sendXHR(url, payload, onResponse)\n      })\n    )\n  } else {\n    sendXHR(url, payload, onResponse)\n  }\n}\n\nfunction isKeepAliveSupported() {\n  // Request can throw, cf https://developer.mozilla.org/en-US/docs/Web/API/Request/Request#errors\n  try {\n    return window.Request && 'keepalive' in new Request('http://a')\n  } catch {\n    return false\n  }\n}\n\nfunction sendXHR(url, payload, onResponse) {\n  const data = payload.data\n  const request = new XMLHttpRequest()\n  request.open('POST', url, true)\n  if (data instanceof Blob) {\n    request.setRequestHeader('Content-Type', data.type)\n  } else if (payload.type) {\n    request.setRequestHeader('Content-Type', payload.type)\n  }\n\n  addEventListener(\n    request,\n    'loadend',\n    function () {\n      if (typeof onResponse === 'function') {\n        onResponse({ status: request.status })\n      }\n    },\n    {\n      once: true\n    }\n  )\n  request.send(data)\n}\n","import { jsonStringify } from './jsonStringify'\nimport { isString, isNumber } from '../tools'\nexport function escapeRowData(str) {\n  if (typeof str === 'object' && str) {\n    str = jsonStringify(str)\n  } else if (!isString(str)) {\n    return str\n  }\n  var reg = /[\\s=,\"]/g\n  return String(str).replace(reg, function (word) {\n    return '\\\\' + word\n  })\n}\n\nexport function escapeJsonValue(value, isTag) {\n  if (typeof value === 'object' && value) {\n    value = jsonStringify(value)\n  } else if (isTag) {\n    // tag  json  只能是字符串\n    value = '' + value\n  }\n\n  return value\n}\n\nexport function escapeFieldValueStr(str) {\n  return '\"' + str.replace(/\\\\/g, '\\\\\\\\').replace(/\"/g, '\\\\\"') + '\"'\n}\nexport function escapeRowField(value) {\n  if (typeof value === 'object' && value) {\n    return escapeFieldValueStr(jsonStringify(value))\n  } else if (isString(value)) {\n    return escapeFieldValueStr(value)\n  } else {\n    return value\n  }\n}\n","import { display } from '../helper/display'\nimport {\n  values,\n  findByPath,\n  each,\n  isNumber,\n  isArray,\n  extend,\n  isString,\n  isEmptyObject,\n  isObject\n} from '../helper/tools'\nimport {\n  escapeJsonValue,\n  escapeRowField,\n  escapeRowData\n} from '../helper/serialisation/rowData'\nimport { commonTags, dataMap, commonFields } from '../dataMap'\nimport { RumEventType } from '../helper/enums'\nimport { computeBytesCount } from '../helper/byteUtils'\nimport { isPageExitReason } from '../browser/pageExitObservable'\nimport { jsonStringify } from '../helper/serialisation/jsonStringify'\n// https://en.wikipedia.org/wiki/UTF-8\n// eslint-disable-next-line no-control-regex\nvar CUSTOM_KEYS = 'custom_keys'\nexport var processedMessageByDataMap = function (message) {\n  if (!message || !message.type)\n    return {\n      rowStr: '',\n      rowData: undefined\n    }\n\n  var rowData = { tags: {}, fields: {} }\n  var hasFileds = false\n  var rowStr = ''\n  each(dataMap, function (value, key) {\n    if (value.type === message.type) {\n      rowStr += key + ','\n      rowData.measurement = key\n      var tagsStr = []\n      var tags = extend({}, commonTags, value.tags)\n      var filterFileds = ['date', 'type', CUSTOM_KEYS] // 已经在datamap中定义过的fields和tags\n      each(tags, function (value_path, _key) {\n        var _value = findByPath(message, value_path)\n        filterFileds.push(_key)\n        if (_value || isNumber(_value)) {\n          rowData.tags[_key] = escapeJsonValue(_value, true)\n          tagsStr.push(escapeRowData(_key) + '=' + escapeRowData(_value))\n        }\n      })\n\n      var fieldsStr = []\n      var fields = extend({}, commonFields, value.fields)\n      each(fields, function (_value, _key) {\n        if (isArray(_value) && _value.length === 2) {\n          var value_path = _value[1]\n          var _valueData = findByPath(message, value_path)\n          filterFileds.push(_key)\n          if (_valueData !== undefined && _valueData !== null) {\n            rowData.fields[_key] = escapeJsonValue(_valueData) // 这里不需要转译\n            fieldsStr.push(\n              escapeRowData(_key) + '=' + escapeRowField(_valueData)\n            )\n          }\n        } else if (isString(_value)) {\n          var _valueData = findByPath(message, _value)\n          filterFileds.push(_key)\n          if (_valueData !== undefined && _valueData !== null) {\n            rowData.fields[_key] = escapeJsonValue(_valueData) // 这里不需要转译\n            fieldsStr.push(\n              escapeRowData(_key) + '=' + escapeRowField(_valueData)\n            )\n          }\n        }\n      })\n      if (\n        message.context &&\n        isObject(message.context) &&\n        !isEmptyObject(message.context)\n      ) {\n        // 自定义tag， 存储成field\n        var _tagKeys = []\n        each(message.context, function (_value, _key) {\n          // 如果和之前tag重名，则舍弃\n          if (filterFileds.indexOf(_key) > -1) return\n          filterFileds.push(_key)\n          if (_value !== undefined && _value !== null) {\n            _tagKeys.push(_key)\n            rowData.fields[_key] = escapeJsonValue(_value) // 这里不需要转译\n            fieldsStr.push(escapeRowData(_key) + '=' + escapeRowField(_value))\n          }\n        })\n        if (_tagKeys.length) {\n          rowData.fields[CUSTOM_KEYS] = escapeJsonValue(_tagKeys)\n          fieldsStr.push(\n            escapeRowData(CUSTOM_KEYS) + '=' + escapeRowField(_tagKeys)\n          )\n        }\n      }\n      if (message.type === RumEventType.LOGGER) {\n        // 这里处理日志类型数据自定义字段\n        each(message, function (value, key) {\n          if (\n            filterFileds.indexOf(key) === -1 &&\n            value !== undefined &&\n            value !== null\n          ) {\n            rowData.fields[key] = escapeJsonValue(value) // 这里不需要转译\n            fieldsStr.push(escapeRowData(key) + '=' + escapeRowField(value))\n          }\n        })\n      }\n      if (tagsStr.length) {\n        rowStr += tagsStr.join(',')\n      }\n      if (fieldsStr.length) {\n        rowStr += ' '\n        rowStr += fieldsStr.join(',')\n        hasFileds = true\n      }\n      rowStr = rowStr + ' ' + message.date\n      rowData.time = message.date // 这里不需要转译\n    }\n  })\n  return {\n    rowStr: hasFileds ? rowStr : '',\n    rowData: hasFileds ? rowData : undefined\n  }\n}\n\nexport function createBatch(options) {\n  var encoder = options.encoder\n  var request = options.request\n  var messageBytesLimit = options.messageBytesLimit\n  var sendContentTypeByJson = options.sendContentTypeByJson\n  var flushController = options.flushController\n  var upsertBuffer = {}\n  var flushSubscription = flushController.flushObservable.subscribe(function (\n    event\n  ) {\n    flush(event)\n  })\n  function getMessageText(messages, isEmpty = false) {\n    if (sendContentTypeByJson) {\n      if (isEmpty) {\n        return '[' + messages.join(',')\n      } else {\n        return ',' + messages.join(',')\n      }\n    } else {\n      if (isEmpty) {\n        return messages.join('\\n')\n      } else {\n        return '\\n' + messages.join('\\n')\n      }\n    }\n  }\n  function push(serializedMessage, estimatedMessageBytesCount, key) {\n    flushController.notifyBeforeAddMessage(estimatedMessageBytesCount)\n\n    if (key !== undefined) {\n      upsertBuffer[key] = serializedMessage\n      flushController.notifyAfterAddMessage()\n    } else {\n      encoder.write(\n        getMessageText([serializedMessage], encoder.isEmpty()),\n        function (realMessageBytesCount) {\n          flushController.notifyAfterAddMessage(\n            realMessageBytesCount - estimatedMessageBytesCount\n          )\n        }\n      )\n    }\n  }\n\n  function hasMessageFor(key) {\n    return key !== undefined && upsertBuffer[key] !== undefined\n  }\n\n  function remove(key) {\n    var removedMessage = upsertBuffer[key]\n    delete upsertBuffer[key]\n    var messageBytesCount = encoder.estimateEncodedBytesCount(removedMessage)\n    flushController.notifyAfterRemoveMessage(messageBytesCount)\n  }\n  function process(message) {\n    var processedMessage = ''\n    if (sendContentTypeByJson) {\n      processedMessage = jsonStringify(\n        processedMessageByDataMap(message).rowData\n      )\n    } else {\n      processedMessage = processedMessageByDataMap(message).rowStr\n    }\n    return processedMessage\n  }\n  function addOrUpdate(message, key) {\n    const serializedMessage = process(message)\n\n    const estimatedMessageBytesCount =\n      encoder.estimateEncodedBytesCount(serializedMessage)\n\n    if (estimatedMessageBytesCount >= messageBytesLimit) {\n      display.warn(\n        `Discarded a message whose size was bigger than the maximum allowed size ${messageBytesLimit}KB.`\n      )\n      return\n    }\n\n    if (hasMessageFor(key)) {\n      remove(key)\n    }\n\n    push(serializedMessage, estimatedMessageBytesCount, key)\n  }\n\n  function flush(event) {\n    var upsertMessages = values(upsertBuffer).join(\n      sendContentTypeByJson ? ',' : '\\n'\n    )\n    upsertBuffer = {}\n\n    var isPageExit = isPageExitReason(event.reason)\n    var send = isPageExit ? request.sendOnExit : request.send\n\n    if (\n      isPageExit &&\n      // Note: checking that the encoder is async is not strictly needed, but it's an optimization:\n      // if the encoder is async we need to send two requests in some cases (one for encoded data\n      // and the other for non-encoded data). But if it's not async, we don't have to worry about\n      // it and always send a single request.\n      encoder.isAsync\n    ) {\n      // 咱不支持json 模式\n      var encoderResult = encoder.finishSync()\n\n      // Send encoded messages\n      if (encoderResult.outputBytesCount) {\n        send(formatPayloadFromEncoder(encoderResult, sendContentTypeByJson))\n      }\n\n      // Send messages that are not yet encoded at this point\n      var pendingMessages = [encoderResult.pendingData, upsertMessages]\n        .filter(Boolean)\n        .join('\\n')\n\n      if (pendingMessages) {\n        send({\n          data: pendingMessages,\n          bytesCount: computeBytesCount(pendingMessages)\n        })\n      }\n    } else {\n      if (upsertMessages) {\n        var text = getMessageText([upsertMessages], encoder.isEmpty())\n        if (sendContentTypeByJson) {\n          text += ']'\n        }\n        encoder.write(text)\n      } else {\n        if (sendContentTypeByJson) {\n          encoder.write(']')\n        }\n      }\n      encoder.finish(function (encoderResult) {\n        send(formatPayloadFromEncoder(encoderResult))\n      })\n    }\n  }\n\n  return {\n    flushController: flushController,\n    add: addOrUpdate,\n    upsert: addOrUpdate,\n    stop: flushSubscription.unsubscribe\n  }\n}\n\nfunction formatPayloadFromEncoder(encoderResult, sendContentTypeByJson) {\n  var data\n  if (typeof encoderResult.output === 'string') {\n    data = encoderResult.output\n  } else {\n    data = new Blob([encoderResult.output], {\n      // This will set the 'Content-Type: text/plain' header. Reasoning:\n      // * The intake rejects the request if there is no content type.\n      // * The browser will issue CORS preflight requests if we set it to 'application/json', which\n      // could induce higher intake load (and maybe has other impacts).\n      // * Also it's not quite JSON, since we are concatenating multiple JSON objects separated by\n      // new lines.\n      type: 'text/plain'\n    })\n  }\n\n  return {\n    data: data,\n    type: sendContentTypeByJson ? 'application/json;UTF-8' : undefined,\n    bytesCount: encoderResult.outputBytesCount,\n    encoding: encoderResult.encoding\n  }\n}\n","import { Observable } from '../helper/observable'\nimport { clearTimeout, setTimeout } from '../helper/timer'\n\n// type FlushReason = PageExitReason | 'duration_limit' | 'bytes_limit' | 'messages_limit' | 'session_expire'\n\n/**\n * Returns a \"flush controller\", responsible of notifying when flushing a pool of pending data needs\n * to happen. The implementation is designed to support both synchronous and asynchronous usages,\n * but relies on invariants described in each method documentation to keep a coherent state.\n */\nexport function createFlushController({\n  messagesLimit,\n  bytesLimit,\n  durationLimit,\n  pageExitObservable,\n  sessionExpireObservable\n}) {\n  pageExitObservable.subscribe(function (event) {\n    return flush(event.reason)\n  })\n  sessionExpireObservable.subscribe(function () {\n    return flush('session_expire')\n  })\n  var flushObservable = new Observable(function () {\n    return function () {\n      pageExitSubscription.unsubscribe()\n      sessionExpireSubscription.unsubscribe()\n    }\n  })\n\n  var currentBytesCount = 0\n  var currentMessagesCount = 0\n\n  function flush(flushReason) {\n    if (currentMessagesCount === 0) {\n      return\n    }\n\n    var messagesCount = currentMessagesCount\n    var bytesCount = currentBytesCount\n\n    currentMessagesCount = 0\n    currentBytesCount = 0\n    cancelDurationLimitTimeout()\n\n    flushObservable.notify({\n      reason: flushReason,\n      messagesCount: messagesCount,\n      bytesCount: bytesCount\n    })\n  }\n\n  var durationLimitTimeoutId\n  function scheduleDurationLimitTimeout() {\n    if (durationLimitTimeoutId === undefined) {\n      durationLimitTimeoutId = setTimeout(function () {\n        flush('duration_limit')\n      }, durationLimit)\n    }\n  }\n\n  function cancelDurationLimitTimeout() {\n    clearTimeout(durationLimitTimeoutId)\n    durationLimitTimeoutId = undefined\n  }\n\n  return {\n    flushObservable: flushObservable,\n    getMessagesCount: function () {\n      return currentMessagesCount\n    },\n\n    /**\n     * Notifies that a message will be added to a pool of pending messages waiting to be flushed.\n     *\n     * This function needs to be called synchronously, right before adding the message, so no flush\n     * event can happen after `notifyBeforeAddMessage` and before adding the message.\n     */\n    notifyBeforeAddMessage: function (estimatedMessageBytesCount) {\n      if (currentBytesCount + estimatedMessageBytesCount >= bytesLimit) {\n        flush('bytes_limit')\n      }\n      // Consider the message to be added now rather than in `notifyAfterAddMessage`, because if no\n      // message was added yet and `notifyAfterAddMessage` is called asynchronously, we still want\n      // to notify when a flush is needed (for example on page exit).\n      currentMessagesCount += 1\n      currentBytesCount += estimatedMessageBytesCount\n      scheduleDurationLimitTimeout()\n    },\n\n    /**\n     * Notifies that a message *was* added to a pool of pending messages waiting to be flushed.\n     *\n     * This function can be called asynchronously after the message was added, but in this case it\n     * should not be called if a flush event occurred in between.\n     */\n    notifyAfterAddMessage: function (messageBytesCountDiff) {\n      if (messageBytesCountDiff === undefined) {\n        messageBytesCountDiff = 0\n      }\n      currentBytesCount += messageBytesCountDiff\n\n      if (currentMessagesCount >= messagesLimit) {\n        flush('messages_limit')\n      } else if (currentBytesCount >= bytesLimit) {\n        flush('bytes_limit')\n      }\n    },\n\n    /**\n     * Notifies that a message was removed from a pool of pending messages waiting to be flushed.\n     *\n     * This function needs to be called synchronously, right after removing the message, so no flush\n     * event can happen after removing the message and before `notifyAfterRemoveMessage`.\n     *\n     * @param messageBytesCount: the message bytes count that was added to the pool. Should\n     * correspond to the sum of bytes counts passed to `notifyBeforeAddMessage` and\n     * `notifyAfterAddMessage`.\n     */\n    notifyAfterRemoveMessage: function (messageBytesCount) {\n      currentBytesCount -= messageBytesCount\n      currentMessagesCount -= 1\n      if (currentMessagesCount === 0) {\n        cancelDurationLimitTimeout()\n      }\n    }\n  }\n}\n","import { createBatch } from './batch'\nimport { createHttpRequest } from './httpRequest'\nimport { createFlushController } from './flushController'\nexport function startBatchWithReplica(\n  configuration,\n  primary,\n  reportError,\n  pageExitObservable,\n  sessionExpireObservable,\n  batchFactoryImp\n) {\n  if (batchFactoryImp === undefined) {\n    batchFactoryImp = createBatch\n  }\n  var primaryBatch = createBatchFromConfig(configuration, primary)\n\n  function createBatchFromConfig(configuration, batchConfiguration) {\n    return batchFactoryImp({\n      encoder: batchConfiguration.encoder,\n      request: createHttpRequest(\n        batchConfiguration.endpoint,\n        configuration.batchBytesLimit,\n        configuration.retryMaxSize,\n        reportError\n      ),\n      flushController: createFlushController({\n        messagesLimit: configuration.batchMessagesLimit,\n        bytesLimit: configuration.batchBytesLimit,\n        durationLimit: configuration.flushTimeout,\n        pageExitObservable: pageExitObservable,\n        sessionExpireObservable: sessionExpireObservable\n      }),\n      messageBytesLimit: configuration.messageBytesLimit,\n      sendContentTypeByJson: configuration.sendContentTypeByJson\n    })\n  }\n  return {\n    flushObservable: primaryBatch.flushController.flushObservable,\n    add: function (message) {\n      primaryBatch.add(message)\n    },\n    upsert: function (message, key) {\n      primaryBatch.upsert(message, key)\n    },\n\n    stop: function () {\n      primaryBatch.stop()\n    }\n  }\n}\n","import { getGlobalObject } from '../init'\n\nfunction getEventBridgeGlobal() {\n  return getGlobalObject().FTWebViewJavascriptBridge\n}\nexport function getEventBridge() {\n  var eventBridgeGlobal = getEventBridgeGlobal()\n\n  if (!eventBridgeGlobal) {\n    return\n  }\n\n  return {\n    getCapabilities() {\n      return JSON.parse(\n        (eventBridgeGlobal.getCapabilities &&\n          eventBridgeGlobal.getCapabilities()) ||\n          '[]'\n      )\n    },\n    getPrivacyLevel() {\n      return (\n        eventBridgeGlobal.getPrivacyLevel && eventBridgeGlobal.getPrivacyLevel()\n      )\n    },\n    getAllowedWebViewHosts() {\n      return JSON.parse(\n        (eventBridgeGlobal.getAllowedWebViewHosts &&\n          eventBridgeGlobal.getAllowedWebViewHosts()) ||\n          '[]'\n      )\n    },\n    send(eventType, event, viewId) {\n      const view = viewId ? { id: viewId } : undefined\n      eventBridgeGlobal.sendEvent(\n        JSON.stringify({ name: eventType, data: event, view })\n      )\n    }\n  }\n}\nexport const BridgeCapability = {\n  RECORDS: 'records'\n}\nexport function bridgeSupports(capability) {\n  const bridge = getEventBridge()\n\n  return !!bridge && bridge.getCapabilities().includes(capability)\n}\nexport function canUseEventBridge(\n  currentHost = getGlobalObject().location?.hostname\n) {\n  const eventBridgeGlobal = getEventBridgeGlobal()\n  if (\n    eventBridgeGlobal &&\n    eventBridgeGlobal.getAllowedWebViewHosts === undefined\n  ) {\n    return true\n  }\n  if (\n    eventBridgeGlobal &&\n    eventBridgeGlobal.getAllowedWebViewHosts &&\n    eventBridgeGlobal.getAllowedWebViewHosts() === null\n  ) {\n    return true\n  }\n  var bridge = getEventBridge()\n  return (\n    !!bridge &&\n    bridge\n      .getAllowedWebViewHosts()\n      .some(\n        (allowedHost) =>\n          currentHost === allowedHost || currentHost.endsWith(`.${allowedHost}`)\n      )\n  )\n}\n","export { createHttpRequest } from './httpRequest'\nexport { createBatch, processedMessageByDataMap } from './batch'\nexport { startBatchWithReplica } from './startBatchWithReplica'\nexport { createFlushController } from './flushController'\nexport {\n  getEventBridge,\n  canUseEventBridge,\n  bridgeSupports,\n  BridgeCapability\n} from './eventBridge'\n","import { getCookie } from '../browser/cookie'\n\nexport var SYNTHETICS_TEST_ID_COOKIE_NAME = 'guance-synthetics-public-id'\nexport var SYNTHETICS_RESULT_ID_COOKIE_NAME = 'guance-synthetics-result-id'\nexport var SYNTHETICS_INJECTS_RUM_COOKIE_NAME = 'guance-synthetics-injects-rum'\n\nexport function willSyntheticsInjectRum() {\n  return Boolean(\n    window._GUANCE_SYNTHETICS_INJECTS_RUM ||\n      getCookie(SYNTHETICS_INJECTS_RUM_COOKIE_NAME)\n  )\n}\n\nexport function getSyntheticsTestId() {\n  var value =\n    window._GUANCE_SYNTHETICS_PUBLIC_ID ||\n    getCookie(SYNTHETICS_TEST_ID_COOKIE_NAME)\n  return typeof value === 'string' ? value : undefined\n}\n\nexport function getSyntheticsResultId() {\n  var value =\n    window._GUANCE_SYNTHETICS_RESULT_ID ||\n    getCookie(SYNTHETICS_RESULT_ID_COOKIE_NAME)\n  return typeof value === 'string' ? value : undefined\n}\n","import { deepClone, getType } from '../tools'\nimport { sanitize } from '../sanitize'\nimport { Observable } from '../observable'\nimport { display } from '../display'\n\nfunction ensureProperties(context, propertiesConfig, name) {\n  const newContext = { ...context }\n\n  for (const [key, { required, type }] of Object.entries(propertiesConfig)) {\n    /**\n     * Ensure specified properties are strings as defined here:\n     */\n    if (type === 'string' && key in newContext) {\n      newContext[key] = String(newContext[key])\n    }\n\n    if (required && !(key in context)) {\n      display.warn(\n        `The property ${key} of ${name} context is required; context will not be sent to the intake.`\n      )\n    }\n  }\n\n  return newContext\n}\n\nexport function createContextManager(\n  name = '',\n  { customerDataTracker, propertiesConfig = {} } = {}\n) {\n  let context = {}\n  const changeObservable = new Observable()\n\n  const contextManager = {\n    getContext: () => deepClone(context),\n\n    setContext: (newContext) => {\n      if (getType(newContext) === 'object') {\n        context = sanitize(ensureProperties(newContext, propertiesConfig, name))\n        customerDataTracker?.updateCustomerData(context)\n      } else {\n        contextManager.clearContext()\n      }\n      changeObservable.notify()\n    },\n\n    setContextProperty: (key, property) => {\n      context[key] = sanitize(\n        ensureProperties({ [key]: property }, propertiesConfig, name)[key]\n      )\n      customerDataTracker?.updateCustomerData(context)\n      changeObservable.notify()\n    },\n\n    removeContextProperty: (key) => {\n      delete context[key]\n      customerDataTracker?.updateCustomerData(context)\n      ensureProperties(context, propertiesConfig, name)\n      changeObservable.notify()\n    },\n\n    clearContext: () => {\n      context = {}\n      customerDataTracker?.resetCustomerData()\n      changeObservable.notify()\n    },\n\n    changeObservable\n  }\n  return contextManager\n}\n","// RUM and logs batch bytes limit is 16KB\n// ensure that we leave room for other event attributes and maintain a decent amount of event per batch\n// (3KB (customer data) + 1KB (other attributes)) * 4 (events per batch) = 16KB\n\nexport var CustomerDataType = {\n  FeatureFlag: 'feature flag evaluation',\n  User: 'user',\n  GlobalContext: 'global context',\n  View: 'view'\n}\n","import { DOM_EVENT } from '../enums'\nimport { map, extend2Lev, isString } from '../tools'\nimport { addEventListener } from '../../browser/addEventListener'\nvar CONTEXT_STORE_KEY_PREFIX = '_gc_s'\n\nvar storageListeners = []\n\nexport function storeContextManager(\n  configuration,\n  contextManager,\n  productKey,\n  customerDataType\n) {\n  var storageKey = buildStorageKey(configuration, productKey, customerDataType)\n\n  storageListeners.push(\n    addEventListener(window, DOM_EVENT.STORAGE, function (params) {\n      if (storageKey === params.key) {\n        synchronizeWithStorage()\n      }\n    })\n  )\n  contextManager.changeObservable.subscribe(dumpToStorage)\n  contextManager.setContext(\n    extend2Lev(getFromStorage(), contextManager.getContext())\n  )\n  function synchronizeWithStorage() {\n    contextManager.setContext(getFromStorage())\n  }\n  function dumpToStorage() {\n    localStorage.setItem(\n      storageKey,\n      JSON.stringify(contextManager.getContext())\n    )\n  }\n  function getFromStorage() {\n    const rawContext = localStorage.getItem(storageKey)\n    return rawContext !== null ? JSON.parse(rawContext) : {}\n  }\n  return contextManager\n}\n\nexport function buildStorageKey(configuration, productKey, customerDataType) {\n  // storeContextsKey\n  if (\n    configuration.storeContextsKey &&\n    isString(configuration.storeContextsKey)\n  ) {\n    return (\n      CONTEXT_STORE_KEY_PREFIX +\n      '_' +\n      productKey +\n      '_' +\n      customerDataType +\n      '_' +\n      configuration.storeContextsKey\n    )\n  } else {\n    return CONTEXT_STORE_KEY_PREFIX + '_' + productKey + '_' + customerDataType\n  }\n}\n\nexport function removeStorageListeners() {\n  map(storageListeners, function (listener) {\n    listener.stop()\n  })\n}\n","import { ONE_KIBI_BYTE, computeBytesCount } from '../byteUtils'\nimport { throttle, isEmptyObject } from '../tools'\nimport { jsonStringify } from './jsonStringify'\nimport { display } from '../display'\n\n// RUM and logs batch bytes limit is 16KB\n// ensure that we leave room for other event attributes and maintain a decent amount of event per batch\n// (3KB (customer data) + 1KB (other attributes)) * 4 (events per batch) = 16KB\nexport const CUSTOMER_DATA_BYTES_LIMIT = 3 * ONE_KIBI_BYTE\n\n// We observed that the compression ratio is around 8 in general, but we also want to keep a margin\n// because some data might not be compressed (ex: last view update on page exit). We chose 16KiB\n// because it is also the limit of the 'batchBytesCount' that we use for RUM and Logs data, but this\n// is a bit arbitrary.\nexport const CUSTOMER_COMPRESSED_DATA_BYTES_LIMIT = 16 * ONE_KIBI_BYTE\n\nexport const BYTES_COMPUTATION_THROTTLING_DELAY = 200\n\nexport const CustomerDataCompressionStatus = {\n  Unknown: 0,\n  Enabled: 1,\n  Disabled: 2\n}\n\nexport function createCustomerDataTrackerManager(\n  compressionStatus = CustomerDataCompressionStatus.Disabled\n) {\n  const customerDataTrackers = new Map()\n\n  let alreadyWarned = false\n  function checkCustomerDataLimit(initialBytesCount = 0) {\n    if (\n      alreadyWarned ||\n      compressionStatus === CustomerDataCompressionStatus.Unknown\n    ) {\n      return\n    }\n\n    const bytesCountLimit =\n      compressionStatus === CustomerDataCompressionStatus.Disabled\n        ? CUSTOMER_DATA_BYTES_LIMIT\n        : CUSTOMER_COMPRESSED_DATA_BYTES_LIMIT\n\n    let bytesCount = initialBytesCount\n    customerDataTrackers.forEach((tracker) => {\n      bytesCount += tracker.getBytesCount()\n    })\n\n    if (bytesCount > bytesCountLimit) {\n      displayCustomerDataLimitReachedWarning(bytesCountLimit)\n      alreadyWarned = true\n    }\n  }\n\n  return {\n    /**\n     * Creates a detached tracker. The manager will not store a reference to that tracker, and the\n     * bytes count will be counted independently from other detached trackers.\n     *\n     * This is particularly useful when we don't know when the tracker will be unused, so we don't\n     * leak memory (ex: when used in Logger instances).\n     */\n    createDetachedTracker: () => {\n      const tracker = createCustomerDataTracker(() =>\n        checkCustomerDataLimit(tracker.getBytesCount())\n      )\n      return tracker\n    },\n\n    /**\n     * Creates a tracker if it doesn't exist, and returns it.\n     */\n    getOrCreateTracker: (type) => {\n      if (!customerDataTrackers.has(type)) {\n        customerDataTrackers.set(\n          type,\n          createCustomerDataTracker(checkCustomerDataLimit)\n        )\n      }\n      return customerDataTrackers.get(type)\n    },\n\n    setCompressionStatus: (newCompressionStatus) => {\n      if (compressionStatus === CustomerDataCompressionStatus.Unknown) {\n        compressionStatus = newCompressionStatus\n        checkCustomerDataLimit()\n      }\n    },\n\n    getCompressionStatus: () => compressionStatus,\n\n    stop: () => {\n      customerDataTrackers.forEach((tracker) => tracker.stop())\n      customerDataTrackers.clear()\n    }\n  }\n}\n\nexport function createCustomerDataTracker(checkCustomerDataLimit) {\n  let bytesCountCache = 0\n\n  // Throttle the bytes computation to minimize the impact on performance.\n  // Especially useful if the user call context APIs synchronously multiple times in a row\n  const {\n    throttled: computeBytesCountThrottled,\n    cancel: cancelComputeBytesCount\n  } = throttle((context) => {\n    bytesCountCache = computeBytesCount(jsonStringify(context))\n    checkCustomerDataLimit()\n  }, BYTES_COMPUTATION_THROTTLING_DELAY)\n\n  const resetBytesCount = () => {\n    cancelComputeBytesCount()\n    bytesCountCache = 0\n  }\n\n  return {\n    updateCustomerData: (context) => {\n      if (isEmptyObject(context)) {\n        resetBytesCount()\n      } else {\n        computeBytesCountThrottled(context)\n      }\n    },\n    resetCustomerData: resetBytesCount,\n    getBytesCount: () => bytesCountCache,\n    stop: () => {\n      cancelComputeBytesCount()\n    }\n  }\n}\n\nfunction displayCustomerDataLimitReachedWarning(bytesCountLimit) {\n  display.warn(\n    `Customer data exceeds the recommended ${\n      bytesCountLimit / ONE_KIBI_BYTE\n    }KiB threshold.`\n  )\n}\n","import { computeBytesCount } from './byteUtils'\n\nexport function createIdentityEncoder() {\n  var output = ''\n  var outputBytesCount = 0\n\n  return {\n    isAsync: false,\n\n    isEmpty: function () {\n      return !output\n    },\n\n    write: function (data, callback) {\n      var additionalEncodedBytesCount = computeBytesCount(data)\n      outputBytesCount += additionalEncodedBytesCount\n      output += data\n      if (callback) {\n        callback(additionalEncodedBytesCount)\n      }\n    },\n\n    finish: function (callback) {\n      callback(this.finishSync())\n    },\n\n    finishSync: function () {\n      var result = {\n        output: output,\n        outputBytesCount: outputBytesCount,\n        rawBytesCount: outputBytesCount,\n        pendingData: ''\n      }\n      output = ''\n      outputBytesCount = 0\n      return result\n    },\n\n    estimateEncodedBytesCount: function (data) {\n      return data.length\n    }\n  }\n}\n","import { display } from '../helper/display'\nimport { assign, getType, each } from '../helper/tools'\n\n/**\n * Clone input data and ensure known user properties (id, name, email)\n * are strings, as defined here:\n */\nexport function sanitizeUser(newUser) {\n  // We shallow clone only to prevent mutation of user data.\n  var user = assign({}, newUser)\n  var keys = ['id', 'name', 'email']\n  each(keys, function (key) {\n    if (key in user) {\n      user[key] = String(user[key])\n    }\n  })\n\n  return user\n}\n\n/**\n * Simple check to ensure user is valid\n */\nexport function checkUser(newUser) {\n  var isValid = getType(newUser) === 'object'\n  if (!isValid) {\n    display.error('Unsupported user:', newUser)\n  }\n  return isValid\n}\n","export * from './user';","// ie11 supports WeakMap but not WeakSet\nvar PLACEHOLDER = 1\nexport function WeakSet(initialValues) {\n  this.map = new WeakMap()\n  if (initialValues) {\n    initialValues.forEach(function (value) {\n      this.map.set(value, PLACEHOLDER)\n    })\n  }\n}\nWeakSet.prototype.add = function (value) {\n  this.map.set(value, PLACEHOLDER)\n  return this\n}\nWeakSet.prototype.delete = function (value) {\n  return this.map.delete(value)\n}\nWeakSet.prototype.has = function (value) {\n  return this.map.has(value)\n}\n","import { display } from './display'\n\nexport function displayAlreadyInitializedError(sdkName, initConfiguration) {\n  if (!initConfiguration.silentMultipleInit) {\n    display.error(sdkName + ' is already initialized.')\n  }\n}\n","export * from './helper/boundedBuffer'\nexport * from './helper/valueHistory'\nexport * from './helper/deviceInfo'\nexport * from './helper/enums'\nexport * from './helper/instrumentMethod'\nexport * from './helper/errorTools'\nexport * from './helper/byteUtils'\nexport * from './error/trackRuntimeError'\nexport * from './console/consoleObservable'\nexport * from './report/reportObservable'\nexport * from './helper/display'\nexport * from './helper/monitor'\nexport * from './helper/sanitize'\nexport * from './helper/lifeCycle'\nexport * from './helper/limitModification'\nexport * from './helper/createEventRateLimiter'\nexport * from './helper/observable'\nexport * from './helper/tools'\nexport * from './helper/urlPolyfill'\nexport * from './helper/mobileUtil'\nexport * from './helper/getZoneJsOriginalValue'\nexport * from './helper/timer'\n// export * from './helper/readBytesFromStream'\nexport * from './helper/requestIdleCallback'\nexport * from './helper/taskQueue'\nexport * from './tracekit'\nexport * from './configuration/configuration'\nexport * from './configuration/transportConfiguration'\nexport * from './configuration/remoteConfiguration'\nexport * from './browser/cookie'\nexport * from './browser/fetchObservable'\nexport * from './browser/xhrObservable'\nexport * from './browser/pageExitObservable'\nexport * from './browser/htmlDomUtils'\nexport * from './browser/addEventListener'\nexport * from './browser/runOnReadyState'\nexport * from './browser/scroll'\n\nexport * from './dataMap'\nexport * from './init'\nexport {\n  startSessionManager,\n  stopSessionManager\n} from './session/sessionManagement'\nexport {\n  SESSION_TIME_OUT_DELAY,\n  SESSION_STORE_KEY\n} from './session/sessionConstants'\nexport { STORAGE_POLL_DELAY } from './session/sessionStore'\nexport * from './transport'\nexport * from './synthetics/syntheticsWorkerValues'\n\nexport * from './helper/serialisation/contextManager'\nexport * from './helper/serialisation/const'\nexport * from './helper/serialisation/jsonStringify'\nexport * from './helper/serialisation/rowData'\nexport * from './helper/serialisation/storedContextManager'\nexport * from './helper/serialisation/customerDataTracker'\nexport * from './helper/encoder'\nexport * from './user'\nexport * from './helper/polyfills'\n// export * from './telemetry/telemetry'\nexport * from './helper/catchUserErrors'\nexport * from './helper/connectivity'\nexport * from './helper/displayAlreadyInitializedError'\n","import {\n  performDraw,\n  startSessionManager,\n  LifeCycleEventType,\n  noop,\n  Observable,\n  timeStampNow,\n  bridgeSupports,\n  BridgeCapability\n} from '@cloudcare/browser-core'\n\nexport var RUM_SESSION_KEY = 'rum'\n\nexport var RumSessionPlan = {\n  WITHOUT_SESSION_REPLAY: 1,\n  WITH_SESSION_REPLAY: 2,\n  WITH_ERROR_SESSION_REPLAY: 3\n}\nexport const ERROR_SESSION = '1'\nexport var RumTrackingType = {\n  NOT_TRACKED: '0',\n  // Note: the \"tracking type\" value (stored in the session cookie) does not match the \"session\n  // plan\" value (sent in RUM events). This is expected, and was done to keep retrocompatibility\n  // with active sessions when upgrading the SDK.\n\n  TRACKED_WITH_SESSION_AND_WITH_SESSION_REPLAY: '1',\n  TRACKED_WITH_SESSION_AND_WITHOUT_SESSION_REPLAY: '2',\n  TRACKED_WITH_SESSION_AND_WITH_ERROR_SESSION_REPLAY: '3',\n  TRACKED_WITH_ERROR_SESSION_AND_WITH_SESSION_REPLAY: '4',\n  TRACKED_WITH_ERROR_SESSION_AND_WITHOUT_SESSION_REPLAY: '5',\n  TRACKED_WITH_ERROR_SESSION_AND_WITH_ERROR_SESSION_REPLAY: '6'\n}\n\nexport function startRumSessionManager(configuration, lifeCycle) {\n  var sessionManager = startSessionManager(\n    configuration,\n    RUM_SESSION_KEY,\n    function (rawTrackingType) {\n      return computeSessionState(configuration, rawTrackingType)\n    }\n  )\n\n  sessionManager.expireObservable.subscribe(function () {\n    lifeCycle.notify(LifeCycleEventType.SESSION_EXPIRED)\n  })\n\n  sessionManager.renewObservable.subscribe(function () {\n    lifeCycle.notify(LifeCycleEventType.SESSION_RENEWED)\n  })\n  sessionManager.sessionStateUpdateObservable.subscribe(\n    ({ previousState, newState }) => {\n      if (!previousState.hasError && newState.hasError) {\n        const sessionEntity = sessionManager.findSession()\n        if (sessionEntity) {\n          sessionEntity.hasError = true\n          sessionEntity.ets = newState.ets || timeStampNow()\n        }\n      }\n    }\n  )\n  return {\n    findTrackedSession: function (startTime) {\n      var session = sessionManager.findSession(startTime)\n      if (!session || !isTypeTracked(session.trackingType)) {\n        return\n      }\n      const isErrorSession =\n        session.trackingType ===\n          RumTrackingType.TRACKED_WITH_ERROR_SESSION_AND_WITHOUT_SESSION_REPLAY ||\n        session.trackingType ===\n          RumTrackingType.TRACKED_WITH_ERROR_SESSION_AND_WITH_SESSION_REPLAY ||\n        session.trackingType ===\n          RumTrackingType.TRACKED_WITH_ERROR_SESSION_AND_WITH_ERROR_SESSION_REPLAY\n\n      let plan = RumSessionPlan.WITHOUT_SESSION_REPLAY\n      if (\n        session.trackingType ===\n          RumTrackingType.TRACKED_WITH_SESSION_AND_WITH_SESSION_REPLAY ||\n        session.trackingType ===\n          RumTrackingType.TRACKED_WITH_ERROR_SESSION_AND_WITH_SESSION_REPLAY\n      ) {\n        plan = RumSessionPlan.WITH_SESSION_REPLAY\n      } else if (\n        session.trackingType ===\n          RumTrackingType.TRACKED_WITH_ERROR_SESSION_AND_WITH_ERROR_SESSION_REPLAY ||\n        session.trackingType ===\n          RumTrackingType.TRACKED_WITH_SESSION_AND_WITH_ERROR_SESSION_REPLAY\n      ) {\n        plan = RumSessionPlan.WITH_ERROR_SESSION_REPLAY\n      }\n\n      return {\n        id: session.id,\n        plan: plan,\n        errorSessionReplayAllowed:\n          plan === RumSessionPlan.WITH_ERROR_SESSION_REPLAY,\n        sessionHasError: session.hasError,\n        isErrorSession: isErrorSession,\n        sessionErrorTimestamp: session.ets,\n        sessionReplayAllowed:\n          plan === RumSessionPlan.WITH_SESSION_REPLAY ||\n          plan === RumSessionPlan.WITH_ERROR_SESSION_REPLAY\n      }\n    },\n    expire: sessionManager.expire,\n    expireObservable: sessionManager.expireObservable,\n    sessionStateUpdateObservable: sessionManager.sessionStateUpdateObservable,\n    setErrorForSession: () =>\n      sessionManager.updateSessionState({ hasError: '1', ets: timeStampNow() })\n  }\n}\n\n/**\n * Start a tracked replay session stub\n * It needs to be a premium plan in order to get long tasks\n */\nexport function startRumSessionManagerStub() {\n  var session = {\n    id: '00000000-aaaa-0000-aaaa-000000000000',\n    plan: RumSessionPlan.WITHOUT_SESSION_REPLAY, // plan value should not be taken into account for mobile\n    isErrorSession: false,\n    sessionErrorTimestamp: 0,\n    sessionReplayAllowed: bridgeSupports(BridgeCapability.RECORDS)\n      ? true\n      : false,\n    errorSessionReplayAllowed: false,\n    sessionHasError: false\n  }\n  return {\n    findTrackedSession: function () {\n      return session\n    },\n    expire: noop,\n    expireObservable: new Observable(),\n    setErrorForSession: function () {}\n  }\n}\n\nfunction computeSessionState(configuration, rawTrackingType) {\n  const {\n    sessionSampleRate,\n    sessionOnErrorSampleRate,\n    sessionReplaySampleRate,\n    sessionReplayOnErrorSampleRate\n  } = configuration\n  const isSession = performDraw(sessionSampleRate)\n  const isErrorSession = performDraw(sessionOnErrorSampleRate)\n  const isSessionReplay = performDraw(sessionReplaySampleRate)\n  const isErrorSessionReplay = performDraw(sessionReplayOnErrorSampleRate)\n  var trackingType\n  if (hasValidRumSession(rawTrackingType)) {\n    trackingType = rawTrackingType\n  } else if (!isErrorSession && !isSession) {\n    trackingType = RumTrackingType.NOT_TRACKED\n  } else if (isSession && isSessionReplay) {\n    trackingType = RumTrackingType.TRACKED_WITH_SESSION_AND_WITH_SESSION_REPLAY\n  } else if (isSession && isErrorSessionReplay) {\n    trackingType =\n      RumTrackingType.TRACKED_WITH_SESSION_AND_WITH_ERROR_SESSION_REPLAY\n  } else if (isSession && !isSessionReplay && !isErrorSessionReplay) {\n    trackingType =\n      RumTrackingType.TRACKED_WITH_SESSION_AND_WITHOUT_SESSION_REPLAY\n  } else if (isErrorSession && isSessionReplay) {\n    trackingType =\n      RumTrackingType.TRACKED_WITH_ERROR_SESSION_AND_WITH_SESSION_REPLAY\n  } else if (isErrorSession && isErrorSessionReplay) {\n    trackingType =\n      RumTrackingType.TRACKED_WITH_ERROR_SESSION_AND_WITH_ERROR_SESSION_REPLAY\n  } else if (isErrorSession && !isSessionReplay && !isErrorSessionReplay) {\n    trackingType =\n      RumTrackingType.TRACKED_WITH_ERROR_SESSION_AND_WITHOUT_SESSION_REPLAY\n  }\n  //   if (hasValidRumSession(rawTrackingType)) {\n  //     trackingType = rawTrackingType\n  //   } else if (\n  //     !performDraw(configuration.sessionSampleRate) &&\n  //     !performDraw(configuration.sessionOnErrorSampleRate)\n  //   ) {\n  //     trackingType = RumTrackingType.NOT_TRACKED\n  //   } else if (\n  //     !performDraw(configuration.sessionReplaySampleRate) &&\n  //     !performDraw(configuration.sessionReplayOnErrorSampleRate)\n  //   ) {\n  //     trackingType = RumTrackingType.TRACKED_WITHOUT_SESSION_REPLAY\n  //   } else if (performDraw(configuration.sessionReplayOnErrorSampleRate)) {\n  //     trackingType = RumTrackingType.TRACKED_WITH_ERROR_SESSION_REPLAY\n  //   } else {\n  //     trackingType = RumTrackingType.TRACKED_WITH_SESSION_REPLAY\n  //   }\n  return {\n    trackingType: trackingType,\n    isTracked: isTypeTracked(trackingType)\n  }\n}\n\nfunction hasValidRumSession(trackingType) {\n  return (\n    trackingType === RumTrackingType.NOT_TRACKED ||\n    trackingType ===\n      RumTrackingType.TRACKED_WITH_ERROR_SESSION_AND_WITHOUT_SESSION_REPLAY ||\n    trackingType ===\n      RumTrackingType.TRACKED_WITH_ERROR_SESSION_AND_WITH_ERROR_SESSION_REPLAY ||\n    trackingType ===\n      RumTrackingType.TRACKED_WITH_ERROR_SESSION_AND_WITH_SESSION_REPLAY ||\n    trackingType ===\n      RumTrackingType.TRACKED_WITH_SESSION_AND_WITHOUT_SESSION_REPLAY ||\n    trackingType ===\n      RumTrackingType.TRACKED_WITH_SESSION_AND_WITH_ERROR_SESSION_REPLAY ||\n    trackingType ===\n      RumTrackingType.TRACKED_WITH_SESSION_AND_WITH_SESSION_REPLAY\n  )\n}\n\nfunction isTypeTracked(rumSessionType) {\n  return rumSessionType !== RumTrackingType.NOT_TRACKED\n}\n","import { getCookie, setCookie, UUID, ONE_HOUR } from '@cloudcare/browser-core'\nexport var USR_ID_COOKIE_NAME = '_gc_usr_id'\nexport var ANONYMOUS_ID_EXPIRATION = 60 * 24 * ONE_HOUR\n\nfunction initUsrCookie(cookieOptions) {\n  var usrCacheId = getCookie(USR_ID_COOKIE_NAME, cookieOptions)\n  if (!usrCacheId) {\n    usrCacheId = UUID()\n    setCookie(\n      USR_ID_COOKIE_NAME,\n      usrCacheId,\n      ANONYMOUS_ID_EXPIRATION,\n      cookieOptions\n    )\n  }\n  return usrCacheId\n}\nfunction initUsrLocalStorage() {\n  var usrCacheId = localStorage.getItem(USR_ID_COOKIE_NAME)\n  if (!usrCacheId) {\n    usrCacheId = UUID()\n    localStorage.setItem(USR_ID_COOKIE_NAME, usrCacheId)\n  }\n  return usrCacheId\n}\nexport var startCacheUsrCache = function (configuration) {\n  if (!configuration.sessionStoreStrategyType) return\n  let usrCacheId\n  if (configuration.sessionStoreStrategyType.type === 'Cookie') {\n    usrCacheId = initUsrCookie(\n      configuration.sessionStoreStrategyType.cookieOptions\n    )\n  } else {\n    usrCacheId = initUsrLocalStorage()\n  }\n\n  return {\n    getId: function () {\n      return usrCacheId\n    }\n  }\n}\n","import {\n  addEventListener,\n  DOM_EVENT,\n  Observable,\n  shallowClone,\n  instrumentMethod\n} from '@cloudcare/browser-core'\n\nexport function createLocationChangeObservable(location) {\n  var currentLocation = shallowClone(location)\n  return new Observable(function (observable) {\n    var _trackHistory = trackHistory(onLocationChange)\n    var _trackHash = trackHash(onLocationChange)\n    function onLocationChange() {\n      if (currentLocation.href === location.href) {\n        return\n      }\n      var newLocation = shallowClone(location)\n      observable.notify({\n        newLocation: newLocation,\n        oldLocation: currentLocation\n      })\n      currentLocation = newLocation\n    }\n    return function () {\n      _trackHistory.stop()\n      _trackHash.stop()\n    }\n  })\n}\n\nfunction trackHistory(onHistoryChange) {\n  // eslint-disable-next-line @typescript-eslint/unbound-method\n  var pushState = instrumentMethod(\n    History.prototype,\n    'pushState',\n    function (params) {\n      var onPostCall = params.onPostCall\n      onPostCall(onHistoryChange)\n    }\n  )\n  var replaceState = instrumentMethod(\n    History.prototype,\n    'replaceState',\n    function (params) {\n      var onPostCall = params.onPostCall\n      onPostCall(onHistoryChange)\n    }\n  )\n  var popState = addEventListener(window, DOM_EVENT.POP_STATE, onHistoryChange)\n\n  return {\n    stop: function () {\n      pushState.stop()\n      replaceState.stop()\n      popState.stop()\n    }\n  }\n}\n\nfunction trackHash(onHashChange) {\n  return addEventListener(window, DOM_EVENT.HASH_CHANGE, onHashChange)\n}\n","import {\n  addEventListener,\n  concatBuffers,\n  addTelemetryDebug,\n  assign\n} from '@cloudcare/browser-core'\nexport var DeflateEncoderStreamId = {\n  REPLAY: 1,\n  RUM: 2\n}\nexport function createDeflateEncoder(worker, streamId) {\n  var rawBytesCount = 0\n  var compressedData = []\n  var compressedDataTrailer\n\n  var nextWriteActionId = 0\n  var pendingWriteActions = []\n\n  var wokerListener = addEventListener(worker, 'message', function (params) {\n    var workerResponse = params.data\n    if (\n      workerResponse.type !== 'wrote' ||\n      (workerResponse.streamId && workerResponse.streamId !== streamId)\n    ) {\n      return\n    }\n\n    rawBytesCount += workerResponse.additionalBytesCount\n    compressedData.push(workerResponse.result)\n    compressedDataTrailer = workerResponse.trailer\n    var nextPendingAction = pendingWriteActions.shift()\n    if (nextPendingAction && nextPendingAction.id === workerResponse.id) {\n      if (nextPendingAction.writeCallback) {\n        nextPendingAction.writeCallback(workerResponse.result.byteLength)\n      } else if (nextPendingAction.finishCallback) {\n        nextPendingAction.finishCallback()\n      }\n    } else {\n      removeMessageListener()\n      addTelemetryDebug('Worker responses received out of order.')\n    }\n  })\n\n  var removeMessageListener = wokerListener.stop\n  function consumeResult() {\n    var output =\n      compressedData.length === 0\n        ? new Uint8Array(0)\n        : concatBuffers(compressedData.concat(compressedDataTrailer))\n    var result = {\n      rawBytesCount: rawBytesCount,\n      output: output,\n      outputBytesCount: output.byteLength,\n      encoding: 'deflate'\n    }\n    rawBytesCount = 0\n    compressedData = []\n    return result\n  }\n\n  function sendResetIfNeeded() {\n    if (nextWriteActionId > 0) {\n      worker.postMessage({\n        action: 'reset',\n        streamId: streamId\n      })\n      nextWriteActionId = 0\n    }\n  }\n  return {\n    isAsync: true,\n    isEmpty: function () {\n      return nextWriteActionId === 0\n    },\n\n    write: function (data, callback) {\n      worker.postMessage({\n        action: 'write',\n        id: nextWriteActionId,\n        data: data,\n        streamId: streamId\n      })\n      pendingWriteActions.push({\n        id: nextWriteActionId,\n        writeCallback: callback,\n        data: data\n      })\n      nextWriteActionId += 1\n    },\n\n    finish: function (callback) {\n      sendResetIfNeeded()\n\n      if (!pendingWriteActions.length) {\n        callback(consumeResult())\n      } else {\n        // Make sure we do not call any write callback\n        pendingWriteActions.forEach(function (pendingWriteAction) {\n          delete pendingWriteAction.writeCallback\n        })\n\n        // Wait for the last action to finish before calling the finish callback\n        pendingWriteActions[pendingWriteActions.length - 1].finishCallback =\n          function () {\n            return callback(consumeResult())\n          }\n      }\n    },\n\n    finishSync: function () {\n      sendResetIfNeeded()\n\n      var pendingData = pendingWriteActions\n        .map(function (pendingWriteAction) {\n          // Make sure we do not call any write or finish callback\n          delete pendingWriteAction.writeCallback\n          delete pendingWriteAction.finishCallback\n          return pendingWriteAction.data\n        })\n        .join('')\n\n      return assign(consumeResult(), {\n        pendingData: pendingData\n      })\n    },\n\n    estimateEncodedBytesCount: function (data) {\n      // This is a rough estimation of the data size once it'll be encoded by deflate. We observed\n      // that if it's the first chunk of data pushed to the stream, the ratio is lower (3-4), but\n      // after that the ratio is greater (10+). We chose 8 here, which (on average) seems to produce\n      // requests of the expected size.\n      return data.length / 8\n    },\n\n    stop: function () {\n      removeMessageListener()\n    }\n  }\n}\n","import {\n  display,\n  includes,\n  setTimeout,\n  addEventListener,\n  addTelemetryError,\n  ONE_SECOND\n} from '@cloudcare/browser-core'\n\nexport var INITIALIZATION_TIME_OUT_DELAY = 10 * ONE_SECOND\n\nexport function createDeflateWorker(configuration) {\n  return new Worker(\n    configuration.workerUrl ||\n      URL.createObjectURL(new Blob([__BUILD_ENV__WORKER_STRING__]))\n  )\n}\n/**\n * In order to be sure that the worker is correctly working, we need a round trip of\n * initialization messages, making the creation asynchronous.\n * These worker lifecycle states handle this case.\n */\nexport var DeflateWorkerStatus = {\n  Nil: 0,\n  Loading: 1,\n  Error: 2,\n  Initialized: 3\n}\n\nvar state = { status: DeflateWorkerStatus.Nil }\n\nexport function startDeflateWorker(\n  configuration,\n  source,\n  onInitializationFailure,\n  createDeflateWorkerImpl\n) {\n  if (createDeflateWorkerImpl === undefined) {\n    createDeflateWorkerImpl = createDeflateWorker\n  }\n  if (state.status === DeflateWorkerStatus.Nil) {\n    doStartDeflateWorker(configuration, source, createDeflateWorkerImpl)\n  }\n  switch (state.status) {\n    case DeflateWorkerStatus.Loading:\n      state.initializationFailureCallbacks.push(onInitializationFailure)\n      return state.worker\n    case DeflateWorkerStatus.Initialized:\n      return state.worker\n  }\n}\n\nexport function resetDeflateWorkerState() {\n  if (\n    state.status === DeflateWorkerStatus.Initialized ||\n    state.status === DeflateWorkerStatus.Loading\n  ) {\n    state.stop()\n  }\n  state = { status: DeflateWorkerStatus.Nil }\n}\nexport function getDeflateWorkerStatus() {\n  return state.status\n}\n\n/**\n * Starts the deflate worker and handle messages and errors\n *\n * The spec allow browsers to handle worker errors differently:\n * - Chromium throws an exception\n * - Firefox fires an error event\n *\n * more details: https://bugzilla.mozilla.org/show_bug.cgi?id=1736865#c2\n */\nexport function doStartDeflateWorker(\n  configuration,\n  source,\n  createDeflateWorkerImpl\n) {\n  if (createDeflateWorkerImpl === undefined) {\n    createDeflateWorkerImpl = createDeflateWorker\n  }\n  try {\n    var worker = createDeflateWorkerImpl(configuration)\n    const errorListener = addEventListener(worker, 'error', function (error) {\n      onError(configuration, source, error)\n    })\n    const messageListener = addEventListener(\n      worker,\n      'message',\n      function (event) {\n        var data = event.data\n        if (data.type === 'errored') {\n          onError(data.error, data.streamId)\n        } else if (data.type === 'initialized') {\n          onInitialized(data.version)\n        }\n      }\n    )\n    worker.postMessage({ action: 'init' })\n    setTimeout(function () {\n      return onTimeout(source)\n    }, INITIALIZATION_TIME_OUT_DELAY)\n\n    var stop = function () {\n      errorListener.stop()\n      messageListener.stop()\n    }\n    state = {\n      status: DeflateWorkerStatus.Loading,\n      worker: worker,\n      stop: stop,\n      initializationFailureCallbacks: []\n    }\n  } catch (error) {\n    onError(configuration, source, error)\n  }\n}\nfunction onTimeout(source) {\n  if (state.status === DeflateWorkerStatus.Loading) {\n    display.error(\n      source +\n        ' failed to start: a timeout occurred while initializing the Worker'\n    )\n    state.initializationFailureCallbacks.forEach(function (callback) {\n      callback()\n    })\n    state = { status: DeflateWorkerStatus.Error }\n  }\n}\nfunction onInitialized(version) {\n  if (state.status === DeflateWorkerStatus.Loading) {\n    state = {\n      status: DeflateWorkerStatus.Initialized,\n      worker: state.worker,\n      version: version,\n      stop: state.stop\n    }\n  }\n}\n\nfunction onError(configuration, source, error, streamId) {\n  if (state.status === DeflateWorkerStatus.Loading) {\n    display.error(\n      source + ' failed to start: an error occurred while creating the Worker:',\n      error\n    )\n    if (\n      error instanceof Event ||\n      (error instanceof Error && isMessageCspRelated(error.message))\n    ) {\n      let baseMessage\n      if (configuration.workerUrl) {\n        baseMessage =\n          'Please make sure the Worker URL ' +\n          configuration.workerUrl +\n          ' is correct and CSP is correctly configured.'\n      } else {\n        baseMessage = 'Please make sure CSP is correctly configured.'\n      }\n      display.error(baseMessage)\n    } else {\n      addTelemetryError(error)\n    }\n    if (state.status === DeflateWorkerStatus.Loading) {\n      state.initializationFailureCallbacks.forEach(function (callback) {\n        callback()\n      })\n    }\n    state = { status: DeflateWorkerStatus.Error }\n  } else {\n    addTelemetryError(error, {\n      worker_version:\n        state.status === DeflateWorkerStatus.Initialized && state.version,\n      stream_id: streamId\n    })\n  }\n}\nfunction isMessageCspRelated(message) {\n  return (\n    includes(message, 'Content Security Policy') ||\n    // Related to `require-trusted-types-for` CSP: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/require-trusted-types-for\n    includes(message, \"requires 'TrustedScriptURL'\")\n  )\n}\n","export { createDeflateEncoder, DeflateEncoderStreamId } from './deflateEncoder'\nexport {\n  startDeflateWorker,\n  DeflateWorkerStatus,\n  getDeflateWorkerStatus,\n  resetDeflateWorkerState\n} from './deflateWorker'\n","import {\n  LifeCycleEventType,\n  RumEventType,\n  startBatchWithReplica\n} from '@cloudcare/browser-core'\nimport { DeflateEncoderStreamId } from '../domain/deflate'\nexport function startRumBatch(\n  configuration,\n  lifeCycle,\n  telemetryEventObservable,\n  reportError,\n  pageExitObservable,\n  sessionExpireObservable,\n  createEncoder\n) {\n  const batch = startBatchWithReplica(\n    configuration,\n    {\n      endpoint: configuration.rumEndpoint,\n      encoder: createEncoder(DeflateEncoderStreamId.RUM)\n    },\n    reportError,\n    pageExitObservable,\n    sessionExpireObservable\n  )\n  lifeCycle.subscribe(\n    LifeCycleEventType.RUM_EVENT_COLLECTED,\n    function (serverRumEvent) {\n      if (serverRumEvent.type === RumEventType.VIEW) {\n        batch.upsert(serverRumEvent, serverRumEvent.view.id)\n      } else {\n        batch.add(serverRumEvent)\n      }\n    }\n  )\n  // telemetryEventObservable.subscribe(function (event) {\n  //   batch.add(event)\n  // })\n  return batch\n}\n","import {\n  getEventBridge,\n  LifeCycleEventType,\n  processedMessageByDataMap\n} from '@cloudcare/browser-core'\n\nexport function startRumEventBridge(lifeCycle) {\n  var bridge = getEventBridge()\n\n  lifeCycle.subscribe(\n    LifeCycleEventType.RUM_EVENT_COLLECTED,\n    function (serverRumEvent) {\n      var data = processedMessageByDataMap(serverRumEvent).rowData\n      bridge.send('rum', data)\n    }\n  )\n}\n","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import {\n  extend2Lev,\n  withSnakeCaseKeys,\n  timeStampNow,\n  isEmptyObject,\n  LifeCycleEventType,\n  RumEventType,\n  deviceInfo,\n  currentDrift,\n  createEventRateLimiter,\n  limitModification,\n  display,\n  assign,\n  round\n} from '@cloudcare/browser-core'\nvar SessionType = {\n  SYNTHETICS: 'synthetics',\n  USER: 'user'\n}\n\nvar VIEW_MODIFIABLE_FIELD_PATHS = {\n  'view.url': 'string',\n  'view.referrer': 'string'\n}\n\nvar USER_CUSTOMIZABLE_FIELD_PATHS = {\n  context: 'object'\n}\nconst ROOT_MODIFIABLE_FIELD_PATHS = {\n  service: 'string',\n  version: 'string'\n}\nvar modifiableFieldPathsByEvent = {}\nexport function startRumAssembly(\n  configuration,\n  lifeCycle,\n  sessionManager,\n  userSessionManager,\n  viewContexts,\n  urlContexts,\n  actionContexts,\n  displayContext,\n  getCommonContext,\n  reportError\n) {\n  modifiableFieldPathsByEvent[RumEventType.VIEW] = {\n    ...USER_CUSTOMIZABLE_FIELD_PATHS,\n    ...VIEW_MODIFIABLE_FIELD_PATHS\n  }\n  modifiableFieldPathsByEvent[RumEventType.ERROR] = assign(\n    {\n      'error.message': 'string',\n      'error.stack': 'string',\n      'error.resource.url': 'string'\n    },\n    USER_CUSTOMIZABLE_FIELD_PATHS,\n    VIEW_MODIFIABLE_FIELD_PATHS,\n    ROOT_MODIFIABLE_FIELD_PATHS\n  )\n  modifiableFieldPathsByEvent[RumEventType.RESOURCE] = assign(\n    {\n      'resource.url': 'string'\n    },\n    USER_CUSTOMIZABLE_FIELD_PATHS,\n    VIEW_MODIFIABLE_FIELD_PATHS,\n    ROOT_MODIFIABLE_FIELD_PATHS\n  )\n  modifiableFieldPathsByEvent[RumEventType.ACTION] = assign(\n    {\n      'action.target.name': 'string'\n    },\n    USER_CUSTOMIZABLE_FIELD_PATHS,\n    VIEW_MODIFIABLE_FIELD_PATHS,\n    ROOT_MODIFIABLE_FIELD_PATHS\n  )\n  modifiableFieldPathsByEvent[RumEventType.LONG_TASK] = assign(\n    {},\n    USER_CUSTOMIZABLE_FIELD_PATHS,\n    VIEW_MODIFIABLE_FIELD_PATHS\n  )\n  var eventRateLimiters = {}\n  eventRateLimiters[RumEventType.ERROR] = createEventRateLimiter(\n    RumEventType.ERROR,\n    configuration.eventRateLimiterThreshold,\n    reportError\n  )\n  eventRateLimiters[RumEventType.ACTION] = createEventRateLimiter(\n    RumEventType.ACTION,\n    configuration.eventRateLimiterThreshold,\n    reportError\n  )\n  lifeCycle.subscribe(\n    LifeCycleEventType.RAW_RUM_EVENT_COLLECTED,\n    function (data) {\n      var startTime = data.startTime\n      var rawRumEvent = data.rawRumEvent\n      var savedCommonContext = data.savedCommonContext\n      var customerContext = data.customerContext\n      var domainContext = data.domainContext\n      var viewContext = viewContexts.findView(startTime)\n      var urlContext = urlContexts.findUrl(startTime)\n      var session = sessionManager.findTrackedSession(startTime)\n      if (session && session.isErrorSession && !session.sessionHasError) return\n      if (session && viewContext && urlContext) {\n        // var actionId = actionContexts.findActionId(startTime)\n        // var actionIds = actionContexts.findAllActionId(startTime)\n        var commonContext = savedCommonContext || getCommonContext()\n        var rumContext = {\n          _gc: {\n            sdkName: configuration.sdkName,\n            sdkVersion: configuration.sdkVersion,\n            drift: currentDrift(),\n            configuration: {\n              session_sample_rate: round(configuration.sessionSampleRate, 3),\n              session_replay_sample_rate: round(\n                configuration.sessionReplaySampleRate,\n                3\n              ),\n              session_on_error_sample_rate: round(\n                configuration.sessionOnErrorSampleRate,\n                3\n              ),\n              session_replay_on_error_sample_rate: round(\n                configuration.sessionReplayOnErrorSampleRate,\n                3\n              )\n            }\n          },\n          terminal: {\n            type: 'web'\n          },\n          application: {\n            id: configuration.applicationId\n          },\n          device: deviceInfo,\n          env: configuration.env || '',\n          service: viewContext.service || configuration.service || 'browser',\n          version: viewContext.version || configuration.version || '',\n          source: 'browser',\n          date: timeStampNow(),\n          user: {\n            id: userSessionManager.getId(),\n            is_signin: 'F',\n            is_login: false\n          },\n          session: {\n            // must be computed on each event because synthetics instrumentation can be done after sdk execution\n            // cf https://github.com/puppeteer/puppeteer/issues/3667\n            type: getSessionType(),\n            id: session.id\n          },\n          view: {\n            id: viewContext.id,\n            name: viewContext.name || urlContext.path,\n            url: urlContext.url,\n            referrer: urlContext.referrer,\n            host: urlContext.host,\n            path: urlContext.path,\n            pathGroup: urlContext.pathGroup,\n            urlQuery: urlContext.urlQuery\n          },\n          // action:\n          //   needToAssembleWithAction(rawRumEvent) && actionId\n          //     ? { id: actionId, ids: actionIds }\n          //     : undefined,\n          display: displayContext.get()\n        }\n        var rumEvent = extend2Lev(rumContext, viewContext, rawRumEvent)\n        var serverRumEvent = withSnakeCaseKeys(rumEvent)\n        var context = extend2Lev(\n          {},\n          commonContext.context,\n          viewContext.context,\n          customerContext\n        )\n        if (!isEmptyObject(context)) {\n          serverRumEvent.context = context\n        }\n        if (!('has_replay' in serverRumEvent.session)) {\n          serverRumEvent.session.has_replay = commonContext.hasReplay\n        }\n\n        if (session.errorSessionReplayAllowed) {\n          serverRumEvent.session.has_replay =\n            serverRumEvent.session.has_replay && session.sessionHasError\n        }\n        if (serverRumEvent.type === 'view') {\n          serverRumEvent.session.sampled_for_error_replay =\n            session.errorSessionReplayAllowed\n          serverRumEvent.session.sampled_for_error_session =\n            session.isErrorSession\n          serverRumEvent.session.error_timestamp_for_session =\n            session.sessionErrorTimestamp\n        }\n        if (!isEmptyObject(commonContext.user)) {\n          // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n          serverRumEvent.user = extend2Lev(\n            {\n              // id: session.getAnonymousID(),\n              is_signin: 'T',\n              is_login: true\n            },\n            commonContext.user\n          )\n        }\n\n        if (\n          shouldSend(\n            serverRumEvent,\n            configuration.beforeSend,\n            domainContext,\n            eventRateLimiters\n          )\n        ) {\n          if (isEmptyObject(serverRumEvent.context)) {\n            delete serverRumEvent.context\n          }\n          lifeCycle.notify(\n            LifeCycleEventType.RUM_EVENT_COLLECTED,\n            serverRumEvent\n          )\n        }\n      }\n    }\n  )\n}\n\nfunction shouldSend(event, beforeSend, domainContext, eventRateLimiters) {\n  if (beforeSend) {\n    var result = limitModification(\n      event,\n      modifiableFieldPathsByEvent[event.type],\n      function (event) {\n        return beforeSend(event, domainContext)\n      }\n    )\n    if (result === false && event.type !== RumEventType.VIEW) {\n      return false\n    }\n    if (result === false) {\n      display.warn(\"Can't dismiss view events using beforeSend!\")\n    }\n  }\n  var rateLimitReached = false\n  if (eventRateLimiters[event.type]) {\n    rateLimitReached = eventRateLimiters[event.type].isLimitReached()\n  }\n  return !rateLimitReached\n}\nfunction needToAssembleWithAction(event) {\n  return (\n    [RumEventType.ERROR, RumEventType.RESOURCE, RumEventType.LONG_TASK].indexOf(\n      event.type\n    ) !== -1\n  )\n}\n\nfunction getSessionType() {\n  return window._DATAFLUX_SYNTHETICS_BROWSER === undefined\n    ? SessionType.USER\n    : SessionType.SYNTHETICS\n}\n","import {\n  Observable,\n  throttle,\n  addEventListener,\n  DOM_EVENT\n} from '@cloudcare/browser-core'\n\nvar viewportObservable\n\nexport function initViewportObservable() {\n  if (!viewportObservable) {\n    viewportObservable = createViewportObservable()\n  }\n  return viewportObservable\n}\n\nexport function createViewportObservable() {\n  return new Observable(function (observable) {\n    var _throttledUpdateDimension = throttle(function () {\n      observable.notify(getViewportDimension())\n    }, 200)\n    var updateDimension = _throttledUpdateDimension.throttled\n    return addEventListener(window, DOM_EVENT.RESIZE, updateDimension, {\n      capture: true,\n      passive: true\n    }).stop\n  })\n}\n\n// excludes the width and height of any rendered classic scrollbar that is fixed to the visual viewport\nexport function getViewportDimension() {\n  var visual = window.visualViewport\n  if (visual) {\n    return {\n      width: Number(visual.width * visual.scale),\n      height: Number(visual.height * visual.scale)\n    }\n  }\n\n  return {\n    width: Number(window.innerWidth || 0),\n    height: Number(window.innerHeight || 0)\n  }\n}\n","import {\n  getViewportDimension,\n  initViewportObservable\n} from '../initViewportObservable'\n\nexport function startDisplayContext() {\n  var viewport = getViewportDimension()\n  var unsubscribeViewport = initViewportObservable().subscribe(function (\n    viewportDimension\n  ) {\n    viewport = viewportDimension\n  }).unsubscribe\n\n  return {\n    get: function () {\n      return { viewport: viewport }\n    },\n    stop: unsubscribeViewport\n  }\n}\n","/**\n * Internal context keep returning v1 format\n * to not break compatibility with logs data format\n */\nexport function startInternalContext(\n  applicationId,\n  sessionManager,\n  viewContexts,\n  actionContexts,\n  urlContexts\n) {\n  return {\n    get: function (startTime) {\n      var viewContext = viewContexts.findView(startTime)\n      var urlContext = urlContexts.findUrl(startTime)\n      var session = sessionManager.findTrackedSession(startTime)\n      if (session && viewContext && urlContext) {\n        // var actionId = actionContexts.findActionId(startTime)\n        // var actionIds = actionContexts.findAllActionId(startTime)\n        return {\n          application: {\n            id: applicationId\n          },\n          session: {\n            id: session.id\n          },\n          // userAction: actionId\n          //   ? {\n          //       id: actionId,\n          //       ids: actionIds\n          //     }\n          //   : undefined,\n          view: {\n            id: viewContext.id,\n            name: viewContext.name || urlContext.path,\n            url: urlContext.url,\n            referrer: urlContext.referrer,\n            host: urlContext.host,\n            path: urlContext.path,\n            pathGroup: urlContext.pathGroup,\n            urlQuery: urlContext.urlQuery\n          }\n        }\n      }\n    }\n  }\n}\n","import {\n  LifeCycleEventType,\n  SESSION_TIME_OUT_DELAY,\n  relativeNow,\n  createValueHistory,\n  replaceNumberCharByPath,\n  getQueryParamsFromUrl,\n  isHashAnAnchor,\n  getPathFromHash\n} from '@cloudcare/browser-core'\n\n/**\n * We want to attach to an event:\n * - the url corresponding to its start\n * - the referrer corresponding to the previous view url (or document referrer for initial view)\n */\n\nexport var URL_CONTEXT_TIME_OUT_DELAY = SESSION_TIME_OUT_DELAY\n\nexport function startUrlContexts(\n  lifeCycle,\n  locationChangeObservable,\n  location\n) {\n  var urlContextHistory = createValueHistory({\n    expireDelay: URL_CONTEXT_TIME_OUT_DELAY\n  })\n\n  var previousViewUrl\n\n  lifeCycle.subscribe(LifeCycleEventType.BEFORE_VIEW_CREATED, function (data) {\n    var viewUrl = location.href\n    urlContextHistory.add(\n      buildUrlContext({\n        url: viewUrl,\n        location: location,\n        referrer: !previousViewUrl ? document.referrer : previousViewUrl\n      }),\n      data.startClocks.relative\n    )\n    previousViewUrl = viewUrl\n  })\n  lifeCycle.subscribe(LifeCycleEventType.AFTER_VIEW_ENDED, function (data) {\n    urlContextHistory.closeActive(data.endClocks.relative)\n  })\n  var locationChangeSubscription = locationChangeObservable.subscribe(function (\n    data\n  ) {\n    var current = urlContextHistory.find()\n    if (current) {\n      var changeTime = relativeNow()\n      urlContextHistory.closeActive(changeTime)\n      urlContextHistory.add(\n        buildUrlContext({\n          url: data.newLocation.href,\n          location: data.newLocation,\n          referrer: current.referrer\n        }),\n        changeTime\n      )\n    }\n  })\n\n  function buildUrlContext(data) {\n    var path = data.location.pathname\n    var hash = data.location.hash\n    if (hash && !isHashAnAnchor(hash)) {\n      path = '/' + getPathFromHash(hash)\n    }\n    return {\n      url: data.url,\n      referrer: data.referrer,\n      host: data.location.host,\n      path: path,\n      pathGroup: replaceNumberCharByPath(path),\n      urlQuery: getQueryParamsFromUrl(data.location.href)\n    }\n  }\n\n  return {\n    findUrl: function (startTime) {\n      return urlContextHistory.find(startTime)\n    },\n    stop: function () {\n      locationChangeSubscription.unsubscribe()\n      urlContextHistory.stop()\n    }\n  }\n}\n","import {\n  SESSION_TIME_OUT_DELAY,\n  createValueHistory,\n  LifeCycleEventType\n} from '@cloudcare/browser-core'\n\nexport var VIEW_CONTEXT_TIME_OUT_DELAY = SESSION_TIME_OUT_DELAY\n\nexport function startViewContexts(lifeCycle) {\n  var viewContextHistory = createValueHistory({\n    expireDelay: VIEW_CONTEXT_TIME_OUT_DELAY\n  })\n\n  lifeCycle.subscribe(LifeCycleEventType.BEFORE_VIEW_CREATED, function (view) {\n    viewContextHistory.add(buildViewContext(view), view.startClocks.relative)\n  })\n\n  lifeCycle.subscribe(LifeCycleEventType.AFTER_VIEW_ENDED, function (data) {\n    viewContextHistory.closeActive(data.endClocks.relative)\n  })\n  lifeCycle.subscribe(LifeCycleEventType.BEFORE_VIEW_UPDATED, (viewUpdate) => {\n    const currentView = viewContextHistory.find(viewUpdate.startClocks.relative)\n    if (currentView && viewUpdate.name) {\n      currentView.name = viewUpdate.name\n    }\n    if (currentView && viewUpdate.context) {\n      currentView.context = viewUpdate.context\n    }\n  })\n  lifeCycle.subscribe(LifeCycleEventType.SESSION_RENEWED, function () {\n    viewContextHistory.reset()\n  })\n\n  function buildViewContext(view) {\n    return {\n      service: view.service,\n      version: view.version,\n      context: view.context,\n      id: view.id,\n      name: view.name,\n      startClocks: view.startClocks\n    }\n  }\n\n  return {\n    findView: function (startTime) {\n      return viewContextHistory.find(startTime)\n    },\n    stop: function () {\n      viewContextHistory.stop()\n    }\n  }\n}\n","import {\n  elapsed,\n  createValueHistory,\n  SESSION_TIME_OUT_DELAY,\n  toServerDuration,\n  addEventListeners,\n  relativeNow,\n  DOM_EVENT\n} from '@cloudcare/browser-core'\n\n// Arbitrary value to cap number of element for memory consumption in the browser\nexport var MAX_PAGE_STATE_ENTRIES = 4000\n// Arbitrary value to cap number of element for backend & to save bandwidth\nexport var MAX_PAGE_STATE_ENTRIES_SELECTABLE = 500\n\nexport var PAGE_STATE_CONTEXT_TIME_OUT_DELAY = SESSION_TIME_OUT_DELAY\n\nexport var PageState = {\n  ACTIVE: 'active',\n  PASSIVE: 'passive',\n  HIDDEN: 'hidden',\n  FROZEN: 'frozen',\n  TERMINATED: 'terminated'\n}\n\nexport function startPageStateHistory(maxPageStateEntriesSelectable) {\n  if (maxPageStateEntriesSelectable === undefined) {\n    maxPageStateEntriesSelectable = MAX_PAGE_STATE_ENTRIES_SELECTABLE\n  }\n  var pageStateEntryHistory = createValueHistory({\n    expireDelay: PAGE_STATE_CONTEXT_TIME_OUT_DELAY,\n    maxEntries: MAX_PAGE_STATE_ENTRIES\n  })\n\n  var currentPageState\n  addPageState(getPageState(), relativeNow())\n\n  var _addEventListeners = addEventListeners(\n    window,\n    [\n      DOM_EVENT.PAGE_SHOW,\n      DOM_EVENT.FOCUS,\n      DOM_EVENT.BLUR,\n      DOM_EVENT.VISIBILITY_CHANGE,\n      DOM_EVENT.RESUME,\n      DOM_EVENT.FREEZE,\n      DOM_EVENT.PAGE_HIDE\n    ],\n    function (event) {\n      // Only get events fired by the browser to avoid false currentPageState changes done with custom events\n      addPageState(computePageState(event), event.timeStamp)\n    },\n    { capture: true }\n  )\n  var stopEventListeners = _addEventListeners.stop\n\n  function addPageState(nextPageState, startTime) {\n    if (startTime === undefined) {\n      startTime = relativeNow()\n    }\n    if (nextPageState === currentPageState) {\n      return\n    }\n\n    currentPageState = nextPageState\n    pageStateEntryHistory.closeActive(startTime)\n    pageStateEntryHistory.add(\n      { state: currentPageState, startTime: startTime },\n      startTime\n    )\n  }\n\n  const pageStateHistory = {\n    findAll: function (eventStartTime, duration) {\n      var pageStateEntries = pageStateEntryHistory.findAll(\n        eventStartTime,\n        duration\n      )\n\n      if (pageStateEntries.length === 0) {\n        return\n      }\n\n      var pageStateServerEntries = []\n      // limit the number of entries to return\n      var limit = Math.max(\n        0,\n        pageStateEntries.length - maxPageStateEntriesSelectable\n      )\n\n      // loop page state entries backward to return the selected ones in desc order\n      for (var index = pageStateEntries.length - 1; index >= limit; index--) {\n        var pageState = pageStateEntries[index]\n        // compute the start time relative to the event start time (ex: to be relative to the view start time)\n        var relativeStartTime = elapsed(eventStartTime, pageState.startTime)\n\n        pageStateServerEntries.push({\n          state: pageState.state,\n          start: toServerDuration(relativeStartTime)\n        })\n      }\n\n      return pageStateServerEntries\n    },\n\n    wasInPageStateAt: function (state, startTime) {\n      return pageStateHistory.wasInPageStateDuringPeriod(state, startTime, 0)\n    },\n\n    wasInPageStateDuringPeriod: function (state, startTime, duration) {\n      return pageStateEntryHistory\n        .findAll(startTime, duration)\n        .some(function (pageState) {\n          return pageState.state === state\n        })\n    },\n\n    addPageState: addPageState,\n    stop: function () {\n      stopEventListeners()\n      pageStateEntryHistory.stop()\n    }\n  }\n  return pageStateHistory\n}\n\nfunction computePageState(event) {\n  if (event.type === DOM_EVENT.FREEZE) {\n    return PageState.FROZEN\n  } else if (event.type === DOM_EVENT.PAGE_HIDE) {\n    return event.persisted ? PageState.FROZEN : PageState.TERMINATED\n  }\n  return getPageState()\n}\n\nfunction getPageState() {\n  if (document.visibilityState === 'hidden') {\n    return PageState.HIDDEN\n  }\n\n  if (document.hasFocus()) {\n    return PageState.ACTIVE\n  }\n\n  return PageState.PASSIVE\n}\n","import { initConsoleObservable, ConsoleApiName } from '@cloudcare/browser-core'\n\nexport function trackConsoleError(errorObservable) {\n  var subscription = initConsoleObservable([ConsoleApiName.error]).subscribe(\n    function (consoleLog) {\n      errorObservable.notify(consoleLog.error)\n    }\n  )\n\n  return {\n    stop: function () {\n      subscription.unsubscribe()\n    }\n  }\n}\n","import {\n  clocksNow,\n  ErrorHandling,\n  ErrorSource,\n  initReportObservable,\n  RawReportType\n} from '@cloudcare/browser-core'\n\nexport function trackReportError(configuration, errorObservable) {\n  var subscription = initReportObservable(configuration, [\n    (RawReportType.cspViolation, RawReportType.intervention)\n  ]).subscribe(function (reportError) {\n    errorObservable.notify({\n      startClocks: clocksNow(),\n      message: reportError.message,\n      stack: reportError.stack,\n      type: reportError.subtype,\n      source: ErrorSource.REPORT,\n      handling: ErrorHandling.UNHANDLED\n    })\n  })\n\n  return {\n    stop: function () {\n      subscription.unsubscribe()\n    }\n  }\n}\n","import {\n  assign,\n  computeStackTrace,\n  computeRawError,\n  ErrorSource,\n  UUID,\n  ErrorHandling,\n  Observable,\n  trackRuntimeError,\n  RumEventType,\n  LifeCycleEventType,\n  NonErrorPrefix\n} from '@cloudcare/browser-core'\nimport { trackConsoleError } from './trackConsoleError'\nimport { trackReportError } from './trackReportError'\nimport { PageState } from '../../contexts/pageStateHistory'\n\nexport function startErrorCollection(\n  lifeCycle,\n  configuration,\n  sessionManager,\n  pageStateHistory\n) {\n  var errorObservable = new Observable()\n\n  trackConsoleError(errorObservable)\n  trackRuntimeError(errorObservable)\n  trackReportError(configuration, errorObservable)\n  var session = sessionManager.findTrackedSession()\n  let hasError = session.isErrorSession && session.sessionHasError\n  if (session.isErrorSession) {\n    lifeCycle.subscribe(LifeCycleEventType.SESSION_RENEWED, function () {\n      hasError = false\n    })\n  }\n\n  errorObservable.subscribe(function (error) {\n    if (session.isErrorSession && !hasError) {\n      sessionManager.setErrorForSession()\n      hasError = true\n    }\n    lifeCycle.notify(LifeCycleEventType.RAW_ERROR_COLLECTED, { error: error })\n  })\n\n  return doStartErrorCollection(lifeCycle, pageStateHistory)\n}\n\nexport function doStartErrorCollection(lifeCycle, pageStateHistory) {\n  lifeCycle.subscribe(LifeCycleEventType.RAW_ERROR_COLLECTED, function (error) {\n    lifeCycle.notify(\n      LifeCycleEventType.RAW_RUM_EVENT_COLLECTED,\n      assign(\n        {\n          customerContext: error.customerContext,\n          savedCommonContext: error.savedCommonContext\n        },\n        processError(error.error, pageStateHistory)\n      )\n    )\n  })\n\n  return {\n    addError: function (providedError, savedCommonContext) {\n      var error = providedError.error\n      var stackTrace =\n        error instanceof Error ? computeStackTrace(error) : undefined\n      var rawError = computeRawError({\n        stackTrace,\n        originalError: error,\n        handlingStack: providedError.handlingStack,\n        startClocks: providedError.startClocks,\n        nonErrorPrefix: NonErrorPrefix.PROVIDED,\n        source: ErrorSource.CUSTOM,\n        handling: ErrorHandling.HANDLED\n      })\n      lifeCycle.notify(LifeCycleEventType.RAW_ERROR_COLLECTED, {\n        customerContext: providedError.context,\n        savedCommonContext: savedCommonContext,\n        error: rawError\n      })\n    }\n  }\n}\n\nfunction processError(error, pageStateHistory) {\n  var rawRumEvent = {\n    date: error.startClocks.timeStamp,\n    error: {\n      id: UUID(),\n      message: error.message,\n      source: error.source,\n      stack: error.stack,\n      handling_stack: error.handlingStack,\n      type: error.type,\n      handling: error.handling,\n      causes: error.causes,\n      source_type: 'browser'\n    },\n    type: RumEventType.ERROR,\n    view: {\n      in_foreground: pageStateHistory.wasInPageStateAt(\n        PageState.ACTIVE,\n        error.startClocks.relative\n      )\n    }\n  }\n\n  return {\n    rawRumEvent: rawRumEvent,\n    startTime: error.startClocks.relative,\n    domainContext: {\n      error: error.originalError\n    }\n  }\n}\n","import {\n  includes,\n  msToNs,\n  each,\n  toArray,\n  getPathName,\n  isValidUrl,\n  isIntakeRequest,\n  ResourceType,\n  preferredNow\n} from '@cloudcare/browser-core'\nexport var FAKE_INITIAL_DOCUMENT = 'initial_document'\n\nvar RESOURCE_TYPES = [\n  [\n    ResourceType.DOCUMENT,\n    function (initiatorType) {\n      return FAKE_INITIAL_DOCUMENT === initiatorType\n    }\n  ],\n  [\n    ResourceType.XHR,\n    function (initiatorType) {\n      return 'xmlhttprequest' === initiatorType\n    }\n  ],\n  [\n    ResourceType.FETCH,\n    function (initiatorType) {\n      return 'fetch' === initiatorType\n    }\n  ],\n  [\n    ResourceType.BEACON,\n    function (initiatorType) {\n      return 'beacon' === initiatorType\n    }\n  ],\n  [\n    ResourceType.CSS,\n    function (_, path) {\n      return path.match(/\\.css$/i) !== null\n    }\n  ],\n  [\n    ResourceType.JS,\n    function (_, path) {\n      return path.match(/\\.js$/i) !== null\n    }\n  ],\n  [\n    ResourceType.IMAGE,\n    function (initiatorType, path) {\n      return (\n        includes(['image', 'img', 'icon'], initiatorType) ||\n        path.match(/\\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i) !== null\n      )\n    }\n  ],\n  [\n    ResourceType.FONT,\n    function (_, path) {\n      return path.match(/\\.(woff|eot|woff2|ttf)$/i) !== null\n    }\n  ],\n  [\n    ResourceType.MEDIA,\n    function (initiatorType, path) {\n      return (\n        includes(['audio', 'video'], initiatorType) ||\n        path.match(/\\.(mp3|mp4)$/i) !== null\n      )\n    }\n  ]\n]\n\nexport function computeResourceEntryType(entry) {\n  var url = entry.name\n  if (!isValidUrl(url)) {\n    return ResourceType.OTHER\n  }\n  var path = getPathName(url)\n  var type = ResourceType.OTHER\n  each(RESOURCE_TYPES, function (res) {\n    var _type = res[0],\n      isType = res[1]\n\n    if (isType(entry.initiatorType, path)) {\n      type = _type\n      return false\n    }\n  })\n  return type\n}\nfunction areInOrder() {\n  var numbers = toArray(arguments)\n  for (var i = 1; i < numbers.length; i += 1) {\n    if (numbers[i - 1] > numbers[i]) {\n      return false\n    }\n  }\n  return true\n}\n/**\n * Handles the 'deliveryType' property to distinguish between supported values ('cache', 'navigational-prefetch'),\n * undefined (unsupported in some browsers), and other cases ('other' for unknown or unrecognized values).\n * see: https://developer.mozilla.org/en-US/docs/Web/API/PerformanceResourceTiming/deliveryType\n */\nexport function computeResourceEntryDeliveryType(entry) {\n  return entry.deliveryType === '' ? 'other' : entry.deliveryType\n}\n/**\n * The 'nextHopProtocol' is an empty string for cross-origin resources without CORS headers,\n * meaning the protocol is unknown, and we shouldn't report it.\n * https://developer.mozilla.org/en-US/docs/Web/API/PerformanceResourceTiming/nextHopProtocol#cross-origin_resources\n */\nexport function computeResourceEntryProtocol(entry) {\n  return entry.nextHopProtocol === '' ? undefined : entry.nextHopProtocol\n}\n\nexport function isResourceEntryRequestType(entry) {\n  return (\n    entry.initiatorType === 'xmlhttprequest' || entry.initiatorType === 'fetch'\n  )\n}\nvar HAS_MULTI_BYTES_CHARACTERS = /[^\\u0000-\\u007F]/\nexport function getStrSize(candidate) {\n  if (!HAS_MULTI_BYTES_CHARACTERS.test(candidate)) {\n    return candidate.length\n  }\n\n  if (window.TextEncoder !== undefined) {\n    return new TextEncoder().encode(candidate).length\n  }\n\n  return new Blob([candidate]).size\n}\nexport function isResourceUrlLimit(name, limitSize) {\n  return getStrSize(name) > limitSize\n}\nexport function computeResourceEntryDuration(entry) {\n  // Safari duration is always 0 on timings blocked by cross origin policies.\n  if (entry.duration === 0 && entry.startTime < entry.responseEnd) {\n    return msToNs(entry.responseEnd - entry.startTime)\n  }\n\n  return msToNs(entry.duration)\n}\nexport function is304(entry) {\n  if (\n    entry.encodedBodySize > 0 &&\n    entry.transferSize > 0 &&\n    entry.transferSize < entry.encodedBodySize\n  ) {\n    return true\n  }\n\n  // unknown\n  return null\n}\nexport function isCacheHit(entry) {\n  // if we transferred bytes, it must not be a cache hit\n  // (will return false for 304 Not Modified)\n  if (entry.transferSize > 0) return false\n\n  // if the body size is non-zero, it must mean this is a\n  // ResourceTiming2 browser, this was same-origin or TAO,\n  // and transferSize was 0, so it was in the cache\n  if (entry.decodedBodySize > 0) return true\n\n  // fall back to duration checking (non-RT2 or cross-origin)\n  return entry.duration < 30\n}\n//  interface PerformanceResourceDetails {\n//   redirect?: PerformanceResourceDetailsElement\n//   dns?: PerformanceResourceDetailsElement\n//   connect?: PerformanceResourceDetailsElement\n//   ssl?: PerformanceResourceDetailsElement\n//   firstByte: PerformanceResourceDetailsElement\n//   download: PerformanceResourceDetailsElement\n//   fmp:\n// }\n// page_fmp\tfloat\t\t首屏时间(用于衡量用户什么时候看到页面的主要内容)，跟FCP的时长非常接近，这里我们就用FCP的时间作为首屏时间\tfirstPaintContentEnd - firstPaintContentStart\n// page_fpt\tfloat\t\t首次渲染时间，即白屏时间(从请求开始到浏览器开始解析第一批HTML文档字节的时间差。)\tresponseEnd - fetchStart\n// page_tti\tfloat\t\t首次可交互时间(浏览器完成所有HTML解析并且完成DOM构建，此时浏览器开始加载资源。)\tdomInteractive - fetchStart\n// page_firstbyte\tfloat\t\t首包时间\tresponseStart - domainLookupStart\n// page_dom_ready\tfloat\t\tDOM Ready时间(如果页面有同步执行的JS，则同步JS执行时间=ready-tti。)\tdomContentLoadEventEnd - fetchStart\n// page_load\tfloat\t\t页面完全加载时间(load=首次渲染时间+DOM解析耗时+同步JS执行+资源加载耗时。)\tloadEventStart - fetchStart\n// page_dns\tfloat\t\tdns解析时间\tdomainLookupEnd - domainLookupStart\n// page_tcp\tfloat\t\ttcp连接时间\tconnectEnd - connectStart\n// page_ssl\tfloat\t\tssl安全连接时间(仅适用于https)\tconnectEnd - secureConnectionStart\n// page_ttfb\tfloat\t\t请求响应耗时\tresponseStart - requestStart\n// page_trans\tfloat\t\t内容传输时间\tresponseEnd - responseStart\n// page_dom\tfloat\t\tDOM解析耗时\tdomInteractive - responseEnd\n// page_resource_load_time\tfloat\t\t资源加载时间\tloadEventStart - domContentLoadedEventEnd\n\n//  navigationStart：当前浏览器窗口的前一个网页关闭，发生unload事件时的Unix毫秒时间戳。如果没有前一个网页，则等于fetchStart属性。\n\n// ·   unloadEventStart：如果前一个网页与当前网页属于同一个域名，则返回前一个网页的unload事件发生时的Unix毫秒时间戳。如果没有前一个网页，或者之前的网页跳转不是在同一个域名内，则返回值为0。\n\n// ·   unloadEventEnd：如果前一个网页与当前网页属于同一个域名，则返回前一个网页unload事件的回调函数结束时的Unix毫秒时间戳。如果没有前一个网页，或者之前的网页跳转不是在同一个域名内，则返回值为0。\n\n// ·   redirectStart：返回第一个HTTP跳转开始时的Unix毫秒时间戳。如果没有跳转，或者不是同一个域名内部的跳转，则返回值为0。\n\n// ·   redirectEnd：返回最后一个HTTP跳转结束时（即跳转回应的最后一个字节接受完成时）的Unix毫秒时间戳。如果没有跳转，或者不是同一个域名内部的跳转，则返回值为0。\n\n// ·   fetchStart：返回浏览器准备使用HTTP请求读取文档时的Unix毫秒时间戳。该事件在网页查询本地缓存之前发生。\n\n// ·   domainLookupStart：返回域名查询开始时的Unix毫秒时间戳。如果使用持久连接，或者信息是从本地缓存获取的，则返回值等同于fetchStart属性的值。\n\n// ·   domainLookupEnd：返回域名查询结束时的Unix毫秒时间戳。如果使用持久连接，或者信息是从本地缓存获取的，则返回值等同于fetchStart属性的值。\n\n// ·   connectStart：返回HTTP请求开始向服务器发送时的Unix毫秒时间戳。如果使用持久连接（persistent connection），则返回值等同于fetchStart属性的值。\n\n// ·   connectEnd：返回浏览器与服务器之间的连接建立时的Unix毫秒时间戳。如果建立的是持久连接，则返回值等同于fetchStart属性的值。连接建立指的是所有握手和认证过程全部结束。\n\n// ·   secureConnectionStart：返回浏览器与服务器开始安全链接的握手时的Unix毫秒时间戳。如果当前网页不要求安全连接，则返回0。\n\n// ·   requestStart：返回浏览器向服务器发出HTTP请求时（或开始读取本地缓存时）的Unix毫秒时间戳。\n\n// ·   responseStart：返回浏览器从服务器收到（或从本地缓存读取）第一个字节时的Unix毫秒时间戳。\n\n// ·   responseEnd：返回浏览器从服务器收到（或从本地缓存读取）最后一个字节时（如果在此之前HTTP连接已经关闭，则返回关闭时）的Unix毫秒时间戳。\n\n// ·   domLoading：返回当前网页DOM结构开始解析时（即Document.readyState属性变为“loading”、相应的readystatechange事件触发时）的Unix毫秒时间戳。\n\n// ·   domInteractive：返回当前网页DOM结构结束解析、开始加载内嵌资源时（即Document.readyState属性变为“interactive”、相应的readystatechange事件触发时）的Unix毫秒时间戳。\n\n// ·   domContentLoadedEventStart：返回当前网页DOMContentLoaded事件发生时（即DOM结构解析完毕、所有脚本开始运行时）的Unix毫秒时间戳。\n\n// ·   domContentLoadedEventEnd：返回当前网页所有需要执行的脚本执行完成时的Unix毫秒时间戳。\n\n// ·   domComplete：返回当前网页DOM结构生成时（即Document.readyState属性变为“complete”，以及相应的readystatechange事件发生时）的Unix毫秒时间戳。\n\n// ·   loadEventStart：返回当前网页load事件的回调函数开始时的Unix毫秒时间戳。如果该事件还没有发生，返回0。\n\n// ·   loadEventEnd：返回当前网页load事件的回调函数运行结束时的Unix毫秒时间戳。如果该事件还没有发生，返回0\nexport function computePerformanceResourceDetails(entry) {\n  if (!hasValidResourceEntryTimings(entry)) {\n    return undefined\n  }\n\n  var startTime = entry.startTime,\n    fetchStart = entry.fetchStart,\n    redirectStart = entry.redirectStart,\n    redirectEnd = entry.redirectEnd,\n    domainLookupStart = entry.domainLookupStart,\n    domainLookupEnd = entry.domainLookupEnd,\n    connectStart = entry.connectStart,\n    secureConnectionStart = entry.secureConnectionStart,\n    connectEnd = entry.connectEnd,\n    requestStart = entry.requestStart,\n    responseStart = entry.responseStart,\n    responseEnd = entry.responseEnd\n  var details = {\n    firstbyte: msToNs(responseStart - requestStart),\n    trans: msToNs(responseEnd - responseStart),\n    downloadTime: formatTiming(startTime, responseStart, responseEnd),\n    firstByteTime: formatTiming(startTime, requestStart, responseStart)\n  }\n  if (responseStart > 0 && responseStart <= preferredNow()) {\n    details.ttfb = msToNs(responseStart - requestStart)\n  }\n  // Make sure a connection occurred\n  if (connectEnd !== fetchStart) {\n    details.tcp = msToNs(connectEnd - connectStart)\n    details.connectTime = formatTiming(startTime, connectStart, connectEnd)\n    // Make sure a secure connection occurred\n    if (areInOrder(connectStart, secureConnectionStart, connectEnd)) {\n      details.ssl = msToNs(connectEnd - secureConnectionStart)\n      details.sslTime = formatTiming(\n        startTime,\n        secureConnectionStart,\n        connectEnd\n      )\n    }\n  }\n\n  // Make sure a domain lookup occurred\n  if (domainLookupEnd !== fetchStart) {\n    details.dns = msToNs(domainLookupEnd - domainLookupStart)\n    details.dnsTime = formatTiming(\n      startTime,\n      domainLookupStart,\n      domainLookupEnd\n    )\n  }\n\n  if (hasRedirection(entry)) {\n    details.redirect = msToNs(redirectEnd - redirectStart)\n    details.redirectTime = formatTiming(startTime, redirectStart, redirectEnd)\n  }\n  // renderBlockstatus\n  if (entry.renderBlockingStatus) {\n    details.renderBlockingStatus = entry.renderBlockingStatus\n  }\n  return details\n}\nexport function hasValidResourceEntryDuration(entry) {\n  return entry.duration >= 0\n}\nexport function hasValidResourceEntryTimings(entry) {\n  var areCommonTimingsInOrder = areInOrder(\n    entry.startTime,\n    entry.fetchStart,\n    entry.domainLookupStart,\n    entry.domainLookupEnd,\n    entry.connectStart,\n    entry.connectEnd,\n    entry.requestStart,\n    entry.responseStart,\n    entry.responseEnd\n  )\n  var areRedirectionTimingsInOrder = hasRedirection(entry)\n    ? areInOrder(\n        entry.startTime,\n        entry.redirectStart,\n        entry.redirectEnd,\n        entry.fetchStart\n      )\n    : true\n  return areCommonTimingsInOrder && areRedirectionTimingsInOrder\n}\n\nfunction hasRedirection(entry) {\n  return entry.redirectEnd > entry.startTime\n}\n\nfunction formatTiming(origin, start, end) {\n  return {\n    duration: msToNs(end - start),\n    start: msToNs(start - origin)\n  }\n}\n\nexport function computeResourceEntrySize(entry) {\n  // Make sure a request actually occurred\n  if (entry.startTime < entry.responseStart) {\n    return {\n      size: entry.decodedBodySize,\n      encodedBodySize: entry.encodedBodySize,\n      decodedBodySize: entry.decodedBodySize,\n      transferSize: entry.transferSize\n    }\n    // return {\n    //   size: entry.decodedBodySize,\n    //   encodeSize:\n    //     Number.MAX_SAFE_INTEGER < entry.encodedBodySize\n    //       ? 0\n    //       : entry.encodedBodySize // max safe interger\n    // }\n  }\n  return {\n    size: undefined,\n    encodedBodySize: undefined,\n    decodedBodySize: undefined,\n    transferSize: undefined\n  }\n}\n\nexport function isAllowedRequestUrl(configuration, url) {\n  return url && !isIntakeRequest(url, configuration)\n}\n\nvar DATA_URL_REGEX = /data:(.+)?(;base64)?,/g\nexport var MAX_ATTRIBUTE_VALUE_CHAR_LENGTH = 24_000\nexport function isLongDataUrl(url) {\n  if (url.length <= MAX_ATTRIBUTE_VALUE_CHAR_LENGTH) {\n    return false\n  } else if (url.substring(0, 5) === 'data:') {\n    // Avoid String.match RangeError: Maximum call stack size exceeded\n    url = url.substring(0, MAX_ATTRIBUTE_VALUE_CHAR_LENGTH)\n    return true\n  }\n  return false\n}\n\nexport function sanitizeDataUrl(url) {\n  return url.match(DATA_URL_REGEX)[0] + '[...]'\n}\n","import {\n  addEventListeners,\n  dateNow,\n  DOM_EVENT,\n  relativeNow\n} from '@cloudcare/browser-core'\n/**\n * first-input timing entry polyfill based on\n * https://github.com/GoogleChrome/web-vitals/blob/master/src/lib/polyfills/firstInputPolyfill.ts\n */\nexport function retrieveFirstInputTiming(configuration, callback) {\n  var startTimeStamp = dateNow()\n  var timingSent = false\n\n  var _addEventListeners = addEventListeners(\n    window,\n    [\n      DOM_EVENT.CLICK,\n      DOM_EVENT.MOUSE_DOWN,\n      DOM_EVENT.KEY_DOWN,\n      DOM_EVENT.TOUCH_START,\n      DOM_EVENT.POINTER_DOWN\n    ],\n    function (evt) {\n      // Only count cancelable events, which should trigger behavior important to the user.\n      if (!evt.cancelable) {\n        return\n      }\n\n      // This timing will be used to compute the \"first Input delay\", which is the delta between\n      // when the system received the event (e.g. evt.timeStamp) and when it could run the callback\n      // (e.g. performance.now()).\n      var timing = {\n        entryType: 'first-input',\n        processingStart: relativeNow(),\n        processingEnd: relativeNow(),\n        startTime: evt.timeStamp,\n        duration: 0, // arbitrary value to avoid nullable duration and simplify INP logic\n        name: '',\n        cancelable: false,\n        target: null,\n        toJSON: function () {\n          return {}\n        }\n      }\n\n      if (evt.type === DOM_EVENT.POINTER_DOWN) {\n        sendTimingIfPointerIsNotCancelled(timing)\n      } else {\n        sendTiming(timing)\n      }\n    },\n    { passive: true, capture: true }\n  )\n  var removeEventListeners = _addEventListeners.stop\n  return { stop: removeEventListeners }\n\n  /**\n   * Pointer events are a special case, because they can trigger main or compositor thread behavior.\n   * We differentiate these cases based on whether or not we see a pointercancel event, which are\n   * fired when we scroll. If we're scrolling we don't need to report input delay since FID excludes\n   * scrolling and pinch/zooming.\n   */\n  function sendTimingIfPointerIsNotCancelled(timing) {\n    addEventListeners(\n      window,\n      [DOM_EVENT.POINTER_UP, DOM_EVENT.POINTER_CANCEL],\n      function (event) {\n        if (event.type === DOM_EVENT.POINTER_UP) {\n          sendTiming(timing)\n        }\n      },\n      { once: true }\n    )\n  }\n\n  function sendTiming(timing) {\n    if (!timingSent) {\n      timingSent = true\n      removeEventListeners()\n      // In some cases the recorded delay is clearly wrong, e.g. it's negative or it's larger than\n      // the time between now and when the page was loaded.\n      // - https://github.com/GoogleChromeLabs/first-input-delay/issues/4\n      // - https://github.com/GoogleChromeLabs/first-input-delay/issues/6\n      // - https://github.com/GoogleChromeLabs/first-input-delay/issues/7\n      var delay = timing.processingStart - timing.startTime\n      if (delay >= 0 && delay < dateNow() - startTimeStamp) {\n        callback(timing)\n      }\n    }\n  }\n}\n","import {\n  addEventListener,\n  Observable,\n  setTimeout,\n  clearTimeout,\n  monitor,\n  includes\n} from '@cloudcare/browser-core'\nimport {\n  isAllowedRequestUrl,\n  hasValidResourceEntryDuration\n} from './rumEventsCollection/resource/resourceUtils'\nimport { retrieveFirstInputTiming } from './firstInputPolyfill'\n// We want to use a real enum (i.e. not a const enum) here, to be able to check whether an arbitrary\n// string is an expected performance entry\n// eslint-disable-next-line no-restricted-syntax\nexport var RumPerformanceEntryType = {\n  EVENT: 'event',\n  FIRST_INPUT: 'first-input',\n  LARGEST_CONTENTFUL_PAINT: 'largest-contentful-paint',\n  LAYOUT_SHIFT: 'layout-shift',\n  LONG_TASK: 'longtask',\n  LONG_ANIMATION_FRAME: 'long-animation-frame',\n  NAVIGATION: 'navigation',\n  PAINT: 'paint',\n  RESOURCE: 'resource',\n  VISIBILITY_STATE: 'visibility-state'\n}\n\nexport function createPerformanceObservable(configuration, options) {\n  return new Observable(function (observable) {\n    if (!window.PerformanceObserver) {\n      return\n    }\n    var handlePerformanceEntries = function (entries) {\n      var rumPerformanceEntries = filterRumPerformanceEntries(\n        configuration,\n        entries\n      )\n      if (rumPerformanceEntries.length > 0) {\n        observable.notify(rumPerformanceEntries)\n      }\n    }\n\n    var timeoutId\n    var isObserverInitializing = true\n\n    const observer = new PerformanceObserver(\n      monitor(function (entries) {\n        // In Safari the performance observer callback is synchronous.\n        // Because the buffered performance entry list can be quite large we delay the computation to prevent the SDK from blocking the main thread on init\n        if (isObserverInitializing) {\n          timeoutId = setTimeout(function () {\n            handlePerformanceEntries(entries.getEntries())\n          })\n        } else {\n          handlePerformanceEntries(entries.getEntries())\n        }\n      })\n    )\n\n    try {\n      observer.observe(options)\n    } catch {\n      // Some old browser versions (<= chrome 74 ) don't support the PerformanceObserver type and buffered options\n      // In these cases, fallback to getEntriesByType and PerformanceObserver with entryTypes\n      // TODO: remove this fallback in the next major version\n      var fallbackSupportedEntryTypes = [\n        RumPerformanceEntryType.RESOURCE,\n        RumPerformanceEntryType.NAVIGATION,\n        RumPerformanceEntryType.LONG_TASK,\n        RumPerformanceEntryType.PAINT\n      ]\n      if (includes(fallbackSupportedEntryTypes, options.type)) {\n        if (options.buffered) {\n          timeoutId = setTimeout(function () {\n            handlePerformanceEntries(performance.getEntriesByType(options.type))\n          })\n        }\n        try {\n          observer.observe({ entryTypes: [options.type] })\n        } catch {\n          // Old versions of Safari are throwing \"entryTypes contained only unsupported types\"\n          // errors when observing only unsupported entry types.\n          //\n          // We could use `supportPerformanceTimingEvent` to make sure we don't invoke\n          // `observer.observe` with an unsupported entry type, but Safari 11 and 12 don't support\n          // `Performance.supportedEntryTypes`, so doing so would lose support for these versions\n          // even if they do support the entry type.\n          return\n        }\n      }\n    }\n    isObserverInitializing = false\n\n    manageResourceTimingBufferFull(configuration)\n    var stopFirstInputTiming\n    if (\n      !supportPerformanceTimingEvent(RumPerformanceEntryType.FIRST_INPUT) &&\n      options.type === RumPerformanceEntryType.FIRST_INPUT\n    ) {\n      var _retrieveFirstInputTiming = retrieveFirstInputTiming(\n        configuration,\n        function (timing) {\n          handlePerformanceEntries([timing])\n        }\n      )\n      stopFirstInputTiming = _retrieveFirstInputTiming.stop\n    }\n    return function () {\n      observer.disconnect()\n      if (stopFirstInputTiming) {\n        stopFirstInputTiming()\n      }\n      clearTimeout(timeoutId)\n    }\n  })\n}\n\nvar resourceTimingBufferFullListener\nfunction manageResourceTimingBufferFull(configuration) {\n  if (\n    !resourceTimingBufferFullListener &&\n    supportPerformanceObject() &&\n    'addEventListener' in performance\n  ) {\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1559377\n    resourceTimingBufferFullListener = addEventListener(\n      performance,\n      'resourcetimingbufferfull',\n      function () {\n        performance.clearResourceTimings()\n      }\n    )\n  }\n  return function () {\n    resourceTimingBufferFullListener && resourceTimingBufferFullListener.stop()\n  }\n}\n\nfunction supportPerformanceObject() {\n  return window.performance !== undefined && 'getEntries' in performance\n}\n\nexport function supportPerformanceTimingEvent(entryType) {\n  return (\n    window.PerformanceObserver &&\n    PerformanceObserver.supportedEntryTypes !== undefined &&\n    PerformanceObserver.supportedEntryTypes.includes(entryType)\n  )\n}\n\nfunction filterRumPerformanceEntries(configuration, entries) {\n  return entries.filter(function (entry) {\n    return !isForbiddenResource(configuration, entry)\n  })\n}\n\nfunction isForbiddenResource(configuration, entry) {\n  return (\n    entry.entryType === RumPerformanceEntryType.RESOURCE &&\n    (!isAllowedRequestUrl(configuration, entry.name) ||\n      !hasValidResourceEntryDuration(entry))\n  )\n}\n","import { find, ONE_MINUTE } from '@cloudcare/browser-core'\nimport {\n  RumPerformanceEntryType,\n  createPerformanceObservable\n} from '../../performanceObservable'\nexport var TIMING_MAXIMUM_DELAY = 10 * ONE_MINUTE\nexport function trackFirstContentfulPaint(\n  configuration,\n  firstHidden,\n  callback\n) {\n  var performanceSubscription = createPerformanceObservable(configuration, {\n    type: RumPerformanceEntryType.PAINT,\n    buffered: true\n  }).subscribe(function (entries) {\n    var fcpEntry = find(entries, function (entry) {\n      return (\n        entry.entryType === RumPerformanceEntryType.PAINT &&\n        entry.name === 'first-contentful-paint' &&\n        entry.startTime < firstHidden.getTimeStamp() &&\n        entry.startTime < TIMING_MAXIMUM_DELAY\n      )\n    })\n    if (fcpEntry) {\n      callback(fcpEntry.startTime)\n    }\n  })\n  return { stop: performanceSubscription.unsubscribe }\n}\n","export var DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE =\r\n  'data-guance-action-name'\r\n\r\n/**\r\n * Stable attributes are attributes that are commonly used to identify parts of a UI (ex:\r\n * component). Those attribute values should not be generated randomly (hardcoded most of the time)\r\n * and stay the same across deploys. They are not necessarily unique across the document.\r\n */\r\nexport var STABLE_ATTRIBUTES = [\r\n  DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE,\r\n  // Common test attributes (list provided by google recorder)\r\n  'data-testid',\r\n  'data-test',\r\n  'data-qa',\r\n  'data-cy',\r\n  'data-test-id',\r\n  'data-qa-id',\r\n  'data-testing',\r\n  // FullStory decorator attributes:\r\n  'data-component',\r\n  'data-element',\r\n  'data-source-file'\r\n]\r\n","import { cssEscape } from '@cloudcare/browser-core'\nimport { STABLE_ATTRIBUTES } from './__constants'\n\n// Selectors to use if they target a single element on the whole document. Those selectors are\n// considered as \"stable\" and uniquely identify an element regardless of the page state. If we find\n// one, we should consider the selector \"complete\" and stop iterating over ancestors.\nvar GLOBALLY_UNIQUE_SELECTOR_GETTERS = [\n  getStableAttributeSelector,\n  getIDSelector\n]\n\n// Selectors to use if they target a single element among an element descendants. Those selectors\n// are more brittle than \"globally unique\" selectors and should be combined with ancestor selectors\n// to improve specificity.\nvar UNIQUE_AMONG_CHILDREN_SELECTOR_GETTERS = [\n  getStableAttributeSelector,\n  getClassSelector,\n  getTagNameSelector\n]\n\nexport function getSelectorFromElement(targetElement, actionNameAttribute) {\n  if (!isConnected(targetElement)) {\n    // We cannot compute a selector for a detached element, as we don't have access to all of its\n    // parents, and we cannot determine if it's unique in the document.\n    return\n  }\n  let targetElementSelector\n  let currentElement = targetElement\n  while (currentElement && currentElement.nodeName !== 'HTML') {\n    const globallyUniqueSelector = findSelector(\n      currentElement,\n      GLOBALLY_UNIQUE_SELECTOR_GETTERS,\n      isSelectorUniqueGlobally,\n      actionNameAttribute,\n      targetElementSelector\n    )\n    if (globallyUniqueSelector) {\n      return globallyUniqueSelector\n    }\n    const uniqueSelectorAmongChildren = findSelector(\n      currentElement,\n      UNIQUE_AMONG_CHILDREN_SELECTOR_GETTERS,\n      isSelectorUniqueAmongSiblings,\n      actionNameAttribute,\n      targetElementSelector\n    )\n    targetElementSelector =\n      uniqueSelectorAmongChildren ||\n      combineSelector(\n        getPositionSelector(currentElement),\n        targetElementSelector\n      )\n\n    currentElement = currentElement.parentElement\n  }\n  //   while (element && element.nodeName !== 'HTML') {\n  //     var globallyUniqueSelector = findSelector(\n  //       element,\n  //       GLOBALLY_UNIQUE_SELECTOR_GETTERS,\n  //       isSelectorUniqueGlobally,\n  //       actionNameAttribute,\n  //       targetElementSelector\n  //     )\n  //     if (globallyUniqueSelector) {\n  //       return globallyUniqueSelector\n  //     }\n\n  //     var uniqueSelectorAmongChildren = findSelector(\n  //       element,\n  //       UNIQUE_AMONG_CHILDREN_SELECTOR_GETTERS,\n  //       isSelectorUniqueAmongSiblings,\n  //       actionNameAttribute,\n  //       targetElementSelector\n  //     )\n  //     targetElementSelector =\n  //       uniqueSelectorAmongChildren ||\n  //       combineSelector(getPositionSelector(element), targetElementSelector)\n\n  //     element = element.parentElement\n  //   }\n\n  return targetElementSelector\n}\nfunction isGeneratedValue(value) {\n  // To compute the \"URL path group\", the backend replaces every URL path parts as a question mark\n  // if it thinks the part is an identifier. The condition it uses is to checks whether a digit is\n  // present.\n  //\n  // Here, we use the same strategy: if a the value contains a digit, we consider it generated. This\n  // strategy might be a bit naive and fail in some cases, but there are many fallbacks to generate\n  // CSS selectors so it should be fine most of the time. We might want to allow customers to\n  // provide their own `isGeneratedValue` at some point.\n  return /[0-9]/.test(value)\n}\nfunction getIDSelector(element) {\n  if (element.id && !isGeneratedValue(element.id)) {\n    return '#' + cssEscape(element.id)\n  }\n}\n\nfunction getClassSelector(element) {\n  if (element.tagName === 'BODY') {\n    return\n  }\n  if (element.classList.length > 0) {\n    for (var i = 0; i < element.classList.length; i += 1) {\n      var className = element.classList[i]\n      if (isGeneratedValue(className)) {\n        continue\n      }\n\n      return cssEscape(element.tagName) + '.' + cssEscape(className)\n    }\n  }\n}\nfunction getTagNameSelector(element) {\n  return cssEscape(element.tagName)\n}\nfunction getStableAttributeSelector(element, actionNameAttribute) {\n  if (actionNameAttribute) {\n    var selector = getAttributeSelector(actionNameAttribute)\n    if (selector) {\n      return selector\n    }\n  }\n\n  for (var i = 0; i < STABLE_ATTRIBUTES.length; i++) {\n    var attributeName = STABLE_ATTRIBUTES[i]\n    var selector = getAttributeSelector(attributeName)\n    if (selector) {\n      return selector\n    }\n  }\n\n  function getAttributeSelector(attributeName) {\n    if (element.hasAttribute(attributeName)) {\n      return (\n        cssEscape(element.tagName) +\n        '[' +\n        attributeName +\n        '=\"' +\n        cssEscape(element.getAttribute(attributeName)) +\n        '\"]'\n      )\n    }\n  }\n}\n\nfunction getPositionSelector(element) {\n  var sibling = element.parentElement && element.parentElement.firstElementChild\n  var elementIndex = 1\n\n  while (sibling && sibling !== element) {\n    if (sibling.tagName === element.tagName) {\n      elementIndex += 1\n    }\n    sibling = sibling.nextElementSibling\n  }\n  var tagName = cssEscape(element.tagName)\n  // 伪元素需要做特殊处理，没有nth-of-type选择器\n  if (/^::/.test(tagName)) {\n    return tagName\n  }\n  return tagName + ':nth-of-type(' + elementIndex + ')'\n}\n\nfunction findSelector(\n  element,\n  selectorGetters,\n  predicate,\n  actionNameAttribute,\n  childSelector\n) {\n  for (var i = 0; i < selectorGetters.length; i++) {\n    var selectorGetter = selectorGetters[i]\n    var elementSelector = selectorGetter(element, actionNameAttribute)\n    if (!elementSelector) {\n      continue\n    }\n    if (predicate(element, elementSelector, childSelector)) {\n      return combineSelector(elementSelector, childSelector)\n    }\n  }\n}\n\nfunction isSelectorUniqueGlobally(element, elementSelector, childSelector) {\n  return (\n    element.ownerDocument.querySelectorAll(\n      combineSelector(elementSelector, childSelector)\n    ).length === 1\n  )\n}\n/**\n * Check whether the selector is unique among the element siblings. In other words, it returns true\n * if \"ELEMENT_PARENT > SELECTOR\" returns a single element.\n *\n * The result will be less accurate on browsers that don't support :scope (i. e. IE): it will check\n * for any element matching the selector contained in the parent (in other words,\n * \"ELEMENT_PARENT SELECTOR\" returns a single element), regardless of whether the selector is a\n * direct descendent of the element parent. This should not impact results too much: if it\n * inaccurately returns false, we'll just fall back to another strategy.\n */\nfunction isSelectorUniqueAmongSiblings(\n  currentElement,\n  currentElementSelector,\n  childSelector\n) {\n  let isSiblingMatching\n\n  if (childSelector === undefined) {\n    // If the child selector is undefined (meaning `currentElement` is the target element, not one\n    // of its ancestor), we need to use `matches` to check if the sibling is matching the selector,\n    // as `querySelector` only returns a descendant of the element.\n    isSiblingMatching = (sibling) => sibling.matches(currentElementSelector)\n  } else {\n    const scopedSelector = supportScopeSelector()\n      ? combineSelector(`${currentElementSelector}:scope`, childSelector)\n      : combineSelector(currentElementSelector, childSelector)\n    isSiblingMatching = (sibling) =>\n      sibling.querySelector(scopedSelector) !== null\n  }\n\n  const parent = currentElement.parentElement\n  let sibling = parent.firstElementChild\n  while (sibling) {\n    if (sibling !== currentElement && isSiblingMatching(sibling)) {\n      return false\n    }\n    sibling = sibling.nextElementSibling\n  }\n\n  return true\n}\nfunction combineSelector(parent, child) {\n  return child ? parent + '>' + child : parent\n}\nvar supportScopeSelectorCache\nexport function supportScopeSelector() {\n  if (supportScopeSelectorCache === undefined) {\n    try {\n      document.querySelector(':scope')\n      supportScopeSelectorCache = true\n    } catch {\n      supportScopeSelectorCache = false\n    }\n  }\n  return supportScopeSelectorCache\n}\n\n/**\n * Polyfill-utility for the `isConnected` property not supported in IE11\n */\nfunction isConnected(element) {\n  if (\n    'isConnected' in element\n    // cast is to make sure `element` is not inferred as `never` after the check\n  ) {\n    return element.isConnected\n  }\n  return element.ownerDocument.documentElement.contains(element)\n}\n","import { elapsed, find, isElementNode } from '@cloudcare/browser-core'\nimport { getSelectorFromElement } from '../actions/getSelectorsFromElement'\nimport {\n  RumPerformanceEntryType,\n  createPerformanceObservable\n} from '../../performanceObservable'\n/**\n * Track the first input occurring during the initial View to return:\n * - First Input Delay\n * - First Input Time\n * Callback is called at most one time.\n * Documentation: https://web.dev/fid/\n * Reference implementation: https://github.com/GoogleChrome/web-vitals/blob/master/src/getFID.ts\n */\nexport function trackFirstInput(configuration, firstHidden, callback) {\n  const performanceFirstInputSubscription = createPerformanceObservable(\n    configuration,\n    {\n      type: RumPerformanceEntryType.FIRST_INPUT,\n      buffered: true\n    }\n  ).subscribe(function (entries) {\n    var firstInputEntry = find(entries, function (entry) {\n      return (\n        entry.entryType === RumPerformanceEntryType.FIRST_INPUT &&\n        entry.startTime < firstHidden.getTimeStamp()\n      )\n    })\n    if (firstInputEntry) {\n      var firstInputDelay = elapsed(\n        firstInputEntry.startTime,\n        firstInputEntry.processingStart\n      )\n      var firstInputTargetSelector\n      if (firstInputEntry.target && isElementNode(firstInputEntry.target)) {\n        firstInputTargetSelector = getSelectorFromElement(\n          firstInputEntry.target,\n          configuration.actionNameAttribute\n        )\n      }\n      callback({\n        // Ensure firstInputDelay to be positive, see\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=1185815\n        delay: firstInputDelay >= 0 ? firstInputDelay : 0,\n        time: firstInputEntry.startTime,\n        targetSelector: firstInputTargetSelector\n      })\n    }\n  })\n  return {\n    stop: function () {\n      performanceFirstInputSubscription.unsubscribe()\n    }\n  }\n}\n","import { getRelativeTime, isNumber, assign } from '@cloudcare/browser-core'\nimport {\n  supportPerformanceTimingEvent,\n  RumPerformanceEntryType\n} from './performanceObservable'\n\nexport function getNavigationEntry() {\n  if (supportPerformanceTimingEvent(RumPerformanceEntryType.NAVIGATION)) {\n    var navigationEntry = performance.getEntriesByType(\n      RumPerformanceEntryType.NAVIGATION\n    )[0]\n    if (navigationEntry) {\n      return navigationEntry\n    }\n  }\n\n  var timings = computeTimingsFromDeprecatedPerformanceTiming()\n  var entry = assign(\n    {\n      entryType: RumPerformanceEntryType.NAVIGATION,\n      initiatorType: 'navigation',\n      name: window.location.href,\n      startTime: 0,\n      duration: timings.responseEnd,\n      decodedBodySize: 0,\n      encodedBodySize: 0,\n      transferSize: 0,\n      toJSON: function () {\n        return assign({}, entry, { toJSON: undefined })\n      }\n    },\n    timings\n  )\n  return entry\n}\n\nexport function computeTimingsFromDeprecatedPerformanceTiming() {\n  var result = {}\n  var timing = performance.timing\n\n  for (var key in timing) {\n    if (isNumber(timing[key])) {\n      var numberKey = key\n      var timingElement = timing[numberKey]\n      result[numberKey] =\n        timingElement === 0 ? 0 : getRelativeTime(timingElement)\n    }\n  }\n  return result\n}\n","import {\n  relativeNow,\n  setTimeout,\n  runOnReadyState,\n  clearTimeout\n} from '@cloudcare/browser-core'\n\nimport { getNavigationEntry } from '../../performanceUtils'\nexport function trackNavigationTimings(\n  configuration,\n  callback,\n  getNavigationEntryImpl\n) {\n  if (getNavigationEntryImpl === undefined) {\n    getNavigationEntryImpl = getNavigationEntry\n  }\n  return waitAfterLoadEvent(function () {\n    var entry = getNavigationEntryImpl()\n\n    if (!isIncompleteNavigation(entry)) {\n      callback(processNavigationEntry(entry))\n    }\n  })\n}\n\nfunction processNavigationEntry(entry) {\n  return {\n    fetchStart: entry.fetchStart,\n    responseEnd: entry.responseEnd,\n    domComplete: entry.domComplete,\n    domContentLoaded: entry.domContentLoadedEventEnd,\n    domInteractive: entry.domInteractive,\n    loadEvent: entry.loadEventEnd,\n    loadEventEnd: entry.loadEventEnd,\n    loadEventStart: entry.loadEventStart,\n    domContentLoadedEventEnd: entry.domContentLoadedEventEnd,\n    domContentLoadedEventStart: entry.domContentLoadedEventStart,\n    // In some cases the value reported is negative or is larger\n    // than the current page time. Ignore these cases:\n    // https://github.com/GoogleChrome/web-vitals/issues/137\n    // https://github.com/GoogleChrome/web-vitals/issues/162\n    firstByte:\n      entry.responseStart >= 0 && entry.responseStart <= relativeNow()\n        ? entry.responseStart\n        : undefined\n  }\n}\n\nfunction isIncompleteNavigation(entry) {\n  return entry.loadEventEnd <= 0\n}\n\nfunction waitAfterLoadEvent(callback) {\n  var timeoutId\n  var _runOnReadyState = runOnReadyState('complete', function () {\n    // Invoke the callback a bit after the actual load event, so the \"loadEventEnd\" timing is accurate\n    timeoutId = setTimeout(function () {\n      callback()\n    })\n  })\n  return {\n    stop: function () {\n      _runOnReadyState.stop()\n      clearTimeout(timeoutId)\n    }\n  }\n}\n","import {\n  addEventListeners,\n  DOM_EVENT,\n  findLast,\n  LifeCycleEventType,\n  ONE_MINUTE\n} from '@cloudcare/browser-core'\nimport { getSelectorFromElement } from '../actions/getSelectorsFromElement'\nimport {\n  RumPerformanceEntryType,\n  createPerformanceObservable\n} from '../../performanceObservable'\n/**\n * Track the largest contentful paint (LCP) occurring during the initial View.  This can yield\n * multiple values, only the most recent one should be used.\n * Documentation: https://web.dev/lcp/\n * Reference implementation: https://github.com/GoogleChrome/web-vitals/blob/master/src/getLCP.ts\n */\n// It happens in some cases like sleep mode or some browser implementations\nexport var LCP_MAXIMUM_DELAY = 10 * ONE_MINUTE\nexport function trackLargestContentfulPaint(\n  configuration,\n  firstHidden,\n  eventTarget,\n  callback\n) {\n  // Ignore entries that come after the first user interaction.  According to the documentation, the\n  // browser should not send largest-contentful-paint entries after a user interact with the page,\n  // but the web-vitals reference implementation uses this as a safeguard.\n  var firstInteractionTimestamp = Infinity\n  var _addEventListeners = addEventListeners(\n    eventTarget,\n    [DOM_EVENT.POINTER_DOWN, DOM_EVENT.KEY_DOWN],\n    function (event) {\n      firstInteractionTimestamp = event.timeStamp\n    },\n    { capture: true, once: true }\n  )\n  var stopEventListener = _addEventListeners.stop\n  var biggestLcpSize = 0\n  var performanceLcpSubscription = createPerformanceObservable(configuration, {\n    type: RumPerformanceEntryType.LARGEST_CONTENTFUL_PAINT,\n    buffered: true\n  }).subscribe(function (entries) {\n    var lcpEntry = findLast(entries, function (entry) {\n      return (\n        entry.entryType === RumPerformanceEntryType.LARGEST_CONTENTFUL_PAINT &&\n        entry.startTime < firstInteractionTimestamp &&\n        entry.startTime < firstHidden.getTimeStamp() &&\n        entry.startTime < LCP_MAXIMUM_DELAY &&\n        // Ensure to get the LCP entry with the biggest size, see\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=1516655\n        entry.size > biggestLcpSize\n      )\n    })\n    if (lcpEntry) {\n      var lcpTargetSelector\n      if (lcpEntry.element) {\n        lcpTargetSelector = getSelectorFromElement(\n          lcpEntry.element,\n          configuration.actionNameAttribute\n        )\n      }\n      callback({\n        value: lcpEntry.startTime,\n        targetSelector: lcpTargetSelector\n      })\n      biggestLcpSize = lcpEntry.size\n    }\n  })\n\n  return {\n    stop: function () {\n      stopEventListener()\n      performanceLcpSubscription.unsubscribe()\n    }\n  }\n}\n","import { DOM_EVENT, addEventListeners, noop } from '@cloudcare/browser-core'\nimport {\n  supportPerformanceTimingEvent,\n  RumPerformanceEntryType\n} from '../../../domain/performanceObservable.js'\nexport function trackFirstHidden(eventTarget) {\n  if (typeof eventTarget === 'undefined') {\n    eventTarget = window\n  }\n  if (document.visibilityState === 'hidden') {\n    return { getTimeStamp: () => 0, stop: noop }\n  }\n  if (supportPerformanceTimingEvent(RumPerformanceEntryType.VISIBILITY_STATE)) {\n    const firstHiddenEntry = performance\n      .getEntriesByType(RumPerformanceEntryType.VISIBILITY_STATE)\n      .find((entry) => entry.name === 'hidden')\n    if (firstHiddenEntry) {\n      return { getTimeStamp: () => firstHiddenEntry.startTime, stop: noop }\n    }\n  }\n  let timeStamp = Infinity\n\n  const { stop } = addEventListeners(\n    eventTarget,\n    [DOM_EVENT.PAGE_HIDE, DOM_EVENT.VISIBILITY_CHANGE],\n    (event) => {\n      if (\n        event.type === DOM_EVENT.PAGE_HIDE ||\n        document.visibilityState === 'hidden'\n      ) {\n        timeStamp = event.timeStamp\n        stop()\n      }\n    },\n    { capture: true }\n  )\n\n  return {\n    getTimeStamp: function () {\n      return timeStamp\n    },\n    stop: function () {\n      stop()\n    }\n  }\n}\n","import { ONE_MINUTE } from '@cloudcare/browser-core'\nimport { trackFirstContentfulPaint } from './trackFirstContentfulPaint'\nimport { trackFirstInput } from './trackFirstInput'\nimport { trackNavigationTimings } from './trackNavigationTimings'\nimport { trackLargestContentfulPaint } from './trackLargestContentfulPaint'\nimport { trackFirstHidden } from './trackFirstHidden'\n\nexport var KEEP_TRACKING_TIMINGS_AFTER_VIEW_DELAY = 5 * ONE_MINUTE\nexport function trackInitialViewMetrics(\n  configuration,\n  setLoadEvent,\n  scheduleViewUpdate\n) {\n  var initialViewMetrics = {}\n  var _trackNavigationTimings = trackNavigationTimings(\n    configuration,\n    function (navigationTimings) {\n      setLoadEvent(navigationTimings.loadEvent)\n      initialViewMetrics.navigationTimings = navigationTimings\n      scheduleViewUpdate()\n    }\n  )\n  var firstHidden = trackFirstHidden()\n  var stopNavigationTracking = _trackNavigationTimings.stop\n  var _trackFirstContentfulPaint = trackFirstContentfulPaint(\n    configuration,\n    firstHidden,\n    function (firstContentfulPaint) {\n      initialViewMetrics.firstContentfulPaint = firstContentfulPaint\n      scheduleViewUpdate()\n    }\n  )\n  var stopFCPTracking = _trackFirstContentfulPaint.stop\n  var _trackLargestContentfulPaint = trackLargestContentfulPaint(\n    configuration,\n    firstHidden,\n    window,\n    function (largestContentfulPaint) {\n      initialViewMetrics.largestContentfulPaint = largestContentfulPaint\n      scheduleViewUpdate()\n    }\n  )\n  var stopLCPTracking = _trackLargestContentfulPaint.stop\n  var _trackFirstInput = trackFirstInput(\n    configuration,\n    firstHidden,\n    function (firstInput) {\n      initialViewMetrics.firstInput = firstInput\n      scheduleViewUpdate()\n    }\n  )\n  var stopFIDTracking = _trackFirstInput.stop\n  function stop() {\n    stopNavigationTracking()\n    stopFCPTracking()\n    stopLCPTracking()\n    stopFIDTracking()\n    firstHidden.stop()\n  }\n\n  return {\n    stop: stop,\n    initialViewMetrics: initialViewMetrics\n  }\n}\n","import {\n  shallowClone,\n  elapsed,\n  UUID,\n  ONE_MINUTE,\n  throttle,\n  clocksNow,\n  clocksOrigin,\n  timeStampNow,\n  looksLikeRelativeTime,\n  ViewLoadingType,\n  LifeCycleEventType,\n  PageExitReason,\n  isHashAnAnchor,\n  getPathFromHash,\n  noop,\n  setInterval,\n  Observable,\n  clearInterval,\n  setTimeout,\n  isNullUndefinedDefaultValue,\n  createContextManager\n} from '@cloudcare/browser-core'\n\nimport { trackInitialViewMetrics } from './trackInitialViewTimings'\n// import { trackCommonViewMetrics } from './trackCommonViewMetrics'\n// import { trackViewEventCounts } from './trackViewEventCounts'\nexport var THROTTLE_VIEW_UPDATE_PERIOD = 3000\nexport var SESSION_KEEP_ALIVE_INTERVAL = 5 * ONE_MINUTE\nexport var KEEP_TRACKING_AFTER_VIEW_DELAY = 5 * ONE_MINUTE\nexport function trackViews(\n  location,\n  lifeCycle,\n  domMutationObservable,\n  configuration,\n  locationChangeObservable,\n  areViewsTrackedAutomatically,\n  initialViewOptions\n) {\n  var activeViews = new Set()\n  function startNewView(loadingType, startClocks, viewOptions) {\n    var newlyCreatedView = newView(\n      lifeCycle,\n      'domMutationObservable',\n      configuration,\n      location,\n      loadingType,\n      startClocks,\n      viewOptions\n    )\n    activeViews.add(newlyCreatedView)\n    newlyCreatedView.stopObservable.subscribe(function () {\n      activeViews.delete(newlyCreatedView)\n    })\n    return newlyCreatedView\n  }\n  var currentView = startNewView(\n    ViewLoadingType.INITIAL_LOAD,\n    clocksOrigin(),\n    initialViewOptions\n  )\n  startViewLifeCycle()\n  var locationChangeSubscription\n  if (areViewsTrackedAutomatically) {\n    locationChangeSubscription = renewViewOnLocationChange(\n      locationChangeObservable\n    )\n  }\n  function startViewLifeCycle() {\n    lifeCycle.subscribe(LifeCycleEventType.SESSION_RENEWED, function () {\n      currentView = startNewView(ViewLoadingType.ROUTE_CHANGE, undefined, {\n        name: currentView.name,\n        service: currentView.service,\n        version: currentView.version,\n        context: currentView.contextManager.getContext()\n      })\n    })\n\n    lifeCycle.subscribe(LifeCycleEventType.SESSION_EXPIRED, function () {\n      currentView.end({ sessionIsActive: false })\n    })\n    // // End the current view on page unload\n    // lifeCycle.subscribe(\n    //   LifeCycleEventType.PAGE_EXITED,\n    //   function (pageExitEvent) {\n    //     if (pageExitEvent.reason === PageExitReason.UNLOADING) {\n    //       currentView.end()\n    //     }\n    //   }\n    // )\n  }\n\n  function renewViewOnLocationChange(locationChangeObservable) {\n    return locationChangeObservable.subscribe(function (params) {\n      var oldLocation = params.oldLocation\n      var newLocation = params.newLocation\n      if (areDifferentLocation(oldLocation, newLocation)) {\n        currentView.end()\n        currentView = startNewView(ViewLoadingType.ROUTE_CHANGE)\n        return\n      }\n    })\n  }\n\n  return {\n    addTiming: function (name, time) {\n      if (typeof time === 'undefined') {\n        time = timeStampNow()\n      }\n      currentView.addTiming(name, time)\n    },\n    startView: function (options, startClocks) {\n      currentView.end({ endClocks: startClocks })\n      currentView = startNewView(\n        ViewLoadingType.ROUTE_CHANGE,\n        startClocks,\n        options\n      )\n    },\n    setViewContext: (context) => {\n      currentView.contextManager.setContext(context)\n    },\n    setViewContextProperty: (key, value) => {\n      currentView.contextManager.setContextProperty(key, value)\n    },\n    setViewName: (name) => {\n      currentView.setViewName(name)\n    },\n    getViewContext: () => currentView.contextManager.getContext(),\n    stop: function () {\n      if (locationChangeSubscription) {\n        locationChangeSubscription.unsubscribe()\n      }\n      currentView.end()\n      activeViews.forEach(function (view) {\n        view.stop()\n      })\n    }\n  }\n}\n\nfunction newView(\n  lifeCycle,\n  domMutationObservable,\n  configuration,\n  initialLocation,\n  loadingType,\n  startClocks,\n  viewOptions\n) {\n  // Setup initial values\n  if (startClocks === undefined) {\n    startClocks = clocksNow()\n  }\n  var id = UUID()\n  var stopObservable = new Observable()\n  var customTimings = {}\n  var documentVersion = 0\n  var endClocks\n  var location = shallowClone(initialLocation)\n  const contextManager = createContextManager()\n  var sessionIsActive = true\n  var name\n  var service\n  var version\n  var context\n  if (viewOptions) {\n    name = viewOptions.name\n    service = viewOptions.service\n    version = viewOptions.version\n    context = viewOptions.context\n  }\n  if (context) {\n    contextManager.setContext(context)\n  }\n  var viewCreatedEvent = {\n    id: id,\n    name: name,\n    startClocks: startClocks,\n    service: service,\n    version: version\n  }\n  lifeCycle.notify(LifeCycleEventType.BEFORE_VIEW_CREATED, viewCreatedEvent)\n  lifeCycle.notify(LifeCycleEventType.VIEW_CREATED, viewCreatedEvent)\n\n  // Update the view every time the measures are changing\n  var _scheduleViewUpdate = throttle(\n    triggerViewUpdate,\n    THROTTLE_VIEW_UPDATE_PERIOD,\n    {\n      leading: false\n    }\n  )\n  var throttled = _scheduleViewUpdate.throttled\n  var cancelScheduleViewUpdate = _scheduleViewUpdate.cancel\n\n  // var _trackCommonViewMetrics = trackCommonViewMetrics(\n  //   lifeCycle,\n  //   domMutationObservable,\n  //   configuration,\n  //   scheduleViewUpdate,\n  //   loadingType,\n  //   startClocks\n  // )\n  // var setLoadEvent = _trackCommonViewMetrics.setLoadEvent\n  // var stopCommonViewMetricsTracking = _trackCommonViewMetrics.stop\n  // var getCommonViewMetrics = _trackCommonViewMetrics.getCommonViewMetrics\n  // var stopINPTracking = _trackCommonViewMetrics.stopINPTracking\n  // var setViewEnd = _trackCommonViewMetrics.setViewEnd\n  var _trackInitialViewTimings =\n    loadingType === ViewLoadingType.INITIAL_LOAD\n      ? trackInitialViewMetrics(configuration, function(){}, scheduleViewUpdate)\n      : {\n          stop: noop,\n          initialViewMetrics: {}\n        }\n  var stopInitialViewMetricsTracking = _trackInitialViewTimings.stop\n  var initialViewMetrics = _trackInitialViewTimings.initialViewMetrics\n  // var _trackViewEventCounts = trackViewEventCounts(\n  //   lifeCycle,\n  //   id,\n  //   scheduleViewUpdate\n  // )\n  // var stopEventCountsTracking = _trackViewEventCounts.stop\n  // var eventCounts = _trackViewEventCounts.eventCounts\n\n  // Session keep alive\n  var keepAliveIntervalId = setInterval(\n    triggerViewUpdate,\n    SESSION_KEEP_ALIVE_INTERVAL\n  )\n  const pageMayExitSubscription = lifeCycle.subscribe(\n    LifeCycleEventType.PAGE_EXITED,\n    (pageMayExitEvent) => {\n      if (pageMayExitEvent.reason === PageExitReason.UNLOADING) {\n        triggerViewUpdate()\n      }\n    }\n  )\n  triggerViewUpdate()\n  // View context update should always be throttled\n  contextManager.changeObservable.subscribe(scheduleViewUpdate)\n\n  function triggerBeforeViewUpdate() {\n    lifeCycle.notify(LifeCycleEventType.BEFORE_VIEW_UPDATED, {\n      id,\n      name,\n      context: contextManager.getContext(),\n      startClocks\n    })\n  }\n  function scheduleViewUpdate() {\n    triggerBeforeViewUpdate()\n    throttled()\n  }\n\n  function triggerViewUpdate() {\n    cancelScheduleViewUpdate()\n    triggerBeforeViewUpdate()\n    documentVersion += 1\n    var currentEnd =\n      endClocks === undefined ? timeStampNow() : endClocks.timeStamp\n    lifeCycle.notify(LifeCycleEventType.VIEW_UPDATED, {\n      customTimings: customTimings,\n      documentVersion: documentVersion,\n      id: id,\n      name: name,\n      service: service,\n      version: version,\n      context: contextManager.getContext(),\n      loadingType: loadingType,\n      location: location,\n      startClocks: startClocks,\n      commonViewMetrics: {},\n      initialViewMetrics: initialViewMetrics,\n      duration: elapsed(startClocks.timeStamp, currentEnd),\n      isActive: endClocks === undefined,\n      sessionIsActive: sessionIsActive,\n      eventCounts: {},\n    })\n  }\n  var result = {\n    name: name,\n    service: service,\n    version: version,\n    contextManager: contextManager,\n    stopObservable: stopObservable,\n    end: function (options) {\n      if (endClocks) {\n        // view already ended\n        return\n      }\n      endClocks = isNullUndefinedDefaultValue(\n        options && options.endClocks,\n        clocksNow()\n      )\n      sessionIsActive = isNullUndefinedDefaultValue(\n        options && options.sessionIsActive,\n        true\n      )\n      lifeCycle.notify(LifeCycleEventType.VIEW_ENDED, { endClocks: endClocks })\n      lifeCycle.notify(LifeCycleEventType.AFTER_VIEW_ENDED, {\n        endClocks: endClocks\n      })\n      clearInterval(keepAliveIntervalId)\n      // setViewEnd(endClocks.relative)\n      // stopCommonViewMetricsTracking()\n      pageMayExitSubscription.unsubscribe()\n      triggerViewUpdate()\n      setTimeout(function () {\n        result.stop()\n      }, KEEP_TRACKING_AFTER_VIEW_DELAY)\n    },\n    stop: function () {\n      stopInitialViewMetricsTracking()\n      // stopEventCountsTracking()\n      // stopINPTracking()\n      stopObservable.notify()\n    },\n    addTiming: function (name, time) {\n      if (endClocks) {\n        return\n      }\n      var relativeTime = looksLikeRelativeTime(time)\n        ? time\n        : elapsed(startClocks.timeStamp, time)\n      customTimings[sanitizeTiming(name)] = relativeTime\n      scheduleViewUpdate()\n    },\n    setViewName(updatedName) {\n      name = updatedName\n      triggerViewUpdate()\n    }\n  }\n  return result\n}\n\n/**\n * Timing name is used as facet path that must contain only letters, digits, or the characters - _ . @ $\n */\nfunction sanitizeTiming(name) {\n  var sanitized = name.replace(/[^a-zA-Z0-9-_.@$]/g, '_')\n  if (sanitized !== name) {\n    console.warn(\n      'Invalid timing name: ' + name + ', sanitized to: ' + sanitized\n    )\n  }\n  return sanitized\n}\n\nfunction areDifferentLocation(currentLocation, otherLocation) {\n  return (\n    currentLocation.pathname !== otherLocation.pathname ||\n    (!isHashAnAnchor(otherLocation.hash) &&\n      getPathFromHash(otherLocation.hash) !==\n        getPathFromHash(currentLocation.hash))\n  )\n}\n","import {\n  isEmptyObject,\n  mapValues,\n  toServerDuration,\n  isNumber,\n  RumEventType,\n  LifeCycleEventType,\n  extend2Lev,\n  findByPath,\n  discardNegativeDuration\n} from '@cloudcare/browser-core'\nimport { trackViews } from './trackViews'\nexport function startViewCollection(\n  lifeCycle,\n  configuration,\n  location,\n  domMutationObservable,\n  locationChangeObservable,\n  pageStateHistory,\n  recorderApi,\n  initialViewOptions\n) {\n  lifeCycle.subscribe(LifeCycleEventType.VIEW_UPDATED, function (view) {\n    lifeCycle.notify(\n      LifeCycleEventType.RAW_RUM_EVENT_COLLECTED,\n      processViewUpdate(view, configuration, recorderApi, pageStateHistory)\n    )\n  })\n\n  return trackViews(\n    location,\n    lifeCycle,\n    'domMutationObservable',\n    configuration,\n    locationChangeObservable,\n    !configuration.trackViewsManually,\n    initialViewOptions\n  )\n}\nfunction computePerformanceViewDetails(navigationTimings) {\n  if (!navigationTimings) {\n    return undefined\n  }\n  var fetchStart = navigationTimings.fetchStart,\n    responseEnd = navigationTimings.responseEnd,\n    domInteractive = navigationTimings.domInteractive,\n    domContentLoaded = navigationTimings.domContentLoaded,\n    domComplete = navigationTimings.domComplete,\n    loadEventEnd = navigationTimings.loadEventEnd,\n    loadEventStart = navigationTimings.loadEventStart,\n    domContentLoadedEventEnd = navigationTimings.domContentLoadedEventEnd\n  var details = {}\n  if (\n    isNumber(responseEnd) &&\n    isNumber(fetchStart) &&\n    responseEnd !== fetchStart &&\n    responseEnd > fetchStart\n  ) {\n    details.fpt = toServerDuration(responseEnd - fetchStart)\n    var apdexLevel = parseInt((responseEnd - fetchStart) / 1000) // 秒数取整\n    details.apdexLevel = apdexLevel > 9 ? 9 : apdexLevel\n  }\n  if (\n    isNumber(domInteractive) &&\n    isNumber(fetchStart) &&\n    domInteractive !== fetchStart &&\n    domInteractive > fetchStart\n  ) {\n    details.tti = toServerDuration(domInteractive - fetchStart)\n  }\n  if (\n    isNumber(domContentLoaded) &&\n    isNumber(fetchStart) &&\n    domContentLoaded !== fetchStart &&\n    domContentLoaded > fetchStart\n  ) {\n    details.dom_ready = toServerDuration(domContentLoaded - fetchStart)\n  }\n  // Make sure a connection occurred\n  if (\n    isNumber(loadEventEnd) &&\n    isNumber(fetchStart) &&\n    loadEventEnd !== fetchStart &&\n    loadEventEnd > fetchStart\n  ) {\n    details.load = toServerDuration(loadEventEnd - fetchStart)\n  }\n  if (\n    isNumber(loadEventStart) &&\n    isNumber(domContentLoadedEventEnd) &&\n    loadEventStart !== domContentLoadedEventEnd &&\n    loadEventStart > domContentLoadedEventEnd\n  ) {\n    details.resource_load_time = toServerDuration(\n      loadEventStart - domContentLoadedEventEnd\n    )\n  }\n  if (\n    isNumber(domComplete) &&\n    isNumber(domInteractive) &&\n    domComplete !== domInteractive &&\n    domComplete > domInteractive\n  ) {\n    details.dom = toServerDuration(domComplete - domInteractive)\n  }\n  return details\n}\n\nfunction processViewUpdate(view, configuration, recorderApi, pageStateHistory) {\n  // var replayStats = recorderApi.getReplayStats(view.id)\n  var pageStates = pageStateHistory.findAll(\n    view.startClocks.relative,\n    view.duration\n  )\n  var viewEvent = {\n    _gc: {\n      document_version: view.documentVersion,\n      replay_stats: new Map(), // replayStats,\n      page_states: pageStates\n    },\n    date: view.startClocks.timeStamp,\n    type: RumEventType.VIEW,\n    view: {\n      action: {\n        count: view.eventCounts.actionCount\n      },\n      frustration: {\n        count: view.eventCounts.frustrationCount\n      },\n      cumulative_layout_shift: findByPath(\n        view.commonViewMetrics,\n        'cumulativeLayoutShift.value'\n      ),\n      cumulative_layout_shift_time: findByPath(\n        view.commonViewMetrics,\n        'cumulativeLayoutShift.time'\n      ),\n      cumulative_layout_shift_target_selector: findByPath(\n        view.commonViewMetrics,\n        'cumulativeLayoutShift.targetSelector'\n      ),\n      first_byte: toServerDuration(\n        findByPath(view.initialViewMetrics, 'navigationTimings.firstByte')\n      ),\n      dom_complete: toServerDuration(\n        findByPath(view.initialViewMetrics, 'navigationTimings.domComplete')\n      ),\n      dom_content_loaded: toServerDuration(\n        findByPath(\n          view.initialViewMetrics,\n          'navigationTimings.domContentLoaded'\n        )\n      ),\n      dom_interactive: toServerDuration(\n        findByPath(view.initialViewMetrics, 'navigationTimings.domInteractive')\n      ),\n      error: {\n        count: view.eventCounts.errorCount\n      },\n      first_contentful_paint: toServerDuration(\n        findByPath(view.initialViewMetrics, 'firstContentfulPaint')\n      ),\n      first_input_delay: toServerDuration(\n        findByPath(view.initialViewMetrics, 'firstInput.delay')\n      ),\n      first_input_time: toServerDuration(\n        findByPath(view.initialViewMetrics, 'firstInput.time')\n      ),\n      first_input_target_selector: findByPath(\n        view.initialViewMetrics,\n        'firstInput.targetSelector'\n      ),\n      interaction_to_next_paint: toServerDuration(\n        findByPath(view.commonViewMetrics, 'interactionToNextPaint.value')\n      ),\n      interaction_to_next_paint_target_selector: findByPath(\n        view.commonViewMetrics,\n        'interactionToNextPaint.targetSelector'\n      ),\n      is_active: view.isActive,\n      name: view.name,\n      largest_contentful_paint: toServerDuration(\n        findByPath(view.initialViewMetrics, 'largestContentfulPaint.value')\n      ),\n      largest_contentful_paint_element_selector: findByPath(\n        view.initialViewMetrics,\n        'largestContentfulPaint.targetSelector'\n      ),\n      load_event: toServerDuration(\n        findByPath(view.initialViewMetrics, 'navigationTimings.loadEvent')\n      ),\n      loading_time: discardNegativeDuration(\n        toServerDuration(view.commonViewMetrics.loadingTime)\n      ),\n      loading_type: view.loadingType,\n      long_task: {\n        count: view.eventCounts.longTaskCount\n      },\n      resource: {\n        count: view.eventCounts.resourceCount\n      },\n      time_spent: toServerDuration(view.duration)\n    },\n    display: view.commonViewMetrics.scroll\n      ? {\n          scroll: {\n            max_depth: view.commonViewMetrics.scroll.maxDepth,\n            max_depth_scroll_top:\n              view.commonViewMetrics.scroll.maxDepthScrollTop,\n            max_scroll_height: view.commonViewMetrics.scroll.maxScrollHeight,\n            max_scroll_height_time: toServerDuration(\n              view.commonViewMetrics.scroll.maxScrollHeightTime\n            )\n          }\n        }\n      : undefined,\n    session: {\n      has_replay: false, // replayStats ? true : undefined,\n      is_active: view.sessionIsActive ? undefined : false\n    },\n    privacy: {\n      replay_level: configuration.defaultPrivacyLevel\n    }\n  }\n  if (!isEmptyObject(view.customTimings)) {\n    viewEvent.view.custom_timings = mapValues(\n      view.customTimings,\n      toServerDuration\n    )\n  }\n  viewEvent = extend2Lev(viewEvent, {\n    view: computePerformanceViewDetails(\n      view.initialViewMetrics.navigationTimings\n    )\n  })\n  return {\n    rawRumEvent: viewEvent,\n    startTime: view.startClocks.relative,\n    domainContext: {\n      location: view.location\n    }\n  }\n}\n","import {\n  hasValidResourceEntryDuration,\n  hasValidResourceEntryTimings\n} from './resourceUtils'\nimport { filter, addDuration, WeakSet } from '@cloudcare/browser-core'\n\nvar alreadyMatchedEntries = new WeakSet()\n/**\n * Look for corresponding timing in resource timing buffer\n *\n * Observations:\n * - Timing (start, end) are nested inside the request (start, end)\n * - Browsers generate a timing entry for OPTIONS request\n *\n * Strategy:\n * - from valid nested entries\n * - if a single timing match, return the timing\n * - if two following timings match (OPTIONS request), return the timing for the actual request\n * - otherwise we can't decide, return undefined\n */\nexport function matchRequestResourceEntry(request) {\n  if (!performance || !('getEntriesByName' in performance)) {\n    return\n  }\n  var sameNameEntries = performance.getEntriesByName(request.url, 'resource')\n\n  if (!sameNameEntries.length || !('toJSON' in sameNameEntries[0])) {\n    return\n  }\n\n  var candidates = filter(sameNameEntries, function (entry) {\n    return !alreadyMatchedEntries.has(entry)\n  })\n  candidates = filter(candidates, function (entry) {\n    return (\n      hasValidResourceEntryDuration(entry) &&\n      hasValidResourceEntryTimings(entry)\n    )\n  })\n  candidates = filter(candidates, function (entry) {\n    return isBetween(\n      entry,\n      request.startClocks.relative,\n      endTime({\n        startTime: request.startClocks.relative,\n        duration: request.duration\n      })\n    )\n  })\n  let lastEntry = undefined\n  if (candidates.length > 1) {\n    // 取值和 request startTime 间隔更接近的\n    let startTimeDuration = Number.MAX_SAFE_INTEGER\n    candidates.forEach((entry) => {\n      const _startTimeDuration = Math.abs(\n        entry.startTime - request.startClocks.relative\n      )\n      if (_startTimeDuration < startTimeDuration) {\n        startTimeDuration = _startTimeDuration\n        lastEntry = entry\n      }\n    })\n  } else if (candidates.length === 1) {\n    lastEntry = candidates[0]\n  }\n\n  if (lastEntry) {\n    alreadyMatchedEntries.add(lastEntry)\n    return lastEntry.toJSON()\n  }\n\n  return\n}\n\nfunction endTime(timing) {\n  return addDuration(timing.startTime, timing.duration)\n}\n\nfunction isBetween(timing, start, end) {\n  // eslint-disable-next-line @typescript-eslint/restrict-plus-operands\n  var errorMargin = 1\n  return (\n    timing.startTime >= start - errorMargin &&\n    endTime(timing) <= addDuration(end, errorMargin)\n  )\n}\n","import { runOnReadyState, assign } from '@cloudcare/browser-core'\nimport { RumPerformanceEntryType } from '../../performanceObservable'\nimport { FAKE_INITIAL_DOCUMENT } from './resourceUtils'\nimport { getNavigationEntry } from '../../performanceUtils'\nexport function retrieveInitialDocumentResourceTiming(configuration, callback) {\n  runOnReadyState('interactive', function () {\n    var entry = assign(getNavigationEntry().toJSON(), {\n      entryType: RumPerformanceEntryType.RESOURCE,\n      initiatorType: FAKE_INITIAL_DOCUMENT,\n      toJSON: function () {\n        return assign({}, entry, { toJSON: undefined })\n      }\n    })\n    callback(entry)\n  })\n}\n","import {\n  getStatusGroup,\n  UUID,\n  extend2Lev,\n  relativeToClocks,\n  urlParse,\n  getQueryParamsFromUrl,\n  replaceNumberCharByPath,\n  RequestType,\n  ResourceType,\n  RumEventType,\n  LifeCycleEventType,\n  toServerDuration,\n  createTaskQueue\n} from '@cloudcare/browser-core'\nimport { matchRequestResourceEntry } from './matchRequestResourceEntry'\nimport {\n  computePerformanceResourceDetails,\n  computeResourceEntryDuration,\n  computeResourceEntryType,\n  computeResourceEntrySize,\n  isResourceEntryRequestType,\n  isResourceUrlLimit,\n  isLongDataUrl,\n  sanitizeDataUrl,\n  computeResourceEntryDeliveryType,\n  computeResourceEntryProtocol\n} from './resourceUtils'\nimport { PageState } from '../../contexts/pageStateHistory'\nimport {\n  createPerformanceObservable,\n  RumPerformanceEntryType\n} from '../../performanceObservable'\nimport { retrieveInitialDocumentResourceTiming } from './retrieveInitialDocumentResourceTiming'\nexport function startResourceCollection(\n  lifeCycle,\n  configuration,\n  pageStateHistory,\n  taskQueue,\n  retrieveInitialDocumentResourceTimingImpl\n) {\n  if (taskQueue === undefined) {\n    taskQueue = createTaskQueue()\n  }\n  if (typeof retrieveInitialDocumentResourceTimingImpl === 'undefined') {\n    retrieveInitialDocumentResourceTimingImpl =\n      retrieveInitialDocumentResourceTiming\n  }\n  lifeCycle.subscribe(LifeCycleEventType.REQUEST_COMPLETED, function (request) {\n    handleResource(function () {\n      return processRequest(request, pageStateHistory)\n    })\n  })\n  var performanceResourceSubscription = createPerformanceObservable(\n    configuration,\n    {\n      type: RumPerformanceEntryType.RESOURCE,\n      buffered: true\n    }\n  ).subscribe(function (entries) {\n    var loop = function (entry) {\n      if (\n        !isResourceEntryRequestType(entry) &&\n        !isResourceUrlLimit(entry.name, configuration.resourceUrlLimit)\n      ) {\n        handleResource(function () {\n          return processResourceEntry(entry, configuration)\n        })\n      }\n    }\n    for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n      var entry = entries_1[_i]\n      loop(entry)\n    }\n  })\n\n  retrieveInitialDocumentResourceTimingImpl(configuration, function (timing) {\n    handleResource(function () {\n      return processResourceEntry(timing, configuration)\n    })\n  })\n  function handleResource(computeRawEvent) {\n    taskQueue.push(function () {\n      const rawEvent = computeRawEvent()\n      if (rawEvent) {\n        lifeCycle.notify(LifeCycleEventType.RAW_RUM_EVENT_COLLECTED, rawEvent)\n      }\n    })\n  }\n  return {\n    stop: function () {\n      performanceResourceSubscription.unsubscribe()\n    }\n  }\n}\n\nfunction processRequest(request, pageStateHistory) {\n  var matchingTiming = matchRequestResourceEntry(request)\n  var startClocks = matchingTiming\n    ? relativeToClocks(matchingTiming.startTime)\n    : request.startClocks\n  var tracingInfo = computeRequestTracingInfo(request)\n\n  var type =\n    request.type === RequestType.XHR ? ResourceType.XHR : ResourceType.FETCH\n  var correspondingTimingOverrides = matchingTiming\n    ? computeResourceEntryMetrics(matchingTiming)\n    : undefined\n\n  var duration = computeRequestDuration(\n    pageStateHistory,\n    startClocks,\n    request.duration\n  )\n\n  var urlObj = urlParse(request.url).getParse()\n  var resourceEvent = extend2Lev(\n    {\n      date: startClocks.timeStamp,\n      resource: {\n        id: UUID(),\n        type: type,\n        duration: duration,\n        method: request.method,\n        status: request.status,\n        statusGroup: getStatusGroup(request.status),\n        url: isLongDataUrl(request.url)\n          ? sanitizeDataUrl(request.url)\n          : request.url,\n        urlHost: urlObj.Host,\n        urlPath: urlObj.Path,\n        urlPathGroup: replaceNumberCharByPath(urlObj.Path),\n        urlQuery: getQueryParamsFromUrl(request.url),\n        deliveryType:\n          matchingTiming && computeResourceEntryDeliveryType(matchingTiming),\n        protocol: matchingTiming && computeResourceEntryProtocol(matchingTiming)\n      },\n      type: RumEventType.RESOURCE\n    },\n    tracingInfo,\n    correspondingTimingOverrides\n  )\n  return {\n    startTime: startClocks.relative,\n    rawRumEvent: resourceEvent,\n    domainContext: {\n      performanceEntry: matchingTiming,\n      xhr: request.xhr,\n      response: request.response,\n      requestInput: request.input,\n      requestInit: request.init,\n      error: request.error,\n      isAborted: request.isAborted,\n      handlingStack: request.handlingStack\n    }\n  }\n}\n\nfunction processResourceEntry(entry, configuration) {\n  var startClocks = relativeToClocks(entry.startTime)\n  var tracingInfo = computeResourceEntryTracingInfo(entry)\n  var type = computeResourceEntryType(entry)\n  var entryMetrics = computeResourceEntryMetrics(entry)\n  var urlObj = urlParse(entry.name).getParse()\n  var resourceEvent = extend2Lev(\n    {\n      date: startClocks.timeStamp,\n      resource: {\n        id: UUID(),\n        type: type,\n        url: entry.name,\n        urlHost: urlObj.Host,\n        urlPath: urlObj.Path,\n        urlPathGroup: replaceNumberCharByPath(urlObj.Path),\n        urlQuery: getQueryParamsFromUrl(entry.name),\n        method: 'GET',\n        status: discardZeroStatus(entry.responseStatus),\n        statusGroup: getStatusGroup(entry.responseStatus),\n        deliveryType: computeResourceEntryDeliveryType(entry),\n        protocol: computeResourceEntryProtocol(entry)\n      },\n      type: RumEventType.RESOURCE\n    },\n    tracingInfo,\n    entryMetrics\n  )\n  return {\n    startTime: startClocks.relative,\n    rawRumEvent: resourceEvent,\n    domainContext: {\n      performanceEntry: entry\n    }\n  }\n}\n\nfunction computeResourceEntryMetrics(entry) {\n  return {\n    resource: extend2Lev(\n      {},\n      {\n        duration: computeResourceEntryDuration(entry)\n      },\n      computeResourceEntrySize(entry),\n      computePerformanceResourceDetails(entry)\n    )\n  }\n}\n\nfunction computeRequestTracingInfo(request) {\n  var hasBeenTraced = request.traceSampled && request.traceId && request.spanId\n  if (!hasBeenTraced) {\n    return undefined\n  }\n  return {\n    _gc: {\n      spanId: request.spanId,\n      traceId: request.traceId\n    },\n    resource: { id: UUID() }\n  }\n}\n\nfunction computeRequestDuration(pageStateHistory, startClocks, duration) {\n  return !pageStateHistory.wasInPageStateDuringPeriod(\n    PageState.FROZEN,\n    startClocks.relative,\n    duration\n  )\n    ? toServerDuration(duration)\n    : undefined\n}\nfunction computeResourceEntryTracingInfo(entry) {\n  return entry.traceId ? { _gc: { traceId: entry.traceId } } : undefined\n}\n/**\n * The status is 0 for cross-origin resources without CORS headers, so the status is meaningless, and we shouldn't report it\n * https://developer.mozilla.org/en-US/docs/Web/API/PerformanceResourceTiming/responseStatus#cross-origin_response_status_codes\n */\nfunction discardZeroStatus(statusCode) {\n  return statusCode === 0 ? undefined : statusCode\n}\n","import {\n  startRumSessionManager,\n  startRumSessionManagerStub\n} from '../domain/rumSessionManager'\nimport { startCacheUsrCache } from '../domain/usr'\nimport {\n  LifeCycle,\n  LifeCycleEventType,\n  createPageExitObservable,\n  canUseEventBridge,\n  // startTelemetry,\n  // TelemetryService,\n  // drainPreStartTelemetry\n} from '@cloudcare/browser-core'\n// import { createDOMMutationObservable } from '../domain/domMutationObservable.js'\nimport { createLocationChangeObservable } from '../domain/locationChangeObservable'\n// import { startLongTaskCollection } from '../domain/rumEventsCollection/longTask/longTaskCollection'\n// import { startLongAnimationFrameCollection } from '../domain/rumEventsCollection/longTask/longAnimationFrameCollection'\n// import { RumPerformanceEntryType } from '../domain/performanceObservable'\n// import { startActionCollection } from '../domain/rumEventsCollection/actions/actionCollection'\nimport { startRumBatch } from '../transport/startRumBatch'\nimport { startRumEventBridge } from '../transport/startRumEventBridge'\nimport { startRumAssembly } from '../domain/assembly'\nimport { startDisplayContext } from '../domain/contexts/displayContext.js'\nimport { startInternalContext } from '../domain/contexts/internalContext'\nimport { startUrlContexts } from '../domain/contexts/urlContexts'\nimport { startViewContexts } from '../domain/contexts/viewContexts'\nimport { startPageStateHistory } from '../domain/contexts/pageStateHistory'\nimport { startErrorCollection } from '../domain/rumEventsCollection/error/errorCollection'\nimport { startViewCollection } from '../domain/rumEventsCollection/view/viewCollection'\n// import { startRequestCollection } from '../domain/requestCollection'\nimport { startResourceCollection } from '../domain/rumEventsCollection/resource/resourceCollection'\n\nexport function startRum(\n  configuration,\n  recorderApi,\n  customerDataTrackerManager,\n  getCommonContext,\n  initialViewOptions,\n  createEncoder\n) {\n  var cleanupTasks = []\n  var lifeCycle = new LifeCycle()\n  // var telemetry = startRumTelemetry(configuration)\n\n  var reportError = function (error) {\n    lifeCycle.notify(LifeCycleEventType.RAW_ERROR_COLLECTED, { error: error })\n  }\n  var pageExitObservable = createPageExitObservable()\n  pageExitObservable.subscribe(function (event) {\n    lifeCycle.notify(LifeCycleEventType.PAGE_EXITED, event)\n  })\n  cleanupTasks.push(function () {\n    pageExitSubscription.unsubscribe()\n  })\n  var session = !canUseEventBridge()\n    ? startRumSessionManager(configuration, lifeCycle)\n    : startRumSessionManagerStub()\n  if (!canUseEventBridge()) {\n    var batch = startRumBatch(\n      configuration,\n      lifeCycle,\n      'telemetry.observable',\n      reportError,\n      pageExitObservable,\n      session.expireObservable,\n      createEncoder\n    )\n    cleanupTasks.push(function () {\n      batch.stop()\n    })\n  } else {\n    startRumEventBridge(lifeCycle)\n  }\n\n  var userSession = startCacheUsrCache(configuration)\n  // var domMutationObservable = createDOMMutationObservable()\n  var locationChangeObservable = createLocationChangeObservable(location)\n  var pageStateHistory = startPageStateHistory()\n  var _startRumEventCollection = startRumEventCollection(\n    lifeCycle,\n    configuration,\n    location,\n    session,\n    userSession,\n    pageStateHistory,\n    locationChangeObservable,\n    'domMutationObservable',\n    getCommonContext,\n    reportError\n  )\n  var viewContexts = _startRumEventCollection.viewContexts\n  var urlContexts = _startRumEventCollection.urlContexts\n  // var actionContexts = _startRumEventCollection.actionContexts\n  var stopRumEventCollection = _startRumEventCollection.stop\n  var addAction = _startRumEventCollection.addAction\n  cleanupTasks.push(stopRumEventCollection)\n  // drainPreStartTelemetry()\n\n  // telemetry.setContextProvider(function () {\n  //   return {\n  //     application: {\n  //       id: configuration.applicationId\n  //     },\n  //     session: {\n  //       id: session.findTrackedSession() && session.findTrackedSession().id\n  //     },\n  //     view: {\n  //       id: viewContexts.findView() && viewContexts.findView().id\n  //     },\n  //     action: {\n  //       id: actionContexts.findActionId(),\n  //       ids: actionContexts.findAllActionId()\n  //     }\n  //   }\n  // })\n  const {\n    addTiming,\n    startView,\n    setViewName,\n    setViewContext,\n    setViewContextProperty,\n    getViewContext,\n    stop: stopViewCollection\n  } = startViewCollection(\n    lifeCycle,\n    configuration,\n    location,\n    'domMutationObservable',\n    locationChangeObservable,\n    pageStateHistory,\n    recorderApi,\n    initialViewOptions\n  )\n  cleanupTasks.push(stopViewCollection)\n\n  const _startResourceCollection = startResourceCollection(\n    lifeCycle,\n    configuration,\n    pageStateHistory\n  )\n  cleanupTasks.push(_startResourceCollection.stop)\n  // if (\n  //   PerformanceObserver.supportedEntryTypes &&\n  //   PerformanceObserver.supportedEntryTypes.includes(\n  //     RumPerformanceEntryType.LONG_ANIMATION_FRAME\n  //   )\n  // ) {\n  //   var longAnimationFrameCollection = startLongAnimationFrameCollection(\n  //     lifeCycle,\n  //     configuration\n  //   )\n  //   cleanupTasks.push(longAnimationFrameCollection.stop)\n  // } else {\n  //   startLongTaskCollection(lifeCycle, configuration)\n  // }\n\n  var _startErrorCollection = startErrorCollection(\n    lifeCycle,\n    configuration,\n    session,\n    pageStateHistory\n  )\n  var addError = _startErrorCollection.addError\n  // startRequestCollection(lifeCycle, configuration, session)\n\n  var internalContext = startInternalContext(\n    configuration.applicationId,\n    session,\n    viewContexts,\n    'actionContexts',\n    urlContexts\n  )\n  return {\n    addAction: addAction,\n    addError: addError,\n    addTiming: addTiming,\n    configuration: configuration,\n    startView,\n    setViewContext,\n    setViewContextProperty,\n    getViewContext,\n    setViewName,\n    lifeCycle: lifeCycle,\n    viewContexts: viewContexts,\n    session: session,\n\n    stopSession: function () {\n      session.expire()\n    },\n    getInternalContext: internalContext.get,\n    stop: function () {\n      cleanupTasks.forEach(function (task) {\n        task()\n      })\n    }\n  }\n}\n// function startRumTelemetry(configuration) {\n//   const telemetry = startTelemetry(TelemetryService.RUM, configuration)\n//   //   if (canUseEventBridge()) {\n//   //     const bridge = getEventBridge()\n//   //     telemetry.observable.subscribe((event) =>\n//   //       bridge.send('internal_telemetry', event)\n//   //     )\n//   //   }\n//   return telemetry\n// }\n\nexport function startRumEventCollection(\n  lifeCycle,\n  configuration,\n  location,\n  sessionManager,\n  userSessionManager,\n  pageStateHistory,\n  locationChangeObservable,\n  domMutationObservable,\n  getCommonContext,\n  reportError\n) {\n  var viewContexts = startViewContexts(lifeCycle)\n  var urlContexts = startUrlContexts(\n    lifeCycle,\n    locationChangeObservable,\n    location\n  )\n\n  // var _startActionCollection = startActionCollection(\n  //   lifeCycle,\n  //   domMutationObservable,\n  //   configuration,\n  //   pageStateHistory\n  // )\n  // var actionContexts = _startActionCollection.actionContexts\n  // var addAction = _startActionCollection.addAction\n\n  var displayContext = startDisplayContext()\n  startRumAssembly(\n    configuration,\n    lifeCycle,\n    sessionManager,\n    userSessionManager,\n    viewContexts,\n    urlContexts,\n    'actionContexts',\n    displayContext,\n    getCommonContext,\n    reportError\n  )\n  return {\n    viewContexts: viewContexts,\n    urlContexts: urlContexts,\n    pageStateHistory: pageStateHistory,\n    addAction: function () {}, // addAction,\n    actionContexts: 'actionContexts',\n    stop: function () {\n      displayContext.stop()\n      pageStateHistory.stop()\n      urlContexts.stop()\n      viewContexts.stop()\n    }\n  }\n}\n","export function buildCommonContext(\n  globalContextManager,\n  userContextManager,\n  recorderApi\n) {\n  return {\n    context: globalContextManager.getContext(),\n    user: userContextManager.getContext(),\n    hasReplay: false, // recorderApi.isRecording() ? true : undefined\n  }\n}\n","export var buildEnv = {\n  sdkVersion: __BUILD_ENV__SDK_VERSION__,\n  sdkName: 'df_web_rum_sdk'\n}\n","import {\n  assign,\n  display,\n  isPercentage,\n  validateAndBuildConfiguration,\n  validatePostRequestRequireParamsConfiguration,\n  isArray,\n  TraceType,\n  isNullUndefinedDefaultValue,\n  DefaultPrivacyLevel,\n  objectHasValue,\n  isMatchOption,\n  catchUserErrors,\n  getOrigin,\n  each\n} from '@cloudcare/browser-core'\nimport { buildEnv } from '../boot/buildEnv'\n// import { isTracingOption } from '../domain/tracing/tracer'\n\nexport function validateAndBuildRumConfiguration(initConfiguration) {\n  if (!initConfiguration.applicationId) {\n    display.error(\n      'Application ID is not configured, no RUM data will be collected.'\n    )\n    return\n  }\n  var requireParamsValidate =\n    validatePostRequestRequireParamsConfiguration(initConfiguration)\n  if (!requireParamsValidate) return\n  if (\n    initConfiguration.sessionOnErrorSampleRate !== undefined &&\n    !isPercentage(initConfiguration.sessionOnErrorSampleRate)\n  ) {\n    display.error(\n      'Error Session  Sample Rate should be a number between 0 and 100'\n    )\n    return\n  }\n  if (\n    initConfiguration.sessionReplaySampleRate !== undefined &&\n    !isPercentage(initConfiguration.sessionReplaySampleRate)\n  ) {\n    display.error(\n      'Session Replay Sample Rate should be a number between 0 and 100'\n    )\n    return\n  }\n  if (\n    initConfiguration.sessionReplayOnErrorSampleRate !== undefined &&\n    !isPercentage(initConfiguration.sessionReplayOnErrorSampleRate)\n  ) {\n    display.error(\n      'Error Session Replay Sample Rate should be a number between 0 and 100'\n    )\n    return\n  }\n  // var allowedTracingUrls = validateAndBuildTracingOptions(initConfiguration)\n  // if (!allowedTracingUrls) {\n  //   return\n  // }\n  //   if (initConfiguration.allowedTracingOrigins !== undefined) {\n  //     if (!isArray(initConfiguration.allowedTracingOrigins)) {\n  //       display.error('Allowed Tracing Origins should be an array')\n  //       return\n  //     }\n  //   }\n  //   if (initConfiguration.allowedDDTracingOrigins !== undefined) {\n  //     if (!isArray(initConfiguration.allowedDDTracingOrigins)) {\n  //       display.error('Allowed Tracing Origins should be an array')\n  //       return\n  //     }\n  //   }\n  // if (\n  //   initConfiguration.tracingSampleRate !== undefined &&\n  //   !isPercentage(initConfiguration.tracingSampleRate)\n  // ) {\n  //   display.error('Tracing Sample Rate should be a number between 0 and 100')\n  //   return\n  // }\n  if (\n    initConfiguration.excludedActivityUrls !== undefined &&\n    !isArray(initConfiguration.excludedActivityUrls)\n  ) {\n    display.error('Excluded Activity Urls should be an array')\n    return\n  }\n\n  var baseConfiguration = validateAndBuildConfiguration(initConfiguration)\n  if (!baseConfiguration) {\n    return\n  }\n  var trackUserInteractions = !!isNullUndefinedDefaultValue(\n    initConfiguration.trackUserInteractions,\n    initConfiguration.trackInteractions\n  )\n  return assign(\n    {\n      applicationId: initConfiguration.applicationId,\n      actionNameAttribute: initConfiguration.actionNameAttribute,\n      sessionReplaySampleRate: isNullUndefinedDefaultValue(\n        initConfiguration.sessionReplaySampleRate,\n        100\n      ),\n      sessionOnErrorSampleRate: isNullUndefinedDefaultValue(\n        initConfiguration.sessionOnErrorSampleRate,\n        0\n      ),\n      sessionReplayOnErrorSampleRate: isNullUndefinedDefaultValue(\n        initConfiguration.sessionReplayOnErrorSampleRate,\n        0\n      ),\n      tracingSampleRate: isNullUndefinedDefaultValue(\n        initConfiguration.tracingSampleRate,\n        100\n      ),\n      allowedTracingUrls: [], // allowedTracingUrls,\n      injectTraceHeader:\n        initConfiguration.injectTraceHeader &&\n        catchUserErrors(\n          initConfiguration.injectTraceHeader,\n          'injectTraceHeader threw an error:'\n        ),\n      generateTraceId:\n        initConfiguration.generateTraceId &&\n        catchUserErrors(\n          initConfiguration.generateTraceId,\n          'generateTraceId threw an error:'\n        ),\n      excludedActivityUrls: isNullUndefinedDefaultValue(\n        initConfiguration.excludedActivityUrls,\n        []\n      ),\n      workerUrl: initConfiguration.workerUrl,\n      compressIntakeRequests: !!initConfiguration.compressIntakeRequests,\n      trackUserInteractions: trackUserInteractions,\n      enableLongAnimationFrame: !!initConfiguration.enableLongAnimationFrame,\n      trackViewsManually: !!initConfiguration.trackViewsManually,\n      traceType: isNullUndefinedDefaultValue(\n        initConfiguration.traceType,\n        TraceType.DDTRACE\n      ),\n      traceId128Bit: !!initConfiguration.traceId128Bit,\n      defaultPrivacyLevel: objectHasValue(\n        DefaultPrivacyLevel,\n        initConfiguration.defaultPrivacyLevel\n      )\n        ? initConfiguration.defaultPrivacyLevel\n        : DefaultPrivacyLevel.MASK_USER_INPUT,\n      shouldMaskNode:\n        initConfiguration.shouldMaskNode &&\n        catchUserErrors(\n          initConfiguration.shouldMaskNode,\n          'shouldMaskNode threw an error:'\n        )\n    },\n    baseConfiguration,\n    buildEnv\n  )\n}\n/**\n * Handles allowedTracingUrls and processes legacy allowedTracingOrigins\n */\nfunction validateAndBuildTracingOptions(initConfiguration) {\n  // Advise about parameters precedence.\n  if (\n    initConfiguration.allowedTracingUrls !== undefined &&\n    initConfiguration.allowedTracingOrigins !== undefined\n  ) {\n    display.warn(\n      'Both allowedTracingUrls and allowedTracingOrigins (deprecated) have been defined. The parameter allowedTracingUrls will override allowedTracingOrigins.'\n    )\n  }\n  // Handle allowedTracingUrls first\n  if (initConfiguration.allowedTracingUrls !== undefined) {\n    if (!isArray(initConfiguration.allowedTracingUrls)) {\n      display.error('Allowed Tracing URLs should be an array')\n      return\n    }\n    // if (initConfiguration.allowedTracingUrls.length !== 0 && initConfiguration.service === undefined) {\n    //   display.error('Service needs to be configured when tracing is enabled')\n    //   return\n    // }\n    // Convert from (MatchOption | TracingOption) to TracingOption, remove unknown properties\n    var tracingOptions = []\n    each(initConfiguration.allowedTracingUrls, function (option) {\n      if (isMatchOption(option)) {\n        tracingOptions.push({\n          match: option,\n          traceType: isNullUndefinedDefaultValue(\n            initConfiguration.traceType,\n            TraceType.DDTRACE\n          )\n        })\n      } else if (isTracingOption(option)) {\n        tracingOptions.push(option)\n      } else {\n        display.warn(\n          'Allowed Tracing Urls parameters should be a string, RegExp, function, or an object. Ignoring parameter',\n          option\n        )\n      }\n    })\n    return tracingOptions\n  }\n\n  // Handle conversion of allowedTracingOrigins to allowedTracingUrls\n  if (initConfiguration.allowedTracingOrigins !== undefined) {\n    if (!isArray(initConfiguration.allowedTracingOrigins)) {\n      display.error('Allowed Tracing Origins should be an array')\n      return\n    }\n\n    var tracingOptions = []\n    each(initConfiguration.allowedTracingOrigins, function (legacyMatchOption) {\n      var tracingOption = convertLegacyMatchOptionToTracingOption(\n        legacyMatchOption,\n        isNullUndefinedDefaultValue(\n          initConfiguration.traceType,\n          TraceType.DDTRACE\n        )\n      )\n      if (tracingOption) {\n        tracingOptions.push(tracingOption)\n      }\n    })\n\n    return tracingOptions\n  }\n  // Handle conversion of allowedDDTracingOrigins to allowedTracingUrls\n  if (initConfiguration.allowedDDTracingOrigins !== undefined) {\n    if (!isArray(initConfiguration.allowedDDTracingOrigins)) {\n      display.error('Allowed Tracing Origins should be an array')\n      return\n    }\n\n    var tracingOptions = []\n    each(\n      initConfiguration.allowedDDTracingOrigins,\n      function (legacyMatchOption) {\n        var tracingOption = convertLegacyMatchOptionToTracingOption(\n          legacyMatchOption,\n          isNullUndefinedDefaultValue(\n            initConfiguration.traceType,\n            TraceType.DDTRACE\n          )\n        )\n        if (tracingOption) {\n          tracingOptions.push(tracingOption)\n        }\n      }\n    )\n\n    return tracingOptions\n  }\n\n  return []\n}\n\n/**\n * Converts parameters from the deprecated allowedTracingOrigins\n * to allowedTracingUrls. Handles the change from origin to full URLs.\n */\nfunction convertLegacyMatchOptionToTracingOption(item, traceType) {\n  var match\n  if (typeof item === 'string') {\n    match = item\n  } else if (item instanceof RegExp) {\n    match = function (url) {\n      return item.test(getOrigin(url))\n    }\n  } else if (typeof item === 'function') {\n    match = function (url) {\n      return item(getOrigin(url))\n    }\n  }\n\n  if (match === undefined) {\n    display.warn(\n      'Allowed Tracing Origins parameters should be a string, RegExp or function. Ignoring parameter',\n      item\n    )\n    return undefined\n  }\n\n  return { match: match, traceType: traceType }\n}\n","import {\n  createBoundedBuffer,\n  display,\n  canUseEventBridge,\n  displayAlreadyInitializedError,\n  willSyntheticsInjectRum,\n  noop,\n  timeStampNow,\n  clocksNow,\n  assign,\n  // addTelemetryConfiguration,\n  initFetchObservable,\n  deepClone,\n  fetchAndApplyRemoteConfiguration,\n  getEventBridge\n} from '@cloudcare/browser-core'\nimport { validateAndBuildRumConfiguration } from '../domain/configuration'\n\nexport function createPreStartStrategy(\n  rumPublicApiOptions,\n  getCommonContext,\n  doStartRum\n) {\n  var ignoreInitIfSyntheticsWillInjectRum =\n    rumPublicApiOptions.ignoreInitIfSyntheticsWillInjectRum\n  var startDeflateWorker = rumPublicApiOptions.startDeflateWorker\n  var bufferApiCalls = createBoundedBuffer()\n\n  var firstStartViewCall\n\n  var deflateWorker\n\n  var cachedInitConfiguration\n  var cachedConfiguration\n\n  function tryStartRum() {\n    if (!cachedInitConfiguration || !cachedConfiguration) {\n      return\n    }\n\n    var initialViewOptions\n\n    if (cachedConfiguration.trackViewsManually) {\n      if (!firstStartViewCall) {\n        return\n      }\n      // An initial view is always created when starting RUM.\n      // When tracking views automatically, any startView call before RUM start creates an extra\n      // view.\n      // When tracking views manually, we use the ViewOptions from the first startView call as the\n      // initial view options, and we remove the actual startView call so we don't create an extra\n      // view.\n      bufferApiCalls.remove(firstStartViewCall.callback)\n      initialViewOptions = firstStartViewCall.options\n    }\n\n    var startRumResult = doStartRum(\n      cachedConfiguration,\n      deflateWorker,\n      initialViewOptions\n    )\n\n    bufferApiCalls.drain(startRumResult)\n  }\n\n  function doInit(initConfiguration) {\n    var eventBridgeAvailable = canUseEventBridge()\n    if (eventBridgeAvailable) {\n      initConfiguration = overrideInitConfigurationForBridge(initConfiguration)\n    }\n\n    // Update the exposed initConfiguration to reflect the bridge and remote configuration overrides\n    cachedInitConfiguration = initConfiguration\n    // addTelemetryConfiguration(deepClone(initConfiguration))\n    if (cachedConfiguration) {\n      displayAlreadyInitializedError('DATAFLUX_RUM', initConfiguration)\n      return\n    }\n    var configuration = validateAndBuildRumConfiguration(initConfiguration)\n    if (!configuration) {\n      return\n    }\n\n    if (!eventBridgeAvailable && !configuration.sessionStoreStrategyType) {\n      display.warn(\n        'No storage available for session. We will not send any data.'\n      )\n      return\n    }\n\n    if (\n      configuration.compressIntakeRequests &&\n      !configuration.sendContentTypeByJson &&\n      !eventBridgeAvailable &&\n      startDeflateWorker\n    ) {\n      deflateWorker = startDeflateWorker(\n        configuration,\n        'RUM',\n        // Worker initialization can fail asynchronously, especially in Firefox where even CSP\n        // issues are reported asynchronously. For now, the SDK will continue its execution even if\n        // data won't be sent to Datadog. We could improve this behavior in the future.\n        noop\n      )\n      if (!deflateWorker) {\n        // `startDeflateWorker` should have logged an error message explaining the issue\n        return\n      }\n    }\n\n    cachedConfiguration = configuration\n    // Instrumuent fetch to track network requests\n    // This is needed in case the consent is not granted and some cutsomer\n    // library (Apollo Client) is storing uninstrumented fetch to be used later\n    // The subscrption is needed so that the instrumentation process is completed\n    initFetchObservable().subscribe(noop)\n\n    tryStartRum()\n  }\n\n  return {\n    init: function (initConfiguration) {\n      if (!initConfiguration) {\n        display.error('Missing configuration')\n        return\n      }\n      // Set the experimental feature flags as early as possible, so we can use them in most places\n\n      // Expose the initial configuration regardless of initialization success.\n      cachedInitConfiguration = initConfiguration\n\n      // If we are in a Synthetics test configured to automatically inject a RUM instance, we want\n      // to completely discard the customer application RUM instance by ignoring their init() call.\n      // But, we should not ignore the init() call from the Synthetics-injected RUM instance, so the\n      // internal `ignoreInitIfSyntheticsWillInjectRum` option is here to bypass this condition.\n      if (ignoreInitIfSyntheticsWillInjectRum && willSyntheticsInjectRum()) {\n        return\n      }\n      if (initConfiguration.remoteConfiguration) {\n        fetchAndApplyRemoteConfiguration(initConfiguration, doInit)\n      } else {\n        doInit(initConfiguration)\n      }\n    },\n\n    getInitConfiguration: function () {\n      return cachedInitConfiguration\n    },\n\n    getInternalContext: noop,\n\n    stopSession: noop,\n\n    addTiming: function (name, time) {\n      if (time === undefined) {\n        time = timeStampNow()\n      }\n      bufferApiCalls.add(function (startRumResult) {\n        startRumResult.addTiming(name, time)\n      })\n    },\n\n    startView: function (options, startClocks) {\n      if (startClocks === undefined) {\n        startClocks = clocksNow()\n      }\n      const callback = function (startRumResult) {\n        startRumResult.startView(options, startClocks)\n      }\n      bufferApiCalls.add(callback)\n\n      if (!firstStartViewCall) {\n        firstStartViewCall = { options: options, callback: callback }\n        tryStartRum()\n      }\n    },\n    setViewName(name) {\n      bufferApiCalls.add((startRumResult) => startRumResult.setViewName(name))\n    },\n\n    setViewContext(context) {\n      bufferApiCalls.add((startRumResult) =>\n        startRumResult.setViewContext(context)\n      )\n    },\n\n    setViewContextProperty(key, value) {\n      bufferApiCalls.add((startRumResult) =>\n        startRumResult.setViewContextProperty(key, value)\n      )\n    },\n\n    getViewContext: () => {},\n    addAction: function (action, commonContext) {\n      if (commonContext === undefined) {\n        commonContext = getCommonContext()\n      }\n      bufferApiCalls.add(function (startRumResult) {\n        startRumResult.addAction(action, commonContext)\n      })\n    },\n\n    addError: function (providedError, commonContext) {\n      if (commonContext === undefined) {\n        commonContext = getCommonContext()\n      }\n      bufferApiCalls.add(function (startRumResult) {\n        startRumResult.addError(providedError, commonContext)\n      })\n    }\n  }\n}\n\nfunction overrideInitConfigurationForBridge(initConfiguration) {\n  return assign({}, initConfiguration, {\n    applicationId: '00000000-aaaa-0000-aaaa-000000000000',\n    clientToken: 'empty',\n    sessionSampleRate: 100,\n    defaultPrivacyLevel:\n      initConfiguration.defaultPrivacyLevel ??\n      getEventBridge()?.getPrivacyLevel()\n  })\n}\n","import {\n  makePublicApi,\n  createContextManager,\n  CustomerDataType,\n  clocksNow,\n  ActionType,\n  deepClone,\n  createHandlingStack,\n  sanitizeUser,\n  checkUser,\n  callMonitored,\n  assign,\n  monitor,\n  storeContextManager,\n  createIdentityEncoder,\n  addTelemetryUsage,\n  sanitize,\n  createCustomerDataTrackerManager,\n  CustomerDataCompressionStatus,\n  displayAlreadyInitializedError\n} from '@cloudcare/browser-core'\nimport { buildCommonContext } from '../domain/contexts/commonContext'\nimport { createPreStartStrategy } from './perStartRum'\nvar RUM_STORAGE_KEY = 'rum'\nexport function makeRumPublicApi(startRumImpl, recorderApi, options) {\n  if (options === undefined) {\n    options = {}\n  }\n  const customerDataTrackerManager = createCustomerDataTrackerManager(\n    CustomerDataCompressionStatus.Unknown\n  )\n  const globalContextManager = createContextManager('global', {\n    customerDataTracker: customerDataTrackerManager.getOrCreateTracker(\n      CustomerDataType.GlobalContext\n    )\n  })\n  const userContextManager = createContextManager('user', {\n    customerDataTracker: customerDataTrackerManager.getOrCreateTracker(\n      CustomerDataType.User\n    ),\n    propertiesConfig: {\n      id: { type: 'string' },\n      name: { type: 'string' },\n      email: { type: 'string' }\n    }\n  })\n  function getCommonContext() {\n    return buildCommonContext(\n      globalContextManager,\n      userContextManager,\n      recorderApi\n    )\n  }\n  let strategy = createPreStartStrategy(\n    options,\n    getCommonContext,\n    function (configuration, deflateWorker, initialViewOptions) {\n      if (configuration.storeContextsToLocal) {\n        storeContextManager(\n          configuration,\n          globalContextManager,\n          RUM_STORAGE_KEY,\n          CustomerDataType.GlobalContext\n        )\n        storeContextManager(\n          configuration,\n          userContextManager,\n          RUM_STORAGE_KEY,\n          CustomerDataType.User\n        )\n      }\n      customerDataTrackerManager.setCompressionStatus(\n        deflateWorker\n          ? CustomerDataCompressionStatus.Enabled\n          : CustomerDataCompressionStatus.Disabled\n      )\n      var startRumResult = startRumImpl(\n        configuration,\n        recorderApi,\n        customerDataTrackerManager,\n        getCommonContext,\n        initialViewOptions,\n        deflateWorker && options.createDeflateEncoder\n          ? function (streamId) {\n              return options.createDeflateEncoder(deflateWorker, streamId)\n            }\n          : createIdentityEncoder\n      )\n      // recorderApi.onRumStart(\n      //   startRumResult.lifeCycle,\n      //   configuration,\n      //   startRumResult.session,\n      //   startRumResult.viewContexts,\n      //   deflateWorker\n      // )\n\n      strategy = createPostStartStrategy(strategy, startRumResult)\n\n      return startRumResult\n    }\n  )\n\n  const startView = monitor(function (options) {\n    const sanitizedOptions =\n      typeof options === 'object' ? options : { name: options }\n    strategy.startView(sanitizedOptions)\n    if (sanitizedOptions.context) {\n      customerDataTrackerManager\n        .getOrCreateTracker(CustomerDataType.View)\n        .updateCustomerData(sanitizedOptions.context)\n    }\n    addTelemetryUsage({ feature: 'start-view' })\n  })\n\n  var rumPublicApi = makePublicApi({\n    init: monitor(function (initConfiguration) {\n      strategy.init(initConfiguration)\n    }),\n    setViewName: monitor((name) => {\n      strategy.setViewName(name)\n      addTelemetryUsage({ feature: 'set-view-name' })\n    }),\n\n    setViewContext: monitor((context) => {\n      strategy.setViewContext(context)\n      addTelemetryUsage({ feature: 'set-view-context' })\n    }),\n\n    setViewContextProperty: monitor((key, value) => {\n      strategy.setViewContextProperty(key, value)\n      addTelemetryUsage({ feature: 'set-view-context-property' })\n    }),\n\n    getViewContext: monitor(() => {\n      addTelemetryUsage({ feature: 'set-view-context-property' })\n      return strategy.getViewContext()\n    }),\n    // /** @deprecated: use setGlobalContextProperty instead */\n    // addRumGlobalContext: monitor(function (key, value) {\n    //   globalContextManager.setContextProperty(key, value)\n    //   addTelemetryUsage({ feature: 'set-global-context' })\n    // }),\n    setGlobalContextProperty: monitor(function (key, value) {\n      globalContextManager.setContextProperty(key, value)\n      addTelemetryUsage({ feature: 'set-global-context' })\n    }),\n\n    // /** @deprecated: use removeGlobalContextProperty instead */\n    // removeRumGlobalContext: monitor(function (key) {\n    //   return globalContextManager.removeContextProperty(key)\n    // }),\n    removeGlobalContextProperty: monitor(function (key) {\n      return globalContextManager.removeContextProperty(key)\n    }),\n\n    // /** @deprecated: use getGlobalContext instead */\n    // getRumGlobalContext: monitor(function () {\n    //   return globalContextManager.getContext()\n    // }),\n    getGlobalContext: monitor(function () {\n      return globalContextManager.getContext()\n    }),\n\n    // /** @deprecated: use setGlobalContext instead */\n    // setRumGlobalContext: monitor(function (context) {\n    //   globalContextManager.setContext(context)\n    //   addTelemetryUsage({ feature: 'set-global-context' })\n    // }),\n    setGlobalContext: monitor(function (context) {\n      globalContextManager.setContext(context)\n      addTelemetryUsage({ feature: 'set-global-context' })\n    }),\n\n    clearGlobalContext: monitor(function () {\n      return globalContextManager.clearContext()\n    }),\n\n    getInitConfiguration: monitor(function () {\n      return deepClone(strategy.initConfiguration)\n    }),\n    getInternalContext: monitor(function (startTime) {\n      return strategy.getInternalContext(startTime)\n    }),\n    addDebugSession: monitor(function (id) {}),\n    clearDebugSession: monitor(function () {}),\n    getDebugSession: monitor(function () {}),\n    addAction: monitor(function (name, context) {\n      const handlingStack = createHandlingStack()\n\n      callMonitored(function () {\n        strategy.addAction({\n          name: sanitize(name),\n          context: sanitize(context),\n          startClocks: clocksNow(),\n          type: ActionType.CUSTOM,\n          handlingStack: handlingStack\n        })\n        addTelemetryUsage({ feature: 'add-action' })\n      })\n    }),\n    addError: monitor(function (error, context) {\n      var handlingStack = createHandlingStack()\n      callMonitored(function () {\n        strategy.addError({\n          error, // Do not sanitize error here, it is needed unserialized by computeRawError()\n          handlingStack,\n          context: sanitize(context),\n          startClocks: clocksNow()\n        })\n        addTelemetryUsage({ feature: 'add-error' })\n      })\n    }),\n    addTiming: monitor(function (name, time) {\n      strategy.addTiming(sanitize(name), time)\n    }),\n    setUser: monitor(function (newUser) {\n      if (checkUser(newUser)) {\n        userContextManager.setContext(sanitizeUser(newUser))\n      }\n      addTelemetryUsage({ feature: 'set-user' })\n    }),\n    getUser: monitor(function () {\n      return userContextManager.getContext()\n    }),\n    setUserProperty: monitor(function (key, property) {\n      var newUser = {}\n      newUser[key] = property\n      var sanitizedProperty = sanitizeUser(newUser)[key]\n      userContextManager.setContextProperty(key, sanitizedProperty)\n      addTelemetryUsage({ feature: 'set-user' })\n    }),\n    removeUserProperty: monitor(function (key) {\n      return userContextManager.removeContextProperty(key)\n    }),\n\n    // /** @deprecated: renamed to clearUser */\n    // removeUser: monitor(function () {\n    //   return userContextManager.clearContext()\n    // }),\n    clearUser: monitor(function () {\n      return userContextManager.clearContext()\n    }),\n    startView: startView,\n    stopSession: monitor(function () {\n      strategy.stopSession()\n      addTelemetryUsage({ feature: 'stop-session' })\n    }),\n    // startSessionReplayRecording: monitor(function (options) {\n    //   recorderApi.start(options)\n    //   addTelemetryUsage({\n    //     feature: 'start-session-replay-recording',\n    //     force: options && options.force\n    //   })\n    // }),\n    // stopSessionReplayRecording: monitor(recorderApi.stop)\n  })\n  return rumPublicApi\n}\nfunction createPostStartStrategy(preStartStrategy, startRumResult) {\n  return assign(\n    {\n      init: function (initConfiguration) {\n        displayAlreadyInitializedError('DATAFLUX_RUM', initConfiguration)\n      },\n      initConfiguration: preStartStrategy.getInitConfiguration()\n    },\n    startRumResult\n  )\n}\n","// import { defineGlobal, getGlobalObject } from '@cloudcare/browser-core'\nimport { startRum } from './rum'\nimport { makeRumPublicApi } from './rumPublicApi'\n// import { startRecording } from './startRecording'\n// import { makeRecorderApi } from './recorderApi'\nimport { createDeflateEncoder, startDeflateWorker } from '../domain/deflate'\n// var recorderApi = makeRecorderApi(startRecording)\nexport var datafluxRum = makeRumPublicApi(startRum, 'recorderApi', {\n  startDeflateWorker: startDeflateWorker,\n  createDeflateEncoder: createDeflateEncoder\n})\n\n// defineGlobal(getGlobalObject(), 'DATAFLUX_RUM', datafluxRum)\n","import { datafluxRum } from './boot/rum.entry'\nexport { datafluxRum }\n"],"names":["ConsoleApiName","log","debug","info","warn","error","globalConsole","console","originalConsoleMethods","Object","keys","forEach","name","PREFIX","display","bind","onMonitorErrorCollected","debugMode","startMonitorErrorCollection","newOnMonitorErrorCollected","setDebugMode","newDebugMode","resetMonitor","undefined","monitor","fn","callMonitored","arguments","context","args","apply","e","displayIfDebugEnabled","slice","call","concat","catchUserErrors","errorMsg","err","each","assign","makePublicApi","stub","publicApi","onReady","callback","defineProperty","get","enumerable","defineGlobal","global","api","existingGlobalVariable","q","getGlobalObject","globalThis","_typeof","prototype","configurable","globalObject","_gc_temp_","self","window","getZoneJsOriginalValue","target","browserWindow","original","Zone","__symbol__","setTimeout","delay","clearTimeout","timeoutId","setInterval","clearInterval","ArrayProto","Array","ObjProto","toString","hasOwnProperty","nativeForEach","nativeIsArray","isArray","breaker","obj","iterator","length","i","l","key","source","prop","shallowClone","object","extend","extend2Lev","isObject","isFunction","f","test","isArguments","toArray","iterable","values","results","value","filter","arr","ret","val","push","map","some","flag","cssEscape","str","CSS","escape","replace","ch","asCodePoint","charCodeAt","isEmptyObject","objectEntries","res","isString","isDate","isBoolean","isNumber","String","_encodeDates","encodeDates","v","k","formatDate","throttle","wait","options","needLeadingExecution","leading","needTrailingExecution","trailing","inWaitPeriod","pendingExecutionWithParameters","pendingTimeoutId","throttled","cancel","d","pad","n","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","_searchObjDate","searchObjDate","o","a","b","_searchObjString","searchObjString","formatString","utf8Encode","string","utftext","start","end","stringl","c1","enc","fromCharCode","substring","base64Encode","data","btoa","encodeURIComponent","match","p1","b64","o1","o2","o3","h1","h2","h3","h4","bits","ac","tmp_arr","charAt","join","UUID","placeholder","parseInt","Math","random","replaceNumberCharByPath","path","pathGroup","urlParse","para","URLParser","_fields","Username","Password","Port","Protocol","Host","Path","URL","QueryString","Fragment","_values","_regex","_parse","setUrl","_initValues","addQueryString","queryObj","query","RegExp","getParse","getUrl","url","Origin","exec","c","localStorage","getItem","parse","storedValue","JSON","sd","set","setItem","remove","removeItem","isSupport","supported","sessionStorage","getQueryParamsFromUrl","result","split","queryString","getURLSearchParams","decodeParam","decodeURIComponent","pairs","pos","indexOf","createCircularReferenceChecker","WeakSet","hasAlreadyBeenSeen","has","add","array","getType","mergeInto","destination","circularReferenceChecker","Date","getTime","flags","ignoreCase","multiline","sticky","unicode","merged","deepClone","getStatusGroup","status","substr","noop","ONE_SECOND","ONE_MINUTE","ONE_HOUR","ONE_DAY","ONE_YEAR","performDraw","threshold","round","num","decimals","toFixed","msToNs","duration","mapValues","newObject","toServerDuration","getRelativeTime","timestamp","getNavigationStart","preferredNow","relativeNow","getTimestamp","relativeTime","performance","now","clocksNow","relative","timeStamp","timeStampNow","dateNow","looksLikeRelativeTime","time","elapsed","clocksOrigin","relativeToClocks","getCorrectedTimeStamp","currentDrift","addDuration","correctedOrigin","navigationStart","timing","COMMA_SEPARATED_KEY_VALUE","findCommaSeparatedValue","rawString","lastIndex","findByPath","pathArr","shift","safeTruncate","candidate","lastChar","isMatchOption","item","itemType","includes","search","find","predicate","arrayFrom","arrayLike","from","Set","findLast","isPercentage","getLocationOrigin","getLinkElementOrigin","location","Browser","IE","CHROMIUM","SAFARI","OTHER","isIE","detectBrowserCached","isChromium","isSafari","browserCache","isNullUndefinedDefaultValue","detectBrowser","_browserWindow$naviga","userAgent","navigator","chrome","vendor","document","documentMode","element","origin","sanitizedHost","host","protocol","withSnakeCaseKeys","toSnakeCase","deepSnakeCase","word","uppercaseLetter","index","toLowerCase","defaultValue","objectHasValue","startsWith","endsWith","splice","isHashAnAnchor","hash","correspondingId","getElementById","getPathFromHash","discardNegativeDuration","BUFFER_LIMIT","createBoundedBuffer","buffer","drain","arg","END_OF_TIMES","Infinity","CLEAR_OLD_VALUES_INTERVAL","cleanupHistoriesInterval","cleanupTasks","cleanupHistories","task","createValueHistory","params","expireDelay","maxEntries","entries","clearExpiredValues","oldTimeThreshold","endTime","pop","startTime","entry","close","unshift","returnInactive","_i","entries_1","closeActive","latestEntry","findAll","reset","stop","size","VariableLibrary","infoMap","engine","browser","os","device","MethodLibrary","getMatchMap","u","Trident","Presto","WebKit","Gecko","Safari","Chrome","Edge","Firefox","Chromium","Opera","Vivaldi","Yandex","Arora","Lunascape","QupZilla","Kindle","Iceweasel","Konqueror","Iceape","SeaMonkey","Epiphany","UC","QQBrowser","QQ","Baidu","Maxthon","Sogou","LBBROWSER","TheWorld","XiaoMi","Quark","Qiyu","Wechat","Taobao","Alipay","Weibo","Douban","Suning","iQiYi","Windows","Linux","Android","Ubuntu","FreeBSD","Debian","BlackBerry","MeeGo","Symbian","iOS","WebOS","Mobile","Tablet","iPad","matchInfoMap","_this","s","getOS","getOSVersion","osVersion","osMajor","oldWindowsVersionMap","Windows_Phone","Mac_OS","version","getOrientationStatu","orientationStatus","orientation","matchMedia","matches","getDeviceType","getNetwork","connection","mozConnection","webkitConnection","type","effectiveType","getLanguage","language","browserLanguage","toUpperCase","getTimeZone","timeZone","Intl","DateTimeFormat","resolvedOptions","getBrowserInfo","_mime","option","mimeTypes","is360","chrome_version","showModalDialog","navigator_top","screenTop","screenY","browerVersionMap","Firefox_Focus","Coc_Coc","_","SE","EE","Explorer","WechatWork","browserVersion","browserMajor","getGeoPostion","geolocation","getCurrentPosition","position","_deviceInfo","osVersionMajor","browserVersionMajor","screenSize","screen","width","height","networkType","deviceInfo","DOM_EVENT","BEFORE_UNLOAD","CLICK","DBL_CLICK","KEY_DOWN","LOAD","POP_STATE","SCROLL","TOUCH_START","TOUCH_END","TOUCH_MOVE","VISIBILITY_CHANGE","PAGE_SHOW","FREEZE","RESUME","DOM_CONTENT_LOADED","POINTER_DOWN","POINTER_UP","POINTER_CANCEL","HASH_CHANGE","PAGE_HIDE","MOUSE_DOWN","MOUSE_UP","MOUSE_MOVE","FOCUS","BLUR","CONTEXT_MENU","RESIZE","CHANGE","INPUT","PLAY","PAUSE","SECURITY_POLICY_VIOLATION","SELECTION_CHANGE","STORAGE","ResourceType","DOCUMENT","XHR","BEACON","FETCH","JS","IMAGE","FONT","MEDIA","ActionType","CUSTOM","FrustrationType","RAGE_CLICK","ERROR_CLICK","DEAD_CLICK","RumEventType","ACTION","ERROR","LONG_TASK","VIEW","RESOURCE","LOGGER","RumLongTaskEntryType","LONG_ANIMATION_FRAME","ViewLoadingType","INITIAL_LOAD","ROUTE_CHANGE","RequestType","TraceType","DDTRACE","ZIPKIN_MULTI_HEADER","ZIPKIN_SINGLE_HEADER","W3C_TRACEPARENT","W3C_TRACEPARENT_64","SKYWALKING_V3","JAEGER","ErrorHandling","HANDLED","UNHANDLED","NonErrorPrefix","UNCAUGHT","PROVIDED","jsonStringify","replacer","space","stringify","restoreObjectPrototypeToJson","detachToJsonMethod","restoreArrayPrototypeToJson","restoreValuePrototypeToJson","getPrototypeOf","restoreValueToJson","_unused","objectToJson","toJSON","UNKNOWN_FUNCTION","computeStackTrace","ex","stack","stackProperty","tryToGetString","exString","line","stackFrame","parseChromeLine","parseChromeAnonymousLine","parseWinLine","parseGeckoLine","func","message","fileUrl","filePosition","CHROME_LINE_RE","CHROME_EVAL_RE","parts","isNative","isEval","submatch","column","CHROME_ANONYMOUS_FUNCTION_RE","WINJS_LINE_RE","GECKO_LINE_RE","GECKO_EVAL_RE","property","instrumentMethod","ERROR_TYPES_RE","startUnhandledErrorCollection","_instrumentOnError","instrumentOnError","_instrumentUnhandledRejection","instrumentUnhandledRejection","parameters","messageObj","errorObj","stackTrace","Error","tryToParseMessage","groups","reason","ONE_KIBI_BYTE","ONE_MEBI_BYTE","HAS_MULTI_BYTES_CHARACTERS","computeBytesCount","TextEncoder","encode","Blob","concatBuffers","buffers","reduce","total","Uint8Array","offset","buffers_1","SANITIZE_DEFAULT_MAX_CHARACTER_COUNT","JSON_PATH_ROOT_ELEMENT","KEY_DECORATION_LENGTH","sanitize","maxCharacterCount","containerQueue","visitedObjectsWithPath","WeakMap","sanitizedData","sanitizeProcessor","accumulatedCharacterCount","warnOverCharacterLimit","containerToProcess","separatorLength","targetData","parentPath","queue","sourceToSanitize","tryToApplyToJSON","sanitizePrimitivesAndFunctions","sanitizedSource","sanitizeObjects","sourceAsObject","currentPath","description","Event","sanitizeEvent","event","isTrusted","currentTarget","_unused2","changeType","NO_ERROR_STACK_PRESENT_MESSAGE","ErrorSource","AGENT","CONSOLE","NETWORK","SOURCE","computeRawError","originalError","handlingStack","startClocks","nonErrorPrefix","handling","isErrorInstance","computeMessage","hasUsableStack","toStackTraceString","causes","flattenErrorCauses","formatUnknownError","errorObject","createHandlingStack","internalFramesToSkip","formattedStack","formatErrorMessage","frame","getFileFromStackTraceString","execResult","parentSource","currentError","cause","targetPrototype","method","onPreCall","opts","computeHandlingStack","stopped","instrumentation","postCallCallback","onPostCall","instrumentSetter","after","originalDescriptor","getOwnPropertyDescriptor","stoppedInstrumentation","_instrumentation","instrumentationWrapper","trackRuntimeError","errorObservable","notify","_Observable","onFirstSubscribe","observers","onLastUnsubscribe","subscribe","unsubscribe","other","observer","Observable","mergeObservables","observables","globalObservable","subscriptions","observable","subscription","consoleObservablesByApi","initConsoleObservable","apis","consoleObservables","createConsoleObservable","resetConsoleObservable","originalConsoleApi","buildConsoleLog","param","formatConsoleParameters","firstErrorParam","addEventListener","eventTarget","listener","addEventListeners","eventNames","wrappedListener","once","passive","capture","listenerTarget","EventTarget","eventName","RawReportType","intervention","deprecation","cspViolation","initReportObservable","configuration","createCspViolationReportObservable","reportTypes","createReportObservable","ReportingObserver","handleReports","reports","report","buildRawReportErrorFromReport","types","buffered","observe","disconnect","_addEventListener","buildRawReportErrorFromCspViolation","body","buildRawReportError","id","buildStack","sourceFile","lineNumber","columnNumber","partial","REPORT","blockedURI","effectiveDirective","csp","disposition","originalPolicy","LifeCycleEventType","AUTO_ACTION_COMPLETED","BEFORE_VIEW_CREATED","VIEW_CREATED","VIEW_UPDATED","BEFORE_VIEW_UPDATED","VIEW_ENDED","AFTER_VIEW_ENDED","SESSION_RENEWED","SESSION_EXPIRED","PAGE_EXITED","REQUEST_STARTED","REQUEST_COMPLETED","RAW_RUM_EVENT_COLLECTED","RUM_EVENT_COLLECTED","RAW_ERROR_COLLECTED","RAW_LOG_COLLECTED","LOG_COLLECTED","LifeCycle","callbacks","eventType","eventCallbacks","limitModification","modifiableFieldPaths","modifier","clone","_ref","_ref2","_slicedToArray","fieldPath","fieldType","setValueAtPath","pathSegments","_pathSegments","_toArray","field","restPathSegments","isValidObject","setNestedValue","newType","createEventRateLimiter","limit","onLimitReached","eventCount","allowNextEvent","isLimitReached","normalizeUrl","buildUrl","href","isValidUrl","getOrigin","getPathName","pathname","getSearch","getHash","base","checkURLSupported","doc","anchorElement","createElement","implementation","createHTMLDocument","baseElement","head","appendChild","isURLSupported","isAndroid","isIos","JsBirdge","bridge","tagMaps","mapWebViewCallBack","initBridge","WVJBCallbacks","WVJBIframe","style","src","documentElement","removeChild","sendEvent","tag","Promise","resolve","callHandler","requestIdleCallback","cancelIdleCallback","requestIdleCallbackShim","MAX_TASK_TIME","didTimeout","timeRemaining","max","IDLE_CALLBACK_TIMEOUT","MAX_EXECUTION_TIME_ON_TIMEOUT","createTaskQueue","pendingTasks","run","deadline","executionTimeRemaining","scheduleNextRun","timeout","TRIM_REGIX","typeMap","rum","sessionReplay","getEndPointUrl","subUrl","datakitOrigin","datakitUrl","site","trim","endpoint","lastIndexOf","clientToken","computeTransportConfiguration","initConfiguration","isIntakeUrl","isServerError","request","rumEndpoint","logsEndpoint","sessionReplayEndPoint","isIntakeRequest","notTakeRequest","takeUrl","findCommaSeparatedValues","getCookieName","crossSite","domain","secure","partitioned","setCookie","date","setTime","expires","toUTCString","sameSite","cookie","getCookie","initCookieParsed","getInitCookie","resetInitCookies","deleteCookie","areCookiesAuthorized","testCookieName","testCookieValue","isCookieCorrectlySet","getCurrentSiteCache","getCurrentSite","domainLevels","hostname","candidateDomain","SESSION_TIME_OUT_DELAY","SESSION_EXPIRATION_DELAY","SESSION_STORE_KEY","SESSION_ENTRY_REGEXP","SESSION_ENTRY_SEPARATOR","EXPIRED","getExpiredSessionState","isExpired","isSessionInNotStartedState","session","isSessionStarted","isSessionInExpiredState","isActiveSession","sessionState","created","Number","expire","expandSessionState","toSessionString","toSessionState","sessionString","isValidSessionString","_matches","selectCookieStrategy","cookieOptions","buildCookieOptions","initCookieStrategy","cookieStore","isLockEnabled","persistSession","persistSessionCookie","retrieveSession","retrieveSessionCookie","expireSession","expireSessionCookie","useSecureSessionCookie","usePartitionedCrossSiteSessionCookie","useCrossSiteSessionCookie","trackSessionAcrossSubdomains","LOCAL_STORAGE_TEST_KEY","selectLocalStorageStrategy","testKey","retrievedId","initLocalStorageStrategy","persistInLocalStorage","retrieveSessionFromLocalStorage","expireSessionFromLocalStorage","LOCK_RETRY_DELAY","LOCK_MAX_TRIES","bufferedOperations","ongoingOperations","processSessionStoreOperations","operations","sessionStoreStrategy","numberOfRetries","persistWithLock","lock","currentLock","retrieveStore","next","currentStore","retryLater","processedSession","process","sessionStore","currentNumberOfRetries","nextOperations","STORAGE_POLL_DELAY","selectSessionStoreStrategyType","sessionStoreStrategyType","allowFallbackToLocalStorage","startSessionStore","productKey","computeSessionState","renewObservable","expireObservable","sessionStateUpdateObservable","watchSessionTimeoutId","watchSession","sessionCache","startSession","_throttle","synchronizedSession","synchronizeSession","expandOrRenewSessionState","hasSessionInCache","renewSessionInCache","throttledExpandOrRenewSession","cancelExpandOrRenewSession","expandSession","isSessionInCacheOutdated","expireSessionInCache","previousState","newState","_computeSessionState","trackingType","isTracked","updateSessionState","partialSessionState","expandOrRenewSession","getSession","restartSession","DefaultPrivacyLevel","ALLOW","MASK","MASK_USER_INPUT","validateAndBuildConfiguration","sampleRate","sessionSampleRate","telemetrySampleRate","beforeSend","service","env","telemetryEnabled","silentMultipleInit","batchBytesLimit","eventRateLimiterThreshold","maxTelemetryEventsPerPage","flushTimeout","batchMessagesLimit","messageBytesLimit","resourceUrlLimit","storeContextsToLocal","storeContextsKey","sendContentTypeByJson","retryMaxSize","validatePostRequestRequireParamsConfiguration","fetchAndApplyRemoteConfiguration","fetchRemoteConfiguration","remoteInitConfiguration","applyRemoteConfiguration","tracingSampleRate","sessionOnErrorSampleRate","sessionReplaySampleRate","sessionReplayOnErrorSampleRate","trackUserInteractions","trackInteractions","actionNameAttribute","trackViewsManually","workerUrl","compressIntakeRequests","traceType","modificationByFieldsPath","remoteConfiguration","remoteValue","simpleRemoteInitConfiguration","simpleKey","applicationId","_objectSpread","xhr","XMLHttpRequest","responseText","content","displayRemoteConfigurationFetchingError","open","buildEndpoint","send","fetchObservable","initFetchObservable","createFetchObservable","resetFetchObservable","fetch","fetchMethod","input","init","methodFromParams","Request","state","responsePromise","afterSend","startContext","reportFetch","partialContext","then","response","responseType","constructor","Response","isAborted","signal","aborted","DOMException","code","ABORT_ERR","xhrObservable","xhrContexts","initXhrObservable","createXhrObservable","openInstrumentMethod","openXhr","sendInstrumentMethod","sendXhr","abortInstrumentMethod","abortXhr","hasBeenReported","stopInstrumentingOnReadyStateChange","readyState","DONE","onEnd","unsubscribeLoadEndListener","completeContext","PageExitReason","HIDDEN","UNLOADING","PAGEHIDE","FROZEN","createPageExitObservable","visibilityChangeListener","visibilityState","beforeUnloadListener","isPageExitReason","isTextNode","node","nodeType","Node","TEXT_NODE","isCommentNode","COMMENT_NODE","isElementNode","ELEMENT_NODE","isNodeShadowHost","Boolean","shadowRoot","isNodeShadowRoot","DOCUMENT_FRAGMENT_NODE","hasChildNodes","childNodes","forEachChildNodes","child","firstChild","nextSibling","getParentNode","parentNode","runOnReadyState","expectedReadyState","commonTags","sdk_name","sdk_version","app_id","userid","user_email","user_name","session_id","session_type","session_sampling","is_signin","os_version","os_version_major","browser_version","browser_version_major","screen_size","network_type","time_zone","view_id","view_referrer","view_url","view_host","view_path","view_name","view_path_group","commonFields","view_url_query","action_id","action_ids","view_in_foreground","session_has_replay","is_login","page_states","session_sample_rate","session_replay_sample_rate","session_on_error_sample_rate","session_replay_on_error_sample_rate","drift","dataMap","view","tags","view_loading_type","view_apdex_level","view_privacy_replay_level","fields","sampled_for_replay","sampled_for_error_replay","sampled_for_error_session","session_error_timestamp","is_active","session_replay_stats","session_is_active","view_error_count","view_resource_count","view_long_task_count","view_action_count","first_contentful_paint","largest_contentful_paint","largest_contentful_paint_element_selector","cumulative_layout_shift","cumulative_layout_shift_time","cumulative_layout_shift_target_selector","first_input_delay","loading_time","dom_interactive","dom_content_loaded","dom_complete","load_event","first_input_time","first_input_target_selector","first_paint_time","interaction_to_next_paint","interaction_to_next_paint_target_selector","resource_load_time","time_to_interactive","dom","dom_ready","time_spent","first_byte","frustration_count","custom_timings","resource","trace_id","span_id","resource_id","resource_status","resource_status_group","resource_method","resource_size","resource_url","resource_url_host","resource_url_path","resource_url_path_group","resource_url_query","resource_delivery_type","resource_type","resource_protocol","resource_encode_size","resource_decode_size","resource_transfer_size","resource_render_blocking_status","resource_dns","resource_tcp","resource_ssl","resource_ttfb","resource_trans","resource_redirect","resource_first_byte","resource_dns_time","resource_download_time","resource_first_byte_time","resource_connect_time","resource_ssl_time","resource_redirect_time","error_id","error_source","error_type","error_handling","error_message","error_stack","error_causes","error_handling_stack","long_task","long_task_id","blocking_duration","first_ui_event_timestamp","render_start","style_and_layout_start","long_task_start_time","scripts","action","action_type","action_name","action_error_count","action_resource_count","action_frustration_types","action_long_task_count","action_target","action_position","telemetry","error_kind","connectivity","runtime_env","usage","browser_log","error_resource_url","error_resource_url_host","error_resource_url_path","error_resource_url_path_group","error_resource_status","error_resource_status_group","error_resource_method","VISIBILITY_CHECK_DELAY","SESSION_CONTEXT_TIMEOUT_DELAY","stopCallbacks","startSessionManager","sessionContextHistory","buildSessionContext","trackActivity","trackVisibility","trackResume","hasError","findSession","stopSessionManager","_addEventListeners","expandSessionWhenVisible","visibilityCheckInterval","cb","_addEventListener2","MAX_ONGOING_BYTES_COUNT","MAX_ONGOING_REQUESTS","MAX_QUEUE_BYTES_COUNT","MAX_BACKOFF_TIME","INITIAL_BACKOFF_TIME","TransportStatus","UP","FAILURE_DETECTED","DOWN","RetryReason","AFTER_SUCCESS","AFTER_RESUME","sendWithRetryStrategy","payload","sendStrategy","endpointUrl","reportError","transportStatus","queuedPayloads","bandwidthMonitor","canHandle","onSuccess","retryQueuedPayloads","onFailure","enqueue","scheduleRetry","first","dequeue","currentBackoffTime","min","responseData","shouldRetryRequest","ongoingRequestCount","retry","count","lastFailureStatus","isFull","queueFullReported","previousQueue","newPayloadQueue","onLine","newRetryState","newBandwidthMonitor","bytesCount","ongoingByteCount","TelemetryType","TelemetryStatusType","getConnectivity","ALLOWED_FRAME_URLS","TelemetryService","LOGS","RUM","preStartTelemetryBuffer","_onRawTelemetryEventCollected2","onRawTelemetryEventCollected","startTelemetry","telemetryService","contextProvider","alreadySentEvents","runtimeEnvInfo","getRuntimeEnvInfo","_onRawTelemetryEventCollected","rawEvent","stringifiedEvent","toTelemetryEvent","addTelemetryError","__BUILD_ENV__SDK_VERSION__","setContextProvider","provider","enabled","is_local_file","is_worker","startFakeTelemetry","events","drainPreStartTelemetry","resetTelemetry","addTelemetryDebug","formatError","addTelemetryConfiguration","addTelemetryUsage","kind","scrubCustomerFrames","allowedFrameUrl","addBatchPrecision","encoding","createHttpRequest","bytesLimit","retryState","sendStrategyForRetry","onResponse","fetchKeepAliveStrategy","sendOnExit","sendBeaconStrategy","canUseBeacon","sendBeacon","beaconData","isQueued","reportBeaconError","sendXHR","hasReportedBeaconError","canUseKeepAlive","isKeepAliveSupported","fetchOption","keepalive","mode","headers","setRequestHeader","escapeRowData","reg","escapeJsonValue","isTag","escapeFieldValueStr","escapeRowField","CUSTOM_KEYS","processedMessageByDataMap","rowStr","rowData","hasFileds","measurement","tagsStr","filterFileds","value_path","_key","_value","fieldsStr","_valueData","_tagKeys","createBatch","encoder","flushController","upsertBuffer","flushSubscription","flushObservable","flush","getMessageText","messages","isEmpty","serializedMessage","estimatedMessageBytesCount","notifyBeforeAddMessage","notifyAfterAddMessage","write","realMessageBytesCount","hasMessageFor","removedMessage","messageBytesCount","estimateEncodedBytesCount","notifyAfterRemoveMessage","processedMessage","addOrUpdate","upsertMessages","isPageExit","isAsync","encoderResult","finishSync","outputBytesCount","formatPayloadFromEncoder","pendingMessages","pendingData","text","finish","upsert","output","createFlushController","messagesLimit","durationLimit","pageExitObservable","sessionExpireObservable","pageExitSubscription","sessionExpireSubscription","currentBytesCount","currentMessagesCount","flushReason","messagesCount","cancelDurationLimitTimeout","durationLimitTimeoutId","scheduleDurationLimitTimeout","getMessagesCount","messageBytesCountDiff","startBatchWithReplica","primary","batchFactoryImp","primaryBatch","createBatchFromConfig","batchConfiguration","getEventBridgeGlobal","FTWebViewJavascriptBridge","getEventBridge","eventBridgeGlobal","getCapabilities","getPrivacyLevel","getAllowedWebViewHosts","viewId","BridgeCapability","RECORDS","bridgeSupports","capability","canUseEventBridge","_getGlobalObject$loca","currentHost","allowedHost","SYNTHETICS_TEST_ID_COOKIE_NAME","SYNTHETICS_RESULT_ID_COOKIE_NAME","SYNTHETICS_INJECTS_RUM_COOKIE_NAME","willSyntheticsInjectRum","_GUANCE_SYNTHETICS_INJECTS_RUM","getSyntheticsTestId","_GUANCE_SYNTHETICS_PUBLIC_ID","getSyntheticsResultId","_GUANCE_SYNTHETICS_RESULT_ID","ensureProperties","propertiesConfig","newContext","_Object$entries","_Object$entries$_i","_Object$entries$_i$","required","createContextManager","customerDataTracker","_ref$propertiesConfig","changeObservable","contextManager","getContext","setContext","updateCustomerData","clearContext","setContextProperty","_defineProperty","removeContextProperty","resetCustomerData","CustomerDataType","FeatureFlag","User","GlobalContext","View","CONTEXT_STORE_KEY_PREFIX","storageListeners","storeContextManager","customerDataType","storageKey","buildStorageKey","synchronizeWithStorage","dumpToStorage","getFromStorage","rawContext","removeStorageListeners","CUSTOMER_DATA_BYTES_LIMIT","CUSTOMER_COMPRESSED_DATA_BYTES_LIMIT","BYTES_COMPUTATION_THROTTLING_DELAY","CustomerDataCompressionStatus","Unknown","Enabled","Disabled","createCustomerDataTrackerManager","compressionStatus","customerDataTrackers","Map","alreadyWarned","checkCustomerDataLimit","initialBytesCount","bytesCountLimit","tracker","getBytesCount","displayCustomerDataLimitReachedWarning","createDetachedTracker","createCustomerDataTracker","getOrCreateTracker","setCompressionStatus","newCompressionStatus","getCompressionStatus","clear","bytesCountCache","computeBytesCountThrottled","cancelComputeBytesCount","resetBytesCount","createIdentityEncoder","additionalEncodedBytesCount","rawBytesCount","sanitizeUser","newUser","user","checkUser","isValid","PLACEHOLDER","initialValues","displayAlreadyInitializedError","sdkName","RUM_SESSION_KEY","RumSessionPlan","WITHOUT_SESSION_REPLAY","WITH_SESSION_REPLAY","WITH_ERROR_SESSION_REPLAY","ERROR_SESSION","RumTrackingType","NOT_TRACKED","TRACKED_WITH_SESSION_AND_WITH_SESSION_REPLAY","TRACKED_WITH_SESSION_AND_WITHOUT_SESSION_REPLAY","TRACKED_WITH_SESSION_AND_WITH_ERROR_SESSION_REPLAY","TRACKED_WITH_ERROR_SESSION_AND_WITH_SESSION_REPLAY","TRACKED_WITH_ERROR_SESSION_AND_WITHOUT_SESSION_REPLAY","TRACKED_WITH_ERROR_SESSION_AND_WITH_ERROR_SESSION_REPLAY","startRumSessionManager","lifeCycle","sessionManager","rawTrackingType","sessionEntity","ets","findTrackedSession","isTypeTracked","isErrorSession","plan","errorSessionReplayAllowed","sessionHasError","sessionErrorTimestamp","sessionReplayAllowed","setErrorForSession","startRumSessionManagerStub","isSession","isSessionReplay","isErrorSessionReplay","hasValidRumSession","rumSessionType","USR_ID_COOKIE_NAME","ANONYMOUS_ID_EXPIRATION","initUsrCookie","usrCacheId","initUsrLocalStorage","startCacheUsrCache","getId","createLocationChangeObservable","currentLocation","_trackHistory","trackHistory","onLocationChange","_trackHash","trackHash","newLocation","oldLocation","onHistoryChange","pushState","History","replaceState","popState","onHashChange","DeflateEncoderStreamId","REPLAY","createDeflateEncoder","worker","streamId","compressedData","compressedDataTrailer","nextWriteActionId","pendingWriteActions","wokerListener","workerResponse","additionalBytesCount","trailer","nextPendingAction","writeCallback","byteLength","finishCallback","removeMessageListener","consumeResult","sendResetIfNeeded","postMessage","pendingWriteAction","INITIALIZATION_TIME_OUT_DELAY","createDeflateWorker","Worker","createObjectURL","__BUILD_ENV__WORKER_STRING__","DeflateWorkerStatus","Nil","Loading","Initialized","startDeflateWorker","onInitializationFailure","createDeflateWorkerImpl","doStartDeflateWorker","initializationFailureCallbacks","resetDeflateWorkerState","getDeflateWorkerStatus","errorListener","onError","messageListener","onInitialized","onTimeout","isMessageCspRelated","baseMessage","worker_version","stream_id","startRumBatch","telemetryEventObservable","createEncoder","batch","serverRumEvent","startRumEventBridge","SessionType","SYNTHETICS","USER","VIEW_MODIFIABLE_FIELD_PATHS","USER_CUSTOMIZABLE_FIELD_PATHS","ROOT_MODIFIABLE_FIELD_PATHS","modifiableFieldPathsByEvent","startRumAssembly","userSessionManager","viewContexts","urlContexts","actionContexts","displayContext","getCommonContext","eventRateLimiters","rawRumEvent","savedCommonContext","customerContext","domainContext","viewContext","findView","urlContext","findUrl","commonContext","rumContext","_gc","sdkVersion","terminal","application","getSessionType","referrer","urlQuery","rumEvent","has_replay","hasReplay","error_timestamp_for_session","shouldSend","rateLimitReached","needToAssembleWithAction","_DATAFLUX_SYNTHETICS_BROWSER","viewportObservable","initViewportObservable","createViewportObservable","_throttledUpdateDimension","getViewportDimension","updateDimension","visual","visualViewport","scale","innerWidth","innerHeight","startDisplayContext","viewport","unsubscribeViewport","viewportDimension","startInternalContext","URL_CONTEXT_TIME_OUT_DELAY","startUrlContexts","locationChangeObservable","urlContextHistory","previousViewUrl","viewUrl","buildUrlContext","endClocks","locationChangeSubscription","current","changeTime","VIEW_CONTEXT_TIME_OUT_DELAY","startViewContexts","viewContextHistory","buildViewContext","viewUpdate","currentView","MAX_PAGE_STATE_ENTRIES","MAX_PAGE_STATE_ENTRIES_SELECTABLE","PAGE_STATE_CONTEXT_TIME_OUT_DELAY","PageState","ACTIVE","PASSIVE","TERMINATED","startPageStateHistory","maxPageStateEntriesSelectable","pageStateEntryHistory","currentPageState","addPageState","getPageState","computePageState","stopEventListeners","nextPageState","pageStateHistory","eventStartTime","pageStateEntries","pageStateServerEntries","pageState","relativeStartTime","wasInPageStateAt","wasInPageStateDuringPeriod","persisted","hasFocus","trackConsoleError","consoleLog","trackReportError","subtype","startErrorCollection","doStartErrorCollection","processError","addError","providedError","rawError","handling_stack","source_type","in_foreground","FAKE_INITIAL_DOCUMENT","RESOURCE_TYPES","initiatorType","computeResourceEntryType","_type","isType","areInOrder","numbers","computeResourceEntryDeliveryType","deliveryType","computeResourceEntryProtocol","nextHopProtocol","isResourceEntryRequestType","getStrSize","isResourceUrlLimit","limitSize","computeResourceEntryDuration","responseEnd","is304","encodedBodySize","transferSize","isCacheHit","decodedBodySize","computePerformanceResourceDetails","hasValidResourceEntryTimings","fetchStart","redirectStart","redirectEnd","domainLookupStart","domainLookupEnd","connectStart","secureConnectionStart","connectEnd","requestStart","responseStart","details","firstbyte","trans","downloadTime","formatTiming","firstByteTime","ttfb","tcp","connectTime","ssl","sslTime","dns","dnsTime","hasRedirection","redirect","redirectTime","renderBlockingStatus","hasValidResourceEntryDuration","areCommonTimingsInOrder","areRedirectionTimingsInOrder","computeResourceEntrySize","isAllowedRequestUrl","DATA_URL_REGEX","MAX_ATTRIBUTE_VALUE_CHAR_LENGTH","isLongDataUrl","sanitizeDataUrl","retrieveFirstInputTiming","startTimeStamp","timingSent","evt","cancelable","entryType","processingStart","processingEnd","sendTimingIfPointerIsNotCancelled","sendTiming","removeEventListeners","RumPerformanceEntryType","EVENT","FIRST_INPUT","LARGEST_CONTENTFUL_PAINT","LAYOUT_SHIFT","NAVIGATION","PAINT","VISIBILITY_STATE","createPerformanceObservable","PerformanceObserver","handlePerformanceEntries","rumPerformanceEntries","filterRumPerformanceEntries","isObserverInitializing","getEntries","fallbackSupportedEntryTypes","getEntriesByType","entryTypes","manageResourceTimingBufferFull","stopFirstInputTiming","supportPerformanceTimingEvent","_retrieveFirstInputTiming","resourceTimingBufferFullListener","supportPerformanceObject","clearResourceTimings","supportedEntryTypes","isForbiddenResource","TIMING_MAXIMUM_DELAY","trackFirstContentfulPaint","firstHidden","performanceSubscription","fcpEntry","getTimeStamp","DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE","STABLE_ATTRIBUTES","GLOBALLY_UNIQUE_SELECTOR_GETTERS","getStableAttributeSelector","getIDSelector","UNIQUE_AMONG_CHILDREN_SELECTOR_GETTERS","getClassSelector","getTagNameSelector","getSelectorFromElement","targetElement","isConnected","targetElementSelector","currentElement","nodeName","globallyUniqueSelector","findSelector","isSelectorUniqueGlobally","uniqueSelectorAmongChildren","isSelectorUniqueAmongSiblings","combineSelector","getPositionSelector","parentElement","isGeneratedValue","tagName","classList","className","selector","getAttributeSelector","attributeName","hasAttribute","getAttribute","sibling","firstElementChild","elementIndex","nextElementSibling","selectorGetters","childSelector","selectorGetter","elementSelector","ownerDocument","querySelectorAll","currentElementSelector","isSiblingMatching","scopedSelector","supportScopeSelector","querySelector","parent","supportScopeSelectorCache","contains","trackFirstInput","performanceFirstInputSubscription","firstInputEntry","firstInputDelay","firstInputTargetSelector","targetSelector","getNavigationEntry","navigationEntry","timings","computeTimingsFromDeprecatedPerformanceTiming","numberKey","timingElement","trackNavigationTimings","getNavigationEntryImpl","waitAfterLoadEvent","isIncompleteNavigation","processNavigationEntry","domComplete","domContentLoaded","domContentLoadedEventEnd","domInteractive","loadEvent","loadEventEnd","loadEventStart","domContentLoadedEventStart","firstByte","_runOnReadyState","LCP_MAXIMUM_DELAY","trackLargestContentfulPaint","firstInteractionTimestamp","stopEventListener","biggestLcpSize","performanceLcpSubscription","lcpEntry","lcpTargetSelector","trackFirstHidden","firstHiddenEntry","KEEP_TRACKING_TIMINGS_AFTER_VIEW_DELAY","trackInitialViewMetrics","setLoadEvent","scheduleViewUpdate","initialViewMetrics","_trackNavigationTimings","navigationTimings","stopNavigationTracking","_trackFirstContentfulPaint","firstContentfulPaint","stopFCPTracking","_trackLargestContentfulPaint","largestContentfulPaint","stopLCPTracking","_trackFirstInput","firstInput","stopFIDTracking","THROTTLE_VIEW_UPDATE_PERIOD","SESSION_KEEP_ALIVE_INTERVAL","KEEP_TRACKING_AFTER_VIEW_DELAY","trackViews","domMutationObservable","areViewsTrackedAutomatically","initialViewOptions","activeViews","startNewView","loadingType","viewOptions","newlyCreatedView","newView","stopObservable","startViewLifeCycle","renewViewOnLocationChange","sessionIsActive","areDifferentLocation","addTiming","startView","setViewContext","setViewContextProperty","setViewName","getViewContext","initialLocation","customTimings","documentVersion","viewCreatedEvent","_scheduleViewUpdate","triggerViewUpdate","cancelScheduleViewUpdate","_trackInitialViewTimings","stopInitialViewMetricsTracking","keepAliveIntervalId","pageMayExitSubscription","pageMayExitEvent","triggerBeforeViewUpdate","currentEnd","commonViewMetrics","isActive","eventCounts","sanitizeTiming","updatedName","sanitized","otherLocation","startViewCollection","recorderApi","processViewUpdate","computePerformanceViewDetails","fpt","apdexLevel","tti","load","pageStates","viewEvent","document_version","replay_stats","actionCount","frustration","frustrationCount","errorCount","loadingTime","loading_type","longTaskCount","resourceCount","scroll","max_depth","maxDepth","max_depth_scroll_top","maxDepthScrollTop","max_scroll_height","maxScrollHeight","max_scroll_height_time","maxScrollHeightTime","privacy","replay_level","defaultPrivacyLevel","alreadyMatchedEntries","matchRequestResourceEntry","sameNameEntries","getEntriesByName","candidates","isBetween","lastEntry","startTimeDuration","MAX_SAFE_INTEGER","_startTimeDuration","abs","errorMargin","retrieveInitialDocumentResourceTiming","startResourceCollection","taskQueue","retrieveInitialDocumentResourceTimingImpl","handleResource","processRequest","performanceResourceSubscription","loop","processResourceEntry","computeRawEvent","matchingTiming","tracingInfo","computeRequestTracingInfo","correspondingTimingOverrides","computeResourceEntryMetrics","computeRequestDuration","urlObj","resourceEvent","statusGroup","urlHost","urlPath","urlPathGroup","performanceEntry","requestInput","requestInit","computeResourceEntryTracingInfo","entryMetrics","discardZeroStatus","responseStatus","hasBeenTraced","traceSampled","traceId","spanId","statusCode","startRum","customerDataTrackerManager","userSession","_startRumEventCollection","startRumEventCollection","stopRumEventCollection","addAction","_startViewCollection","stopViewCollection","_startResourceCollection","_startErrorCollection","internalContext","stopSession","getInternalContext","buildCommonContext","globalContextManager","userContextManager","buildEnv","validateAndBuildRumConfiguration","requireParamsValidate","excludedActivityUrls","baseConfiguration","allowedTracingUrls","injectTraceHeader","generateTraceId","enableLongAnimationFrame","traceId128Bit","shouldMaskNode","validateAndBuildTracingOptions","allowedTracingOrigins","tracingOptions","isTracingOption","legacyMatchOption","tracingOption","convertLegacyMatchOptionToTracingOption","allowedDDTracingOrigins","createPreStartStrategy","rumPublicApiOptions","doStartRum","ignoreInitIfSyntheticsWillInjectRum","bufferApiCalls","firstStartViewCall","deflateWorker","cachedInitConfiguration","cachedConfiguration","tryStartRum","startRumResult","doInit","eventBridgeAvailable","overrideInitConfigurationForBridge","getInitConfiguration","_initConfiguration$de","_getEventBridge","RUM_STORAGE_KEY","makeRumPublicApi","startRumImpl","email","strategy","createPostStartStrategy","sanitizedOptions","feature","rumPublicApi","setGlobalContextProperty","removeGlobalContextProperty","getGlobalContext","setGlobalContext","clearGlobalContext","addDebugSession","clearDebugSession","getDebugSession","setUser","getUser","setUserProperty","sanitizedProperty","removeUserProperty","clearUser","preStartStrategy","datafluxRum"],"sourceRoot":""}